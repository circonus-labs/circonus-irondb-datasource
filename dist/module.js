/*! For license information please see module.js.LICENSE.txt */
define(["lodash","@grafana/data","react","@grafana/ui","app/plugins/sdk"],(function(e,t,r,n,a){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,r),a.l=!0,a.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(n,a,function(t){return e[t]}.bind(null,a));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/",r(r.s=119)}([function(t,r){t.exports=e},function(e,r){e.exports=t},function(e,t){e.exports=r},function(e,t,r){"use strict";e.exports=function(e){if("function"!=typeof e)throw new TypeError(e+" is not a function");return e}},function(e,t,r){"use strict";var n=r(51)();e.exports=function(e){return e!==n&&null!==e}},function(e,t,r){"use strict";var n=r(52),a=Math.max;e.exports=function(e){return a(0,n(e))}},function(e,t,r){},function(e,t,r){"use strict";var n=r(29),a=r(66),i=r(26),o=r(24),u=r(70);(e.exports=function(e,t){var r,a,s,l,c;return arguments.length<2||"string"!=typeof e?(l=t,t=e,e=null):l=arguments[2],n(e)?(r=u.call(e,"c"),a=u.call(e,"e"),s=u.call(e,"w")):(r=s=!0,a=!1),c={value:t,configurable:r,enumerable:a,writable:s},l?i(o(l),c):c}).gs=function(e,t,r){var s,l,c,f;return"string"!=typeof e?(c=r,r=t,t=e,e=null):c=arguments[3],n(t)?a(t)?n(r)?a(r)||(c=r,r=void 0):r=void 0:(c=t,t=r=void 0):t=void 0,n(e)?(s=u.call(e,"c"),l=u.call(e,"e")):(s=!0,l=!1),f={get:t,set:r,configurable:s,enumerable:l},c?i(o(c),f):f}},function(e,t,r){"use strict";var n=r(4);e.exports=function(e){if(!n(e))throw new TypeError("Cannot use null or undefined");return e}},function(e,t){var r,n,a=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function u(e){if(r===setTimeout)return setTimeout(e,0);if((r===i||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:i}catch(e){r=i}try{n="function"==typeof clearTimeout?clearTimeout:o}catch(e){n=o}}();var s,l=[],c=!1,f=-1;function p(){c&&s&&(c=!1,s.length?l=s.concat(l):f=-1,l.length&&h())}function h(){if(!c){var e=u(p);c=!0;for(var t=l.length;t;){for(s=l,l=[];++f<t;)s&&s[f].run();f=-1,t=l.length}s=null,c=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===o||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function d(e,t){this.fun=e,this.array=t}function g(){}a.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];l.push(new d(e,t)),1!==l.length||c||u(h)},d.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=g,a.addListener=g,a.once=g,a.off=g,a.removeListener=g,a.removeAllListeners=g,a.emit=g,a.prependListener=g,a.prependOnceListener=g,a.listeners=function(e){return[]},a.binding=function(e){throw new Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(e){throw new Error("process.chdir is not supported")},a.umask=function(){return 0}},function(e,t,r){"use strict";(function(e){const n=r(16),a="win32"===e.platform,{REGEX_BACKSLASH:i,REGEX_REMOVE_BACKSLASH:o,REGEX_SPECIAL_CHARS:u,REGEX_SPECIAL_CHARS_GLOBAL:s}=r(11);t.isObject=e=>null!==e&&"object"==typeof e&&!Array.isArray(e),t.hasRegexChars=e=>u.test(e),t.isRegexChar=e=>1===e.length&&t.hasRegexChars(e),t.escapeRegex=e=>e.replace(s,"\\$1"),t.toPosixSlashes=e=>e.replace(i,"/"),t.removeBackslashes=e=>e.replace(o,e=>"\\"===e?"":e),t.supportsLookbehinds=()=>{const t=e.version.slice(1).split(".").map(Number);return 3===t.length&&t[0]>=9||8===t[0]&&t[1]>=10},t.isWindows=e=>e&&"boolean"==typeof e.windows?e.windows:!0===a||"\\"===n.sep,t.escapeLast=(e,r,n)=>{const a=e.lastIndexOf(r,n);return-1===a?e:"\\"===e[a-1]?t.escapeLast(e,r,a-1):`${e.slice(0,a)}\\${e.slice(a)}`},t.removePrefix=(e,t={})=>{let r=e;return r.startsWith("./")&&(r=r.slice(2),t.prefix="./"),r},t.wrapOutput=(e,t={},r={})=>{let n=`${r.contains?"":"^"}(?:${e})${r.contains?"":"$"}`;return!0===t.negated&&(n=`(?:^(?!${n}).*$)`),n}}).call(this,r(9))},function(e,t,r){"use strict";const n=r(16),a={DOT_LITERAL:"\\.",PLUS_LITERAL:"\\+",QMARK_LITERAL:"\\?",SLASH_LITERAL:"\\/",ONE_CHAR:"(?=.)",QMARK:"[^/]",END_ANCHOR:"(?:\\/|$)",DOTS_SLASH:"\\.{1,2}(?:\\/|$)",NO_DOT:"(?!\\.)",NO_DOTS:"(?!(?:^|\\/)\\.{1,2}(?:\\/|$))",NO_DOT_SLASH:"(?!\\.{0,1}(?:\\/|$))",NO_DOTS_SLASH:"(?!\\.{1,2}(?:\\/|$))",QMARK_NO_DOT:"[^.\\/]",STAR:"[^/]*?",START_ANCHOR:"(?:^|\\/)"},i={...a,SLASH_LITERAL:"[\\\\/]",QMARK:"[^\\\\/]",STAR:"[^\\\\/]*?",DOTS_SLASH:"\\.{1,2}(?:[\\\\/]|$)",NO_DOT:"(?!\\.)",NO_DOTS:"(?!(?:^|[\\\\/])\\.{1,2}(?:[\\\\/]|$))",NO_DOT_SLASH:"(?!\\.{0,1}(?:[\\\\/]|$))",NO_DOTS_SLASH:"(?!\\.{1,2}(?:[\\\\/]|$))",QMARK_NO_DOT:"[^.\\\\/]",START_ANCHOR:"(?:^|[\\\\/])",END_ANCHOR:"(?:[\\\\/]|$)"};e.exports={MAX_LENGTH:65536,POSIX_REGEX_SOURCE:{alnum:"a-zA-Z0-9",alpha:"a-zA-Z",ascii:"\\x00-\\x7F",blank:" \\t",cntrl:"\\x00-\\x1F\\x7F",digit:"0-9",graph:"\\x21-\\x7E",lower:"a-z",print:"\\x20-\\x7E ",punct:"\\-!\"#$%&'()\\*+,./:;<=>?@[\\]^_`{|}~",space:" \\t\\r\\n\\v\\f",upper:"A-Z",word:"A-Za-z0-9_",xdigit:"A-Fa-f0-9"},REGEX_BACKSLASH:/\\(?![*+?^${}(|)[\]])/g,REGEX_NON_SPECIAL_CHARS:/^[^@![\].,$*+?^{}()|\\/]+/,REGEX_SPECIAL_CHARS:/[-*+?.^${}(|)[\]]/,REGEX_SPECIAL_CHARS_BACKREF:/(\\?)((\W)(\3*))/g,REGEX_SPECIAL_CHARS_GLOBAL:/([-*+?.^${}(|)[\]])/g,REGEX_REMOVE_BACKSLASH:/(?:\[.*?[^\\]\]|\\(?=.))/g,REPLACEMENTS:{"***":"*","**/**":"**","**/**/**":"**"},CHAR_0:48,CHAR_9:57,CHAR_UPPERCASE_A:65,CHAR_LOWERCASE_A:97,CHAR_UPPERCASE_Z:90,CHAR_LOWERCASE_Z:122,CHAR_LEFT_PARENTHESES:40,CHAR_RIGHT_PARENTHESES:41,CHAR_ASTERISK:42,CHAR_AMPERSAND:38,CHAR_AT:64,CHAR_BACKWARD_SLASH:92,CHAR_CARRIAGE_RETURN:13,CHAR_CIRCUMFLEX_ACCENT:94,CHAR_COLON:58,CHAR_COMMA:44,CHAR_DOT:46,CHAR_DOUBLE_QUOTE:34,CHAR_EQUAL:61,CHAR_EXCLAMATION_MARK:33,CHAR_FORM_FEED:12,CHAR_FORWARD_SLASH:47,CHAR_GRAVE_ACCENT:96,CHAR_HASH:35,CHAR_HYPHEN_MINUS:45,CHAR_LEFT_ANGLE_BRACKET:60,CHAR_LEFT_CURLY_BRACE:123,CHAR_LEFT_SQUARE_BRACKET:91,CHAR_LINE_FEED:10,CHAR_NO_BREAK_SPACE:160,CHAR_PERCENT:37,CHAR_PLUS:43,CHAR_QUESTION_MARK:63,CHAR_RIGHT_ANGLE_BRACKET:62,CHAR_RIGHT_CURLY_BRACE:125,CHAR_RIGHT_SQUARE_BRACKET:93,CHAR_SEMICOLON:59,CHAR_SINGLE_QUOTE:39,CHAR_SPACE:32,CHAR_TAB:9,CHAR_UNDERSCORE:95,CHAR_VERTICAL_LINE:124,CHAR_ZERO_WIDTH_NOBREAK_SPACE:65279,SEP:n.sep,extglobChars:e=>({"!":{type:"negate",open:"(?:(?!(?:",close:`))${e.STAR})`},"?":{type:"qmark",open:"(?:",close:")?"},"+":{type:"plus",open:"(?:",close:")+"},"*":{type:"star",open:"(?:",close:")*"},"@":{type:"at",open:"(?:",close:")"}}),globChars:e=>!0===e?i:a}},function(e,t,r){"use strict";e.exports=r(57)("forEach")},function(e,t,r){"use strict";e.exports=r(80)()?globalThis:r(81)},function(e,t,r){"use strict";const n=r(15);e.exports=(e,t={})=>{let r=(e,a={})=>{let i=t.escapeInvalid&&n.isInvalidBrace(a),o=!0===e.invalid&&!0===t.escapeInvalid,u="";if(e.value)return(i||o)&&n.isOpenOrClose(e)?"\\"+e.value:e.value;if(e.value)return e.value;if(e.nodes)for(let t of e.nodes)u+=r(t);return u};return r(e)}},function(e,t,r){"use strict";t.isInteger=e=>"number"==typeof e?Number.isInteger(e):"string"==typeof e&&""!==e.trim()&&Number.isInteger(Number(e)),t.find=(e,t)=>e.nodes.find(e=>e.type===t),t.exceedsLimit=(e,r,n=1,a)=>!1!==a&&(!(!t.isInteger(e)||!t.isInteger(r))&&(Number(r)-Number(e))/Number(n)>=a),t.escapeNode=(e,t=0,r)=>{let n=e.nodes[t];n&&(r&&n.type===r||"open"===n.type||"close"===n.type)&&!0!==n.escaped&&(n.value="\\"+n.value,n.escaped=!0)},t.encloseBrace=e=>"brace"===e.type&&(e.commas>>0+e.ranges>>0==0&&(e.invalid=!0,!0)),t.isInvalidBrace=e=>"brace"===e.type&&(!(!0!==e.invalid&&!e.dollar)||(e.commas>>0+e.ranges>>0==0||!0!==e.open||!0!==e.close)&&(e.invalid=!0,!0)),t.isOpenOrClose=e=>"open"===e.type||"close"===e.type||(!0===e.open||!0===e.close),t.reduce=e=>e.reduce((e,t)=>("text"===t.type&&e.push(t.value),"range"===t.type&&(t.type="text"),e),[]),t.flatten=(...e)=>{const t=[],r=e=>{for(let n=0;n<e.length;n++){let a=e[n];Array.isArray(a)?r(a,t):void 0!==a&&t.push(a)}return t};return r(e),t}},function(e,t,r){(function(e){function r(e,t){for(var r=0,n=e.length-1;n>=0;n--){var a=e[n];"."===a?e.splice(n,1):".."===a?(e.splice(n,1),r++):r&&(e.splice(n,1),r--)}if(t)for(;r--;r)e.unshift("..");return e}function n(e,t){if(e.filter)return e.filter(t);for(var r=[],n=0;n<e.length;n++)t(e[n],n,e)&&r.push(e[n]);return r}t.resolve=function(){for(var t="",a=!1,i=arguments.length-1;i>=-1&&!a;i--){var o=i>=0?arguments[i]:e.cwd();if("string"!=typeof o)throw new TypeError("Arguments to path.resolve must be strings");o&&(t=o+"/"+t,a="/"===o.charAt(0))}return(a?"/":"")+(t=r(n(t.split("/"),(function(e){return!!e})),!a).join("/"))||"."},t.normalize=function(e){var i=t.isAbsolute(e),o="/"===a(e,-1);return(e=r(n(e.split("/"),(function(e){return!!e})),!i).join("/"))||i||(e="."),e&&o&&(e+="/"),(i?"/":"")+e},t.isAbsolute=function(e){return"/"===e.charAt(0)},t.join=function(){var e=Array.prototype.slice.call(arguments,0);return t.normalize(n(e,(function(e,t){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e})).join("/"))},t.relative=function(e,r){function n(e){for(var t=0;t<e.length&&""===e[t];t++);for(var r=e.length-1;r>=0&&""===e[r];r--);return t>r?[]:e.slice(t,r-t+1)}e=t.resolve(e).substr(1),r=t.resolve(r).substr(1);for(var a=n(e.split("/")),i=n(r.split("/")),o=Math.min(a.length,i.length),u=o,s=0;s<o;s++)if(a[s]!==i[s]){u=s;break}var l=[];for(s=u;s<a.length;s++)l.push("..");return(l=l.concat(i.slice(u))).join("/")},t.sep="/",t.delimiter=":",t.dirname=function(e){if("string"!=typeof e&&(e+=""),0===e.length)return".";for(var t=e.charCodeAt(0),r=47===t,n=-1,a=!0,i=e.length-1;i>=1;--i)if(47===(t=e.charCodeAt(i))){if(!a){n=i;break}}else a=!1;return-1===n?r?"/":".":r&&1===n?"/":e.slice(0,n)},t.basename=function(e,t){var r=function(e){"string"!=typeof e&&(e+="");var t,r=0,n=-1,a=!0;for(t=e.length-1;t>=0;--t)if(47===e.charCodeAt(t)){if(!a){r=t+1;break}}else-1===n&&(a=!1,n=t+1);return-1===n?"":e.slice(r,n)}(e);return t&&r.substr(-1*t.length)===t&&(r=r.substr(0,r.length-t.length)),r},t.extname=function(e){"string"!=typeof e&&(e+="");for(var t=-1,r=0,n=-1,a=!0,i=0,o=e.length-1;o>=0;--o){var u=e.charCodeAt(o);if(47!==u)-1===n&&(a=!1,n=o+1),46===u?-1===t?t=o:1!==i&&(i=1):-1!==t&&(i=-1);else if(!a){r=o+1;break}}return-1===t||-1===n||0===i||1===i&&t===n-1&&t===r+1?"":e.slice(t,n)};var a="b"==="ab".substr(-1)?function(e,t,r){return e.substr(t,r)}:function(e,t,r){return t<0&&(t=e.length+t),e.substr(t,r)}}).call(this,r(9))},function(e,t,r){"use strict";e.exports=r(76)()?Array.from:r(77)},function(e,t,r){"use strict";var n=r(94),a=r(5),i=r(8),o=Array.prototype.indexOf,u=Object.prototype.hasOwnProperty,s=Math.abs,l=Math.floor;e.exports=function(e){var t,r,c,f;if(!n(e))return o.apply(this,arguments);for(r=a(i(this).length),c=arguments[1],t=c=isNaN(c)?0:c>=0?l(c):a(this.length)-l(s(c));t<r;++t)if(u.call(this,t)&&(f=this[t],n(f)))return t;return-1}},function(e,t,r){"use strict";(function(t,r){var n=function(e){if("function"!=typeof e)throw new TypeError(e+" is not a function");return e},a=function(e){var t,r,a=document.createTextNode(""),i=0;return new e((function(){var e;if(t)r&&(t=r.concat(t));else{if(!r)return;t=r}if(r=t,t=null,"function"==typeof r)return e=r,r=null,void e();for(a.data=i=++i%2;r;)e=r.shift(),r.length||(r=null),e()})).observe(a,{characterData:!0}),function(e){n(e),t?"function"==typeof t?t=[t,e]:t.push(e):(t=e,a.data=i=++i%2)}};e.exports=function(){if("object"==typeof t&&t&&"function"==typeof t.nextTick)return t.nextTick;if("function"==typeof queueMicrotask)return function(e){queueMicrotask(n(e))};if("object"==typeof document&&document){if("function"==typeof MutationObserver)return a(MutationObserver);if("function"==typeof WebKitMutationObserver)return a(WebKitMutationObserver)}return"function"==typeof r?function(e){r(n(e))}:"function"==typeof setTimeout||"object"==typeof setTimeout?function(e){setTimeout(n(e),0)}:null}()}).call(this,r(9),r(100).setImmediate)},function(e,t,r){e.exports=function(){"use strict";var e=Object.prototype.toString,t=Array.isArray||function(t){return"[object Array]"===e.call(t)};function r(e){return"function"==typeof e}function n(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function a(e,t){return null!=e&&"object"==typeof e&&t in e}var i=RegExp.prototype.test,o=/\S/;function u(e){return!function(e,t){return i.call(e,t)}(o,e)}var s={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"},l=/\s*/,c=/\s+/,f=/\s*=/,p=/\s*\}/,h=/#|\^|\/|>|\{|&|=|!/;function d(e){this.string=e,this.tail=e,this.pos=0}function g(e,t){this.view=e,this.cache={".":this.view},this.parent=t}function y(){this.templateCache={_cache:{},set:function(e,t){this._cache[e]=t},get:function(e){return this._cache[e]},clear:function(){this._cache={}}}}d.prototype.eos=function(){return""===this.tail},d.prototype.scan=function(e){var t=this.tail.match(e);if(!t||0!==t.index)return"";var r=t[0];return this.tail=this.tail.substring(r.length),this.pos+=r.length,r},d.prototype.scanUntil=function(e){var t,r=this.tail.search(e);switch(r){case-1:t=this.tail,this.tail="";break;case 0:t="";break;default:t=this.tail.substring(0,r),this.tail=this.tail.substring(r)}return this.pos+=t.length,t},g.prototype.push=function(e){return new g(e,this)},g.prototype.lookup=function(e){var t,n,i,o=this.cache;if(o.hasOwnProperty(e))t=o[e];else{for(var u,s,l,c=this,f=!1;c;){if(e.indexOf(".")>0)for(u=c.view,s=e.split("."),l=0;null!=u&&l<s.length;)l===s.length-1&&(f=a(u,s[l])||(n=u,i=s[l],null!=n&&"object"!=typeof n&&n.hasOwnProperty&&n.hasOwnProperty(i))),u=u[s[l++]];else u=c.view[e],f=a(c.view,e);if(f){t=u;break}c=c.parent}o[e]=t}return r(t)&&(t=t.call(this.view)),t},y.prototype.clearCache=function(){void 0!==this.templateCache&&this.templateCache.clear()},y.prototype.parse=function(e,r){var a=this.templateCache,i=e+":"+(r||v.tags).join(":"),o=void 0!==a,s=o?a.get(i):void 0;return null==s&&(s=function(e,r){if(!e)return[];var a,i,o,s=!1,g=[],y=[],m=[],b=!1,_=!1,S="",A=0;function T(){if(b&&!_)for(;m.length;)delete y[m.pop()];else m=[];b=!1,_=!1}function w(e){if("string"==typeof e&&(e=e.split(c,2)),!t(e)||2!==e.length)throw new Error("Invalid tags: "+e);a=new RegExp(n(e[0])+"\\s*"),i=new RegExp("\\s*"+n(e[1])),o=new RegExp("\\s*"+n("}"+e[1]))}w(r||v.tags);for(var C,E,x,O,R,k,q=new d(e);!q.eos();){if(C=q.pos,x=q.scanUntil(a))for(var P=0,j=x.length;P<j;++P)u(O=x.charAt(P))?(m.push(y.length),S+=O):(_=!0,s=!0,S+=" "),y.push(["text",O,C,C+1]),C+=1,"\n"===O&&(T(),S="",A=0,s=!1);if(!q.scan(a))break;if(b=!0,E=q.scan(h)||"name",q.scan(l),"="===E?(x=q.scanUntil(f),q.scan(f),q.scanUntil(i)):"{"===E?(x=q.scanUntil(o),q.scan(p),q.scanUntil(i),E="&"):x=q.scanUntil(i),!q.scan(i))throw new Error("Unclosed tag at "+q.pos);if(R=">"==E?[E,x,C,q.pos,S,A,s]:[E,x,C,q.pos],A++,y.push(R),"#"===E||"^"===E)g.push(R);else if("/"===E){if(!(k=g.pop()))throw new Error('Unopened section "'+x+'" at '+C);if(k[1]!==x)throw new Error('Unclosed section "'+k[1]+'" at '+C)}else"name"===E||"{"===E||"&"===E?_=!0:"="===E&&w(x)}if(T(),k=g.pop())throw new Error('Unclosed section "'+k[1]+'" at '+q.pos);return function(e){for(var t,r=[],n=r,a=[],i=0,o=e.length;i<o;++i)switch((t=e[i])[0]){case"#":case"^":n.push(t),a.push(t),n=t[4]=[];break;case"/":a.pop()[5]=t[2],n=a.length>0?a[a.length-1][4]:r;break;default:n.push(t)}return r}(function(e){for(var t,r,n=[],a=0,i=e.length;a<i;++a)(t=e[a])&&("text"===t[0]&&r&&"text"===r[0]?(r[1]+=t[1],r[3]=t[3]):(n.push(t),r=t));return n}(y))}(e,r),o&&a.set(i,s)),s},y.prototype.render=function(e,t,r,n){var a=this.getConfigTags(n),i=this.parse(e,a),o=t instanceof g?t:new g(t,void 0);return this.renderTokens(i,o,r,e,n)},y.prototype.renderTokens=function(e,t,r,n,a){for(var i,o,u,s="",l=0,c=e.length;l<c;++l)u=void 0,"#"===(o=(i=e[l])[0])?u=this.renderSection(i,t,r,n,a):"^"===o?u=this.renderInverted(i,t,r,n,a):">"===o?u=this.renderPartial(i,t,r,a):"&"===o?u=this.unescapedValue(i,t):"name"===o?u=this.escapedValue(i,t,a):"text"===o&&(u=this.rawValue(i)),void 0!==u&&(s+=u);return s},y.prototype.renderSection=function(e,n,a,i,o){var u=this,s="",l=n.lookup(e[1]);if(l){if(t(l))for(var c=0,f=l.length;c<f;++c)s+=this.renderTokens(e[4],n.push(l[c]),a,i,o);else if("object"==typeof l||"string"==typeof l||"number"==typeof l)s+=this.renderTokens(e[4],n.push(l),a,i,o);else if(r(l)){if("string"!=typeof i)throw new Error("Cannot use higher-order sections without the original template");null!=(l=l.call(n.view,i.slice(e[3],e[5]),(function(e){return u.render(e,n,a,o)})))&&(s+=l)}else s+=this.renderTokens(e[4],n,a,i,o);return s}},y.prototype.renderInverted=function(e,r,n,a,i){var o=r.lookup(e[1]);if(!o||t(o)&&0===o.length)return this.renderTokens(e[4],r,n,a,i)},y.prototype.indentPartial=function(e,t,r){for(var n=t.replace(/[^ \t]/g,""),a=e.split("\n"),i=0;i<a.length;i++)a[i].length&&(i>0||!r)&&(a[i]=n+a[i]);return a.join("\n")},y.prototype.renderPartial=function(e,t,n,a){if(n){var i=this.getConfigTags(a),o=r(n)?n(e[1]):n[e[1]];if(null!=o){var u=e[6],s=e[5],l=e[4],c=o;0==s&&l&&(c=this.indentPartial(o,l,u));var f=this.parse(c,i);return this.renderTokens(f,t,n,c,a)}}},y.prototype.unescapedValue=function(e,t){var r=t.lookup(e[1]);if(null!=r)return r},y.prototype.escapedValue=function(e,t,r){var n=this.getConfigEscape(r)||v.escape,a=t.lookup(e[1]);if(null!=a)return"number"==typeof a&&n===v.escape?String(a):n(a)},y.prototype.rawValue=function(e){return e[1]},y.prototype.getConfigTags=function(e){return t(e)?e:e&&"object"==typeof e?e.tags:void 0},y.prototype.getConfigEscape=function(e){return e&&"object"==typeof e&&!t(e)?e.escape:void 0};var v={name:"mustache.js",version:"4.2.0",tags:["{{","}}"],clearCache:void 0,escape:void 0,parse:void 0,render:void 0,Scanner:void 0,Context:void 0,Writer:void 0,set templateCache(e){m.templateCache=e},get templateCache(){return m.templateCache}},m=new y;return v.clearCache=function(){return m.clearCache()},v.parse=function(e,t){return m.parse(e,t)},v.render=function(e,r,n,a){if("string"!=typeof e)throw new TypeError('Invalid template! Template should be a "string" but "'+(t(i=e)?"array":typeof i)+'" was given as the first argument for mustache#render(template, view, partials)');var i;return m.render(e,r,n,a)},v.escape=function(e){return String(e).replace(/[&<>"'`=\/]/g,(function(e){return s[e]}))},v.Scanner=d,v.Context=g,v.Writer=y,v}()},function(e,t){e.exports=n},function(e,t,r){(function(e){var n=Object.getOwnPropertyDescriptors||function(e){for(var t=Object.keys(e),r={},n=0;n<t.length;n++)r[t[n]]=Object.getOwnPropertyDescriptor(e,t[n]);return r},a=/%[sdj%]/g;t.format=function(e){if(!v(e)){for(var t=[],r=0;r<arguments.length;r++)t.push(u(arguments[r]));return t.join(" ")}r=1;for(var n=arguments,i=n.length,o=String(e).replace(a,(function(e){if("%%"===e)return"%";if(r>=i)return e;switch(e){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch(e){return"[Circular]"}default:return e}})),s=n[r];r<i;s=n[++r])g(s)||!_(s)?o+=" "+s:o+=" "+u(s);return o},t.deprecate=function(r,n){if(void 0!==e&&!0===e.noDeprecation)return r;if(void 0===e)return function(){return t.deprecate(r,n).apply(this,arguments)};var a=!1;return function(){if(!a){if(e.throwDeprecation)throw new Error(n);e.traceDeprecation,a=!0}return r.apply(this,arguments)}};var i,o={};function u(e,r){var n={seen:[],stylize:l};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),d(r)?n.showHidden=r:r&&t._extend(n,r),m(n.showHidden)&&(n.showHidden=!1),m(n.depth)&&(n.depth=2),m(n.colors)&&(n.colors=!1),m(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=s),c(n,e,n.depth)}function s(e,t){var r=u.styles[t];return r?"["+u.colors[r][0]+"m"+e+"["+u.colors[r][1]+"m":e}function l(e,t){return e}function c(e,r,n){if(e.customInspect&&r&&T(r.inspect)&&r.inspect!==t.inspect&&(!r.constructor||r.constructor.prototype!==r)){var a=r.inspect(n,e);return v(a)||(a=c(e,a,n)),a}var i=function(e,t){if(m(t))return e.stylize("undefined","undefined");if(v(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}if(y(t))return e.stylize(""+t,"number");if(d(t))return e.stylize(""+t,"boolean");if(g(t))return e.stylize("null","null")}(e,r);if(i)return i;var o=Object.keys(r),u=function(e){var t={};return e.forEach((function(e,r){t[e]=!0})),t}(o);if(e.showHidden&&(o=Object.getOwnPropertyNames(r)),A(r)&&(o.indexOf("message")>=0||o.indexOf("description")>=0))return f(r);if(0===o.length){if(T(r)){var s=r.name?": "+r.name:"";return e.stylize("[Function"+s+"]","special")}if(b(r))return e.stylize(RegExp.prototype.toString.call(r),"regexp");if(S(r))return e.stylize(Date.prototype.toString.call(r),"date");if(A(r))return f(r)}var l,_="",w=!1,E=["{","}"];(h(r)&&(w=!0,E=["[","]"]),T(r))&&(_=" [Function"+(r.name?": "+r.name:"")+"]");return b(r)&&(_=" "+RegExp.prototype.toString.call(r)),S(r)&&(_=" "+Date.prototype.toUTCString.call(r)),A(r)&&(_=" "+f(r)),0!==o.length||w&&0!=r.length?n<0?b(r)?e.stylize(RegExp.prototype.toString.call(r),"regexp"):e.stylize("[Object]","special"):(e.seen.push(r),l=w?function(e,t,r,n,a){for(var i=[],o=0,u=t.length;o<u;++o)C(t,String(o))?i.push(p(e,t,r,n,String(o),!0)):i.push("");return a.forEach((function(a){a.match(/^\d+$/)||i.push(p(e,t,r,n,a,!0))})),i}(e,r,n,u,o):o.map((function(t){return p(e,r,n,u,t,w)})),e.seen.pop(),function(e,t,r){if(e.reduce((function(e,t){return t.indexOf("\n")>=0&&0,e+t.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60)return r[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+r[1];return r[0]+t+" "+e.join(", ")+" "+r[1]}(l,_,E)):E[0]+_+E[1]}function f(e){return"["+Error.prototype.toString.call(e)+"]"}function p(e,t,r,n,a,i){var o,u,s;if((s=Object.getOwnPropertyDescriptor(t,a)||{value:t[a]}).get?u=s.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):s.set&&(u=e.stylize("[Setter]","special")),C(n,a)||(o="["+a+"]"),u||(e.seen.indexOf(s.value)<0?(u=g(r)?c(e,s.value,null):c(e,s.value,r-1)).indexOf("\n")>-1&&(u=i?u.split("\n").map((function(e){return"  "+e})).join("\n").substr(2):"\n"+u.split("\n").map((function(e){return"   "+e})).join("\n")):u=e.stylize("[Circular]","special")),m(o)){if(i&&a.match(/^\d+$/))return u;(o=JSON.stringify(""+a)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(o=o.substr(1,o.length-2),o=e.stylize(o,"name")):(o=o.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),o=e.stylize(o,"string"))}return o+": "+u}function h(e){return Array.isArray(e)}function d(e){return"boolean"==typeof e}function g(e){return null===e}function y(e){return"number"==typeof e}function v(e){return"string"==typeof e}function m(e){return void 0===e}function b(e){return _(e)&&"[object RegExp]"===w(e)}function _(e){return"object"==typeof e&&null!==e}function S(e){return _(e)&&"[object Date]"===w(e)}function A(e){return _(e)&&("[object Error]"===w(e)||e instanceof Error)}function T(e){return"function"==typeof e}function w(e){return Object.prototype.toString.call(e)}t.debuglog=function(r){if(m(i)&&(i=e.env.NODE_DEBUG||""),r=r.toUpperCase(),!o[r])if(new RegExp("\\b"+r+"\\b","i").test(i)){e.pid;o[r]=function(){t.format.apply(t,arguments)}}else o[r]=function(){};return o[r]},t.inspect=u,u.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},u.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.isArray=h,t.isBoolean=d,t.isNull=g,t.isNullOrUndefined=function(e){return null==e},t.isNumber=y,t.isString=v,t.isSymbol=function(e){return"symbol"==typeof e},t.isUndefined=m,t.isRegExp=b,t.isObject=_,t.isDate=S,t.isError=A,t.isFunction=T,t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},t.isBuffer=r(38);function C(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.log=function(){},t.inherits=r(39),t._extend=function(e,t){if(!t||!_(t))return e;for(var r=Object.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]];return e};var E="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function x(e,t){if(!e){var r=new Error("Promise was rejected with a falsy value");r.reason=e,e=r}return t(e)}t.promisify=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');if(E&&e[E]){var t;if("function"!=typeof(t=e[E]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(t,E,{value:t,enumerable:!1,writable:!1,configurable:!0}),t}function t(){for(var t,r,n=new Promise((function(e,n){t=e,r=n})),a=[],i=0;i<arguments.length;i++)a.push(arguments[i]);a.push((function(e,n){e?r(e):t(n)}));try{e.apply(this,a)}catch(e){r(e)}return n}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),E&&Object.defineProperty(t,E,{value:t,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(t,n(e))},t.promisify.custom=E,t.callbackify=function(t){if("function"!=typeof t)throw new TypeError('The "original" argument must be of type Function');function r(){for(var r=[],n=0;n<arguments.length;n++)r.push(arguments[n]);var a=r.pop();if("function"!=typeof a)throw new TypeError("The last argument must be of type Function");var i=this,o=function(){return a.apply(i,arguments)};t.apply(this,r).then((function(t){e.nextTick(o,null,t)}),(function(t){e.nextTick(x,t,o)}))}return Object.setPrototypeOf(r,Object.getPrototypeOf(t)),Object.defineProperties(r,n(t)),r}}).call(this,r(9))},function(e,t,r){"use strict";const n=r(22),a=r(42),i=e=>null!==e&&"object"==typeof e&&!Array.isArray(e),o=e=>"number"==typeof e||"string"==typeof e&&""!==e,u=e=>Number.isInteger(+e),s=e=>{let t=""+e,r=-1;if("-"===t[0]&&(t=t.slice(1)),"0"===t)return!1;for(;"0"===t[++r];);return r>0},l=(e,t,r)=>{if(t>0){let r="-"===e[0]?"-":"";r&&(e=e.slice(1)),e=r+e.padStart(r?t-1:t,"0")}return!1===r?String(e):e},c=(e,t)=>{let r="-"===e[0]?"-":"";for(r&&(e=e.slice(1),t--);e.length<t;)e="0"+e;return r?"-"+e:e},f=(e,t,r,n)=>{if(r)return a(e,t,{wrap:!1,...n});let i=String.fromCharCode(e);return e===t?i:`[${i}-${String.fromCharCode(t)}]`},p=(e,t,r)=>{if(Array.isArray(e)){let t=!0===r.wrap,n=r.capture?"":"?:";return t?`(${n}${e.join("|")})`:e.join("|")}return a(e,t,r)},h=(...e)=>new RangeError("Invalid range arguments: "+n.inspect(...e)),d=(e,t,r)=>{if(!0===r.strictRanges)throw h([e,t]);return[]},g=(e,t,r=1,n={})=>{let a=Number(e),i=Number(t);if(!Number.isInteger(a)||!Number.isInteger(i)){if(!0===n.strictRanges)throw h([e,t]);return[]}0===a&&(a=0),0===i&&(i=0);let o=a>i,u=String(e),d=String(t),g=String(r);r=Math.max(Math.abs(r),1);let y=s(u)||s(d)||s(g),v=y?Math.max(u.length,d.length,g.length):0,m=!1===y&&!1===((e,t,r)=>"string"==typeof e||"string"==typeof t||!0===r.stringify)(e,t,n),b=n.transform||(e=>t=>!0===e?Number(t):String(t))(m);if(n.toRegex&&1===r)return f(c(e,v),c(t,v),!0,n);let _={negatives:[],positives:[]},S=[],A=0;for(;o?a>=i:a<=i;)!0===n.toRegex&&r>1?_[(T=a)<0?"negatives":"positives"].push(Math.abs(T)):S.push(l(b(a,A),v,m)),a=o?a-r:a+r,A++;var T;return!0===n.toRegex?r>1?((e,t)=>{e.negatives.sort((e,t)=>e<t?-1:e>t?1:0),e.positives.sort((e,t)=>e<t?-1:e>t?1:0);let r,n=t.capture?"":"?:",a="",i="";return e.positives.length&&(a=e.positives.join("|")),e.negatives.length&&(i=`-(${n}${e.negatives.join("|")})`),r=a&&i?`${a}|${i}`:a||i,t.wrap?`(${n}${r})`:r})(_,n):p(S,null,{wrap:!1,...n}):S},y=(e,t,r,n={})=>{if(null==t&&o(e))return[e];if(!o(e)||!o(t))return d(e,t,n);if("function"==typeof r)return y(e,t,1,{transform:r});if(i(r))return y(e,t,0,r);let a={...n};return!0===a.capture&&(a.wrap=!0),r=r||a.step||1,u(r)?u(e)&&u(t)?g(e,t,r,a):((e,t,r=1,n={})=>{if(!u(e)&&e.length>1||!u(t)&&t.length>1)return d(e,t,n);let a=n.transform||(e=>String.fromCharCode(e)),i=(""+e).charCodeAt(0),o=(""+t).charCodeAt(0),s=i>o,l=Math.min(i,o),c=Math.max(i,o);if(n.toRegex&&1===r)return f(l,c,!1,n);let h=[],g=0;for(;s?i>=o:i<=o;)h.push(a(i,g)),i=s?i-r:i+r,g++;return!0===n.toRegex?p(h,null,{wrap:!1,options:n}):h})(e,t,Math.max(Math.abs(r),1),a):null==r||i(r)?y(e,t,1,r):((e,t)=>{if(!0===t.strictRanges)throw new TypeError(`Expected step "${e}" to be a number`);return[]})(r,a)};e.exports=y},function(e,t,r){"use strict";var n=r(4),a=Array.prototype.forEach,i=Object.create,o=function(e,t){var r;for(r in e)t[r]=e[r]};e.exports=function(e){var t=i(null);return a.call(arguments,(function(e){n(e)&&o(Object(e),t)})),t}},function(e,t,r){"use strict";var n=r(5);e.exports=function(e,t,r){var a;return isNaN(e)?(a=t)>=0?r&&a?a-1:a:1:!1!==e&&n(e)}},function(e,t,r){"use strict";e.exports=r(60)()?Object.assign:r(61)},function(e,t,r){"use strict";var n,a,i,o,u,s=r(5),l=function(e,t){return t};try{Object.defineProperty(l,"length",{configurable:!0,writable:!1,enumerable:!1,value:1})}catch(e){}1===l.length?(n={configurable:!0,writable:!1,enumerable:!1},a=Object.defineProperty,e.exports=function(e,t){return t=s(t),e.length===t?e:(n.value=t,a(e,"length",n))}):(o=r(28),u=[],i=function(e){var t,r=0;if(u[e])return u[e];for(t=[];e--;)t.push("a"+(++r).toString(36));return new Function("fn","return function ("+t.join(", ")+") { return fn.apply(this, arguments); };")},e.exports=function(e,t){var r;if(t=s(t),e.length===t)return e;r=i(t)(e);try{o(r,e)}catch(e){}return r})},function(e,t,r){"use strict";var n=r(8),a=Object.defineProperty,i=Object.getOwnPropertyDescriptor,o=Object.getOwnPropertyNames,u=Object.getOwnPropertySymbols;e.exports=function(e,t){var r,s=Object(n(t));if(e=Object(n(e)),o(s).forEach((function(n){try{a(e,n,i(t,n))}catch(e){r=e}})),"function"==typeof u&&u(s).forEach((function(n){try{a(e,n,i(t,n))}catch(e){r=e}})),void 0!==r)throw r;return e}},function(e,t,r){"use strict";e.exports=function(e){return null!=e}},function(e,t,r){"use strict";var n=r(83);e.exports=function(e){if(!n(e))throw new TypeError(e+" is not a symbol");return e}},function(e,t,r){"use strict";var n=r(3),a=r(12),i=Function.prototype.call;e.exports=function(e,t){var r={},o=arguments[2];return n(t),a(e,(function(e,n,a,u){r[n]=i.call(t,o,e,n,a,u)})),r}},function(e,t){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(e){"object"==typeof window&&(r=window)}e.exports=r},function(e,t,r){"use strict";e.exports=function(e){return"function"==typeof e}},function(e,t){function r(e){return!!e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof e.then}e.exports=r,e.exports.default=r},function(e,t,r){"use strict";const n=r(22),a=r(40),i=r(47),o=r(10),u=e=>""===e||"./"===e,s=(e,t,r)=>{t=[].concat(t),e=[].concat(e);let n=new Set,a=new Set,o=new Set,u=0,s=e=>{o.add(e.output),r&&r.onResult&&r.onResult(e)};for(let o=0;o<t.length;o++){let l=i(String(t[o]),{...r,onResult:s},!0),c=l.state.negated||l.state.negatedExtglob;c&&u++;for(let t of e){let e=l(t,!0);(c?!e.isMatch:e.isMatch)&&(c?n.add(e.output):(n.delete(e.output),a.add(e.output)))}}let l=(u===t.length?[...o]:[...a]).filter(e=>!n.has(e));if(r&&0===l.length){if(!0===r.failglob)throw new Error(`No matches found for "${t.join(", ")}"`);if(!0===r.nonull||!0===r.nullglob)return r.unescape?t.map(e=>e.replace(/\\/g,"")):t}return l};s.match=s,s.matcher=(e,t)=>i(e,t),s.any=s.isMatch=(e,t,r)=>i(t,r)(e),s.not=(e,t,r={})=>{t=[].concat(t).map(String);let n=new Set,a=[],i=new Set(s(e,t,{...r,onResult:e=>{r.onResult&&r.onResult(e),a.push(e.output)}}));for(let e of a)i.has(e)||n.add(e);return[...n]},s.contains=(e,t,r)=>{if("string"!=typeof e)throw new TypeError(`Expected a string: "${n.inspect(e)}"`);if(Array.isArray(t))return t.some(t=>s.contains(e,t,r));if("string"==typeof t){if(u(e)||u(t))return!1;if(e.includes(t)||e.startsWith("./")&&e.slice(2).includes(t))return!0}return s.isMatch(e,t,{...r,contains:!0})},s.matchKeys=(e,t,r)=>{if(!o.isObject(e))throw new TypeError("Expected the first argument to be an object");let n=s(Object.keys(e),t,r),a={};for(let t of n)a[t]=e[t];return a},s.some=(e,t,r)=>{let n=[].concat(e);for(let e of[].concat(t)){let t=i(String(e),r);if(n.some(e=>t(e)))return!0}return!1},s.every=(e,t,r)=>{let n=[].concat(e);for(let e of[].concat(t)){let t=i(String(e),r);if(!n.every(e=>t(e)))return!1}return!0},s.all=(e,t,r)=>{if("string"!=typeof e)throw new TypeError(`Expected a string: "${n.inspect(e)}"`);return[].concat(t).every(t=>i(t,r)(e))},s.capture=(e,t,r)=>{let n=o.isWindows(r),a=i.makeRe(String(e),{...r,capture:!0}).exec(n?o.toPosixSlashes(t):t);if(a)return a.slice(1).map(e=>void 0===e?"":e)},s.makeRe=(...e)=>i.makeRe(...e),s.scan=(...e)=>i.scan(...e),s.parse=(e,t)=>{let r=[];for(let n of[].concat(e||[]))for(let e of a(String(n),t))r.push(i.parse(e,t));return r},s.braces=(e,t)=>{if("string"!=typeof e)throw new TypeError("Expected a string");return t&&!0===t.nobrace||!/\{.*\}/.test(e)?[e]:a(e,t)},s.braceExpand=(e,t)=>{if("string"!=typeof e)throw new TypeError("Expected a string");return s.braces(e,{...t,expand:!0})},e.exports=s},function(e,t,r){"use strict";var n=r(24),a=r(25),i=r(56);e.exports=function(e){var t,o=n(arguments[1]);return o.normalizer||0!==(t=o.length=a(o.length,e.length,o.async))&&(o.primitive?!1===t?o.normalizer=r(91):t>1&&(o.normalizer=r(92)(t)):o.normalizer=!1===t?r(93)():1===t?r(97)():r(98)(t)),o.async&&r(99),o.promise&&r(102),o.dispose&&r(108),o.maxAge&&r(109),o.max&&r(112),o.refCounter&&r(114),i(e,o)}},function(e,t){e.exports=a},function(e,t){e.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}},function(e,t,r){"use strict";const n=r(14),a=r(41),i=r(44),o=r(45),u=(e,t={})=>{let r=[];if(Array.isArray(e))for(let n of e){let e=u.create(n,t);Array.isArray(e)?r.push(...e):r.push(e)}else r=[].concat(u.create(e,t));return t&&!0===t.expand&&!0===t.nodupes&&(r=[...new Set(r)]),r};u.parse=(e,t={})=>o(e,t),u.stringify=(e,t={})=>n("string"==typeof e?u.parse(e,t):e,t),u.compile=(e,t={})=>("string"==typeof e&&(e=u.parse(e,t)),a(e,t)),u.expand=(e,t={})=>{"string"==typeof e&&(e=u.parse(e,t));let r=i(e,t);return!0===t.noempty&&(r=r.filter(Boolean)),!0===t.nodupes&&(r=[...new Set(r)]),r},u.create=(e,t={})=>""===e||e.length<3?[e]:!0!==t.expand?u.compile(e,t):u.expand(e,t),e.exports=u},function(e,t,r){"use strict";const n=r(23),a=r(15);e.exports=(e,t={})=>{let r=(e,i={})=>{let o=a.isInvalidBrace(i),u=!0===e.invalid&&!0===t.escapeInvalid,s=!0===o||!0===u,l=!0===t.escapeInvalid?"\\":"",c="";if(!0===e.isOpen)return l+e.value;if(!0===e.isClose)return l+e.value;if("open"===e.type)return s?l+e.value:"(";if("close"===e.type)return s?l+e.value:")";if("comma"===e.type)return"comma"===e.prev.type?"":s?e.value:"|";if(e.value)return e.value;if(e.nodes&&e.ranges>0){let r=a.reduce(e.nodes),i=n(...r,{...t,wrap:!1,toRegex:!0});if(0!==i.length)return r.length>1&&i.length>1?`(${i})`:i}if(e.nodes)for(let t of e.nodes)c+=r(t,e);return c};return r(e)}},function(e,t,r){"use strict";const n=r(43),a=(e,t,r)=>{if(!1===n(e))throw new TypeError("toRegexRange: expected the first argument to be a number");if(void 0===t||e===t)return String(e);if(!1===n(t))throw new TypeError("toRegexRange: expected the second argument to be a number.");let i={relaxZeros:!0,...r};"boolean"==typeof i.strictZeros&&(i.relaxZeros=!1===i.strictZeros);let s=e+":"+t+"="+String(i.relaxZeros)+String(i.shorthand)+String(i.capture)+String(i.wrap);if(a.cache.hasOwnProperty(s))return a.cache[s].result;let l=Math.min(e,t),c=Math.max(e,t);if(1===Math.abs(l-c)){let r=e+"|"+t;return i.capture?`(${r})`:!1===i.wrap?r:`(?:${r})`}let f=d(e)||d(t),p={min:e,max:t,a:l,b:c},h=[],g=[];if(f&&(p.isPadded=f,p.maxLen=String(p.max).length),l<0){g=o(c<0?Math.abs(c):1,Math.abs(l),p,i),l=p.a=0}return c>=0&&(h=o(l,c,p,i)),p.negatives=g,p.positives=h,p.result=function(e,t,r){let n=u(e,t,"-",!1,r)||[],a=u(t,e,"",!1,r)||[],i=u(e,t,"-?",!0,r)||[];return n.concat(i).concat(a).join("|")}(g,h,i),!0===i.capture?p.result=`(${p.result})`:!1!==i.wrap&&h.length+g.length>1&&(p.result=`(?:${p.result})`),a.cache[s]=p,p.result};function i(e,t,r){if(e===t)return{pattern:e,count:[],digits:0};let n=function(e,t){let r=[];for(let n=0;n<e.length;n++)r.push([e[n],t[n]]);return r}(e,t),a=n.length,i="",o=0;for(let e=0;e<a;e++){let[t,a]=n[e];t===a?i+=t:"0"!==t||"9"!==a?i+=h(t,a,r):o++}return o&&(i+=!0===r.shorthand?"\\d":"[0-9]"),{pattern:i,count:[o],digits:a}}function o(e,t,r,n){let a,o=function(e,t){let r=1,n=1,a=c(e,r),i=new Set([t]);for(;e<=a&&a<=t;)i.add(a),r+=1,a=c(e,r);for(a=f(t+1,n)-1;e<a&&a<=t;)i.add(a),n+=1,a=f(t+1,n)-1;return i=[...i],i.sort(s),i}(e,t),u=[],l=e;for(let e=0;e<o.length;e++){let t=o[e],s=i(String(l),String(t),n),c="";r.isPadded||!a||a.pattern!==s.pattern?(r.isPadded&&(c=g(t,r,n)),s.string=c+s.pattern+p(s.count),u.push(s),l=t+1,a=s):(a.count.length>1&&a.count.pop(),a.count.push(s.count[0]),a.string=a.pattern+p(a.count),l=t+1)}return u}function u(e,t,r,n,a){let i=[];for(let a of e){let{string:e}=a;n||l(t,"string",e)||i.push(r+e),n&&l(t,"string",e)&&i.push(r+e)}return i}function s(e,t){return e>t?1:t>e?-1:0}function l(e,t,r){return e.some(e=>e[t]===r)}function c(e,t){return Number(String(e).slice(0,-t)+"9".repeat(t))}function f(e,t){return e-e%Math.pow(10,t)}function p(e){let[t=0,r=""]=e;return r||t>1?`{${t+(r?","+r:"")}}`:""}function h(e,t,r){return`[${e}${t-e==1?"":"-"}${t}]`}function d(e){return/^-?(0+)\d/.test(e)}function g(e,t,r){if(!t.isPadded)return e;let n=Math.abs(t.maxLen-String(e).length),a=!1!==r.relaxZeros;switch(n){case 0:return"";case 1:return a?"0?":"0";case 2:return a?"0{0,2}":"00";default:return a?`0{0,${n}}`:`0{${n}}`}}a.cache={},a.clearCache=()=>a.cache={},e.exports=a},function(e,t,r){"use strict";e.exports=function(e){return"number"==typeof e?e-e==0:"string"==typeof e&&""!==e.trim()&&(Number.isFinite?Number.isFinite(+e):isFinite(+e))}},function(e,t,r){"use strict";const n=r(23),a=r(14),i=r(15),o=(e="",t="",r=!1)=>{let n=[];if(e=[].concat(e),!(t=[].concat(t)).length)return e;if(!e.length)return r?i.flatten(t).map(e=>`{${e}}`):t;for(let a of e)if(Array.isArray(a))for(let e of a)n.push(o(e,t,r));else for(let e of t)!0===r&&"string"==typeof e&&(e=`{${e}}`),n.push(Array.isArray(e)?o(a,e,r):a+e);return i.flatten(n)};e.exports=(e,t={})=>{let r=void 0===t.rangeLimit?1e3:t.rangeLimit,u=(e,s={})=>{e.queue=[];let l=s,c=s.queue;for(;"brace"!==l.type&&"root"!==l.type&&l.parent;)l=l.parent,c=l.queue;if(e.invalid||e.dollar)return void c.push(o(c.pop(),a(e,t)));if("brace"===e.type&&!0!==e.invalid&&2===e.nodes.length)return void c.push(o(c.pop(),["{}"]));if(e.nodes&&e.ranges>0){let u=i.reduce(e.nodes);if(i.exceedsLimit(...u,t.step,r))throw new RangeError("expanded array length exceeds range limit. Use options.rangeLimit to increase or disable the limit.");let s=n(...u,t);return 0===s.length&&(s=a(e,t)),c.push(o(c.pop(),s)),void(e.nodes=[])}let f=i.encloseBrace(e),p=e.queue,h=e;for(;"brace"!==h.type&&"root"!==h.type&&h.parent;)h=h.parent,p=h.queue;for(let t=0;t<e.nodes.length;t++){let r=e.nodes[t];"comma"!==r.type||"brace"!==e.type?"close"!==r.type?r.value&&"open"!==r.type?p.push(o(p.pop(),r.value)):r.nodes&&u(r,e):c.push(o(c.pop(),p,f)):(1===t&&p.push(""),p.push(""))}return p};return i.flatten(u(e))}},function(e,t,r){"use strict";const n=r(14),{MAX_LENGTH:a,CHAR_BACKSLASH:i,CHAR_BACKTICK:o,CHAR_COMMA:u,CHAR_DOT:s,CHAR_LEFT_PARENTHESES:l,CHAR_RIGHT_PARENTHESES:c,CHAR_LEFT_CURLY_BRACE:f,CHAR_RIGHT_CURLY_BRACE:p,CHAR_LEFT_SQUARE_BRACKET:h,CHAR_RIGHT_SQUARE_BRACKET:d,CHAR_DOUBLE_QUOTE:g,CHAR_SINGLE_QUOTE:y,CHAR_NO_BREAK_SPACE:v,CHAR_ZERO_WIDTH_NOBREAK_SPACE:m}=r(46);e.exports=(e,t={})=>{if("string"!=typeof e)throw new TypeError("Expected a string");let r=t||{},b="number"==typeof r.maxLength?Math.min(a,r.maxLength):a;if(e.length>b)throw new SyntaxError(`Input length (${e.length}), exceeds max characters (${b})`);let _,S={type:"root",input:e,nodes:[]},A=[S],T=S,w=S,C=0,E=e.length,x=0,O=0;const R=()=>e[x++],k=e=>{if("text"===e.type&&"dot"===w.type&&(w.type="text"),!w||"text"!==w.type||"text"!==e.type)return T.nodes.push(e),e.parent=T,e.prev=w,w=e,e;w.value+=e.value};for(k({type:"bos"});x<E;)if(T=A[A.length-1],_=R(),_!==m&&_!==v)if(_!==i)if(_!==d)if(_!==h)if(_!==l)if(_!==c)if(_!==g&&_!==y&&_!==o)if(_!==f)if(_!==p)if(_===u&&O>0){if(T.ranges>0){T.ranges=0;let e=T.nodes.shift();T.nodes=[e,{type:"text",value:n(T)}]}k({type:"comma",value:_}),T.commas++}else if(_===s&&O>0&&0===T.commas){let e=T.nodes;if(0===O||0===e.length){k({type:"text",value:_});continue}if("dot"===w.type){if(T.range=[],w.value+=_,w.type="range",3!==T.nodes.length&&5!==T.nodes.length){T.invalid=!0,T.ranges=0,w.type="text";continue}T.ranges++,T.args=[];continue}if("range"===w.type){e.pop();let t=e[e.length-1];t.value+=w.value+_,w=t,T.ranges--;continue}k({type:"dot",value:_})}else k({type:"text",value:_});else{if("brace"!==T.type){k({type:"text",value:_});continue}let e="close";T=A.pop(),T.close=!0,k({type:e,value:_}),O--,T=A[A.length-1]}else{O++;let e=w.value&&"$"===w.value.slice(-1)||!0===T.dollar;T=k({type:"brace",open:!0,close:!1,dollar:e,depth:O,commas:0,ranges:0,nodes:[]}),A.push(T),k({type:"open",value:_})}else{let e,r=_;for(!0!==t.keepQuotes&&(_="");x<E&&(e=R());)if(e!==i){if(e===r){!0===t.keepQuotes&&(_+=e);break}_+=e}else _+=e+R();k({type:"text",value:_})}else{if("paren"!==T.type){k({type:"text",value:_});continue}T=A.pop(),k({type:"text",value:_}),T=A[A.length-1]}else T=k({type:"paren",nodes:[]}),A.push(T),k({type:"text",value:_});else{C++;let e;for(;x<E&&(e=R());)if(_+=e,e!==h)if(e!==i){if(e===d&&(C--,0===C))break}else _+=R();else C++;k({type:"text",value:_})}else k({type:"text",value:"\\"+_});else k({type:"text",value:(t.keepEscaping?_:"")+R()});do{if(T=A.pop(),"root"!==T.type){T.nodes.forEach(e=>{e.nodes||("open"===e.type&&(e.isOpen=!0),"close"===e.type&&(e.isClose=!0),e.nodes||(e.type="text"),e.invalid=!0)});let e=A[A.length-1],t=e.nodes.indexOf(T);e.nodes.splice(t,1,...T.nodes)}}while(A.length>0);return k({type:"eos"}),S}},function(e,t,r){"use strict";e.exports={MAX_LENGTH:65536,CHAR_0:"0",CHAR_9:"9",CHAR_UPPERCASE_A:"A",CHAR_LOWERCASE_A:"a",CHAR_UPPERCASE_Z:"Z",CHAR_LOWERCASE_Z:"z",CHAR_LEFT_PARENTHESES:"(",CHAR_RIGHT_PARENTHESES:")",CHAR_ASTERISK:"*",CHAR_AMPERSAND:"&",CHAR_AT:"@",CHAR_BACKSLASH:"\\",CHAR_BACKTICK:"`",CHAR_CARRIAGE_RETURN:"\r",CHAR_CIRCUMFLEX_ACCENT:"^",CHAR_COLON:":",CHAR_COMMA:",",CHAR_DOLLAR:"$",CHAR_DOT:".",CHAR_DOUBLE_QUOTE:'"',CHAR_EQUAL:"=",CHAR_EXCLAMATION_MARK:"!",CHAR_FORM_FEED:"\f",CHAR_FORWARD_SLASH:"/",CHAR_HASH:"#",CHAR_HYPHEN_MINUS:"-",CHAR_LEFT_ANGLE_BRACKET:"<",CHAR_LEFT_CURLY_BRACE:"{",CHAR_LEFT_SQUARE_BRACKET:"[",CHAR_LINE_FEED:"\n",CHAR_NO_BREAK_SPACE:"Â ",CHAR_PERCENT:"%",CHAR_PLUS:"+",CHAR_QUESTION_MARK:"?",CHAR_RIGHT_ANGLE_BRACKET:">",CHAR_RIGHT_CURLY_BRACE:"}",CHAR_RIGHT_SQUARE_BRACKET:"]",CHAR_SEMICOLON:";",CHAR_SINGLE_QUOTE:"'",CHAR_SPACE:" ",CHAR_TAB:"\t",CHAR_UNDERSCORE:"_",CHAR_VERTICAL_LINE:"|",CHAR_ZERO_WIDTH_NOBREAK_SPACE:"\ufeff"}},function(e,t,r){"use strict";e.exports=r(48)},function(e,t,r){"use strict";const n=r(16),a=r(49),i=r(50),o=r(10),u=r(11),s=(e,t,r=!1)=>{if(Array.isArray(e)){const n=e.map(e=>s(e,t,r));return e=>{for(const t of n){const r=t(e);if(r)return r}return!1}}const n=(a=e)&&"object"==typeof a&&!Array.isArray(a)&&e.tokens&&e.input;var a;if(""===e||"string"!=typeof e&&!n)throw new TypeError("Expected pattern to be a non-empty string");const i=t||{},u=o.isWindows(t),l=n?s.compileRe(e,t):s.makeRe(e,t,!1,!0),c=l.state;delete l.state;let f=()=>!1;if(i.ignore){const e={...t,ignore:null,onMatch:null,onResult:null};f=s(i.ignore,e,r)}const p=(r,n=!1)=>{const{isMatch:a,match:o,output:p}=s.test(r,l,t,{glob:e,posix:u}),h={glob:e,state:c,regex:l,posix:u,input:r,output:p,match:o,isMatch:a};return"function"==typeof i.onResult&&i.onResult(h),!1===a?(h.isMatch=!1,!!n&&h):f(r)?("function"==typeof i.onIgnore&&i.onIgnore(h),h.isMatch=!1,!!n&&h):("function"==typeof i.onMatch&&i.onMatch(h),!n||h)};return r&&(p.state=c),p};s.test=(e,t,r,{glob:n,posix:a}={})=>{if("string"!=typeof e)throw new TypeError("Expected input to be a string");if(""===e)return{isMatch:!1,output:""};const i=r||{},u=i.format||(a?o.toPosixSlashes:null);let l=e===n,c=l&&u?u(e):e;return!1===l&&(c=u?u(e):e,l=c===n),!1!==l&&!0!==i.capture||(l=!0===i.matchBase||!0===i.basename?s.matchBase(e,t,r,a):t.exec(c)),{isMatch:Boolean(l),match:l,output:c}},s.matchBase=(e,t,r,a=o.isWindows(r))=>(t instanceof RegExp?t:s.makeRe(t,r)).test(n.basename(e)),s.isMatch=(e,t,r)=>s(t,r)(e),s.parse=(e,t)=>Array.isArray(e)?e.map(e=>s.parse(e,t)):i(e,{...t,fastpaths:!1}),s.scan=(e,t)=>a(e,t),s.compileRe=(e,t,r=!1,n=!1)=>{if(!0===r)return e.output;const a=t||{},i=a.contains?"":"^",o=a.contains?"":"$";let u=`${i}(?:${e.output})${o}`;e&&!0===e.negated&&(u=`^(?!${u}).*$`);const l=s.toRegex(u,t);return!0===n&&(l.state=e),l},s.makeRe=(e,t={},r=!1,n=!1)=>{if(!e||"string"!=typeof e)throw new TypeError("Expected a non-empty string");let a={negated:!1,fastpaths:!0};return!1===t.fastpaths||"."!==e[0]&&"*"!==e[0]||(a.output=i.fastpaths(e,t)),a.output||(a=i(e,t)),s.compileRe(a,t,r,n)},s.toRegex=(e,t)=>{try{const r=t||{};return new RegExp(e,r.flags||(r.nocase?"i":""))}catch(e){if(t&&!0===t.debug)throw e;return/$^/}},s.constants=u,e.exports=s},function(e,t,r){"use strict";const n=r(10),{CHAR_ASTERISK:a,CHAR_AT:i,CHAR_BACKWARD_SLASH:o,CHAR_COMMA:u,CHAR_DOT:s,CHAR_EXCLAMATION_MARK:l,CHAR_FORWARD_SLASH:c,CHAR_LEFT_CURLY_BRACE:f,CHAR_LEFT_PARENTHESES:p,CHAR_LEFT_SQUARE_BRACKET:h,CHAR_PLUS:d,CHAR_QUESTION_MARK:g,CHAR_RIGHT_CURLY_BRACE:y,CHAR_RIGHT_PARENTHESES:v,CHAR_RIGHT_SQUARE_BRACKET:m}=r(11),b=e=>e===c||e===o,_=e=>{!0!==e.isPrefix&&(e.depth=e.isGlobstar?1/0:1)};e.exports=(e,t)=>{const r=t||{},S=e.length-1,A=!0===r.parts||!0===r.scanToEnd,T=[],w=[],C=[];let E,x,O=e,R=-1,k=0,q=0,P=!1,j=!1,M=!1,N=!1,I=!1,L=!1,D=!1,H=!1,$=!1,F=!1,Q=0,U={value:"",depth:0,isGlob:!1};const G=()=>R>=S,B=()=>(E=x,O.charCodeAt(++R));for(;R<S;){let e;if(x=B(),x!==o){if(!0===L||x===f){for(Q++;!0!==G()&&(x=B());)if(x!==o)if(x!==f){if(!0!==L&&x===s&&(x=B())===s){if(P=U.isBrace=!0,M=U.isGlob=!0,F=!0,!0===A)continue;break}if(!0!==L&&x===u){if(P=U.isBrace=!0,M=U.isGlob=!0,F=!0,!0===A)continue;break}if(x===y&&(Q--,0===Q)){L=!1,P=U.isBrace=!0,F=!0;break}}else Q++;else D=U.backslashes=!0,B();if(!0===A)continue;break}if(x!==c){if(!0!==r.noext){if(!0===(x===d||x===i||x===a||x===g||x===l)&&O.charCodeAt(R+1)===p){if(M=U.isGlob=!0,N=U.isExtglob=!0,F=!0,x===l&&R===k&&($=!0),!0===A){for(;!0!==G()&&(x=B());)if(x!==o){if(x===v){M=U.isGlob=!0,F=!0;break}}else D=U.backslashes=!0,x=B();continue}break}}if(x===a){if(E===a&&(I=U.isGlobstar=!0),M=U.isGlob=!0,F=!0,!0===A)continue;break}if(x===g){if(M=U.isGlob=!0,F=!0,!0===A)continue;break}if(x===h){for(;!0!==G()&&(e=B());)if(e!==o){if(e===m){j=U.isBracket=!0,M=U.isGlob=!0,F=!0;break}}else D=U.backslashes=!0,B();if(!0===A)continue;break}if(!0===r.nonegate||x!==l||R!==k){if(!0!==r.noparen&&x===p){if(M=U.isGlob=!0,!0===A){for(;!0!==G()&&(x=B());)if(x!==p){if(x===v){F=!0;break}}else D=U.backslashes=!0,x=B();continue}break}if(!0===M){if(F=!0,!0===A)continue;break}}else H=U.negated=!0,k++}else{if(T.push(R),w.push(U),U={value:"",depth:0,isGlob:!1},!0===F)continue;if(E===s&&R===k+1){k+=2;continue}q=R+1}}else D=U.backslashes=!0,x=B(),x===f&&(L=!0)}!0===r.noext&&(N=!1,M=!1);let V=O,z="",K="";k>0&&(z=O.slice(0,k),O=O.slice(k),q-=k),V&&!0===M&&q>0?(V=O.slice(0,q),K=O.slice(q)):!0===M?(V="",K=O):V=O,V&&""!==V&&"/"!==V&&V!==O&&b(V.charCodeAt(V.length-1))&&(V=V.slice(0,-1)),!0===r.unescape&&(K&&(K=n.removeBackslashes(K)),V&&!0===D&&(V=n.removeBackslashes(V)));const W={prefix:z,input:e,start:k,base:V,glob:K,isBrace:P,isBracket:j,isGlob:M,isExtglob:N,isGlobstar:I,negated:H,negatedExtglob:$};if(!0===r.tokens&&(W.maxDepth=0,b(x)||w.push(U),W.tokens=w),!0===r.parts||!0===r.tokens){let t;for(let n=0;n<T.length;n++){const a=t?t+1:k,i=T[n],o=e.slice(a,i);r.tokens&&(0===n&&0!==k?(w[n].isPrefix=!0,w[n].value=z):w[n].value=o,_(w[n]),W.maxDepth+=w[n].depth),0===n&&""===o||C.push(o),t=i}if(t&&t+1<e.length){const n=e.slice(t+1);C.push(n),r.tokens&&(w[w.length-1].value=n,_(w[w.length-1]),W.maxDepth+=w[w.length-1].depth)}W.slashes=T,W.parts=C}return W}},function(e,t,r){"use strict";const n=r(11),a=r(10),{MAX_LENGTH:i,POSIX_REGEX_SOURCE:o,REGEX_NON_SPECIAL_CHARS:u,REGEX_SPECIAL_CHARS_BACKREF:s,REPLACEMENTS:l}=n,c=(e,t)=>{if("function"==typeof t.expandRange)return t.expandRange(...e,t);e.sort();const r=`[${e.join("-")}]`;try{new RegExp(r)}catch(t){return e.map(e=>a.escapeRegex(e)).join("..")}return r},f=(e,t)=>`Missing ${e}: "${t}" - use "\\\\${t}" to match literal characters`,p=(e,t)=>{if("string"!=typeof e)throw new TypeError("Expected a string");e=l[e]||e;const r={...t},h="number"==typeof r.maxLength?Math.min(i,r.maxLength):i;let d=e.length;if(d>h)throw new SyntaxError(`Input length: ${d}, exceeds maximum allowed length: ${h}`);const g={type:"bos",value:"",output:r.prepend||""},y=[g],v=r.capture?"":"?:",m=a.isWindows(t),b=n.globChars(m),_=n.extglobChars(b),{DOT_LITERAL:S,PLUS_LITERAL:A,SLASH_LITERAL:T,ONE_CHAR:w,DOTS_SLASH:C,NO_DOT:E,NO_DOT_SLASH:x,NO_DOTS_SLASH:O,QMARK:R,QMARK_NO_DOT:k,STAR:q,START_ANCHOR:P}=b,j=e=>`(${v}(?:(?!${P}${e.dot?C:S}).)*?)`,M=r.dot?"":E,N=r.dot?R:k;let I=!0===r.bash?j(r):q;r.capture&&(I=`(${I})`),"boolean"==typeof r.noext&&(r.noextglob=r.noext);const L={input:e,index:-1,start:0,dot:!0===r.dot,consumed:"",output:"",prefix:"",backtrack:!1,negated:!1,brackets:0,braces:0,parens:0,quotes:0,globstar:!1,tokens:y};e=a.removePrefix(e,L),d=e.length;const D=[],H=[],$=[];let F,Q=g;const U=()=>L.index===d-1,G=L.peek=(t=1)=>e[L.index+t],B=L.advance=()=>e[++L.index]||"",V=()=>e.slice(L.index+1),z=(e="",t=0)=>{L.consumed+=e,L.index+=t},K=e=>{L.output+=null!=e.output?e.output:e.value,z(e.value)},W=()=>{let e=1;for(;"!"===G()&&("("!==G(2)||"?"===G(3));)B(),L.start++,e++;return e%2!=0&&(L.negated=!0,L.start++,!0)},X=e=>{L[e]++,$.push(e)},J=e=>{L[e]--,$.pop()},Z=e=>{if("globstar"===Q.type){const t=L.braces>0&&("comma"===e.type||"brace"===e.type),r=!0===e.extglob||D.length&&("pipe"===e.type||"paren"===e.type);"slash"===e.type||"paren"===e.type||t||r||(L.output=L.output.slice(0,-Q.output.length),Q.type="star",Q.value="*",Q.output=I,L.output+=Q.output)}if(D.length&&"paren"!==e.type&&(D[D.length-1].inner+=e.value),(e.value||e.output)&&K(e),Q&&"text"===Q.type&&"text"===e.type)return Q.value+=e.value,void(Q.output=(Q.output||"")+e.value);e.prev=Q,y.push(e),Q=e},Y=(e,t)=>{const n={..._[t],conditions:1,inner:""};n.prev=Q,n.parens=L.parens,n.output=L.output;const a=(r.capture?"(":"")+n.open;X("parens"),Z({type:e,value:t,output:L.output?"":w}),Z({type:"paren",extglob:!0,value:B(),output:a}),D.push(n)},ee=e=>{let n,a=e.close+(r.capture?")":"");if("negate"===e.type){let i=I;if(e.inner&&e.inner.length>1&&e.inner.includes("/")&&(i=j(r)),(i!==I||U()||/^\)+$/.test(V()))&&(a=e.close=")$))"+i),e.inner.includes("*")&&(n=V())&&/^\.[^\\/.]+$/.test(n)){const r=p(n,{...t,fastpaths:!1}).output;a=e.close=`)${r})${i})`}"bos"===e.prev.type&&(L.negatedExtglob=!0)}Z({type:"paren",extglob:!0,value:F,output:a}),J("parens")};if(!1!==r.fastpaths&&!/(^[*!]|[/()[\]{}"])/.test(e)){let n=!1,i=e.replace(s,(e,t,r,a,i,o)=>"\\"===a?(n=!0,e):"?"===a?t?t+a+(i?R.repeat(i.length):""):0===o?N+(i?R.repeat(i.length):""):R.repeat(r.length):"."===a?S.repeat(r.length):"*"===a?t?t+a+(i?I:""):I:t?e:"\\"+e);return!0===n&&(i=!0===r.unescape?i.replace(/\\/g,""):i.replace(/\\+/g,e=>e.length%2==0?"\\\\":e?"\\":"")),i===e&&!0===r.contains?(L.output=e,L):(L.output=a.wrapOutput(i,L,t),L)}for(;!U();){if(F=B(),"\0"===F)continue;if("\\"===F){const e=G();if("/"===e&&!0!==r.bash)continue;if("."===e||";"===e)continue;if(!e){F+="\\",Z({type:"text",value:F});continue}const t=/^\\+/.exec(V());let n=0;if(t&&t[0].length>2&&(n=t[0].length,L.index+=n,n%2!=0&&(F+="\\")),!0===r.unescape?F=B():F+=B(),0===L.brackets){Z({type:"text",value:F});continue}}if(L.brackets>0&&("]"!==F||"["===Q.value||"[^"===Q.value)){if(!1!==r.posix&&":"===F){const e=Q.value.slice(1);if(e.includes("[")&&(Q.posix=!0,e.includes(":"))){const e=Q.value.lastIndexOf("["),t=Q.value.slice(0,e),r=Q.value.slice(e+2),n=o[r];if(n){Q.value=t+n,L.backtrack=!0,B(),g.output||1!==y.indexOf(Q)||(g.output=w);continue}}}("["===F&&":"!==G()||"-"===F&&"]"===G())&&(F="\\"+F),"]"!==F||"["!==Q.value&&"[^"!==Q.value||(F="\\"+F),!0===r.posix&&"!"===F&&"["===Q.value&&(F="^"),Q.value+=F,K({value:F});continue}if(1===L.quotes&&'"'!==F){F=a.escapeRegex(F),Q.value+=F,K({value:F});continue}if('"'===F){L.quotes=1===L.quotes?0:1,!0===r.keepQuotes&&Z({type:"text",value:F});continue}if("("===F){X("parens"),Z({type:"paren",value:F});continue}if(")"===F){if(0===L.parens&&!0===r.strictBrackets)throw new SyntaxError(f("opening","("));const e=D[D.length-1];if(e&&L.parens===e.parens+1){ee(D.pop());continue}Z({type:"paren",value:F,output:L.parens?")":"\\)"}),J("parens");continue}if("["===F){if(!0!==r.nobracket&&V().includes("]"))X("brackets");else{if(!0!==r.nobracket&&!0===r.strictBrackets)throw new SyntaxError(f("closing","]"));F="\\"+F}Z({type:"bracket",value:F});continue}if("]"===F){if(!0===r.nobracket||Q&&"bracket"===Q.type&&1===Q.value.length){Z({type:"text",value:F,output:"\\"+F});continue}if(0===L.brackets){if(!0===r.strictBrackets)throw new SyntaxError(f("opening","["));Z({type:"text",value:F,output:"\\"+F});continue}J("brackets");const e=Q.value.slice(1);if(!0===Q.posix||"^"!==e[0]||e.includes("/")||(F="/"+F),Q.value+=F,K({value:F}),!1===r.literalBrackets||a.hasRegexChars(e))continue;const t=a.escapeRegex(Q.value);if(L.output=L.output.slice(0,-Q.value.length),!0===r.literalBrackets){L.output+=t,Q.value=t;continue}Q.value=`(${v}${t}|${Q.value})`,L.output+=Q.value;continue}if("{"===F&&!0!==r.nobrace){X("braces");const e={type:"brace",value:F,output:"(",outputIndex:L.output.length,tokensIndex:L.tokens.length};H.push(e),Z(e);continue}if("}"===F){const e=H[H.length-1];if(!0===r.nobrace||!e){Z({type:"text",value:F,output:F});continue}let t=")";if(!0===e.dots){const e=y.slice(),n=[];for(let t=e.length-1;t>=0&&(y.pop(),"brace"!==e[t].type);t--)"dots"!==e[t].type&&n.unshift(e[t].value);t=c(n,r),L.backtrack=!0}if(!0!==e.comma&&!0!==e.dots){const r=L.output.slice(0,e.outputIndex),n=L.tokens.slice(e.tokensIndex);e.value=e.output="\\{",F=t="\\}",L.output=r;for(const e of n)L.output+=e.output||e.value}Z({type:"brace",value:F,output:t}),J("braces"),H.pop();continue}if("|"===F){D.length>0&&D[D.length-1].conditions++,Z({type:"text",value:F});continue}if(","===F){let e=F;const t=H[H.length-1];t&&"braces"===$[$.length-1]&&(t.comma=!0,e="|"),Z({type:"comma",value:F,output:e});continue}if("/"===F){if("dot"===Q.type&&L.index===L.start+1){L.start=L.index+1,L.consumed="",L.output="",y.pop(),Q=g;continue}Z({type:"slash",value:F,output:T});continue}if("."===F){if(L.braces>0&&"dot"===Q.type){"."===Q.value&&(Q.output=S);const e=H[H.length-1];Q.type="dots",Q.output+=F,Q.value+=F,e.dots=!0;continue}if(L.braces+L.parens===0&&"bos"!==Q.type&&"slash"!==Q.type){Z({type:"text",value:F,output:S});continue}Z({type:"dot",value:F,output:S});continue}if("?"===F){if(!(Q&&"("===Q.value)&&!0!==r.noextglob&&"("===G()&&"?"!==G(2)){Y("qmark",F);continue}if(Q&&"paren"===Q.type){const e=G();let t=F;if("<"===e&&!a.supportsLookbehinds())throw new Error("Node.js v10 or higher is required for regex lookbehinds");("("===Q.value&&!/[!=<:]/.test(e)||"<"===e&&!/<([!=]|\w+>)/.test(V()))&&(t="\\"+F),Z({type:"text",value:F,output:t});continue}if(!0!==r.dot&&("slash"===Q.type||"bos"===Q.type)){Z({type:"qmark",value:F,output:k});continue}Z({type:"qmark",value:F,output:R});continue}if("!"===F){if(!0!==r.noextglob&&"("===G()&&("?"!==G(2)||!/[!=<:]/.test(G(3)))){Y("negate",F);continue}if(!0!==r.nonegate&&0===L.index){W();continue}}if("+"===F){if(!0!==r.noextglob&&"("===G()&&"?"!==G(2)){Y("plus",F);continue}if(Q&&"("===Q.value||!1===r.regex){Z({type:"plus",value:F,output:A});continue}if(Q&&("bracket"===Q.type||"paren"===Q.type||"brace"===Q.type)||L.parens>0){Z({type:"plus",value:F});continue}Z({type:"plus",value:A});continue}if("@"===F){if(!0!==r.noextglob&&"("===G()&&"?"!==G(2)){Z({type:"at",extglob:!0,value:F,output:""});continue}Z({type:"text",value:F});continue}if("*"!==F){"$"!==F&&"^"!==F||(F="\\"+F);const e=u.exec(V());e&&(F+=e[0],L.index+=e[0].length),Z({type:"text",value:F});continue}if(Q&&("globstar"===Q.type||!0===Q.star)){Q.type="star",Q.star=!0,Q.value+=F,Q.output=I,L.backtrack=!0,L.globstar=!0,z(F);continue}let t=V();if(!0!==r.noextglob&&/^\([^?]/.test(t)){Y("star",F);continue}if("star"===Q.type){if(!0===r.noglobstar){z(F);continue}const n=Q.prev,a=n.prev,i="slash"===n.type||"bos"===n.type,o=a&&("star"===a.type||"globstar"===a.type);if(!0===r.bash&&(!i||t[0]&&"/"!==t[0])){Z({type:"star",value:F,output:""});continue}const u=L.braces>0&&("comma"===n.type||"brace"===n.type),s=D.length&&("pipe"===n.type||"paren"===n.type);if(!i&&"paren"!==n.type&&!u&&!s){Z({type:"star",value:F,output:""});continue}for(;"/**"===t.slice(0,3);){const r=e[L.index+4];if(r&&"/"!==r)break;t=t.slice(3),z("/**",3)}if("bos"===n.type&&U()){Q.type="globstar",Q.value+=F,Q.output=j(r),L.output=Q.output,L.globstar=!0,z(F);continue}if("slash"===n.type&&"bos"!==n.prev.type&&!o&&U()){L.output=L.output.slice(0,-(n.output+Q.output).length),n.output="(?:"+n.output,Q.type="globstar",Q.output=j(r)+(r.strictSlashes?")":"|$)"),Q.value+=F,L.globstar=!0,L.output+=n.output+Q.output,z(F);continue}if("slash"===n.type&&"bos"!==n.prev.type&&"/"===t[0]){const e=void 0!==t[1]?"|$":"";L.output=L.output.slice(0,-(n.output+Q.output).length),n.output="(?:"+n.output,Q.type="globstar",Q.output=`${j(r)}${T}|${T}${e})`,Q.value+=F,L.output+=n.output+Q.output,L.globstar=!0,z(F+B()),Z({type:"slash",value:"/",output:""});continue}if("bos"===n.type&&"/"===t[0]){Q.type="globstar",Q.value+=F,Q.output=`(?:^|${T}|${j(r)}${T})`,L.output=Q.output,L.globstar=!0,z(F+B()),Z({type:"slash",value:"/",output:""});continue}L.output=L.output.slice(0,-Q.output.length),Q.type="globstar",Q.output=j(r),Q.value+=F,L.output+=Q.output,L.globstar=!0,z(F);continue}const n={type:"star",value:F,output:I};!0!==r.bash?!Q||"bracket"!==Q.type&&"paren"!==Q.type||!0!==r.regex?(L.index!==L.start&&"slash"!==Q.type&&"dot"!==Q.type||("dot"===Q.type?(L.output+=x,Q.output+=x):!0===r.dot?(L.output+=O,Q.output+=O):(L.output+=M,Q.output+=M),"*"!==G()&&(L.output+=w,Q.output+=w)),Z(n)):(n.output=F,Z(n)):(n.output=".*?","bos"!==Q.type&&"slash"!==Q.type||(n.output=M+n.output),Z(n))}for(;L.brackets>0;){if(!0===r.strictBrackets)throw new SyntaxError(f("closing","]"));L.output=a.escapeLast(L.output,"["),J("brackets")}for(;L.parens>0;){if(!0===r.strictBrackets)throw new SyntaxError(f("closing",")"));L.output=a.escapeLast(L.output,"("),J("parens")}for(;L.braces>0;){if(!0===r.strictBrackets)throw new SyntaxError(f("closing","}"));L.output=a.escapeLast(L.output,"{"),J("braces")}if(!0===r.strictSlashes||"star"!==Q.type&&"bracket"!==Q.type||Z({type:"maybe_slash",value:"",output:T+"?"}),!0===L.backtrack){L.output="";for(const e of L.tokens)L.output+=null!=e.output?e.output:e.value,e.suffix&&(L.output+=e.suffix)}return L};p.fastpaths=(e,t)=>{const r={...t},o="number"==typeof r.maxLength?Math.min(i,r.maxLength):i,u=e.length;if(u>o)throw new SyntaxError(`Input length: ${u}, exceeds maximum allowed length: ${o}`);e=l[e]||e;const s=a.isWindows(t),{DOT_LITERAL:c,SLASH_LITERAL:f,ONE_CHAR:p,DOTS_SLASH:h,NO_DOT:d,NO_DOTS:g,NO_DOTS_SLASH:y,STAR:v,START_ANCHOR:m}=n.globChars(s),b=r.dot?g:d,_=r.dot?y:d,S=r.capture?"":"?:";let A=!0===r.bash?".*?":v;r.capture&&(A=`(${A})`);const T=e=>!0===e.noglobstar?A:`(${S}(?:(?!${m}${e.dot?h:c}).)*?)`,w=e=>{switch(e){case"*":return`${b}${p}${A}`;case".*":return`${c}${p}${A}`;case"*.*":return`${b}${A}${c}${p}${A}`;case"*/*":return`${b}${A}${f}${p}${_}${A}`;case"**":return b+T(r);case"**/*":return`(?:${b}${T(r)}${f})?${_}${p}${A}`;case"**/*.*":return`(?:${b}${T(r)}${f})?${_}${A}${c}${p}${A}`;case"**/.*":return`(?:${b}${T(r)}${f})?${c}${p}${A}`;default:{const t=/^(.*?)\.(\w+)$/.exec(e);if(!t)return;const r=w(t[1]);if(!r)return;return r+c+t[2]}}},C=a.removePrefix(e,{negated:!1,prefix:""});let E=w(C);return E&&!0!==r.strictSlashes&&(E+=f+"?"),E},e.exports=p},function(e,t,r){"use strict";e.exports=function(){}},function(e,t,r){"use strict";var n=r(53),a=Math.abs,i=Math.floor;e.exports=function(e){return isNaN(e)?0:0!==(e=Number(e))&&isFinite(e)?n(e)*i(a(e)):e}},function(e,t,r){"use strict";e.exports=r(54)()?Math.sign:r(55)},function(e,t,r){"use strict";e.exports=function(){var e=Math.sign;return"function"==typeof e&&(1===e(10)&&-1===e(-20))}},function(e,t,r){"use strict";e.exports=function(e){return e=Number(e),isNaN(e)||0===e?e:e>0?1:-1}},function(e,t,r){"use strict";var n=r(3),a=r(12),i=r(6),o=r(58),u=r(25);e.exports=function e(t){var r,s,l;if(n(t),(r=Object(arguments[1])).async&&r.promise)throw new Error("Options 'async' and 'promise' cannot be used together");return hasOwnProperty.call(t,"__memoized__")&&!r.force?t:(s=u(r.length,t.length,r.async&&i.async),l=o(t,s,r),a(i,(function(e,t){r[t]&&e(r[t],l,r)})),e.__profiler__&&e.__profiler__(l),l.updateEnv(),l.memoized)}},function(e,t,r){"use strict";var n=r(3),a=r(8),i=Function.prototype.bind,o=Function.prototype.call,u=Object.keys,s=Object.prototype.propertyIsEnumerable;e.exports=function(e,t){return function(r,l){var c,f=arguments[2],p=arguments[3];return r=Object(a(r)),n(l),c=u(r),p&&c.sort("function"==typeof p?i.call(p,r):void 0),"function"!=typeof e&&(e=c[e]),o.call(e,c,(function(e,n){return s.call(r,e)?o.call(l,f,r[e],e,r,n):t}))}}},function(e,t,r){"use strict";var n=r(59),a=r(27),i=r(7),o=r(73).methods,u=r(74),s=r(90),l=Function.prototype.apply,c=Function.prototype.call,f=Object.create,p=Object.defineProperties,h=o.on,d=o.emit;e.exports=function(e,t,r){var o,g,y,v,m,b,_,S,A,T,w,C,E,x,O,R=f(null);return g=!1!==t?t:isNaN(e.length)?1:e.length,r.normalizer&&(T=s(r.normalizer),y=T.get,v=T.set,m=T.delete,b=T.clear),null!=r.resolvers&&(O=u(r.resolvers)),x=y?a((function(t){var r,a,i=arguments;if(O&&(i=O(i)),null!==(r=y(i))&&hasOwnProperty.call(R,r))return w&&o.emit("get",r,i,this),R[r];if(a=1===i.length?c.call(e,this,i[0]):l.call(e,this,i),null===r){if(null!==(r=y(i)))throw n("Circular invocation","CIRCULAR_INVOCATION");r=v(i)}else if(hasOwnProperty.call(R,r))throw n("Circular invocation","CIRCULAR_INVOCATION");return R[r]=a,C&&o.emit("set",r,null,a),a}),g):0===t?function(){var t;if(hasOwnProperty.call(R,"data"))return w&&o.emit("get","data",arguments,this),R.data;if(t=arguments.length?l.call(e,this,arguments):c.call(e,this),hasOwnProperty.call(R,"data"))throw n("Circular invocation","CIRCULAR_INVOCATION");return R.data=t,C&&o.emit("set","data",null,t),t}:function(t){var r,a,i=arguments;if(O&&(i=O(arguments)),a=String(i[0]),hasOwnProperty.call(R,a))return w&&o.emit("get",a,i,this),R[a];if(r=1===i.length?c.call(e,this,i[0]):l.call(e,this,i),hasOwnProperty.call(R,a))throw n("Circular invocation","CIRCULAR_INVOCATION");return R[a]=r,C&&o.emit("set",a,null,r),r},o={original:e,memoized:x,profileName:r.profileName,get:function(e){return O&&(e=O(e)),y?y(e):String(e[0])},has:function(e){return hasOwnProperty.call(R,e)},delete:function(e){var t;hasOwnProperty.call(R,e)&&(m&&m(e),t=R[e],delete R[e],E&&o.emit("delete",e,t))},clear:function(){var e=R;b&&b(),R=f(null),o.emit("clear",e)},on:function(e,t){return"get"===e?w=!0:"set"===e?C=!0:"delete"===e&&(E=!0),h.call(this,e,t)},emit:d,updateEnv:function(){e=o.original}},_=y?a((function(e){var t,r=arguments;O&&(r=O(r)),null!==(t=y(r))&&o.delete(t)}),g):0===t?function(){return o.delete("data")}:function(e){return O&&(e=O(arguments)[0]),o.delete(e)},S=a((function(){var e,r=arguments;return 0===t?R.data:(O&&(r=O(r)),e=y?y(r):String(r[0]),R[e])})),A=a((function(){var e,r=arguments;return 0===t?o.has("data"):(O&&(r=O(r)),null!==(e=y?y(r):String(r[0]))&&o.has(e))})),p(x,{__memoized__:i(!0),delete:i(_),clear:i(o.clear),_get:i(S),_has:i(A)}),o}},function(e,t,r){"use strict";var n=r(26),a=r(65),i=r(4),o=Error.captureStackTrace;e.exports=function(t){var r=new Error(t),u=arguments[1],s=arguments[2];return i(s)||a(u)&&(s=u,u=null),i(s)&&n(r,s),i(u)&&(r.code=u),o&&o(r,e.exports),r}},function(e,t,r){"use strict";e.exports=function(){var e,t=Object.assign;return"function"==typeof t&&(t(e={foo:"raz"},{bar:"dwa"},{trzy:"trzy"}),e.foo+e.bar+e.trzy==="razdwatrzy")}},function(e,t,r){"use strict";var n=r(62),a=r(8),i=Math.max;e.exports=function(e,t){var r,o,u,s=i(arguments.length,2);for(e=Object(a(e)),u=function(n){try{e[n]=t[n]}catch(e){r||(r=e)}},o=1;o<s;++o)n(t=arguments[o]).forEach(u);if(void 0!==r)throw r;return e}},function(e,t,r){"use strict";e.exports=r(63)()?Object.keys:r(64)},function(e,t,r){"use strict";e.exports=function(){try{return Object.keys("primitive"),!0}catch(e){return!1}}},function(e,t,r){"use strict";var n=r(4),a=Object.keys;e.exports=function(e){return a(n(e)?Object(e):e)}},function(e,t,r){"use strict";var n=r(4),a={function:!0,object:!0};e.exports=function(e){return n(e)&&a[typeof e]||!1}},function(e,t,r){"use strict";var n=r(67),a=/^\s*class[\s{/}]/,i=Function.prototype.toString;e.exports=function(e){return!!n(e)&&!a.test(i.call(e))}},function(e,t,r){"use strict";var n=r(68);e.exports=function(e){if("function"!=typeof e)return!1;if(!hasOwnProperty.call(e,"length"))return!1;try{if("number"!=typeof e.length)return!1;if("function"!=typeof e.call)return!1;if("function"!=typeof e.apply)return!1}catch(e){return!1}return!n(e)}},function(e,t,r){"use strict";var n=r(69);e.exports=function(e){if(!n(e))return!1;try{return!!e.constructor&&e.constructor.prototype===e}catch(e){return!1}}},function(e,t,r){"use strict";var n=r(29),a={object:!0,function:!0,undefined:!0};e.exports=function(e){return!!n(e)&&hasOwnProperty.call(a,typeof e)}},function(e,t,r){"use strict";e.exports=r(71)()?String.prototype.contains:r(72)},function(e,t,r){"use strict";var n="razdwatrzy";e.exports=function(){return"function"==typeof n.contains&&(!0===n.contains("dwa")&&!1===n.contains("foo"))}},function(e,t,r){"use strict";var n=String.prototype.indexOf;e.exports=function(e){return n.call(this,e,arguments[1])>-1}},function(e,t,r){"use strict";var n,a,i,o,u,s,l,c=r(7),f=r(3),p=Function.prototype.apply,h=Function.prototype.call,d=Object.create,g=Object.defineProperty,y=Object.defineProperties,v=Object.prototype.hasOwnProperty,m={configurable:!0,enumerable:!1,writable:!0};a=function(e,t){var r,a;return f(t),a=this,n.call(this,e,r=function(){i.call(a,e,r),p.call(t,this,arguments)}),r.__eeOnceListener__=t,this},u={on:n=function(e,t){var r;return f(t),v.call(this,"__ee__")?r=this.__ee__:(r=m.value=d(null),g(this,"__ee__",m),m.value=null),r[e]?"object"==typeof r[e]?r[e].push(t):r[e]=[r[e],t]:r[e]=t,this},once:a,off:i=function(e,t){var r,n,a,i;if(f(t),!v.call(this,"__ee__"))return this;if(!(r=this.__ee__)[e])return this;if("object"==typeof(n=r[e]))for(i=0;a=n[i];++i)a!==t&&a.__eeOnceListener__!==t||(2===n.length?r[e]=n[i?0:1]:n.splice(i,1));else n!==t&&n.__eeOnceListener__!==t||delete r[e];return this},emit:o=function(e){var t,r,n,a,i;if(v.call(this,"__ee__")&&(a=this.__ee__[e]))if("object"==typeof a){for(r=arguments.length,i=new Array(r-1),t=1;t<r;++t)i[t-1]=arguments[t];for(a=a.slice(),t=0;n=a[t];++t)p.call(n,this,i)}else switch(arguments.length){case 1:h.call(a,this);break;case 2:h.call(a,this,arguments[1]);break;case 3:h.call(a,this,arguments[1],arguments[2]);break;default:for(r=arguments.length,i=new Array(r-1),t=1;t<r;++t)i[t-1]=arguments[t];p.call(a,this,i)}}},s={on:c(n),once:c(a),off:c(i),emit:c(o)},l=y({},s),e.exports=t=function(e){return null==e?d(l):y(Object(e),s)},t.methods=u},function(e,t,r){"use strict";var n,a=r(75),i=r(4),o=r(3),u=Array.prototype.slice;n=function(e){return this.map((function(t,r){return t?t(e[r]):e[r]})).concat(u.call(e,this.length))},e.exports=function(e){return(e=a(e)).forEach((function(e){i(e)&&o(e)})),n.bind(e)}},function(e,t,r){"use strict";var n=r(17),a=Array.isArray;e.exports=function(e){return a(e)?e:n(e)}},function(e,t,r){"use strict";e.exports=function(){var e,t,r=Array.from;return"function"==typeof r&&(t=r(e=["raz","dwa"]),Boolean(t&&t!==e&&"dwa"===t[1]))}},function(e,t,r){"use strict";var n=r(78).iterator,a=r(87),i=r(88),o=r(5),u=r(3),s=r(8),l=r(4),c=r(89),f=Array.isArray,p=Function.prototype.call,h={configurable:!0,enumerable:!0,writable:!0,value:null},d=Object.defineProperty;e.exports=function(e){var t,r,g,y,v,m,b,_,S,A,T=arguments[1],w=arguments[2];if(e=Object(s(e)),l(T)&&u(T),this&&this!==Array&&i(this))t=this;else{if(!T){if(a(e))return 1!==(v=e.length)?Array.apply(null,e):((y=new Array(1))[0]=e[0],y);if(f(e)){for(y=new Array(v=e.length),r=0;r<v;++r)y[r]=e[r];return y}}y=[]}if(!f(e))if(void 0!==(S=e[n])){for(b=u(S).call(e),t&&(y=new t),_=b.next(),r=0;!_.done;)A=T?p.call(T,w,_.value,r):_.value,t?(h.value=A,d(y,r,h)):y[r]=A,_=b.next(),++r;v=r}else if(c(e)){for(v=e.length,t&&(y=new t),r=0,g=0;r<v;++r)A=e[r],r+1<v&&(m=A.charCodeAt(0))>=55296&&m<=56319&&(A+=e[++r]),A=T?p.call(T,w,A,g):A,t?(h.value=A,d(y,g,h)):y[g]=A,++g;v=g}if(void 0===v)for(v=o(e.length),t&&(y=new t(v)),r=0;r<v;++r)A=T?p.call(T,w,e[r],r):e[r],t?(h.value=A,d(y,r,h)):y[r]=A;return t&&(h.value=null,y.length=v),y}},function(e,t,r){"use strict";e.exports=r(79)()?r(13).Symbol:r(82)},function(e,t,r){"use strict";var n=r(13),a={object:!0,symbol:!0};e.exports=function(){var e,t=n.Symbol;if("function"!=typeof t)return!1;e=t("test symbol");try{String(e)}catch(e){return!1}return!!a[typeof t.iterator]&&(!!a[typeof t.toPrimitive]&&!!a[typeof t.toStringTag])}},function(e,t,r){"use strict";e.exports=function(){return"object"==typeof globalThis&&(!!globalThis&&globalThis.Array===Array)}},function(e,t){var r=function(){if("object"==typeof self&&self)return self;if("object"==typeof window&&window)return window;throw new Error("Unable to resolve global `this`")};e.exports=function(){if(this)return this;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch(e){return r()}try{return __global__||r()}finally{delete Object.prototype.__global__}}()},function(e,t,r){"use strict";var n,a,i,o=r(7),u=r(30),s=r(13).Symbol,l=r(84),c=r(85),f=r(86),p=Object.create,h=Object.defineProperties,d=Object.defineProperty;if("function"==typeof s)try{String(s()),i=!0}catch(e){}else s=null;a=function(e){if(this instanceof a)throw new TypeError("Symbol is not a constructor");return n(e)},e.exports=n=function e(t){var r;if(this instanceof e)throw new TypeError("Symbol is not a constructor");return i?s(t):(r=p(a.prototype),t=void 0===t?"":String(t),h(r,{__description__:o("",t),__name__:o("",l(t))}))},c(n),f(n),h(a.prototype,{constructor:o(n),toString:o("",(function(){return this.__name__}))}),h(n.prototype,{toString:o((function(){return"Symbol ("+u(this).__description__+")"})),valueOf:o((function(){return u(this)}))}),d(n.prototype,n.toPrimitive,o("",(function(){var e=u(this);return"symbol"==typeof e?e:e.toString()}))),d(n.prototype,n.toStringTag,o("c","Symbol")),d(a.prototype,n.toStringTag,o("c",n.prototype[n.toStringTag])),d(a.prototype,n.toPrimitive,o("c",n.prototype[n.toPrimitive]))},function(e,t,r){"use strict";e.exports=function(e){return!!e&&("symbol"==typeof e||!!e.constructor&&("Symbol"===e.constructor.name&&"Symbol"===e[e.constructor.toStringTag]))}},function(e,t,r){"use strict";var n=r(7),a=Object.create,i=Object.defineProperty,o=Object.prototype,u=a(null);e.exports=function(e){for(var t,r,a=0;u[e+(a||"")];)++a;return u[e+=a||""]=!0,i(o,t="@@"+e,n.gs(null,(function(e){r||(r=!0,i(this,t,n(e)),r=!1)}))),t}},function(e,t,r){"use strict";var n=r(7),a=r(13).Symbol;e.exports=function(e){return Object.defineProperties(e,{hasInstance:n("",a&&a.hasInstance||e("hasInstance")),isConcatSpreadable:n("",a&&a.isConcatSpreadable||e("isConcatSpreadable")),iterator:n("",a&&a.iterator||e("iterator")),match:n("",a&&a.match||e("match")),replace:n("",a&&a.replace||e("replace")),search:n("",a&&a.search||e("search")),species:n("",a&&a.species||e("species")),split:n("",a&&a.split||e("split")),toPrimitive:n("",a&&a.toPrimitive||e("toPrimitive")),toStringTag:n("",a&&a.toStringTag||e("toStringTag")),unscopables:n("",a&&a.unscopables||e("unscopables"))})}},function(e,t,r){"use strict";var n=r(7),a=r(30),i=Object.create(null);e.exports=function(e){return Object.defineProperties(e,{for:n((function(t){return i[t]?i[t]:i[t]=e(String(t))})),keyFor:n((function(e){var t;for(t in a(e),i)if(i[t]===e)return t}))})}},function(e,t,r){"use strict";var n=Object.prototype.toString,a=n.call(function(){return arguments}());e.exports=function(e){return n.call(e)===a}},function(e,t,r){"use strict";var n=Object.prototype.toString,a=RegExp.prototype.test.bind(/^[object [A-Za-z0-9]*Function]$/);e.exports=function(e){return"function"==typeof e&&a(n.call(e))}},function(e,t,r){"use strict";var n=Object.prototype.toString,a=n.call("");e.exports=function(e){return"string"==typeof e||e&&"object"==typeof e&&(e instanceof String||n.call(e)===a)||!1}},function(e,t,r){"use strict";var n=r(3);e.exports=function(e){var t;return"function"==typeof e?{set:e,get:e}:(t={get:n(e.get)},void 0!==e.set?(t.set=n(e.set),e.delete&&(t.delete=n(e.delete)),e.clear&&(t.clear=n(e.clear)),t):(t.set=t.get,t))}},function(e,t,r){"use strict";e.exports=function(e){var t,r,n=e.length;if(!n)return"";for(t=String(e[r=0]);--n;)t+=""+e[++r];return t}},function(e,t,r){"use strict";e.exports=function(e){return e?function(t){for(var r=String(t[0]),n=0,a=e;--a;)r+=""+t[++n];return r}:function(){return""}}},function(e,t,r){"use strict";var n=r(18),a=Object.create;e.exports=function(){var e=0,t=[],r=a(null);return{get:function(e){var r,a=0,i=t,o=e.length;if(0===o)return i[o]||null;if(i=i[o]){for(;a<o-1;){if(-1===(r=n.call(i[0],e[a])))return null;i=i[1][r],++a}return-1===(r=n.call(i[0],e[a]))?null:i[1][r]||null}return null},set:function(a){var i,o=0,u=t,s=a.length;if(0===s)u[s]=++e;else{for(u[s]||(u[s]=[[],[]]),u=u[s];o<s-1;)-1===(i=n.call(u[0],a[o]))&&(i=u[0].push(a[o])-1,u[1].push([[],[]])),u=u[1][i],++o;-1===(i=n.call(u[0],a[o]))&&(i=u[0].push(a[o])-1),u[1][i]=++e}return r[e]=a,e},delete:function(e){var a,i=0,o=t,u=r[e],s=u.length,l=[];if(0===s)delete o[s];else if(o=o[s]){for(;i<s-1;){if(-1===(a=n.call(o[0],u[i])))return;l.push(o,a),o=o[1][a],++i}if(-1===(a=n.call(o[0],u[i])))return;for(e=o[1][a],o[0].splice(a,1),o[1].splice(a,1);!o[0].length&&l.length;)a=l.pop(),(o=l.pop())[0].splice(a,1),o[1].splice(a,1)}delete r[e]},clear:function(){t=[],r=a(null)}}}},function(e,t,r){"use strict";e.exports=r(95)()?Number.isNaN:r(96)},function(e,t,r){"use strict";e.exports=function(){var e=Number.isNaN;return"function"==typeof e&&(!e({})&&e(NaN)&&!e(34))}},function(e,t,r){"use strict";e.exports=function(e){return e!=e}},function(e,t,r){"use strict";var n=r(18);e.exports=function(){var e=0,t=[],r=[];return{get:function(e){var a=n.call(t,e[0]);return-1===a?null:r[a]},set:function(n){return t.push(n[0]),r.push(++e),e},delete:function(e){var a=n.call(r,e);-1!==a&&(t.splice(a,1),r.splice(a,1))},clear:function(){t=[],r=[]}}}},function(e,t,r){"use strict";var n=r(18),a=Object.create;e.exports=function(e){var t=0,r=[[],[]],i=a(null);return{get:function(t){for(var a,i=0,o=r;i<e-1;){if(-1===(a=n.call(o[0],t[i])))return null;o=o[1][a],++i}return-1===(a=n.call(o[0],t[i]))?null:o[1][a]||null},set:function(a){for(var o,u=0,s=r;u<e-1;)-1===(o=n.call(s[0],a[u]))&&(o=s[0].push(a[u])-1,s[1].push([[],[]])),s=s[1][o],++u;return-1===(o=n.call(s[0],a[u]))&&(o=s[0].push(a[u])-1),s[1][o]=++t,i[t]=a,t},delete:function(t){for(var a,o=0,u=r,s=[],l=i[t];o<e-1;){if(-1===(a=n.call(u[0],l[o])))return;s.push(u,a),u=u[1][a],++o}if(-1!==(a=n.call(u[0],l[o]))){for(t=u[1][a],u[0].splice(a,1),u[1].splice(a,1);!u[0].length&&s.length;)a=s.pop(),(u=s.pop())[0].splice(a,1),u[1].splice(a,1);delete i[t]}},clear:function(){r=[[],[]],i=a(null)}}}},function(e,t,r){"use strict";var n=r(17),a=r(31),i=r(28),o=r(27),u=r(19),s=Array.prototype.slice,l=Function.prototype.apply,c=Object.create;r(6).async=function(e,t){var r,f,p,h=c(null),d=c(null),g=t.memoized,y=t.original;t.memoized=o((function(e){var t=arguments,n=t[t.length-1];return"function"==typeof n&&(r=n,t=s.call(t,0,-1)),g.apply(f=this,p=t)}),g);try{i(t.memoized,g)}catch(e){}t.on("get",(function(e){var n,a,i;if(r){if(h[e])return"function"==typeof h[e]?h[e]=[h[e],r]:h[e].push(r),void(r=null);n=r,a=f,i=p,r=f=p=null,u((function(){var o;hasOwnProperty.call(d,e)?(o=d[e],t.emit("getasync",e,i,a),l.call(n,o.context,o.args)):(r=n,f=a,p=i,g.apply(a,i))}))}})),t.original=function(){var e,a,i,o;return r?(e=n(arguments),a=function e(r){var a,i,s=e.id;if(null!=s){if(delete e.id,a=h[s],delete h[s],a)return i=n(arguments),t.has(s)&&(r?t.delete(s):(d[s]={context:this,args:i},t.emit("setasync",s,"function"==typeof a?1:a.length))),"function"==typeof a?o=l.call(a,this,i):a.forEach((function(e){o=l.call(e,this,i)}),this),o}else u(l.bind(e,this,arguments))},i=r,r=f=p=null,e.push(a),o=l.call(y,this,e),a.cb=i,r=a,o):l.call(y,this,arguments)},t.on("set",(function(e){r?(h[e]?"function"==typeof h[e]?h[e]=[h[e],r.cb]:h[e].push(r.cb):h[e]=r.cb,delete r.cb,r.id=e,r=null):t.delete(e)})),t.on("delete",(function(e){var r;hasOwnProperty.call(h,e)||d[e]&&(r=d[e],delete d[e],t.emit("deleteasync",e,s.call(r.args,1)))})),t.on("clear",(function(){var e=d;d=c(null),t.emit("clearasync",a(e,(function(e){return s.call(e.args,1)})))}))}},function(e,t,r){(function(e){var n=void 0!==e&&e||"undefined"!=typeof self&&self||window,a=Function.prototype.apply;function i(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new i(a.call(setTimeout,n,arguments),clearTimeout)},t.setInterval=function(){return new i(a.call(setInterval,n,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},i.prototype.unref=i.prototype.ref=function(){},i.prototype.close=function(){this._clearFn.call(n,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout((function(){e._onTimeout&&e._onTimeout()}),t))},r(101),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(this,r(32))},function(e,t,r){(function(e,t){!function(e,r){"use strict";if(!e.setImmediate){var n,a,i,o,u,s=1,l={},c=!1,f=e.document,p=Object.getPrototypeOf&&Object.getPrototypeOf(e);p=p&&p.setTimeout?p:e,"[object process]"==={}.toString.call(e.process)?n=function(e){t.nextTick((function(){d(e)}))}:!function(){if(e.postMessage&&!e.importScripts){var t=!0,r=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=r,t}}()?e.MessageChannel?((i=new MessageChannel).port1.onmessage=function(e){d(e.data)},n=function(e){i.port2.postMessage(e)}):f&&"onreadystatechange"in f.createElement("script")?(a=f.documentElement,n=function(e){var t=f.createElement("script");t.onreadystatechange=function(){d(e),t.onreadystatechange=null,a.removeChild(t),t=null},a.appendChild(t)}):n=function(e){setTimeout(d,0,e)}:(o="setImmediate$"+Math.random()+"$",u=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(o)&&d(+t.data.slice(o.length))},e.addEventListener?e.addEventListener("message",u,!1):e.attachEvent("onmessage",u),n=function(t){e.postMessage(o+t,"*")}),p.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),r=0;r<t.length;r++)t[r]=arguments[r+1];var a={callback:e,args:t};return l[s]=a,n(s),s++},p.clearImmediate=h}function h(e){delete l[e]}function d(e){if(c)setTimeout(d,0,e);else{var t=l[e];if(t){c=!0;try{!function(e){var t=e.callback,r=e.args;switch(r.length){case 0:t();break;case 1:t(r[0]);break;case 2:t(r[0],r[1]);break;case 3:t(r[0],r[1],r[2]);break;default:t.apply(void 0,r)}}(t)}finally{h(e),c=!1}}}}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,r(32),r(9))},function(e,t,r){"use strict";var n=r(31),a=r(103),i=r(104),o=r(106),u=r(34),s=r(19),l=Object.create,c=a("then","then:finally","done","done:finally");r(6).promise=function(e,t){var r=l(null),a=l(null),f=l(null);if(!0===e)e=null;else if(e=i(e),!c[e])throw new TypeError("'"+o(e)+"' is not valid promise mode");t.on("set",(function(n,i,o){var l=!1;if(!u(o))return a[n]=o,void t.emit("setasync",n,1);r[n]=1,f[n]=o;var c=function(e){var i=r[n];if(l)throw new Error("Memoizee error: Detected unordered then|done & finally resolution, which in turn makes proper detection of success/failure impossible (when in 'done:finally' mode)\nConsider to rely on 'then' or 'done' mode instead.");i&&(delete r[n],a[n]=e,t.emit("setasync",n,i))},p=function(){l=!0,r[n]&&(delete r[n],delete f[n],t.delete(n))},h=e;if(h||(h="then"),"then"===h){var d=function(){s(p)};"function"==typeof(o=o.then((function(e){s(c.bind(this,e))}),d)).finally&&o.finally(d)}else if("done"===h){if("function"!=typeof o.done)throw new Error("Memoizee error: Retrieved promise does not implement 'done' in 'done' mode");o.done(c,p)}else if("done:finally"===h){if("function"!=typeof o.done)throw new Error("Memoizee error: Retrieved promise does not implement 'done' in 'done:finally' mode");if("function"!=typeof o.finally)throw new Error("Memoizee error: Retrieved promise does not implement 'finally' in 'done:finally' mode");o.done(c),o.finally(p)}})),t.on("get",(function(e,n,a){var i;if(r[e])++r[e];else{i=f[e];var o=function(){t.emit("getasync",e,n,a)};u(i)?"function"==typeof i.done?i.done(o):i.then((function(){s(o)})):o()}})),t.on("delete",(function(e){if(delete f[e],r[e])delete r[e];else if(hasOwnProperty.call(a,e)){var n=a[e];delete a[e],t.emit("deleteasync",e,[n])}})),t.on("clear",(function(){var e=a;a=l(null),r=l(null),f=l(null),t.emit("clearasync",n(e,(function(e){return[e]})))}))}},function(e,t,r){"use strict";var n=Array.prototype.forEach,a=Object.create;e.exports=function(e){var t=a(null);return n.call(arguments,(function(e){t[e]=!0})),t}},function(e,t,r){"use strict";var n=r(8),a=r(105);e.exports=function(e){return a(n(e))}},function(e,t,r){"use strict";var n=r(33);e.exports=function(e){try{return e&&n(e.toString)?e.toString():String(e)}catch(e){throw new TypeError("Passed argument cannot be stringifed")}}},function(e,t,r){"use strict";var n=r(107),a=/[\n\r\u2028\u2029]/g;e.exports=function(e){var t=n(e);return t.length>100&&(t=t.slice(0,99)+"â¦"),t=t.replace(a,(function(e){return JSON.stringify(e).slice(1,-1)}))}},function(e,t,r){"use strict";var n=r(33);e.exports=function(e){try{return e&&n(e.toString)?e.toString():String(e)}catch(e){return"<Non-coercible to string value>"}}},function(e,t,r){"use strict";var n=r(3),a=r(12),i=r(6),o=Function.prototype.apply;i.dispose=function(e,t,r){var u;if(n(e),r.async&&i.async||r.promise&&i.promise)return t.on("deleteasync",u=function(t,r){o.call(e,null,r)}),void t.on("clearasync",(function(e){a(e,(function(e,t){u(t,e)}))}));t.on("delete",u=function(t,r){e(r)}),t.on("clear",(function(e){a(e,(function(e,t){u(t,e)}))}))}},function(e,t,r){"use strict";var n=r(17),a=r(12),i=r(19),o=r(34),u=r(110),s=r(6),l=Function.prototype,c=Math.max,f=Math.min,p=Object.create;s.maxAge=function(e,t,r){var h,d,g,y;(e=u(e))&&(h=p(null),d=r.async&&s.async||r.promise&&s.promise?"async":"",t.on("set"+d,(function(r){h[r]=setTimeout((function(){t.delete(r)}),e),"function"==typeof h[r].unref&&h[r].unref(),y&&(y[r]&&"nextTick"!==y[r]&&clearTimeout(y[r]),y[r]=setTimeout((function(){delete y[r]}),g),"function"==typeof y[r].unref&&y[r].unref())})),t.on("delete"+d,(function(e){clearTimeout(h[e]),delete h[e],y&&("nextTick"!==y[e]&&clearTimeout(y[e]),delete y[e])})),r.preFetch&&(g=!0===r.preFetch||isNaN(r.preFetch)?.333:c(f(Number(r.preFetch),1),0))&&(y={},g=(1-g)*e,t.on("get"+d,(function(e,a,u){y[e]||(y[e]="nextTick",i((function(){var i;"nextTick"===y[e]&&(delete y[e],t.delete(e),r.async&&(a=n(a)).push(l),i=t.memoized.apply(u,a),r.promise&&o(i)&&("function"==typeof i.done?i.done(l,l):i.then(l,l)))})))}))),t.on("clear"+d,(function(){a(h,(function(e){clearTimeout(e)})),h={},y&&(a(y,(function(e){"nextTick"!==e&&clearTimeout(e)})),y={})})))}},function(e,t,r){"use strict";var n=r(5),a=r(111);e.exports=function(e){if((e=n(e))>a)throw new TypeError(e+" exceeds maximum possible timeout");return e}},function(e,t,r){"use strict";e.exports=2147483647},function(e,t,r){"use strict";var n=r(5),a=r(113),i=r(6);i.max=function(e,t,r){var o,u,s;(e=n(e))&&(u=a(e),o=r.async&&i.async||r.promise&&i.promise?"async":"",t.on("set"+o,s=function(e){void 0!==(e=u.hit(e))&&t.delete(e)}),t.on("get"+o,s),t.on("delete"+o,u.delete),t.on("clear"+o,u.clear))}},function(e,t,r){"use strict";var n=r(5),a=Object.create,i=Object.prototype.hasOwnProperty;e.exports=function(e){var t,r=0,o=1,u=a(null),s=a(null),l=0;return e=n(e),{hit:function(n){var a=s[n],c=++l;if(u[c]=n,s[n]=c,!a){if(++r<=e)return;return n=u[o],t(n),n}if(delete u[a],o===a)for(;!i.call(u,++o);)continue},delete:t=function(e){var t=s[e];if(t&&(delete u[t],delete s[e],--r,o===t)){if(!r)return l=0,void(o=1);for(;!i.call(u,++o);)continue}},clear:function(){r=0,o=1,u=a(null),s=a(null),l=0}}}},function(e,t,r){"use strict";var n=r(7),a=r(6),i=Object.create,o=Object.defineProperties;a.refCounter=function(e,t,r){var u,s;u=i(null),s=r.async&&a.async||r.promise&&a.promise?"async":"",t.on("set"+s,(function(e,t){u[e]=t||1})),t.on("get"+s,(function(e){++u[e]})),t.on("delete"+s,(function(e){delete u[e]})),t.on("clear"+s,(function(){u={}})),o(t.memoized,{deleteRef:n((function(){var e=t.get(arguments);return null===e?null:u[e]?!--u[e]&&(t.delete(e),!0):null})),getRefCount:n((function(){var e=t.get(arguments);return null===e?0:u[e]?u[e]:0}))})}},function(e,t,r){var n=r(116),a=r(117);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.i,a,""]]);var i={insert:"head",singleton:!1},o=(n(a,i),a.locals?a.locals:{});e.exports=o},function(e,t,r){"use strict";var n,a=function(){return void 0===n&&(n=Boolean(window&&document&&document.all&&!window.atob)),n},i=function(){var e={};return function(t){if(void 0===e[t]){var r=document.querySelector(t);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(e){r=null}e[t]=r}return e[t]}}(),o=[];function u(e){for(var t=-1,r=0;r<o.length;r++)if(o[r].identifier===e){t=r;break}return t}function s(e,t){for(var r={},n=[],a=0;a<e.length;a++){var i=e[a],s=t.base?i[0]+t.base:i[0],l=r[s]||0,c="".concat(s," ").concat(l);r[s]=l+1;var f=u(c),p={css:i[1],media:i[2],sourceMap:i[3]};-1!==f?(o[f].references++,o[f].updater(p)):o.push({identifier:c,updater:y(p,t),references:1}),n.push(c)}return n}function l(e){var t=document.createElement("style"),n=e.attributes||{};if(void 0===n.nonce){var a=r.nc;a&&(n.nonce=a)}if(Object.keys(n).forEach((function(e){t.setAttribute(e,n[e])})),"function"==typeof e.insert)e.insert(t);else{var o=i(e.insert||"head");if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(t)}return t}var c,f=(c=[],function(e,t){return c[e]=t,c.filter(Boolean).join("\n")});function p(e,t,r,n){var a=r?"":n.media?"@media ".concat(n.media," {").concat(n.css,"}"):n.css;if(e.styleSheet)e.styleSheet.cssText=f(t,a);else{var i=document.createTextNode(a),o=e.childNodes;o[t]&&e.removeChild(o[t]),o.length?e.insertBefore(i,o[t]):e.appendChild(i)}}function h(e,t,r){var n=r.css,a=r.media,i=r.sourceMap;if(a?e.setAttribute("media",a):e.removeAttribute("media"),i&&btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}var d=null,g=0;function y(e,t){var r,n,a;if(t.singleton){var i=g++;r=d||(d=l(t)),n=p.bind(null,r,i,!1),a=p.bind(null,r,i,!0)}else r=l(t),n=h.bind(null,r,t),a=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(r)};return n(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;n(e=t)}else a()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=a());var r=s(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var n=0;n<r.length;n++){var a=u(r[n]);o[a].references--}for(var i=s(e,t),l=0;l<r.length;l++){var c=u(r[l]);0===o[c].references&&(o[c].updater(),o.splice(c,1))}r=i}}}},function(e,t,r){(t=r(118)(!0)).push([e.i,'.min-width-10{min-width:10rem}.min-width-12{min-width:12rem}.min-width-20{min-width:20rem}.gf-form-select-wrapper select.gf-form-input{height:2.64rem}.gf-form-select-wrapper--caret-indent.gf-form-select-wrapper::after{right:.775rem}.ml-1{margin-left:2px !important}.join-r .gf-form-label{margin-right:0}.join-l .gf-form-label{border-left-width:0;border-radius:0}.mash-r .gf-form-label{padding-right:0}.mash-l .gf-form-label{padding-left:0}.irondb-tag-op .gf-form-label,.irondb-tag-end .gf-form-label{color:#eb7b18}.irondb-tag-cat .gf-form-label{color:#598}.irondb-tag-val .gf-form-label{color:#5ca}.irondb-tag-pair .gf-form-label,.irondb-tag-sep .gf-form-label{color:#888}.irondb-tag-op .gf-form-label:focus,.irondb-tag-op .gf-form-label:hover,.irondb-tag-cat .gf-form-label:focus,.irondb-tag-cat .gf-form-label:hover,.irondb-tag-val .gf-form-label:focus,.irondb-tag-val .gf-form-label:hover,.gf-form-label:focus .template-variable,.gf-form-label:hover .template-variable{color:#fff}.irondb-tag-op .typeahead.dropdown-menu [data-value=REMOVE] a{color:#bb002c !important}.irondb-tag-val .typeahead.dropdown-menu [data-value^="$"] a{color:#33b5e5 !important}.irondb-tag-op .typeahead.dropdown-menu [data-value="or("] a,.irondb-tag-op .typeahead.dropdown-menu [data-value="not("] a,.irondb-tag-op .typeahead.dropdown-menu [data-value="and("] a,.irondb-tag-plus .typeahead.dropdown-menu [data-value="or("] a,.irondb-tag-plus .typeahead.dropdown-menu [data-value="not("] a,.irondb-tag-plus .typeahead.dropdown-menu [data-value="and("] a{color:#eb7b18 !important}.irondb-tag-op .typeahead.dropdown-menu [data-value=REMOVE] a:focus,.irondb-tag-op .typeahead.dropdown-menu [data-value=REMOVE] a:hover,.irondb-tag-val .typeahead.dropdown-menu [data-value^="$"] a:focus,.irondb-tag-val .typeahead.dropdown-menu [data-value^="$"] a:hover,.irondb-tag-op .typeahead.dropdown-menu [data-value="or("] a:focus,.irondb-tag-op .typeahead.dropdown-menu [data-value="or("] a:hover,.irondb-tag-op .typeahead.dropdown-menu [data-value="not("] a:focus,.irondb-tag-op .typeahead.dropdown-menu [data-value="not("] a:hover,.irondb-tag-op .typeahead.dropdown-menu [data-value="and("] a:focus,.irondb-tag-op .typeahead.dropdown-menu [data-value="and("] a:hover,.irondb-tag-plus .typeahead.dropdown-menu [data-value="or("] a:focus,.irondb-tag-plus .typeahead.dropdown-menu [data-value="or("] a:hover,.irondb-tag-plus .typeahead.dropdown-menu [data-value="not("] a:focus,.irondb-tag-plus .typeahead.dropdown-menu [data-value="not("] a:hover,.irondb-tag-plus .typeahead.dropdown-menu [data-value="and("] a:focus,.irondb-tag-plus .typeahead.dropdown-menu [data-value="and("] a:hover{color:#fff !important}',"",{version:3,sources:["query_editor.css"],names:[],mappings:"AAAA,cAAc,eAAe,CAAC,cAAc,eAAe,CAAC,cAAc,eAAe,CAAC,6CAA6C,cAAc,CAAC,oEAAoE,aAAa,CAAC,MAAM,0BAA0B,CAAC,uBAAuB,cAAc,CAAC,uBAAuB,mBAAmB,CAAC,eAAe,CAAC,uBAAuB,eAAe,CAAC,uBAAuB,cAAc,CAAC,6DAA6D,aAAa,CAAC,+BAA+B,UAAU,CAAC,+BAA+B,UAAU,CAAC,+DAA+D,UAAU,CAAC,4SAA4S,UAAU,CAAC,8DAA8D,wBAAwB,CAAC,6DAA6D,wBAAwB,CAAC,wXAAwX,wBAAwB,CAAC,skCAAskC,qBAAqB",file:"query_editor.css",sourcesContent:['.min-width-10{min-width:10rem}.min-width-12{min-width:12rem}.min-width-20{min-width:20rem}.gf-form-select-wrapper select.gf-form-input{height:2.64rem}.gf-form-select-wrapper--caret-indent.gf-form-select-wrapper::after{right:.775rem}.ml-1{margin-left:2px !important}.join-r .gf-form-label{margin-right:0}.join-l .gf-form-label{border-left-width:0;border-radius:0}.mash-r .gf-form-label{padding-right:0}.mash-l .gf-form-label{padding-left:0}.irondb-tag-op .gf-form-label,.irondb-tag-end .gf-form-label{color:#eb7b18}.irondb-tag-cat .gf-form-label{color:#598}.irondb-tag-val .gf-form-label{color:#5ca}.irondb-tag-pair .gf-form-label,.irondb-tag-sep .gf-form-label{color:#888}.irondb-tag-op .gf-form-label:focus,.irondb-tag-op .gf-form-label:hover,.irondb-tag-cat .gf-form-label:focus,.irondb-tag-cat .gf-form-label:hover,.irondb-tag-val .gf-form-label:focus,.irondb-tag-val .gf-form-label:hover,.gf-form-label:focus .template-variable,.gf-form-label:hover .template-variable{color:#fff}.irondb-tag-op .typeahead.dropdown-menu [data-value=REMOVE] a{color:#bb002c !important}.irondb-tag-val .typeahead.dropdown-menu [data-value^="$"] a{color:#33b5e5 !important}.irondb-tag-op .typeahead.dropdown-menu [data-value="or("] a,.irondb-tag-op .typeahead.dropdown-menu [data-value="not("] a,.irondb-tag-op .typeahead.dropdown-menu [data-value="and("] a,.irondb-tag-plus .typeahead.dropdown-menu [data-value="or("] a,.irondb-tag-plus .typeahead.dropdown-menu [data-value="not("] a,.irondb-tag-plus .typeahead.dropdown-menu [data-value="and("] a{color:#eb7b18 !important}.irondb-tag-op .typeahead.dropdown-menu [data-value=REMOVE] a:focus,.irondb-tag-op .typeahead.dropdown-menu [data-value=REMOVE] a:hover,.irondb-tag-val .typeahead.dropdown-menu [data-value^="$"] a:focus,.irondb-tag-val .typeahead.dropdown-menu [data-value^="$"] a:hover,.irondb-tag-op .typeahead.dropdown-menu [data-value="or("] a:focus,.irondb-tag-op .typeahead.dropdown-menu [data-value="or("] a:hover,.irondb-tag-op .typeahead.dropdown-menu [data-value="not("] a:focus,.irondb-tag-op .typeahead.dropdown-menu [data-value="not("] a:hover,.irondb-tag-op .typeahead.dropdown-menu [data-value="and("] a:focus,.irondb-tag-op .typeahead.dropdown-menu [data-value="and("] a:hover,.irondb-tag-plus .typeahead.dropdown-menu [data-value="or("] a:focus,.irondb-tag-plus .typeahead.dropdown-menu [data-value="or("] a:hover,.irondb-tag-plus .typeahead.dropdown-menu [data-value="not("] a:focus,.irondb-tag-plus .typeahead.dropdown-menu [data-value="not("] a:hover,.irondb-tag-plus .typeahead.dropdown-menu [data-value="and("] a:focus,.irondb-tag-plus .typeahead.dropdown-menu [data-value="and("] a:hover{color:#fff !important}']}]),e.exports=t},function(e,t,r){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var r=function(e,t){var r=e[1]||"",n=e[3];if(!n)return r;if(t&&"function"==typeof btoa){var a=(o=n,u=btoa(unescape(encodeURIComponent(JSON.stringify(o)))),s="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(u),"/*# ".concat(s," */")),i=n.sources.map((function(e){return"/*# sourceURL=".concat(n.sourceRoot||"").concat(e," */")}));return[r].concat(i).concat([a]).join("\n")}var o,u,s;return[r].join("\n")}(t,e);return t[2]?"@media ".concat(t[2]," {").concat(r,"}"):r})).join("")},t.i=function(e,r,n){"string"==typeof e&&(e=[[null,e,""]]);var a={};if(n)for(var i=0;i<this.length;i++){var o=this[i][0];null!=o&&(a[o]=!0)}for(var u=0;u<e.length;u++){var s=[].concat(e[u]);n&&a[s[0]]||(r&&(s[2]?s[2]="".concat(r," and ").concat(s[2]):s[2]=r),t.push(s))}},t}},function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n);function i(e){return e=" ["+e+"] ",function(e){}}for(var o=r(35),u=r.n(o),s=r(36),l=r.n(s),c=[170,170,181,181,186,186,192,214,216,246,248,705,710,721,736,740,748,748,750,750,880,884,886,887,890,893,902,902,904,906,908,908,910,929,931,1013,1015,1153,1162,1319,1329,1366,1369,1369,1377,1415,1488,1514,1520,1522,1568,1610,1646,1647,1649,1747,1749,1749,1765,1766,1774,1775,1786,1788,1791,1791,1808,1808,1810,1839,1869,1957,1969,1969,1994,2026,2036,2037,2042,2042,2048,2069,2074,2074,2084,2084,2088,2088,2112,2136,2308,2361,2365,2365,2384,2384,2392,2401,2417,2423,2425,2431,2437,2444,2447,2448,2451,2472,2474,2480,2482,2482,2486,2489,2493,2493,2510,2510,2524,2525,2527,2529,2544,2545,2565,2570,2575,2576,2579,2600,2602,2608,2610,2611,2613,2614,2616,2617,2649,2652,2654,2654,2674,2676,2693,2701,2703,2705,2707,2728,2730,2736,2738,2739,2741,2745,2749,2749,2768,2768,2784,2785,2821,2828,2831,2832,2835,2856,2858,2864,2866,2867,2869,2873,2877,2877,2908,2909,2911,2913,2929,2929,2947,2947,2949,2954,2958,2960,2962,2965,2969,2970,2972,2972,2974,2975,2979,2980,2984,2986,2990,3001,3024,3024,3077,3084,3086,3088,3090,3112,3114,3123,3125,3129,3133,3133,3160,3161,3168,3169,3205,3212,3214,3216,3218,3240,3242,3251,3253,3257,3261,3261,3294,3294,3296,3297,3313,3314,3333,3340,3342,3344,3346,3386,3389,3389,3406,3406,3424,3425,3450,3455,3461,3478,3482,3505,3507,3515,3517,3517,3520,3526,3585,3632,3634,3635,3648,3654,3713,3714,3716,3716,3719,3720,3722,3722,3725,3725,3732,3735,3737,3743,3745,3747,3749,3749,3751,3751,3754,3755,3757,3760,3762,3763,3773,3773,3776,3780,3782,3782,3804,3805,3840,3840,3904,3911,3913,3948,3976,3980,4096,4138,4159,4159,4176,4181,4186,4189,4193,4193,4197,4198,4206,4208,4213,4225,4238,4238,4256,4293,4304,4346,4348,4348,4352,4680,4682,4685,4688,4694,4696,4696,4698,4701,4704,4744,4746,4749,4752,4784,4786,4789,4792,4798,4800,4800,4802,4805,4808,4822,4824,4880,4882,4885,4888,4954,4992,5007,5024,5108,5121,5740,5743,5759,5761,5786,5792,5866,5870,5872,5888,5900,5902,5905,5920,5937,5952,5969,5984,5996,5998,6e3,6016,6067,6103,6103,6108,6108,6176,6263,6272,6312,6314,6314,6320,6389,6400,6428,6480,6509,6512,6516,6528,6571,6593,6599,6656,6678,6688,6740,6823,6823,6917,6963,6981,6987,7043,7072,7086,7087,7104,7141,7168,7203,7245,7247,7258,7293,7401,7404,7406,7409,7424,7615,7680,7957,7960,7965,7968,8005,8008,8013,8016,8023,8025,8025,8027,8027,8029,8029,8031,8061,8064,8116,8118,8124,8126,8126,8130,8132,8134,8140,8144,8147,8150,8155,8160,8172,8178,8180,8182,8188,8305,8305,8319,8319,8336,8348,8450,8450,8455,8455,8458,8467,8469,8469,8473,8477,8484,8484,8486,8486,8488,8488,8490,8493,8495,8505,8508,8511,8517,8521,8526,8526,8544,8584,11264,11310,11312,11358,11360,11492,11499,11502,11520,11557,11568,11621,11631,11631,11648,11670,11680,11686,11688,11694,11696,11702,11704,11710,11712,11718,11720,11726,11728,11734,11736,11742,11823,11823,12293,12295,12321,12329,12337,12341,12344,12348,12353,12438,12445,12447,12449,12538,12540,12543,12549,12589,12593,12686,12704,12730,12784,12799,13312,13312,19893,19893,19968,19968,40907,40907,40960,42124,42192,42237,42240,42508,42512,42527,42538,42539,42560,42606,42623,42647,42656,42735,42775,42783,42786,42888,42891,42894,42896,42897,42912,42921,43002,43009,43011,43013,43015,43018,43020,43042,43072,43123,43138,43187,43250,43255,43259,43259,43274,43301,43312,43334,43360,43388,43396,43442,43471,43471,43520,43560,43584,43586,43588,43595,43616,43638,43642,43642,43648,43695,43697,43697,43701,43702,43705,43709,43712,43712,43714,43714,43739,43741,43777,43782,43785,43790,43793,43798,43808,43814,43816,43822,43968,44002,44032,44032,55203,55203,55216,55238,55243,55291,63744,64045,64048,64109,64112,64217,64256,64262,64275,64279,64285,64285,64287,64296,64298,64310,64312,64316,64318,64318,64320,64321,64323,64324,64326,64433,64467,64829,64848,64911,64914,64967,65008,65019,65136,65140,65142,65276,65313,65338,65345,65370,65382,65470,65474,65479,65482,65487,65490,65495,65498,65500,65536,65547,65549,65574,65576,65594,65596,65597,65599,65613,65616,65629,65664,65786,65856,65908,66176,66204,66208,66256,66304,66334,66352,66378,66432,66461,66464,66499,66504,66511,66513,66517,66560,66717,67584,67589,67592,67592,67594,67637,67639,67640,67644,67644,67647,67669,67840,67861,67872,67897,68096,68096,68112,68115,68117,68119,68121,68147,68192,68220,68352,68405,68416,68437,68448,68466,68608,68680,69635,69687,69763,69807,73728,74606,74752,74850,77824,78894,92160,92728,110592,110593,119808,119892,119894,119964,119966,119967,119970,119970,119973,119974,119977,119980,119982,119993,119995,119995,119997,120003,120005,120069,120071,120074,120077,120084,120086,120092,120094,120121,120123,120126,120128,120132,120134,120134,120138,120144,120146,120485,120488,120512,120514,120538,120540,120570,120572,120596,120598,120628,120630,120654,120656,120686,120688,120712,120714,120744,120746,120770,120772,120779,131072,131072,173782,173782,173824,173824,177972,177972,177984,177984,178205,178205,194560,195101],f=[],p=0;p<128;p++)f[p]=p>=48&&p<=57||36===p||126===p||124===p||p>=65&&p<=90||95===p||45===p||42===p||58===p||91===p||93===p||63===p||37===p||35===p||61===p||59===p||p>=97&&p<=122;var h=f;function d(e){this.input=e,this.char=1,this.from=1}function g(e){this.expression=e,this.lexer=new d(e),this.tokens=this.lexer.tokenize(),this.index=0}function y(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,i=[],o=!0,u=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(e){u=!0,a=e}finally{try{o||null==r.return||r.return()}finally{if(u)throw a}}return i}(e,t)||b(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=b(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){u=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(u)throw i}}}}function b(e,t){if(e){if("string"==typeof e)return _(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_(e,t):void 0}}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}d.prototype={peek:function(e){return this.input.charAt(e||0)},skip:function(e){e=e||1,this.char+=e,this.input=this.input.slice(e)},tokenize:function(){var e,t=[];if(void 0!==this.input)for(;e=this.next();)t.push(e);return t},next:function(){if(this.from=this.char,/\s/.test(this.peek())){for(;/\s/.test(this.peek());)this.from+=1,this.skip();if(""===this.peek())return null}var e=this.scanStringLiteral();return e||((e=this.scanPunctuator()||this.scanNumericLiteral()||this.scanIdentifier()||this.scanTemplateSequence())?(this.skip(e.value.length),e):null)},scanTemplateSequence:function(){return"["===this.peek()&&"["===this.peek(1)?{type:"templateStart",value:"[[",pos:this.char}:"]"===this.peek()&&"]"===this.peek(1)?{type:"templateEnd",value:"[[",pos:this.char}:null},scanIdentifier:function(){var e,t,r="",n=0;function i(e){for(var t=0;t<c.length;){if(e<c[t++])return!1;if(e<=c[t++])return!0}return!1}function o(e){return/^[0-9a-fA-F]$/.test(e)}var u=a.a.bind((function(){if(n+=1,"u"!==this.peek(n))return null;var e=this.peek(n+1),t=this.peek(n+2),r=this.peek(n+3),a=this.peek(n+4);return o(e)&&o(t)&&o(r)&&o(a)&&i(parseInt(e+t+r+a,16))?(n+=5,"\\u"+e+t+r+a):null}),this),s=a.a.bind((function(){var e=this.peek(n),t=e.charCodeAt(0);return"*"===e?(n+=1,e):92===t?u():t<128?f[t]?(n+=1,e):null:i(t)?(n+=1,e):null}),this),l=a.a.bind((function(){var e=this.peek(n),t=e.charCodeAt(0);return 92===t?u():t<128?h[t]?(n+=1,e):null:i(t)?(n+=1,e):null}),this);if(null===(t=s()))return null;for(r=t;null!==(t=l());)r+=t;switch(r){case"true":case"false":e="bool";break;default:e="identifier"}return{type:e,value:r,pos:this.char}},scanNumericLiteral:function(){var e,t=0,r="",n=this.input.length,a=this.peek(t);function i(e){return/^[0-9]$/.test(e)}function o(e){return/^[0-7]$/.test(e)}function u(e){return"$"===e||"_"===e||"\\"===e||e>="a"&&e<="z"||e>="A"&&e<="Z"}if("-"===a&&(r+=a,t+=1,a=this.peek(t)),"."!==a&&!i(a))return null;if("."!==a){if(r+=this.peek(t),t+=1,a=this.peek(t),"0"===r){if("x"===a||"X"===a){for(t+=1,r+=a;t<n&&(a=this.peek(t),/^[0-9a-fA-F]$/.test(a));)r+=a,t+=1;return r.length<=2?{type:"number",value:r,isMalformed:!0,pos:this.char}:t<n&&u(a=this.peek(t))?null:{type:"number",value:r,base:16,isMalformed:!1,pos:this.char}}if(o(a)){for(t+=1,r+=a,e=!1;t<n;){if(i(a=this.peek(t))&&(e=!0),!o(a)){if(!this.isPunctuator(a))return null;break}r+=a,t+=1}return t<n&&u(a=this.peek(t))?null:{type:"number",value:r,base:8,isMalformed:e}}i(a)&&(t+=1,r+=a)}for(;t<n&&i(a=this.peek(t));)r+=a,t+=1}if("."===a)for(r+=a,t+=1;t<n&&i(a=this.peek(t));)r+=a,t+=1;if("e"===a||"E"===a){if(r+=a,t+=1,"+"!==(a=this.peek(t))&&"-"!==a||(r+=this.peek(t),t+=1),!i(a=this.peek(t)))return null;for(r+=a,t+=1;t<n&&i(a=this.peek(t));)r+=a,t+=1}return t<n&&(a=this.peek(t),!this.isPunctuator(a))?null:{type:"number",value:r,base:10,pos:this.char,isMalformed:!isFinite(+r)}},isPunctuator:function(e){switch(e){case".":case"(":case")":case",":case"{":case"}":return!0}return!1},scanPunctuator:function(){var e=this.peek();return this.isPunctuator(e)?{type:e,value:e,pos:this.char}:null},scanStringLiteral:function(){var e=this.peek();if('"'!==e&&"'"!==e)return null;var t="";for(this.skip();this.peek()!==e;){if(""===this.peek())return{type:"string",value:t,isUnclosed:!0,quote:e,pos:this.char};t+=this.peek(),this.skip(1)}return this.skip(),{type:"string",value:t,isUnclosed:!1,quote:e,pos:this.char}}},g.prototype={getAst:function(){return this.start()},start:function(){try{return this.functionCall()||this.metricExpression()}catch(e){return{type:"error",message:e.message,pos:e.pos}}},curlyBraceSegment:function(){if(this.match("identifier","{")||this.match("{")){for(var e="";!this.match("")&&!this.match("}");)e+=this.consumeToken().value;return this.match("}")||this.errorMark("Expected closing '}'"),e+=this.consumeToken().value,this.match("identifier")&&(e+=this.consumeToken().value),{type:"segment",value:e}}return null},metricSegment:function(){var e=this.curlyBraceSegment();if(e)return e;if(this.match("identifier")||this.match("number")){var t=this.consumeToken().value.split(".");return 2===t.length&&(this.tokens.splice(this.index,0,{type:"."}),this.tokens.splice(this.index+1,0,{type:"number",value:t[1]})),{type:"segment",value:t[0]}}this.match("templateStart")||this.errorMark("Expected metric identifier"),this.consumeToken(),this.match("identifier")||this.errorMark("Expected identifier after templateStart");var r={type:"template",value:this.consumeToken().value};return this.match("templateEnd")||this.errorMark("Expected templateEnd"),this.consumeToken(),r},metricExpression:function(){if(!(this.match("templateStart")||this.match("identifier")||this.match("number")||this.match("{")))return null;var e={type:"metric",segments:[]};for(e.segments.push(this.metricSegment());this.match(".");){this.consumeToken();var t=this.metricSegment();t||this.errorMark("Expected metric identifier"),e.segments.push(t)}return e},functionCall:function(){if(!this.match("identifier","("))return null;var e={type:"function",name:this.consumeToken().value};return this.consumeToken(),e.params=this.functionParameters(),this.match(")")||this.errorMark("Expected closing parenthesis"),this.consumeToken(),e},boolExpression:function(){return this.match("bool")?{type:"bool",value:"true"===this.consumeToken().value}:null},functionParameters:function(){if(this.match(")")||this.match(""))return[];var e=this.functionCall()||this.numericLiteral()||this.boolExpression()||this.metricExpression()||this.stringLiteral();return this.match(",")?(this.consumeToken(),[e].concat(this.functionParameters())):[e]},numericLiteral:function(){return this.match("number")?{type:"number",value:parseFloat(this.consumeToken().value)}:null},stringLiteral:function(){if(!this.match("string"))return null;var e=this.consumeToken();if(e.isUnclosed)throw{message:"Unclosed string parameter",pos:e.pos};return{type:"string",value:e.value}},errorMark:function(e){var t=this.tokens[this.index];throw{message:e+" instead found "+(t?t.type:"end of string"),pos:t?t.pos:this.lexer.char}},consumeToken:function(){return this.index++,this.tokens[this.index-1]},matchToken:function(e,t){var r=this.tokens[this.index+t];return void 0===r&&""===e||r&&r.type===e},match:function(e,t){return this.matchToken(e,0)&&(!t||this.matchToken(t,1))}};var S,A=i("IrondbQuery");function T(e){var t,r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n={},i=m(e.split(/,/g));try{for(i.s();!(t=i.n()).done;){var o=t.value,u=o.split(/:/g),s=u.shift(),l=u.join(":");r&&(s=L(s),l=L(l));var c=n[s];a.a.isUndefined(c)&&(n[s]=c=[]),c.push(l)}}catch(e){i.e(e)}finally{i.f()}return n}function w(e,t){for(var r in t){var n=e[r];a.a.isUndefined(n)&&(e[r]=n=[]),n.push.apply(n,t[r])}}function C(e){var t="",r=e.indexOf("ST[");return-1!==r&&(t=e.substring(r+3,e.length-1),e=e.substring(0,r-1)),[e,t]}function E(e){return C(e)[0]}!function(e){e[e.MetricName=0]="MetricName",e[e.TagCat=1]="TagCat",e[e.TagVal=2]="TagVal",e[e.TagPair=3]="TagPair",e[e.TagSep=4]="TagSep",e[e.TagEnd=5]="TagEnd",e[e.TagOp=6]="TagOp",e[e.TagPlus=7]="TagPlus"}(S||(S={}));var x={};function O(e,t){for(var r=0,n=new Map,a=0;a<e.length;a++){var i,o=v(C(e[a].metric_name),2),u=(o[0],T(o[1])),s=m(e[a].check_tags);try{for(s.s();!(i=s.n()).done;){var l=i.value.split(/:/g),c=l.shift();if(!c.startsWith("__")&&""!==c){var f=l.join(":");c=L(c),f=L(f),void 0===u[c]&&(u[c]=[]),u[c].push(f)}}}catch(e){s.e(e)}finally{s.f()}var p=""!==t&&void 0!==u[t]?u[t][0]:x;void 0===n.get(p)&&(r+=1),n.set(p,!0)}return r>1}var R=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,0,0,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],k=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];function q(e){return 1===R[e]}function P(e){return 1===k[e]}function j(e,t){for(var r=0,n=0;n<e.length;n++){t(e.charCodeAt(n))&&(r+=1)}return r===e.length}function M(e){return j(e,q)}function N(e){return j(e,P)}function I(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];e===S.MetricName&&(e=S.TagVal);var n=!1;if((e!==S.TagCat||M(t))&&(e!==S.TagVal||N(t)||1===t.length&&"*"===t.charAt(0))||(n=!0),n){var a='"';r&&(a="!"),t=["b",a,btoa(t),a].join("")}return t}function L(e){return/^b(["!]{1}).+\1$/.test(e)&&(e=atob(e.slice(2,e.length-1))),e}function D(e){var t=v(C(e),2),r=(t[0],T(t[1]).statsd_type);return!(void 0===r||!r.includes("count"))}var H=function(){function e(t,r,n,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.datasource=t,this.target=r,this.parseGraphiteTarget(),this.parseTarget()}var t,r,n;return e.$inject=["datasource","target","templateSrv","scopedVars"],t=e,(r=[{key:"parseTarget",value:function(){var e=this;this.segments=[],this.error=null,A((function(){return"parseTarget() target = "+JSON.stringify(e.target)}));var t=this.target.query||"",r="caql"===this.target.querytype?"":t,n=(r=r.slice(11,-1)||"*").split(",");r=n.shift(),this.segments.push({type:S.MetricName,value:L(r)});var a=n.join(","),i=this.parseTagFilter(a);this.segments=this.segments.concat(i)}},{key:"parseGraphiteTarget",value:function(){this.gSegments=[],this.error=null;var e={segment:S.MetricName},t=this.target.query||"",r=new g("caql"===this.target.querytype?"":t).getAst();if(null!==r)if("error"!==r.type){switch(r.type){case"metric":this.gSegments=r.segments}this.gSegments.forEach((function(t){t.type=null!=e[t.type]?e[t.type]:t.type}));var n=this.target.tagFilter||"";if(n){var a=this.parseTagFilter(n);this.gSegments=this.gSegments.concat(a)}}else this.error=r.message+" at position: "+r.pos;else this.gSegments.push({type:S.TagPlus})}},{key:"parseTagFilter",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=t?t.split(","):[],n=[],a=!0,i=m(r);try{for(i.s();!(e=i.n()).done;){var o=e.value;a?a=!1:n.push({type:S.TagSep});var u=o.split(":"),s=u.shift(),l=u.join(":"),c=!1,f=4;s.startsWith("and(")||s.startsWith("not(")?c=!0:s.startsWith("or(")&&(c=!0,f=3),c&&(n.push({type:S.TagOp,value:s.slice(0,f)}),s=s.slice(f)),n.push({type:S.TagCat,value:L(s)}),n.push({type:S.TagPair});for(var p=0;l.endsWith(")");)l=l.slice(0,-1),p++;n.push({type:S.TagVal,value:L(l)});for(var h=0;h<p;h++)n.push({type:S.TagPlus}),n.push({type:S.TagEnd})}}catch(e){i.e(e)}finally{i.f()}return 0===r.length&&n.push({type:S.TagPlus}),n}},{key:"convertStandardToGraphite",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=[],r=[],n=this.segments.length,i=this.segments[0]||{},o=this.segments[1]||{};e?t=e.split("|ST")[0].split(".").map((function(e){return{type:S.MetricName,value:e}})):2===n&&i.type===S.MetricName&&o.type===S.TagPlus?(this.addSelectMetricSegment(),this.addPlusSegment()):this.segments.forEach((function(e){if(e.type===S.MetricName)t=(e.value||"").split("|ST")[0].split(".").map((function(e){return{type:S.MetricName,value:e}}));else{var n=a.a.assign({},e);r.push(n)}})),this.gSegments=t.concat(r),1===this.gSegments.length&&"*"===this.gSegments[0].value&&this.gSegments.splice(0,1)}},{key:"convertGraphiteToStandard",value:function(){var e="__check_uuid",t=[],r=[],n="";if(this.gSegments.forEach((function(e,i){if(e.type===S.MetricName)/^\w{8}-\w{4}-\w{4}-\w{4}-\w{12}$/.test(e.value)&&0===i?n=e.value:t.push("select metric"===e.value?"*":e.value);else{var o=a.a.assign({},e);r.push(o)}})),this.segments=[{type:S.MetricName,value:t.join(".")}].concat(r),n){var i=!1,o=this.segments.some((function(e){return e.type===S.TagOp&&(i="and("===e.value),e.type===S.TagOp}));if(o&&i){var u=this.segments[this.segments.length-1],s=this.segments[this.segments.length-2],l=-1;u.type===S.TagEnd&&(l=s.type===S.TagPlus?this.segments.length-2:this.segments.length-1),~l&&this.segments.splice(l,0,{type:S.TagSep},{type:S.TagCat,value:e},{type:S.TagPair},{type:S.TagVal,value:n})}if(o&&!i){var c=this.segments.findIndex((function(e){return e.type===S.TagOp}));~c&&this.segments.splice(c,0,{type:S.TagOp,value:"and("}),this.segments.push({type:S.TagSep},{type:S.TagCat,value:e},{type:S.TagPair},{type:S.TagVal,value:n},{type:S.TagPlus},{type:S.TagEnd})}o||this.segments.push({type:S.TagOp,value:"and("},{type:S.TagCat,value:e},{type:S.TagPair},{type:S.TagVal,value:n},{type:S.TagPlus},{type:S.TagEnd})}}},{key:"getGraphiteSegmentPath",value:function(){var e=this.gSegments.findIndex((function(e){return null!=e.type&&e.type!==S.MetricName}));return~e||(e=this.gSegments.length),this.getGraphiteSegmentPathUpTo(e)}},{key:"getGraphiteSegmentPathUpTo",value:function(e){var t=this.gSegments.findIndex((function(e){return null!=e.type&&e.type!==S.MetricName})),r=this.gSegments.slice(0,Math.min(e,t));return r.length||r.push(""),r.reduce((function(e,t){return(e||"")+(t.value||"")+"."}),"")}},{key:"updateSegmentValue",value:function(e,t){(this["graphite"===this.target.querytype?"gSegments":"segments"][t]||{}).value=e.value}},{key:"addSelectMetricSegment",value:function(){var e="graphite"===this.target.querytype,t=this[e?"gSegments":"segments"].some((function(e){return"select metric"===e.value})),r=this[e?"gSegments":"segments"].findIndex((function(e){return null!=e.type&&e.type!==S.MetricName}));~r||(r=this[e?"gSegments":"segments"].length),t||this[e?"gSegments":"segments"].splice(r,0,{type:S.MetricName,value:"select metric"})}},{key:"addPlusSegment",value:function(){var e="graphite"===this.target.querytype;this[e?"gSegments":"segments"].some((function(e){return e.type===S.TagPlus}))||this[e?"gSegments":"segments"].push({type:S.TagPlus})}},{key:"removeSegments",value:function(e){if(null!=e){var t="graphite"===this.target.querytype;this[t?"gSegments":"segments"]=this[t?"gSegments":"segments"].splice(0,e)}}},{key:"emptySegments",value:function(){this["graphite"===this.target.querytype?"gSegments":"segments"]=[]}},{key:"removeOperator",value:function(e){for(var t="graphite"===this.target.querytype,r=e+1,n=1,a=this[t?"gSegments":"segments"].length;n>0&&r<a;){var i=this[t?"gSegments":"segments"][r].type;if(i===S.TagOp)n++;else if(i===S.TagEnd&&0==--n)break;r++}var o=e,u=r-e+1;(this[t?"gSegments":"segments"][e-1]||{}).type===S.TagSep&&(o--,u++),this[t?"gSegments":"segments"].splice(o,u),a===r+1&&this[t?"gSegments":"segments"].push({type:S.TagPlus})}},{key:"addOperator",value:function(e,t){var r="graphite"===this.target.querytype,n=this[r?"gSegments":"segments"].findIndex((function(e){return null!=e.type&&e.type!==S.MetricName})),a=r&&n<e||!r&&e>2,i=0;"and("!==t&&"not("!==t&&"or("!==t||((this[r?"gSegments":"segments"][e]||{}).type===S.TagPlus&&this[r?"gSegments":"segments"].splice(e,1),a&&(this[r?"gSegments":"segments"].splice(e,0,{type:S.TagSep}),i=1),this[r?"gSegments":"segments"].splice(e+i,0,{type:S.TagOp,value:t},{type:S.TagCat,value:"select tag",fake:!0},{type:S.TagPair},{type:S.TagVal,value:"*"},{type:S.TagPlus},{type:S.TagEnd}),a&&this[r?"gSegments":"segments"].splice(e+i+6,0,{type:S.TagPlus}))}},{key:"addTag",value:function(e,t){var r="graphite"===this.target.querytype;e>2&&this[r?"gSegments":"segments"].splice(e,0,{type:S.TagSep}),this[r?"gSegments":"segments"].splice(e+(e>2?1:0),0,{type:S.TagCat,value:t},{type:S.TagPair},{type:S.TagVal,value:"*"}),1===e&&(this[r?"gSegments":"segments"].splice(e,0,{type:S.TagOp,value:"and("}),this[r?"gSegments":"segments"].push({type:S.TagEnd}))}},{key:"renderQueries",value:function(e){this.renderQueryReferences(this.target,e);var t,r=m(e||[]);try{for(r.s();!(t=r.n()).done;){var n=t.value;n.refId!==this.target.refId&&this.renderQueryReferences(n,e)}}catch(e){r.e(e)}finally{r.f()}}},{key:"renderQueryReferences",value:function(e,t){var r=/\#([A-Z])/g,n="".concat(e.queryDisplay),i=a.a.keyBy(t,"refId");for(delete i[e.refId],a.a.each(i,(function(e,t){var n=0;a.a.each(i,(function(e,a){if(a!==t){var i=((e.query||"").match(r)||[]).filter((function(e){return e==="#"+t}));n+=i.length}})),e.refCount=n}));null!==n.match(r);){var o=n.replace(r,(function(e,t,r,n){var a=i[t];return a?(a.refCount<=0&&delete i[t],a.refCount--,a.query):e}));if(o===n)break;n=o}delete e.targetFull,e.query!==n&&(e.query=e.targetFull=n)}}])&&y(t.prototype,r),n&&y(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),$=r(1),F=r(20);function Q(e){return function(e){if(Array.isArray(e))return z(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||V(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function U(e){return(U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function G(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var n,a,i=[],o=!0,u=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);o=!0);}catch(e){u=!0,a=e}finally{try{o||null==r.return||r.return()}finally{if(u)throw a}}return i}(e,t)||V(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function B(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=V(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){u=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(u)throw i}}}}function V(e,t){if(e){if("string"==typeof e)return z(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?z(e,t):void 0}}function z(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function K(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function W(e,t){return(W=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function X(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Z(e);if(t){var a=Z(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return J(this,r)}}function J(e,t){if(t&&("object"===U(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Z(e){return(Z=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Y=i("IrondbDatasource"),ee=[[1,.5,.25,.2,.1,.05,.025,.02,.01,.005,.002,.001],[60,30,20,15,10,5,3,2,1],[60,30,20,15,10,5,3,2,1].map((function(e){return 60*e})),[24,12,8,6,4,3,2,1].map((function(e){return 60*e*60}))];function te(e,t){if(-1!==t&&(t=1),e<.001)return.001;for(var r=0;r<ee.length;r++){var n=ee[r];if(e<n[0])for(var a=1;a<n.length;a++){if(e>n[a])return-1===t?n[a]:n[a-1];if(e===n[a])return n[a]}}return e%86400==0?e:1===t?86400*(1+Math.floor(e/86400)):86400*Math.floor(e/86400)}var re={count:"count",average:"average",stddev:"stddev",derive:"rate",derive_stddev:"derive_stddev",counter:"rate",counter_stddev:"counter_stddev"},ne={ms:1,s:1e3,m:6e4,h:36e5,d:864e5};function ae(e){var t=e.toLocaleLowerCase().match(/^([0-9]+)(ms|s|m|h|d)?$/);if(!t)throw new Error("Invalid time duration: "+e);return parseInt(t[1],10)*ne[t[2]||"s"]}var ie=function(e){o.$inject=["instanceSettings","$q","backendSrv","templateSrv"],function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&W(e,t)}(o,e);var t,r,n,i=X(o);function o(e,t,r,n){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(a=i.call(this,e)).$q=t,a.backendSrv=r,a.templateSrv=n,a.type="irondb",a.name=e.name,a.id=e.id,a.accountId=e.jsonData.accountId,a.irondbType=e.jsonData.irondbType,a.resultsLimit=e.jsonData.resultsLimit,a.caqlMinPeriod=e.jsonData.caqlMinPeriod,a.apiToken=e.jsonData.apiToken,a.useCaching=e.jsonData.useCaching,a.truncateNow=e.jsonData.truncateNow,a.minTruncation=e.jsonData.minTruncation||"0",a.activityTracking=e.jsonData.activityTracking,a.allowGraphite=e.jsonData.allowGraphite,a.queryPrefix=e.jsonData.queryPrefix,a.url=e.url,a.supportAnnotations=!1,a.supportMetrics=!0,a.appName="Grafana",a.datasourceRequest=o.setupCache(a.useCaching,r),a}return t=o,n=[{key:"stripActivityWindow",value:function(e){return a.a.split(e,"&").map((function(e){return e.split("=")})).filter((function(e){return!e[0].startsWith("activity_")})).map((function(e){return e.join("=")})).join("&")}},{key:"requestCacheKey",value:function(e){var t=e.method;if("GET"===t)return o.stripActivityWindow(e.url);if("POST"===t)return JSON.stringify(e.data);throw new Error("Unsupported HTTP method type: "+(t||"?"))}},{key:"setupCache",value:function(e,t){var r=function(e){return t.datasourceRequest(e)};if(!e)return Y((function(){return"setupCache() caching disabled"})),r;var n={max:o.DEFAULT_CACHE_ENTRIES,maxAge:o.DEFAULT_CACHE_TIME_MS,promise:!0,normalizer:function(e){var t=e[0],r=o.requestCacheKey(t);return Y((function(){return"normalizer() cache lookup key = "+r})),r}};return Y((function(){return"setupCache() caching enabled"})),l()((function(e){return Y((function(){return"doRequest() cache miss key = "+o.requestCacheKey(e)})),r(e)}),n)}},{key:"checkRollupAligned",value:function(e){var t,r=B(o.ROLLUP_ALIGN_MS);try{for(r.s();!(t=r.n()).done;){var n=t.value;if(e<n&&n%e!=0)throw new Error("Unaligned rollup period requested")}}catch(e){r.e(e)}finally{r.f()}if(e>o.ROLLUP_ALIGN_MS_1DAY&&e%o.ROLLUP_ALIGN_MS_1DAY!=0)throw new Error("Unaligned rollup period requested")}},{key:"forceRollupAlignment",value:function(e){return e<6e4&&(e=Math.max(1e4,1e4*Math.ceil(e/1e4))),e}}],(r=[{key:"query",value:function(e){var t=this;return a.a.isUndefined(this.queryRange)||a.a.isEqual(e.range,this.queryRange)||(Y((function(){return"query() time range changed "+JSON.stringify(t.queryRange)+" -> "+JSON.stringify(e.range)})),this.useCaching&&(Y((function(){return"query() clearing cache"})),this.datasourceRequest.clear())),this.queryRange=e.range,a.a.isEmpty(e.targets[0])?this.$q.when({data:[]}):Promise.all([this.buildIrondbParams(e)]).then((function(e){return a.a.isEmpty(e[0])?t.$q.when({data:[]}):t.irondbRequest(e,!0)})).then((function(e){return"ts"===e.t&&e.data.constructor===Array&&e.data.sort((function(e,t){return e&&null==t?-1:t&&null==e?1:null==e&&null==t?0:(e.target||"").localeCompare(t.target)})),Y((function(){return"query() queryResults = "+JSON.stringify(e)})),e})).catch((function(e){(0!==e.status||e.status>=300)&&t.throwerr(e)}))}},{key:"annotationQuery",value:function(e){var t=this;Y((function(){return"annotationQuery() options = "+JSON.stringify(e.annotation)})),Y((function(){return"annotationQuery() range = "+JSON.stringify(e.range)})),a.a.isUndefined(this.queryRange)||a.a.isEqual(e.range,this.queryRange)||(Y((function(){return"query() time range changed "+JSON.stringify(t.queryRange)+" -> "+JSON.stringify(e.range)})),this.useCaching&&(Y((function(){return"query() clearing cache"})),this.datasourceRequest.clear())),this.queryRange=e.range;var r={},n=[],i={"Content-Type":"application/json"};if(i["X-Circonus-Auth-Token"]=this.apiToken,i["X-Circonus-App-Name"]=this.appName,i.Accept="application/json","alerts"===e.annotation.annotationQueryType){(r={}).url=this.url,r.url=r.url+"/v2",r.method="GET",r.url=r.url+"/alert";var o=this.templateSrv.replace(e.annotation.alertId),u=this.templateSrv.replace(e.annotation.annotationQueryText);r.url=""!==o?r.url+"/"+o:r.url+"?search="+encodeURIComponent(u)+"&size=500",r.headers=i,r.retry=1,r.start=e.range.from.valueOf()/1e3,r.end=e.range.to.valueOf()/1e3,r.isAlert=!0,r.local_filter=e.annotation.annotationFilterText,r.local_filter_match=e.annotation.annotationFilterApply,r.annotation=e.annotation,(this.basicAuth||this.withCredentials)&&(r.withCredentials=!0),this.basicAuth&&(r.headers.Authorization=this.basicAuth),r.isCaql=!1,n.push(r)}return Promise.all(n.map((function(e){return t.datasourceRequest(e).then((function(r){if(Y((function(){return"annotationQuery() query = "+JSON.stringify(e)})),Y((function(){return"annotationQuery() result = "+JSON.stringify(r)})),!a.a.isUndefined(e.isAlert))return t.enrichAlertsWithRules(r,e)})).then((function(t){var r,n=[],a=B(t);try{for(a.s();!(r=a.n()).done;){var i=r.value,o=i.alert,u=i.rule,s={};if(!(o._occurred_on<e.start||o._occurred_on>e.end)){var l=o._canonical_metric_name,c=o._metric_name;if(void 0!==l&&""!==l){var f=G(C(l),2);f[0],w(s,T(f[1]))}var p,h=B(o._tags);try{for(h.s();!(p=h.n()).done;){var d=p.value.split(/:/g),g=d.shift();if(!g.startsWith("__")&&""!==g){var y=d.join(":");g=L(g),y=L(y),void 0===s[g]&&(s[g]=[]),s[g].push(y)}}}catch(e){h.e(e)}finally{h.f()}var v=[];for(var m in s)v.push(m+":"+s[m][0]);var b={};b.metric=c,b.value=o._value;var _={evalMatches:[]};_.evalMatches.push(b);var S=null!=u&&null!==u.notes&&""!==u.notes?u.notes:"Oh no!";S=F.render(S,s);var A={time:1e3*o._occurred_on,title:"ALERTING",text:"<br />"+S+"<br />Sev: "+o._severity+"<br >"+(null!==o._metric_link&&""!==o._metric_link?'<a href="'+o._metric_link+'" target="_blank">Info</a><br />':""),tags:v,alertId:o._cid.replace("/alert/",""),newState:"alerting",source:e.annotation,data:_};if(n.push(A),S=null!=u&&null!==u.notes&&""!==u.notes?u.notes:"Yay!",S=F.render(S,s),null!==o._cleared_on){var E={};E.metric=c,E.value=o._cleared_value;var x={evalMatches:[]};x.evalMatches.push(E);var O={time:1e3*o._cleared_on,title:"OK",text:"<br />"+S+"<br />Sev: "+o._severity+"<br >"+(null!==o._metric_link&&""!==o._metric_link?'<a href="'+o._metric_link+'" target="_blank">Info</a><br />':""),tags:v,alertId:o._cid.replace("/alert/",""),newState:"ok",source:e.annotation,data:x};n.push(O)}}}}catch(e){a.e(e)}finally{a.f()}return n}))}))).then((function(e){return e}))}},{key:"interpolateExpr",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;if(!t.multi&&!t.includeAll)return e;if("string"==typeof e)return e;if(1===e.length)return e[0];for(var r="",n=0;n<e.length;n++)n>0&&(r+=","),r+=e[n],n+=1;return r}},{key:"metricFindQuery",value:function(e,t){var r=this,n=t.variable,i=t.range,o=void 0,u=void 0;a.a.isUndefined(i)||(o=i.from.valueOf()/1e3,u=i.to.valueOf()/1e3,a.a.isUndefined(this.queryRange)||a.a.isEqual(i,this.queryRange)||(Y((function(){return"query() time range changed "+JSON.stringify(r.queryRange)+" -> "+JSON.stringify(i)})),this.useCaching&&(Y((function(){return"query() clearing cache"})),this.datasourceRequest.clear())),this.queryRange=i);var s=null;if(s="string"==typeof e?{queryType:void 0!==n&&n.useTags&&n.tagValuesQuery?"tag values":"metric names",metricFindQuery:e,tagCategory:void 0!==n&&n.useTags?n.tagValuesQuery:"",resultsLimit:100}:e,Y((function(){return"Options: "+JSON.stringify(t)})),void 0!==s){var l=s&&s.queryType||(s.tagCategory?"tag values":"metric names"),c=s&&s.resultsLimit||100,f=this.templateSrv.replace(s.metricFindQuery,null,this.interpolateExpr);return"graphite style"===l||f.includes("and(")||f.includes("or(")||f.includes("not(")||(f="and(__name:"+f+")"),"tag values"===l?this.metricTagValsQuery(f,s.tagCategory,o,u,c).then((function(e){var t=e.headers.get("X-Snowth-Search-Result-Count");return t>1e3?setTimeout((function(){p(t)}),100):h(),a.a.map(e.data,(function(e){return{value:r.decodeBase64(e)}}))})):"tag categories"===l?this.metricTagCatsQuery(f,o,u,c).then((function(e){var t=e.headers.get("X-Snowth-Search-Result-Count");return t>1e3?setTimeout((function(){p(t)}),100):h(),a.a.map(e.data,(function(e){return{value:r.decodeBase64(e)}}))})):"graphite style"===l?this.metricGraphiteQuery(f,!1,o,u,"",c).then((function(e){var t=e.headers.get("X-Snowth-Search-Result-Count");t>1e3?setTimeout((function(){p(t)}),100):h();var r=[];return e.data.forEach((function(e){var t=(e.name||"").replace(/^\w{8}-\w{4}-\w{4}-\w{4}-\w{12}\./).split(".").pop().split(";").shift();r.find((function(e){return e.value===t}))||r.push({value:t})})),r})):this.metricTagsQuery(f,!1,o,u,c).then((function(e){var t=e.headers.get("X-Snowth-Search-Result-Count");return t>1e3?setTimeout((function(){p(t)}),100):h(),a.a.map(e.data,(function(e){return{value:e.metric_name}}))}))}return Promise.resolve([]);function p(e){var t=document.querySelector('[aria-label="Variable editor Form"]'),r=Array.from(t?t.querySelectorAll("h3,h4,h5"):[]).find((function(e){return/^Preview\s/.test(e.innerText)}));if(r){var n=document.createElement("span");n.className="result-warning",n.style.color="rgb(235, 123, 24)",n.style.marginBottom="1rem",n.innerHTML="<strong>Warning:</strong> "+e+" results found.<br />Only the first 1000 results are used&hellip;please refine your query.";var a=r.parentElement,i=a.parentElement;Array.from(i.getElementsByClassName("result-warning")).forEach((function(e){e.remove()})),i.insertBefore(n,a)}}function h(){var e=document.querySelector('[aria-label="Variable editor Form"]'),t=Array.from(e?e.querySelectorAll("h3,h4,h5"):[]).find((function(e){return/^Preview\s/.test(e.innerText)}));t&&Array.from(t.parentElement.parentElement.getElementsByClassName("result-warning")).forEach((function(e){e.remove()}))}}},{key:"decodeBase64",value:function(e){return/^b(["!]{1}).+\1$/.test(e)&&(e=atob(e.slice(2,e.length-1))),e}},{key:"getAccountId",value:function(){return"standalone"===this.irondbType?"/"+this.accountId:""}},{key:"ignoreGraphiteUUIDs",value:function(){return!(this.queryPrefix||"").trim()}},{key:"metricGraphiteQuery",value:function(e,t,r,n,a,i){var o=this.ignoreGraphiteUUIDs(),u="/"+this.queryPrefix+"/metrics/find",s=["query="+(o?"*.":"")+e,"activity=0"];a&&s.push("irondb_tag_filter="+a),u+="?"+s.join("&");var l=!!i||!t;return this.irondbSimpleRequest("GET",u,!1,!0,l,!0,i)}},{key:"metricTagsQuery",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0;if(""===e||void 0===e||!t&&"and(__name:*)"===e)return Promise.resolve({data:[]});var o="/find"+this.getAccountId()+"/tags?query=";return o+=e,this.activityTracking&&r&&n&&(Y((function(){return"metricTagsQuery() activityWindow = ["+r+","+n+"]"})),o+="&activity_start_secs="+a.a.toInteger(r),o+="&activity_end_secs="+a.a.toInteger(n)),Y((function(){return"metricTagsQuery() queryUrl = "+o})),this.irondbSimpleRequest("GET",o,!1,!0,!0,!1,i)}},{key:"metricTagValsQuery",value:function(e,t,r,n,i){var o="/find"+this.getAccountId()+"/tag_vals?category="+t+"&query="+e;return this.activityTracking&&r&&n&&(Y((function(){return"metricFindTagsQuery() activityWindow = ["+r+","+n+"]"})),o+="&activity_start_secs="+a.a.toInteger(r),o+="&activity_end_secs="+a.a.toInteger(n)),Y((function(){return"metricTagValsQuery() queryUrl = "+o})),this.irondbSimpleRequest("GET",o,!1,!0,!0,!1,i)}},{key:"metricTagCatsQuery",value:function(e,t,r,n){var i="/find"+this.getAccountId()+"/tag_cats?query="+e;return this.activityTracking&&t&&r&&(Y((function(){return"metricTagsCatsQuery() activityWindow = ["+t+","+r+"]"})),i+="&activity_start_secs="+a.a.toInteger(t),i+="&activity_end_secs="+a.a.toInteger(r)),Y((function(){return"metricTagCatsQuery() queryUrl = "+i})),this.irondbSimpleRequest("GET",i,!1,!0,!0,!1,n)}},{key:"testDatasource",value:function(){return this.metricTagsQuery("and(__name:ametric)").then((function(e){var t=a.a.get(e,"results[0].error");return t?{status:"error",message:t,title:"Error"}:{status:"success",message:"Data source is working",title:"Success"}})).catch((function(e){var t=(e.data||{}).message;return void 0===t&&(t="Error "+(e.status||"")+" "+(e.statusText||"")),{status:"error",message:t,title:"Error"}}))}},{key:"throwerr",value:function(e){if(Y((function(){return"throwerr() err = "+JSON.stringify(e)})),"object"!==U(e))throw e?e.toString():"unknown";if(!e.data||"object"!==U(e.data)||!e.data.message)throw e.data&&e.data.user_error&&"object"===U(e.data.user_error)&&e.data.user_error.message?e.data.user_error.message+", in query: "+e.data.arguments.q:String(e);var t;try{t=JSON.parse(e.data.message||e.data)}catch(e){Y((function(){return"throwerr() failed to parse json from error.data.message. error: "+e}))}if(t&&t.user_error)throw t.user_error.message+", in query: "+t.arguments.q;if("Not Found"===e.statusText)throw"Circonus IRONdb Error: "+e.statusText;if("string"==typeof e.data.message)throw e.data.message;if(e.statusText&&e.status>0)throw"Network Error: "+e.statusText+"("+e.status+")"}},{key:"irondbSimpleRequest",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=arguments.length>6?arguments[6]:void 0,u=this.url,s={"Content-Type":"application/json"};"hosted"!==this.irondbType&&(s["X-Circonus-Account"]=this.accountId),"hosted"!==this.irondbType||r||(u=u+"/irondb"+(i?"/graphite":""),n||(u+="/series_multi"),s["X-Circonus-Auth-Token"]=this.apiToken,s["X-Circonus-App-Name"]=this.appName),s["X-Snowth-Advisory-Limit"]=a?o||this.resultsLimit:100,"standalone"!==this.irondbType||r||(i?(u=u+"/graphite/"+this.accountId,n||(u=u+"/"+this.queryPrefix+"/series_multi")):n||(u+="/series_multi")),r&&!n&&(u+="/extension/lua/caql_v1");var l={method:e,url:u+t,headers:s,retry:1};return Y((function(){return"irondbSimpleRequest() options = "+JSON.stringify(l)})),this.datasourceRequest(l)}},{key:"irondbRequest",value:function(e){var t=this,r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=e[0];Y((function(){return"irondbRequest() irondbOptions = "+JSON.stringify(n)}));var i={"Content-Type":"application/json"},u={},s=[],l={data:[],t:"ts"};if("hosted"===this.irondbType?(i["X-Circonus-Auth-Token"]=this.apiToken,i["X-Circonus-App-Name"]=this.appName):i["X-Circonus-Account"]=this.accountId,i["X-Snowth-Advisory-Limit"]=r?this.resultsLimit:100,i.Accept="application/json",n.std.names.length)for(var c=n.std.names[0].leaf_data.target.format||n.std.names[0].leaf_data.format||"ts",f=function(e){(u={}).url=t.url,"hosted"===t.irondbType&&(u.url=u.url+"/irondb"),u.method="POST",u.url=u.url+"/fetch";var r=n.std.start,a=n.std.end,o=t.getRollupSpan(n,r,a,!1,n.std.names[e].leaf_data),l=Math.max(o,parseInt(t.minTruncation,10));r-=o,a=Date.now()-1e3*a<1e3&&t.truncateNow?a-l:a+o;var f=[],p=[],h="heatmap"===c?"merge":"pass",d=[],g={streams:d};g.period=o,g.start=r,g.count=Math.round((a-r)/o),g.reduce=[{label:"",method:h}];var y=n.std.names[e].leaf_data.metrictype;f.push(n.std.names[e].leaf_data.metriclabel),p.push(n.std.names[e].leaf_data.check_tags);var v={},m=n.std.names[e].leaf_data.egress_function;if("histogram"===y)if("heatmap"===c)m="none";else{m=re[m];var b="default";D(n.std.names[e].leaf_name)&&(b="statsd_counter"),n.std.names[e].leaf_data.target.hist_transform=b}v.transform=m,v.name=n.std.names[e].leaf_data.metric_name||n.std.names[e].leaf_name,v.uuid=n.std.names[e].leaf_data.uuid,v.kind=y,v.uuid&&d.push(v),Y((function(){return"irondbRequest() data = "+JSON.stringify(g)})),u.data=g,u.metricLabels=f,u.check_tags=p,u.name="fetch",u.headers=i,(t.basicAuth||t.withCredentials)&&(u.withCredentials=!0),t.basicAuth&&(u.headers.Authorization=t.basicAuth),u.paneltype=c,u.format=n.std.names[e].leaf_data.format,u.isCaql=!1,u.isGraphite=!1,u.retry=1,s.push(u)},p=0;p<n.std.names.length;p++)f(p);if(n.caql.names.length)for(var h=function(e){(u={}).url=t.url,"hosted"===t.irondbType&&(u.url=u.url+"/irondb"),u.method="GET",u.url=u.url+"/extension/lua","hosted"===t.irondbType&&(u.url=u.url+"/public");var r=t.templateSrv.replace(n.caql.names[e].leaf_name,n.scopedVars),a=(n.caql.names[e].leaf_data||{}).min_period,l=(a&&!/^#min_period=/.test(r)?"#min_period="+a+" ":"")+r,c=n.caql.start,f=n.caql.end,p=l.match(/#min_period=(\d+\w{0,2}?)\s/i),h=p?Math.round(ae(p[1])/1e3):null,d=t.getRollupSpan(n,c,f,!0,n.caql.names[e].leaf_data),g=h&&d===Math.round(o.MIN_DURATION_MS_CAQL/1e3)?Math.min(d,h):d,y=Math.max(g,parseInt(t.minTruncation,10));c-=g,f=Date.now()-1e3*f<1e3&&t.truncateNow?f-y:f+g,u.url=u.url+"/caql_v1";var v={start:c.toFixed(3),end:f.toFixed(3),period:g,format:"DF4",q:l};l.length>2e3?(u.method="POST",u.data=JSON.stringify(v)):u.url+="?"+Object.keys(v).map((function(e){return e+"="+encodeURIComponent(v[e])})).join("&"),u.headers=i,u.start=c,u.end=f,u.retry=1,(t.basicAuth||t.withCredentials)&&(u.withCredentials=!0),t.basicAuth&&(u.headers.Authorization=t.basicAuth),u.isCaql=!0,u.name=n.caql.names[e],u.format=(u.name.leaf_data||{}).format,u.refId=(u.name.leaf_data||{}).refId,s.push(u)},d=0;d<n.caql.names.length;d++)h(d);if(n.alert.names.length)for(var g=0;g<n.alert.names.length;g++){(u={}).url=this.url,"hosted"===this.irondbType&&(u.url=u.url+"/v2"),u.method="GET",u.url=u.url+"/alert";var y=this.templateSrv.replace(n.alert.names[g],n.scopedVars);y.startsWith("alert_id:")?u.url=u.url+"/"+y.split(":")[1]:u.url=u.url+"?search="+encodeURIComponent(y)+"&size=1000",u.headers=i,u.retry=1,u.start=n.alert.start,u.end=n.alert.end,u.isAlert=!0,u.counts_only=n.alert.counts_only,u.label=n.alert.labels[g],u.local_filter=n.alert.local_filters[g],u.local_filter_match=n.alert.local_filter_matches[g],u.query_type=n.alert.query_type,u.target=n.alert.target,(this.basicAuth||this.withCredentials)&&(u.withCredentials=!0),this.basicAuth&&(u.headers.Authorization=this.basicAuth),u.isCaql=!1,u.refId=n.refId,s.push(u)}return Y((function(){return"irondbRequest() queries = "+JSON.stringify(s)})),Promise.all(s.map((function(e,r,n){return t.datasourceRequest(e).then((function(r){return Y((function(){return"irondbRequest() query = "+JSON.stringify(e)})),Y((function(){return"irondbRequest() result = "+JSON.stringify(r)})),a.a.isUndefined(e.isAlert)?e.isGraphite?t.convertIrondbGraphiteDataToGrafana(r,e):t.convertIrondbDf4DataToGrafana(r,e):!1===e.counts_only?t.enrichAlertsWithRules(r,e).then((function(e){return t.convertAlertDataToGrafana(e)})):t.countAlerts(r,e)})).then((function(e){var t=e.query;if(e.data.constructor===Array)for(var r=0;r<e.data.length;r++)"target"in e&&"refId"in e.target?e.data[r].target=e.target.refId:t&&t.refId&&(e.data[r].target=t.refId),l.data.push(e.data[r]);return e.data.constructor===Object&&("target"in e&&"refId"in e.target?e.data.target=e.target.refId:t&&t.refId&&(e.data.target=t.refId),l.data.push(e.data)),null!=e.t&&(l.t=e.t),l}))}))).then((function(e){return l})).catch((function(e){(0!==e.status||e.status>=300)&&t.throwerr(e)}))}},{key:"filterMatches",value:function(e,t){if("alert_id"===e.key)return!!t._cid.endsWith(e.value);if("acknowledged"===e.key)return"true"===e.value?null!==t._acknowledgement:"false"!==e.value||null===t._acknowledgement;if("severities"===e.key)return-1!==e.value.indexOf(t._severity);if("tag"===e.key){var r=[],n=t._canonical_metric_name;if(void 0!==n&&""!==n){var a,i=G(C(n),2),o=(i[0],B(i[1].split(",")));try{for(o.s();!(a=o.n()).done;){var s=a.value.split(/:/g),l=s.shift();if(!l.startsWith("__")&&""!==l){var c=s.join(":");l=L(l),c=L(c),r.push({cat:l,val:c})}}}catch(e){o.e(e)}finally{o.f()}}var f,p=B(t._tags);try{for(p.s();!(f=p.n()).done;){var h=f.value.split(/:/g),d=h.shift();if(!d.startsWith("__")&&""!==d){var g=h.join(":");d=L(d),g=L(g),r.push({cat:d,val:g})}}}catch(e){p.e(e)}finally{p.f()}for(var y=0,v=r;y<v.length;y++){var m=v[y],b=e.value.split(":");if(m.cat===b[0]&&u.a.isMatch(m.val,b[1]))return!0}return!1}}},{key:"alertFiltered",value:function(e,t,r){if(0===e.length)return!1;if("all"===t){var n,a=B(e);try{for(a.s();!(n=a.n()).done;){var i=n.value;if(!this.filterMatches(i,r))return!0}}catch(e){a.e(e)}finally{a.f()}return!1}var o,u=B(e);try{for(u.s();!(o=u.n()).done;){var s=o.value;if(this.filterMatches(s,r))return!1}}catch(e){u.e(e)}finally{u.f()}return!0}},{key:"countAlerts",value:function(e,t){var r=e.data,n=[];r.constructor===Array?n=r:n.push(r);var a=[],i=t.local_filter_match;if(void 0!==t.local_filter&&""!==t.local_filter){var o,u=B(t.local_filter.split(","));try{for(u.s();!(o=u.n()).done;){var s=o.value.trim(),l=s.indexOf(":");if(-1!==l){var c={};c.key=s.slice(0,l),c.value=s.slice(l+1),a.push(c)}}}catch(e){u.e(e)}finally{u.f()}}var f={};if("range"===t.query_type){var p=t.start;p-=p%60;var h=t.end;h-=h%60;for(var d=p;d<h;d+=60)f[d.toString()]=0}for(var g=0,y=0;y<n.length;y++)if(!this.alertFiltered(a,i,n[y])){var v=n[y]._occurred_on;"range"===t.query_type?(v-=v%60).toString()in f&&(f[v.toString()]=f[v.toString()]+1):g+=1}var m="Value";t.label&&(m=t.label);var b=oe();b.refId=t.refId;var _=ue(m),S=[];if("range"===t.query_type){for(var A=0,T=Object.entries(f);A<T.length;A++){var w=G(T[A],2),C=w[0],E=w[1];b.values.add(1e3*Number(C)),_.values.add(E)}S.push({length:b.values.length,fields:[b,_]})}else _.values.add(g),S.push({length:1,fields:[_]});return{t:"ts",data:S,target:t.target,state:$.LoadingState.Done}}},{key:"enrichAlertsWithRules",value:function(e,t){var r=this,n=e.data,a=[];n.constructor===Array?a=n:a.push(n);var i=[],o={"Content-Type":"application/json"};"hosted"!==this.irondbType&&this.throwerr("Alert queries only supported on hosted irondb requests"),o["X-Circonus-Auth-Token"]=this.apiToken,o["X-Circonus-App-Name"]=this.appName,o.Accept="application/json";var u=[],s=t.local_filter_match;if(void 0!==t.local_filter&&""!==t.local_filter){var l,c=B(t.local_filter.split(","));try{for(c.s();!(l=c.n()).done;){var f=l.value.trim(),p=f.indexOf(":");if(-1!==p){var h={};h.key=f.slice(0,p),h.value=f.slice(p+1),u.push(h)}}}catch(e){c.e(e)}finally{c.f()}}for(var d=0;d<a.length;d++)if(!this.alertFiltered(u,s,a[d])){var g={};g.url=this.url,"hosted"===this.irondbType&&(g.url=g.url+"/v2"),g.method="GET",g.url=g.url+a[d]._rule_set,g.headers=o,g.retry=1,g.alert_data=a[d],(this.basicAuth||this.withCredentials)&&(g.withCredentials=!0),this.basicAuth&&(g.headers.Authorization=this.basicAuth),i.push(g)}return Promise.all(i.map((function(e){return r.datasourceRequest(e).then((function(t){return Y((function(){return"enrichAlertsWithRules() query = "+JSON.stringify(e)})),Y((function(){return"enrichAlertsWithRules() result = "+JSON.stringify(t)})),{alert:e.alert_data,rule:t.data}})).catch((function(t){return{alert:e.alert_data,rule:null}}))}))).then((function(e){return e}))}},{key:"getRollupSpan",value:function(e,t,r,n,i){Y((function(){return"getRollupSpan() intervalMs = ".concat(e.intervalMs,", maxDataPoints = ").concat(e.maxDataPoints)})),Y((function(){return"getRollupSpan() ".concat(n?"CAQL":"/fetch"," ").concat(JSON.stringify(i))}));var u=i.rolluptype,s=i.metricrollup;if("automatic"!==u&&a.a.isEmpty(s)&&(u="automatic",Y((function(){return"getRollupSpan() defaulting to automatic"}))),"exact"===u){var l=ae(s),c=Math.floor(1e3*(r-t)/l);if(Y((function(){return"getRollupSpan() exactMs = ".concat(l,", exactDatapoints = ").concat(c)})),c>e.maxDataPoints*o.MAX_EXACT_DATAPOINTS_THRESHOLD)throw new Error("Too many datapoints requested");return o.checkRollupAligned(l),o.forceRollupAlignment(l)/1e3}var f=o.MIN_DURATION_MS_FETCH;n&&(f=o.MIN_DURATION_MS_CAQL),"minimum"===u&&(f=ae(s),Y((function(){return"getRollupSpan() minimumMs = ".concat(f)})));var p=e.intervalMs;p<f&&(p=f);for(var h=te(o.forceRollupAlignment(p)/1e3,-1);(r-t)/h>e.maxDatapoints*o.MAX_DATAPOINTS_THRESHOLD;)h=te(h+.001,1);return Y((function(){return"getRollupSpan() intervalMs = ".concat(p," -> interval ").concat(h)})),h}},{key:"translateEgressForGraphite",value:function(e){return{automatic:"default",count:"count",sum:"sum",average:"avg",stddev:"stddev",derive:"derivative",derive_stddev:"d_stddev",counter:"counter",counter_stddev:"c_stddev"}[e]||"default"}},{key:"filterMetricsByType",value:function(e,t){return a.a.filter(t,(function(e){var t=((e||{}).type||"").split(",");return!a.a.includes(t,"text")}))}},{key:"stripTags",value:function(e){return e.forEach((function(e,t){if(e.leaf){var r=((e.leaf_data||{}).name||"").split("|ST");e.name=r[0]}})),e}},{key:"buildFetchStream",value:function(e,t,r,n){var i=t[r].metric_name||t[r].name,o=(t[r].leaf_data||{}).uuid,u=(t[r].leaf_data||{}).name;t[r].leaf_data={egress_function:"average",uuid:o||t[r].uuid,metric_name:u,paneltype:t[r].target.paneltype,target:e},"average"!==e.egressoverride&&("automatic"===e.egressoverride?D(i)&&(t[r].leaf_data.egress_function="counter"):t[r].leaf_data.egress_function=e.egressoverride);var s=e.metriclabel;return"default"===e.labeltype?s="%n | %t{*}":"name"===e.labeltype?s="%n":"cardinality"===e.labeltype&&(s="%n | %t-{*}"),s=function(e,t,r){var n=t[r],i=e.replace(/%d/g,(r+1).toString());i=(i=i.replace(/%n/g,E(n.leaf_data&&n.leaf_data.metric_name||n.metric_name||n.name))).replace(/%cn/g,n.metric_name||n.name);var o,u=v(C(n.metric_name||n.name),2),s=(u[0],T(u[1])),l=m(n.check_tags||[]);try{for(l.s();!(o=l.n()).done;){var c=o.value.split(/:/g),f=c.shift();if(!f.startsWith("__")&&""!==f){var p=c.join(":");f=L(f),p=L(p),void 0===s[f]&&(s[f]=[]),s[f].push(p)}}}catch(e){l.e(e)}finally{l.f()}return i=(i=i.replace(/%tv-?{([^}]*)}/g,(function(e){var r=e.substring(3,4),n="-"===r?O:function(){return!0},i=e.substring("-"===r?5:4,e.length-1);if("*"===i){var o,u=[],l=m(a.a.keys(s));try{for(l.s();!(o=l.n()).done;){var c=o.value;!c.startsWith("__")&&""!==c&&n(t,c)&&u.push(c)}}catch(e){l.e(e)}finally{l.f()}return u.sort(),a.a.map(u,(function(e){return s[e][0]})).join(",")}return void 0!==s[i]&&""!==i&&n(t,i)?s[i][0]:""}))).replace(/%t-?{([^}]*)}/g,(function(e){var r=e.substring(2,3),n="-"===r?O:function(){return!0},i=e.substring("-"===r?4:3,e.length-1);if("*"===i){var o,u=[],l=m(a.a.keys(s));try{for(l.s();!(o=l.n()).done;){var c=o.value;if(!c.startsWith("__")&&""!==c&&n(t,c)){var f=s[c][0];u.push(c+":"+f)}}}catch(e){l.e(e)}finally{l.f()}return u.sort(),u.join(",")}return void 0!==s[i]&&""!==i&&n(t,i)?i+":"+s[i][0]:""}))}(s||"",t,r),s=this.templateSrv.replace(s,n),t[r].leaf_data.metriclabel=s,t[r].leaf_data.check_tags=t[r].check_tags,"automatic"===e.rolluptype||a.a.isEmpty(e.metricrollup)||(t[r].leaf_data.rolluptype=e.rolluptype,t[r].leaf_data.metricrollup=e.metricrollup),t[r].leaf_data.metrictype="heatmap"===e.format?"histogram":t[r].type||"numeric",{leaf_name:i,leaf_data:t[r].leaf_data}}},{key:"buildAlertFetchStream",value:function(e,t,r){t[r].leaf_data={target:e};var n,i=t[r].metric_name,o=void t[r].uuid,u=B(t[r].check_tags);try{for(u.s();!(n=u.n()).done;){var s=T(n.value);if(!a.a.isUndefined(s.__check_id)){o=s.__check_id;break}}}catch(e){u.e(e)}finally{u.f()}var l="active"===e.alert_state,c="(metric:"+i+")";return a.a.isUndefined(o)||(c=c+"(check_id:"+o+")"),l&&(c+="(active:1)"),{leaf_name:c,leaf_data:t[r].leaf_data}}},{key:"buildFetchParamsAsync",value:function(e,t,r,n){var a=this,i=this.checkVariablesEncoding(this.templateSrv.replace(t.query,e.scopedVars)),o="graphite"===t.querytype,u=t.tagFilter||"";return(o?this.metricGraphiteQuery.call(this,i,!1,r,n,u):this.metricTagsQuery.call(this,i,!1,r,n)).then((function(e){e.data=a.filterMetricsByType(t,e.data);for(var r=0;r<e.data.length;r++)e.data[r].target=t;return e.data})).then((function(r){for(var n=0;n<r.length;n++)e.std.names.push(a.buildFetchStream(t,r,n,e.scopedVars));return e}))}},{key:"buildAlertQueryAsync",value:function(e,t,r,n){var a=this.templateSrv.replace(t.query,e.scopedVars);""!==t.alert_id&&(a="alert_id:"+this.templateSrv.replace(t.alert_id,e.scopedVars)),e.alert.names.push(a),e.alert.local_filters.push(this.templateSrv.replace(t.local_filter,e.scopedVars)),e.alert.local_filter_matches.push(t.local_filter_match),e.alert.counts_only="alert_counts"===t.querytype,e.alert.query_type=t.alert_count_query_type,e.alert.labels.push(this.templateSrv.replace(t.metriclabel,e.scopedVars)),e.alert.target=t}},{key:"buildIrondbParamsAsync",value:function(e){var t=this,r={},n=new Date(e.range.from).getTime()/1e3,i=new Date(e.range.to).getTime()/1e3,o=Math.round((e.range.to.valueOf()-e.range.from.valueOf())/e.maxDataPoints);r.scopedVars=e.scopedVars,r.meta=e.meta,r.refId=e.refId,r.maxDataPoints=e.maxDataPoints,r.intervalMs=o,r.std={},r.std.start=n,r.std.end=i,r.std.names=[],r.caql={},r.caql.start=n,r.caql.end=i,r.caql.names=[],r.alert={},r.alert.names=[],r.alert.start=n,r.alert.end=i,r.alert.local_filters=[],r.alert.local_filter_matches=[],r.alert.labels=[];var u=a.a.reject(e.targets,(function(e){return e.hide||void 0===e.query&&void 0===e.alert_id||0===e.query.length&&0===e.alert_id.length}));if(!u.length)return{};var s=u.map((function(e){return e.isCaql||"caql"===e.querytype?(r.caql.names.push({leaf_name:e.query,leaf_data:{rolluptype:e.rolluptype,metricrollup:e.metricrollup,format:e.format,refId:e.refId,min_period:e.min_period||""}}),r.refId=e.refId,Promise.resolve(r)):"alerts"===e.querytype||"alert_counts"===e.querytype?t.buildAlertQueryAsync(r,e,n,i):t.buildFetchParamsAsync(r,e,n,i)}));return Promise.all(s).then((function(e){return r})).catch((function(e){Y((function(){return"buildIrondbParams() err = "+JSON.stringify(e)})),0!==e.status||e.status}))}},{key:"buildIrondbParams",value:function(e){var t=this;return new Promise((function(r,n){r(t.buildIrondbParamsAsync(e))}))}},{key:"convertIrondbDf4DataToGrafana",value:function(e,t){var r=t.name,n=t.metricLabels||{},i=t.check_tags||[],o=e.data.data,u=e.data.meta,s=e.data.head.start,l=e.data.head.period,c=e.data.head.error,f=t.format||"ts";if(!a.a.isEmpty(c))throw new Error(c.join("\n"));if(!o||0===o.length)return{data:[]};if(Y((function(){return"Format: "+f})),"table"===f){var p=oe();p.refId=t.refId;for(var h=new Set,d=new Set,g={},y={},v=function(e){var c=1e3*(s+e*l);if(c<1e3*t.start)return"continue";for(var f=function(s){Y((function(){return"convertIrondbDf4DataToGrafana(table) ts: "+c})),p.values.add(c);var l=r+" ["+(s+1)+"]",f=u[s]?u[s].label:l;f=E(f);var v=u[s].tags,m=n[s];if(a.a.isString(m)&&(f=m),void 0!==i[s]&&(void 0===v?v=i[s]:v.push.apply(v,i[s])),Y((function(){return"convertIrondbDf4DataToGrafana(table) name: "+f+", tags: "+v})),void 0!==v){var b,_=B(v);try{for(_.s();!(b=_.n()).done;){var S=b.value.split(/:/g),A=S.shift(),T=S.join(":");if(!A.startsWith("__")){if(A=L(A),T=L(T),!g[A]){var w={name:A,config:{filterable:!1},type:$.FieldType.other,refId:t.refId,values:new $.ArrayVector};g[A]=w,h.add(w)}g[A].values.add(T)}}}catch(e){_.e(e)}finally{_.f()}}if(!y[f]){var C={name:f,config:{filterable:!1,displayName:f},refId:t.refId,type:$.FieldType.number,values:new $.ArrayVector};y[f]=C,d.add(C)}var x=y[f];null!==o[s][e]&&o[s][e].constructor===Number?x.values.add(o[s][e]):x.values.add(null)},v=0;v<o.length;v++)f(v)},m=0;m<o[0].length;m++)v(m);return{t:"table",data:{length:p.values.length,fields:[p].concat(Q(h),Q(d))},state:$.LoadingState.Done}}for(var b=[],_={},S=function(e){var c=r+" ["+(e+1)+"]",f=u[e]?u[e].label:c,p=null!=f.match(/\|ST\[[^\]]*\]/),h=E(f),d=u[e].tags,g=n[e];a.a.isString(g)&&(h=g),Y((function(){return"convertIrondbDf4DataToGrafana() tags: "+d}));var y={};void 0!==i[e]&&(void 0===d?d=i[e]:d.push.apply(d,i[e]));var v=[];if(void 0!==d){var m,S=B(d);try{for(S.s();!(m=S.n()).done;){var A=m.value.split(/:/g),T=A.shift(),w=A.join(":");T.startsWith("__")||(T=L(T),w=L(w),y[T]=w,v.push(T+":"+w))}}catch(e){S.e(e)}finally{S.f()}}var C=h=function(e){for(var t=0,r=e.length,n=e;t<r&&-1!==t;){if(-1===(t=e.indexOf('b"',t)))return n;var a=e.indexOf('"',t+2);if(-1===a)return n;var i=L(e.substring(t,a+1));n=n.replace(e.substring(t,a+1),i),t=a+1}return n}(h);v.length>0&&p&&(C=C+" { "+v.join(", ")+" }");var x=oe();x.config.interval=1e3*l;var O=ue();O.config.displayName=C,O.labels=y;var R=new $.MutableDataFrame({refId:t.refId,fields:[x,O]});Y((function(){return"convertIrondbDf4DataToGrafana() Labels: "+JSON.stringify(y)}));for(var k=0;k<o[e].length;k++){var q=1e3*(s+k*l);if(!(q<1e3*t.start)&&((null===o[e][k]||null!=o[e][k]&&Number===o[e][k].constructor)&&R.add({Time:q,Value:o[e][k]}),o[e][k]&&Object===o[e][k].constructor))for(var P in o[e][k]){var j=o[e][k][P];P=parseFloat(P).toString();var M=q.toString();a.a.isUndefined(_[P])&&(_[P]={target:P,title:P,tags:y,datapoints:[],_ts:{}},b.push(_[P])),a.a.isUndefined(_[P]._ts[M])?(_[P]._ts[M]=[j,q],_[P].datapoints.push(_[P]._ts[M])):_[P]._ts[M][0]+=j}}x.values.length&&b.push(R)},A=0;A<o.length;A++)S(A);return{data:b,query:t}}},{key:"convertIrondbGraphiteDataToGrafana",value:function(e,t){var r,n,a,i=e.data,o=[];if(!i||!i.series)return{data:o};if(i.series&&i.step&&i.from&&i.to)for(var u in i.step*=1e3,i.from*=1e3,i.to*=1e3,i.series){r=i.from-i.step,n=i.series[u],a=[],o.push({target:u,datapoints:a});for(var s=0;s<n.length;s++)r+=i.step,null!=n[s]&&a.push([n[s],r])}return{data:o,query:t}}},{key:"checkVariablesEncoding",value:function(e){var t=/([\\\[\]\(\)\:\-\^\$\?\+\*\.])/g;return this.templateSrv.getVariables().forEach((function(r){var n,a=(r.current||{}).value;try{var i=t.test(a)?a.replace(t,"\\$1"):a;(n=new RegExp(":"+i,"g")).test(e)&&(e=e.replace(n,':b"'+btoa(a)+'"'))}catch(e){}})),e}},{key:"convertAlertDataToGrafana",value:function(e){if(a.a.isUndefined(e)||0===e.length)return{data:[]};for(var t=[],r=0;r<e.length;r++){var n=oe(),i=oe("alert_timestamp"),o=new Set,u=new Set,s={},l={_acknowledgement:se("acknowledgement"),_alert_url:se("circonus_alert_url"),_check_name:se("check_name"),_cleared_on:oe("cleared_timestamp"),_metric_link:se("metric_link"),_severity:ue("severity"),derive:se("derive"),metric_type:se("metric_type"),_value:le("alert_value"),_cleared_value:le("cleared_value"),_cid:se("alert_id")},c={_signature:se("check_uuid"),_canonical_metric_name:se("metric_name"),_metric_name:1,_tags:1},f={threshold_1:ue("threshold_1"),threshold_2:ue("threshold_2"),threshold_3:ue("threshold_3"),threshold_4:ue("threshold_4"),threshold_5:ue("threshold_5")},p=e[r].alert,h=e[r].rule,d={};for(var g in p)if("_occurred_on"===g){var y=p[g];n.values.add(1e3*y),i.values.add(1e3*y);var v=y-1800,m=p._cleared_on,b=y+1800;null!=m&&(b=m+1800),b>Math.floor(Date.now()/1e3)&&(b=Math.floor(Date.now()/1e3));var _=ue("alert_window_start"),S=ue("alert_window_end");u.add(_),u.add(S),_.values.add(1e3*v),S.values.add(1e3*b);var A=se("state");u.add(A),null!=m?A.values.add("OK"):A.values.add("ALERTING")}else if("_cid"===g){var E=p[g];l[g].values.add(E.replace("/alert/","")),u.add(l[g])}else if("_cleared_on"===g){var x=p[g];null!==x?l[g].values.add(1e3*x):l[g].values.add(null),s[g]||(s[g]=l[g],u.add(l[g]))}else if(void 0!==l[g]){var O=p[g];"_cleared_value"===g&&null===p[g]&&(O=""),("_value"===g&&null===p[g]||""===p[g])&&(O=""),l[g].values.add(O),s[g]||(s[g]=l[g],u.add(l[g]))}else if(void 0!==c[g])if("_signature"===g){var R=p._signature.substring(0,p._signature.indexOf("`"));c[g].values.add(R),s[g]||(s[g]=c[g],u.add(c[g]))}else if("_canonical_metric_name"===g){var k=p[g];if(void 0!==k&&""!==k){var q=G(C(k),2),P=q[0],j=q[1];c[g].values.add(P),s[g]||(s[g]=c[g],u.add(c[g]));var M=se("canonical_metric_name");u.add(M),M.values.add(k),w(d,T(j))}}else if("_metric_name"===g&&""===p._canonical_metric_name){var N=p[g];c._canonical_metric_name.values.add(N),s[g]||(s[g]=c._canonical_metric_name,u.add(c._canonical_metric_name))}else if("_tags"===g){var I,D=B(p[g]);try{for(D.s();!(I=D.n()).done;){var H=I.value.split(/:/g),F=H.shift();if(!F.startsWith("__")&&""!==F){var U=H.join(":");F=L(F),U=L(U),void 0===d[F]&&(d[F]=[]),d[F].push(U)}}}catch(e){D.e(e)}finally{D.f()}}var V=se("tags");u.add(V);var z=0,K="";for(var W in d)if(z>0&&(K+="|"),""!==W&&!W.startsWith("__")){z++,K=K+W+":"+d[W][0];var X=se(W);X.values.add(d[W][0]),u.add(X)}V.values.add(K);for(var J=1;J<6;J++){var Z="threshold_"+J;s[Z]||(s[Z]=f[Z],u.add(f[Z]))}var Y={};if(!a.a.isUndefined(h)&&null!==h&&"numeric"===h.metric_type){var ee=h.derive;if("mixed"===ee){var te,re=B(h.rules);try{for(re.s();!(te=re.n()).done&&null==(ee=te.value.windowing_function););}catch(e){re.e(e)}finally{re.f()}}var ne=se("function");u.add(ne),ne.values.add(ee);var ae,ie=B(h.rules);try{for(ie.s();!(ae=ie.n()).done;){var ce=ae.value,fe=ce.severity;0!==fe&&(f["threshold_"+fe].values.add(ce.value),Y[fe]=1)}}catch(e){ie.e(e)}finally{ie.f()}}for(var pe=1;pe<6;pe++)void 0===Y[pe]&&f["threshold_"+pe].values.add(-1);var he=se("rule_text"),de=se("notes");if(u.add(he),u.add(de),a.a.isUndefined(h)||null===h)he.values.add(""),de.values.add("");else{if(null!==h.notes&&h.notes.length>0)de.values.add(h.notes);else{var ge=p.metric_notes;if(void 0!==ge&&ge.length>0)try{var ye=JSON.parse(ge);de.values.add(ye.notes)}catch(e){de.values.add("")}}var ve,me="",be=0,_e=B(h.rules);try{for(_e.s();!(ve=_e.n()).done;){var Se=ve.value,Ae=Se.windowing_function,Te="";null===Ae?Ae="value":Te="(over "+Se.windowing_duration+" seconds) ";var we="if the "+Ae+" "+Te;"on absence"===Se.criteria?we+="is absent for "+Se.value+" seconds, ":"max value"===Se.criteria?we+="is present and >= "+Se.value+", ":"min value"===Se.criteria?we+="is present and < "+Se.value+", ":"matches"===Se.criteria?we+="is present and matches '"+Se.value+"', ":"does not match"===Se.criteria&&(we+="is present and does not match '"+Se.value+"', "),be>0&&(we+="and prior rules aren't triggered, "),0===Se.severity?we+="clear the alert.":we+="trigger a sev "+Se.severity+" alert and wait "+Se.wait+" minutes before notifying.",be>0&&(me+="|"),me+=we,be++}}catch(e){_e.e(e)}finally{_e.f()}he.values.add(me)}t.push({length:n.values.length,fields:[n,i].concat(Q(o),Q(u))})}return{t:"table",data:t,state:$.LoadingState.Done}}}])&&K(t.prototype,r),n&&K(t,n),Object.defineProperty(t,"prototype",{writable:!1}),o}($.DataSourceApi);function oe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$.TIME_SERIES_TIME_FIELD_NAME;return{name:e,type:$.FieldType.time,config:{},values:new $.ArrayVector}}function ue(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$.TIME_SERIES_VALUE_FIELD_NAME;return{name:e,type:$.FieldType.number,config:{},values:new $.ArrayVector}}function se(e){return{name:e,type:$.FieldType.string,config:{},values:new $.ArrayVector}}function le(e){return{name:e,type:$.FieldType.other,config:{},values:new $.ArrayVector}}ie.DEFAULT_CACHE_ENTRIES=128,ie.DEFAULT_CACHE_TIME_MS=6e4,ie.MAX_DATAPOINTS_THRESHOLD=1.5,ie.MAX_EXACT_DATAPOINTS_THRESHOLD=1.5,ie.MIN_DURATION_MS_FETCH=1,ie.MIN_DURATION_MS_CAQL=6e4,ie.ROLLUP_ALIGN_MS=a.a.map([1,60,3600,86400],(function(e){return 1e3*e})),ie.ROLLUP_ALIGN_MS_1DAY=864e5;var ce=r(37);r(115);function fe(e){return(fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pe(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return he(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return he(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,u=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){u=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(u)throw i}}}}function he(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function de(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ge(e,t){return(ge=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ye(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=me(e);if(t){var a=me(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return ve(this,r)}}function ve(e,t){if(t&&("object"===fe(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function me(e){return(me=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var be=i("IrondbQueryCtrl");var _e=function(e){o.$inject=["$scope","$injector","uiSegmentSrv","templateSrv"],function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ge(e,t)}(o,e);var t,r,n,i=ye(o);function o(e,t,r,n){var u;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(u=i.call(this,e,t)).uiSegmentSrv=r,u.templateSrv=n,u.defaults={},u.alertStateOptions=[{value:"active",text:"Active"},{value:"inactive",text:"Inactive"}],u.queryTypeOptions=[{value:"caql",text:"CAQL"},{value:"basic",text:"Standard"},{value:"graphite",text:"Graphite Style"},{value:"alerts",text:"Alerts"},{value:"alert_counts",text:"Alert Counts"}],u.localFilterMatchOptions=[{value:"all",text:"ALL"},{value:"any",text:"ANY"}],u.alertCountQueryTypeOptions=[{value:"instant",text:"instant"},{value:"range",text:"range"}],u.labelTypeOptions=[{value:"default",text:"name and tags"},{value:"name",text:"name only"},{value:"cardinality",text:"high cardinality tags"},{value:"custom",text:"custom"}],u.egressTypeOptions=[{value:"automatic",text:"automatic"},{value:"count",text:"number of data points (count)"},{value:"average",text:"average value (gauge)"},{value:"stddev",text:"standard deviation a.k.a. Ï (stddev)"},{value:"derive",text:"rate of change (derive)"},{value:"derive_stddev",text:"rate of change Ï (derive_stddev)"},{value:"counter",text:"rate of positive change (counter)"},{value:"counter_stddev",text:"rate of positive change Ï (counter_stddev)"}],u.rollupTypeOptions=[{value:"automatic",text:"automatic"},{value:"minimum",text:"minimum"},{value:"exact",text:"exact"}],u.formatOptions=[{value:"ts",text:"Time Series"},{value:"table",text:"Table"},{value:"heatmap",text:"Heatmap"}],u.minPeriodOptions=[{value:"",text:"none"},{value:"60s",text:"60s"},{value:"300s",text:"300s"}],u.caqlFindFunctions={count:"count",average:"average",stddev:"stddev",derive:"derivative",derive_stddev:"derivative_stddev",counter:"counter",counter_stddev:"counter_stddev"},u.histogramTransforms={count:" | histogram:count()",average:" | histogram:mean()",stddev:" | histogram:stddev()",derive:" | histogram:rate()",derive_stddev:"",counter:" | histogram:rate()",counter_stddev:""},a.a.defaultsDeep(u.target,u.defaults),u.target.egressoverride=u.target.egressoverride||"average",u.target.metriclabel=u.target.metriclabel||"",u.target.labeltype=u.target.labeltype||"default",u.target.rolluptype=u.target.rolluptype||"automatic",u.target.query=u.target.query||"",u.target.queryDisplay=u.target.queryDisplay||u.target.query||"",u.target.format=u.target.format||"ts";var s=u.target.querytype;(u.queryTypeOptions.some((function(e){return e.value===s}))?u.target.querytype=s:null!==u.target.isCaql?u.target.querytype=u.target.isCaql?"caql":u.datasource.allowGraphite?"graphite":"basic":u.target.querytype=u.datasource.allowGraphite?"graphite":"basic","caql"===u.target.querytype&&(u.target.lastCAQL=u.target.query),u.target.lastQueryType=u.target.lastQueryType||u.target.querytype,u.target.local_filter=u.target.local_filter||"",u.target.local_filter_match=u.target.local_filter_match||"all",u.target.alert_count_query_type=u.target.alert_count_query_type||"instant",u.target.alert_id=u.target.alert_id||"",u.target.min_period=u.target.min_period||"",u.target.min_period&&(u.target.min_period+=/[a-zA-Z]$/.test(u.target.min_period)?"":"s"),u.datasource.caqlMinPeriod)&&(u.datasource.caqlMinPeriod.trim().split(",").forEach((function(e){/^\d+[a-zA-Z]?$/.test(e)&&(e+=/[a-zA-Z]$/.test(e)?"":"s",u.minPeriodOptions.some((function(t){return t.value===e}))||u.minPeriodOptions.push({value:e,text:e}))})),u.minPeriodOptions.some((function(e){return e.value===u.target.min_period}))||u.minPeriodOptions.push({value:u.target.min_period,text:u.target.min_period}),u.minPeriodOptions.sort((function(e,t){var r=ae(e.value||"0"),n=ae(t.value||"0");return r<n?-1:r>n?1:0})));return u.queryModel=new H(u.datasource,u.target,n),u.checkForPlusAndSelect(),u.buildSegments(),u.updateMetricLabelValue(!1),u}return t=o,(r=[{key:"resetQueryTarget",value:function(){be((function(){return"resetQueryTarget()"})),this.target.query="",this.target.queryDisplay="",this.target.egressoverride="average",this.target.labeltype="default",this.target.rolluptype="automatic",this.target.format="ts",this.target.local_filter="",this.target.local_filter_match="all",this.target.alert_id="",this.emptySegments(),this.queryModel.parseTarget(),this.checkForPlusAndSelect(),this.buildSegments(),this.panelCtrl.refresh()}},{key:"getQueryTypeOptions",value:function(){var e=this.datasource.allowGraphite,t=[];return a.a.each(this.queryTypeOptions,(function(r,n){(e||"graphite"!==r.value)&&t.push(r)})),t}},{key:"changeEditorMode",value:function(){if("caql"===this.target.lastQueryType&&"basic"===this.target.querytype)this.checkForPlusAndSelect(),this.buildSegments(),this.buildQueries();else if("caql"===this.target.lastQueryType&&"graphite"===this.target.querytype)this.checkForPlusAndSelect(),this.buildSegments(),this.buildQueries();else if("basic"===this.target.lastQueryType&&"caql"===this.target.querytype){var e="and(__name:*)"===this.target.query;this.target.lastCAQL&&e?this.target.query=this.target.queryDisplay=this.target.lastCAQL:this.target.query=this.target.queryDisplay=this.buildCAQLFromStandard()}else if("basic"===this.target.lastQueryType&&"graphite"===this.target.querytype)this.convertStandardToGraphite(),this.checkForPlusAndSelect(),this.buildSegments(),this.buildGraphiteQuery();else if("graphite"===this.target.lastQueryType&&"caql"===this.target.querytype){var t=""===this.target.query||"*"===this.target.query||"*.*"===this.target.query;this.target.lastCAQL&&t?this.target.query=this.target.queryDisplay=this.target.lastCAQL:this.target.query=this.target.queryDisplay=this.buildCAQLFromGraphite()}else"graphite"===this.target.lastQueryType&&"basic"===this.target.querytype?(this.convertGraphiteToStandard(),this.checkForPlusAndSelect(),this.buildSegments(),this.buildStandardQuery()):"alerts"!==this.target.querytype&&"alert_counts"!==this.target.queryType||(this.target.query=this.target.queryDisplay="");this.panelCtrl.refresh(),this.target.lastQueryType=this.target.querytype,"caql"===this.target.querytype&&(this.target.lastCAQL=this.target.query)}},{key:"alertStateValueChanged",value:function(){this.panelCtrl.refresh()}},{key:"updateAlertQuery",value:function(){this.panelCtrl.refresh()}},{key:"updateAlertId",value:function(){this.target.query=this.target.queryDisplay="",this.panelCtrl.refresh()}},{key:"updateAlertLocalFilter",value:function(){this.panelCtrl.refresh()}},{key:"localFilterMatchValueChanged",value:function(){this.panelCtrl.refresh()}},{key:"alertCountQueryTypeValueChanged",value:function(){this.panelCtrl.refresh()}},{key:"queryTypeValueChanged",value:function(){this.changeEditorMode(),this.panelCtrl.refresh()}},{key:"labelTypeValueChanged",value:function(){"custom"===this.target.labeltype&&setTimeout((function(){document.getElementById("metriclabel").focus()}),50),this.panelCtrl.refresh()}},{key:"formatChanged",value:function(){this.panelCtrl.refresh()}},{key:"metricLabelKeyUp",value:function(e){var t=this,r=e.currentTarget;13===e.keyCode&&setTimeout((function(){t.target.metriclabel=r.value,t.updateMetricLabelValue()}),0)}},{key:"updateMetricLabelValue",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];""===this.target.metriclabel&&"custom"===this.target.labeltype&&(this.target.labeltype="default"),e&&this.panelCtrl.refresh()}},{key:"rollupTypeValueChanged",value:function(){var e=!0;"automatic"!==this.target.rolluptype&&(a.a.isEmpty(this.target.metricrollup)&&(e=!1),setTimeout((function(){document.getElementById("metricrollup").focus()}),50)),e&&this.panelCtrl.refresh()}},{key:"metricRollupKeyUp",value:function(e){var t=this,r=e.currentTarget;13===e.keyCode&&setTimeout((function(){t.target.metricrollup=r.value,t.updateMetricRollupValue()}),0)}},{key:"updateMetricRollupValue",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];""===this.target.metricrollup&&"automatic"!==this.target.rolluptype&&(this.target.rolluptype="automatic"),e&&this.panelCtrl.refresh()}},{key:"minPeriodChanged",value:function(){this.panelCtrl.refresh()}},{key:"egressValueChanged",value:function(){this.panelCtrl.refresh()}},{key:"onChangeInternal",value:function(){this.panelCtrl.refresh()}},{key:"getStandardCategoryOptions",value:function(e,t){var r=this,n=(this.segments[e]||{})._type,a=I(S.MetricName,(this.segments[0]||{}).value);return this.datasource.metricTagCatsQuery("and(__name:"+a+")").then((function(e){if(e.data&&e.data.length>0){var t,a=[],i=pe(e.data);try{for(i.s();!(t=i.n()).done;){var o=t.value;a.push(r.newSegment(S.TagCat,{value:L(o),expandable:!0}))}}catch(e){i.e(e)}finally{i.f()}return n===S.TagPlus&&(a.unshift(r.newSegment(S.TagOp,{value:"and("})),a.unshift(r.newSegment(S.TagOp,{value:"not("})),a.unshift(r.newSegment(S.TagOp,{value:"or("}))),a}})).catch((function(e){return be((function(){return"getOptionSegments() err = "+e})),[]}))}},{key:"getStandardValueOptions",value:function(e,t){var r=this,n=I(S.MetricName,(this.segments[0]||{}).value),i=(this.segments[e-2]||{}).value;return"select tag"===i?Promise.resolve([]):this.datasource.metricTagValsQuery("and(__name:"+n+")",I(S.TagCat,i,!1)).then((function(e){var t=e.data,n=[];if(n.push(r.newSegment(S.TagVal,{value:"*",expandable:!0})),t&&t.length){a.a.eachRight(r.templateSrv.variables,(function(e){n.push(r.newSegment(S.TagVal,{type:"template",value:"$"+e.name,expandable:!0}))}));var i,o=pe(t);try{for(o.s();!(i=o.n()).done;){var u=i.value;n.push(r.newSegment(S.TagVal,{value:L(u),expandable:!0}))}}catch(e){o.e(e)}finally{o.f()}}return n})).catch((function(e){return be((function(){return"getOptionSegments() err = "+e})),[]}))}},{key:"getStandardPlusOptions",value:function(e,t){return this.getStandardCategoryOptions(e,t)}},{key:"getStandardOperatorOptions",value:function(e,t){var r=[this.newSegment(S.TagOp,{value:"REMOVE"}),this.newSegment(S.TagOp,{value:"and("}),this.newSegment(S.TagOp,{value:"not("}),this.newSegment(S.TagOp,{value:"or("})];return Promise.resolve(r)}},{key:"getStandardDefaultOptions",value:function(e,t){var r=this,n=t||"";return(this.segments[e]||{})._type===S.MetricName?(I(S.MetricName,n)!==n?n="b/"+btoa(String(n).replace(/[\\^$*+?.()|[\]{}]/g,"\\$&"))+"/":n+="*",this.datasource.metricTagsQuery("and(__name:"+n+")",!0).then((function(e){var t=a.a.map(e.data,(function(e){return E(e.metric_name)}));return t=a.a.uniq(t),a.a.map(t,(function(e){return r.newSegment(S.MetricName,{value:e,expandable:!0})}))})).catch((function(e){return be((function(){return"getOptionSegments() err = "+e.toString()})),[]}))):Promise.resolve([])}},{key:"getGraphiteCategoryOptions",value:function(e,t){var r=this,n=(this.gSegments[e]||{})._type,a=this.queryModel.getGraphiteSegmentPath().replace(/\.select\smetric\.$/,".*").replace(/\.$/,"");return this.datasource.metricTagCatsQuery("and(__name:"+a+")").then((function(e){if(e.data&&e.data.length>0){var t,a=[],i=pe(e.data);try{for(i.s();!(t=i.n()).done;){var o=t.value;a.push(r.newSegment(S.TagCat,{value:L(o),expandable:!0}))}}catch(e){i.e(e)}finally{i.f()}return n===S.TagPlus&&(a.unshift(r.newSegment(S.TagOp,{value:"and("})),a.unshift(r.newSegment(S.TagOp,{value:"not("})),a.unshift(r.newSegment(S.TagOp,{value:"or("}))),a}})).catch((function(e){return be((function(){return"getOptionSegments() err = "+e})),[]}))}},{key:"getGraphiteValueOptions",value:function(e,t){var r=this,n=this.queryModel.getGraphiteSegmentPath().replace(/\.select\smetric\.$/,".*").replace(/\.$/,""),i=(this.gSegments[e-2]||{}).value;return"select tag"===i?Promise.resolve([]):this.datasource.metricTagValsQuery("and(__name:"+n+")",I(S.TagCat,i,!1)).then((function(e){var t=e.data,n=[];if(n.push(r.newSegment(S.TagVal,{value:"*",expandable:!0})),t&&t.length){a.a.eachRight(r.templateSrv.variables,(function(e){n.push(r.newSegment(S.TagVal,{type:"template",value:"$"+e.name,expandable:!0}))}));var i,o=pe(t);try{for(o.s();!(i=o.n()).done;){var u=i.value;n.push(r.newSegment(S.TagVal,{value:L(u),expandable:!0}))}}catch(e){o.e(e)}finally{o.f()}}return n})).catch((function(e){return be((function(){return"getOptionSegments() err = "+e})),[]}))}},{key:"getGraphitePlusOptions",value:function(e,t){return this.getGraphiteCategoryOptions(e,t)}},{key:"getGraphiteOperatorOptions",value:function(e,t){var r=[this.newSegment(S.TagOp,{value:"REMOVE"}),this.newSegment(S.TagOp,{value:"and("}),this.newSegment(S.TagOp,{value:"not("}),this.newSegment(S.TagOp,{value:"or("})];return Promise.resolve(r)}},{key:"getGraphiteDefaultOptions",value:function(e,t){var r=this,n=0===e,i=this.datasource.ignoreGraphiteUUIDs(),o=n?"":this.queryModel.getGraphiteSegmentPathUpTo(e);return this.datasource.metricGraphiteQuery(o+(t||"")+"*",!0).then((function(e){e.data=r.datasource.stripTags(e.data);var t=a.a.map(e.data,(function(e){var t=new RegExp(function(e){for(var t=[],r=0;r<e.length;++r){var n=e.charAt(r);switch(n){case"?":t.push(".");break;case"*":t.push(".*?");break;default:"[]{}()*?.,".indexOf(n)>=0&&t.push("\\"),t.push(n)}}return t.join("")}(o),"i");return i&&(e.name=e.name.replace(/^(\w{8}-\w{4}-\w{4}-\w{4}-\w{12})./,"")),r.uiSegmentSrv.newSegment({value:e.name.replace(t,""),expandable:!e.leaf})}));return t.length&&(t=a.a.uniqBy(t,"value")),(n||t.length)&&t.unshift(r.uiSegmentSrv.newSegment("*")),t})).catch((function(e){return[]}))}},{key:"newSegment",value:function(e,t){var r=this.uiSegmentSrv.newSegment(t);return this.setSegmentType(r,e)}},{key:"setSegmentType",value:function(e,t){return e._type=t,e._typeName=S[t],e}},{key:"convertSegment",value:function(e){var t;return t=e.type===S.TagOp?this.uiSegmentSrv.newOperator(e.value):e.type===S.TagEnd?this.uiSegmentSrv.newOperator(")"):e.type===S.TagPair?this.uiSegmentSrv.newCondition(":"):e.type===S.TagSep?this.uiSegmentSrv.newCondition(","):e.type===S.TagPlus?this.uiSegmentSrv.newPlusButton():this.uiSegmentSrv.newSegment(e),this.setSegmentType(t,e.type)}},{key:"setSegmentFocus",value:function(e){var t="graphite"===this.target.querytype;a.a.each(this[t?"gSegments":"segments"],(function(t,r){t.focus=e===r}))}},{key:"caqlValueChanged",value:function(){this.buildQueries(),this.panelCtrl.refresh()}},{key:"updateStandardCategorySegmentValue",value:function(e,t){return this.updateStandardDefaultSegmentValue(e,t)}},{key:"updateStandardValueSegmentValue",value:function(e,t){return this.updateStandardDefaultSegmentValue(e,t)}},{key:"updateStandardPlusSegmentValue",value:function(e,t){this.error=null,this.queryModel.updateSegmentValue(t,e),"and("===t.value||"not("===t.value||"or("===t.value?(this.queryModel.addOperator(e,t.value),this.buildSegments(),this.setSegmentFocus(e+3)):(this.queryModel.addTag(e,t.value),this.buildSegments(),this.setSegmentFocus(e+1),this.buildQueries(),this.panelCtrl.refresh())}},{key:"updateStandardOperatorSegmentValue",value:function(e,t){this.error=null,this.queryModel.updateSegmentValue(t,e),"REMOVE"===t.value&&this.queryModel.removeOperator(e),this.checkForPlusAndSelect(),this.buildSegments(),this.buildQueries(),this.panelCtrl.refresh()}},{key:"updateStandardDefaultSegmentValue",value:function(e,t){this.error=null,this.queryModel.updateSegmentValue(t,e),0===e&&(this.removeSegments(e+1),this.checkForPlusAndSelect(),this.buildSegments(),this.setSegmentFocus(e+1)),this.buildQueries(),this.panelCtrl.refresh()}},{key:"updateGraphiteCategorySegmentValue",value:function(e,t){return this.updateGraphiteDefaultSegmentValue(e,t)}},{key:"updateGraphiteValueSegmentValue",value:function(e,t){return this.updateGraphiteDefaultSegmentValue(e,t)}},{key:"updateGraphitePlusSegmentValue",value:function(e,t){this.error=null,this.queryModel.updateSegmentValue(t,e),"and("===t.value||"not("===t.value||"or("===t.value?(this.queryModel.addOperator(e,t.value),this.buildSegments(),this.setSegmentFocus(e+3)):(this.queryModel.addTag(e,t.value),this.buildSegments(),this.setSegmentFocus(e+1),this.buildQueries(),this.panelCtrl.refresh())}},{key:"updateGraphiteOperatorSegmentValue",value:function(e,t){this.error=null,this.queryModel.updateSegmentValue(t,e),"REMOVE"===t.value&&this.queryModel.removeOperator(e),this.checkForPlusAndSelect(),this.buildSegments(),this.buildQueries(),this.panelCtrl.refresh()}},{key:"updateGraphiteDefaultSegmentValue",value:function(e,t){var r=/\./.test(String(t.value));if(this.error=null,this.queryModel.updateSegmentValue(t,e),0===e&&this.removeSegments(e+1),r){var n=this.queryModel.getGraphiteSegmentPath().replace(/\.$/,"");this.queryModel.convertStandardToGraphite(n)}t.expandable&&t._type===S.MetricName&&this.queryModel.addSelectMetricSegment(),this.checkForPlusAndSelect(),this.buildSegments(),t.expandable&&this.setSegmentFocus(e+1),this.buildQueries(),this.panelCtrl.refresh()}},{key:"buildSegments",value:function(){var e=this;this.gSegments=this.queryModel.gSegments.map((function(t){return e.convertSegment(t)})),this.segments=this.queryModel.segments.map((function(t){return e.convertSegment(t)}))}},{key:"checkForPlusAndSelect",value:function(){if("graphite"===this.target.querytype){var e=this.queryModel.getGraphiteSegmentPath();e&&"."!==e||this.queryModel.addSelectMetricSegment()}this.queryModel.addPlusSegment()}},{key:"removeSegments",value:function(e){var t="graphite"===this.target.querytype;this[t?"gSegments":"segments"]=this[t?"gSegments":"segments"].splice(0,e),this.queryModel.removeSegments(e)}},{key:"emptySegments",value:function(){this["graphite"===this.target.querytype?"gSegments":"segments"]=[],this.queryModel.emptySegments()}},{key:"getCAQLFindFunction",value:function(){if("Heatmap"===this.target.paneltype||void 0!==this.target.hist_transform)return"find:histogram";var e="find",t=this.target.egressoverride;return"average"!==t&&"automatic"!==t&&(e+=":"+(t=this.caqlFindFunctions[t])),e}},{key:"getCAQLHistogramTransform",value:function(){if(void 0!==this.target.hist_transform){var e=this.target.egressoverride;return"automatic"===e&&(e="statsd_counter"===this.target.hist_transform?"counter":"average"),this.histogramTransforms[e]}return""}},{key:"getCAQLLabel",value:function(){var e=this.target.labeltype,t=this.target.metriclabel;if("default"!==e){if("custom"===e&&""!==t)return" | label('"+(t=t.replace(/'/g,'"'))+"')";if("name"===e)return" | label('%n')";if("cardinality"===e)return" | label('%n | %t-{*}')"}return" | label('%cn')"}},{key:"buildCAQLFromStandard",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t="*",r=[];this.queryModel.segments.forEach((function(e){switch(e.type){case S.MetricName:t=e.value;break;case S.TagPair:r.push(":");break;case S.TagSep:r.push(",");break;case S.TagEnd:r.push(")");break;case S.TagCat:case S.TagVal:case S.TagOp:r.push(e.value)}}));var n=r.join(""),a=this.getCAQLFindFunction()+"('"+e+t+"'";return n?a+=", '"+n+"')"+this.getCAQLHistogramTransform()+this.getCAQLLabel():("*"===t&&(a+=", limit=10"),a+=")"+this.getCAQLHistogramTransform()+this.getCAQLLabel()),a}},{key:"buildCAQLFromGraphite",value:function(){return this.convertGraphiteToStandard(),this.buildSegments(),this.buildCAQLFromStandard("[graphite]")}},{key:"convertStandardToGraphite",value:function(){this.queryModel.convertStandardToGraphite(),this.checkForPlusAndSelect(),this.buildSegments(),this.buildGraphiteQuery()}},{key:"convertGraphiteToStandard",value:function(){this.queryModel.convertGraphiteToStandard(),this.checkForPlusAndSelect(),this.buildSegments(),this.buildStandardQuery()}},{key:"buildGraphiteQuery",value:function(){this.target.query=this.target.queryDisplay=this.queryModel.getGraphiteSegmentPath().replace(/\.select\smetric.$/,"").replace(/\.$/,"").replace(/^select\smetric$/,"");var e=[];this.queryModel.gSegments.forEach((function(t){switch(t.type){case S.TagPair:e.push(":");break;case S.TagSep:e.push(",");break;case S.TagEnd:e.push(")");break;case S.TagCat:case S.TagVal:case S.TagOp:e.push(t.value)}})),this.target.tagFilter=e.join("")}},{key:"buildStandardQuery",value:function(){var e,t=this.segments.slice(),r=t.shift().value,n="and(__name:"+I(S.MetricName,r),a=!1,i=pe(t);try{for(i.s();!(e=i.n()).done;){var o=e.value,u=o._type;u!==S.TagPlus&&(a||u===S.TagEnd||u===S.TagSep||(n+=","),a=u===S.TagOp||u===S.TagPair||u===S.TagCat||u===S.TagSep,n+=I(u,o.value))}}catch(e){i.e(e)}finally{i.f()}n+=")",this.target.query=this.target.queryDisplay=n}},{key:"buildQueries",value:function(){this.queryModel.error||("graphite"===this.target.querytype?this.buildGraphiteQuery():"basic"===this.target.querytype&&this.buildStandardQuery(),this.queryModel.renderQueries(this.panelCtrl.panel.targets))}}])&&de(t.prototype,r),n&&de(t,n),Object.defineProperty(t,"prototype",{writable:!1}),o}(ce.QueryCtrl);function Se(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}_e.templateUrl="partials/query.editor.html";var Ae=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.current.jsonData.irondbType=this.current.jsonData.irondbType||"hosted",this.current.jsonData.resultsLimitDefault="100",this.current.jsonData.resultsLimit=this.current.jsonData.resultsLimit||this.current.jsonData.resultsLimitDefault,this.current.jsonData.caqlMinPeriod=this.current.jsonData.caqlMinPeriod||"",this.current.jsonData.truncateNow=a.a.defaultTo(this.current.jsonData.truncateNow,!1),this.current.jsonData.minTruncationDefault=30,this.current.jsonData.minTruncation=this.current.jsonData.minTruncation||this.current.jsonData.minTruncationDefault,this.current.jsonData.useCaching=a.a.defaultTo(this.current.jsonData.useCaching,!0),this.current.jsonData.activityTracking=a.a.defaultTo(this.current.jsonData.activityTracking,!0),this.current.jsonData.allowGraphite=a.a.defaultTo(this.current.jsonData.allowGraphite,!1),this.current.jsonData.queryPrefixDefault="",this.current.jsonData.queryPrefix=this.current.jsonData.queryPrefix||this.current.jsonData.queryPrefixDefault}var t,r,n;return e.$inject=["$scope"],t=e,(r=[{key:"resultsLimitKeyUp",value:function(e){var t=this,r=e.currentTarget;13===e.keyCode&&setTimeout((function(){t.current.jsonData.resultsLimit=r.value,t.updateResultsLimitValue(e)}),0)}},{key:"updateResultsLimitValue",value:function(e){var t=e.currentTarget,r=(this.current.jsonData.resultsLimit||"").trim(),n="-1"===r||"none"===r||!/\D/.test(r);t.value=this.current.jsonData.resultsLimit=r&&n?r:this.current.jsonData.resultsLimitDefault}},{key:"caqlMinPeriodKeyUp",value:function(e){var t=this,r=e.currentTarget;13===e.keyCode&&setTimeout((function(){t.current.jsonData.caqlMinPeriod=r.value,t.updateCaqlMinPeriodValue(e)}),0)}},{key:"updateCaqlMinPeriodValue",value:function(e){var t=e.currentTarget,r=(this.current.jsonData.caqlMinPeriod||"").replace(/[^\d,smhd]/g,"");t.value=this.current.jsonData.caqlMinPeriod=r}},{key:"minTruncationKeyUp",value:function(e){var t=this,r=e.currentTarget;13===e.keyCode&&setTimeout((function(){t.current.jsonData.minTruncation=r.value,t.updateMinTruncationValue(e)}),0)}},{key:"updateMinTruncationValue",value:function(e){var t=e.currentTarget,r=(this.current.jsonData.minTruncation||"").trim();r&&!/\D/.test(r)?t.value=this.current.jsonData.minTruncation=r:t.value=this.current.jsonData.minTruncation=this.current.jsonData.minTruncationDefault}},{key:"queryPrefixKeyUp",value:function(e){var t=this,r=e.currentTarget;13===e.keyCode&&setTimeout((function(){t.current.jsonData.queryPrefix=r.value,t.updateQueryPrefixValue(e)}),0)}},{key:"updateQueryPrefixValue",value:function(e){var t=e.currentTarget,r=(this.current.jsonData.queryPrefix||"").trim();r&&!/\.$/.test(r)&&(t.value=this.current.jsonData.queryPrefix=r+".")}}])&&Se(t.prototype,r),n&&Se(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Te(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function we(e,t,r){return t&&Te(e.prototype,t),r&&Te(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}Ae.templateUrl="partials/config.html";var Ce=we((function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.annotationQueryTypeOptions=[{value:"alerts",text:"Alerts"}],this.annotationFilterApplyOptions=[{value:"all",text:"ALL"},{value:"any",text:"ANY"}],this.annotation.alertId=this.annotation.alertId||"",this.annotation.annotationQueryText=this.annotation.annotationQueryText||"",this.annotation.annotationQueryType=this.annotation.annotationQueryType||"alerts",this.annotation.annotationFilterApply=this.annotation.annotationFilterApply||"all",this.annotation.annotationFilterText=this.annotation.annotationFilterText||""}));Ce.templateUrl="partials/annotation.editor.html";var Ee=r(2),xe=r.n(Ee),Oe=r(21);function Re(e){return(Re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ke(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function qe(e,t){return(qe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Pe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Me(e);if(t){var a=Me(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return je(this,r)}}function je(e,t){if(t&&("object"===Re(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Me(e){return(Me=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ne=[{value:"metric names",label:"Metric Names"},{value:"tag categories",label:"Tag Categories"},{value:"tag values",label:"Tag Values"},{value:"graphite style",label:"Graphite-Style Metric Names"}],Ie=[{value:100,label:"100"},{value:500,label:"500"},{value:1e3,label:"1000"},{value:2e3,label:"2000"},{value:5e3,label:"5000"}],Le=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&qe(e,t)}(i,e);var t,r,n,a=Pe(i);function i(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),t=a.call(this,e);var r={queryType:Ne[0].value,metricFindQuery:"",tagCategory:"",resultsLimit:Ie[0].value},n=Object.assign({},r,e.query);t.query=n;var o=Ne.find((function(e){return e.value===n.queryType}))||(n.tagCategory?Ne[2]:Ne[0]),u=Ie.find((function(e){return e.value===n.resultsLimit}))||Ie[0];return t.state={queryTypeOption:o,metricFindQuery:n.metricFindQuery||"",tagCategory:n.tagCategory||"",resultsLimitOption:u},t}return t=i,(r=[{key:"render",value:function(){var e=this,t=this.props,r=t.query,n=t.onChange,a=this.state,i=a.queryTypeOption,o=a.metricFindQuery,u=a.tagCategory,s=a.resultsLimitOption,l="metric names"===this.query.queryType||!this.query.queryType&&!this.query.tagCategory,c="tag categories"===this.query.queryType,f="tag values"===this.query.queryType||!this.query.queryType&&this.query.tagCategory,p="graphite style"===this.query.queryType,h=this.query.resultsLimit>1e3,d=function(){var t=Object.assign({},e.query);n(t,"tag values"===e.query.queryType?"".concat(e.query.metricFindQuery," (").concat(e.query.queryType," of '").concat(e.query.tagCategory,"')"):"".concat(e.query.metricFindQuery," (").concat(e.query.queryType,")"))};!r&&this.query.metricFindQuery&&d();var g={width:"364px"};return xe.a.createElement("div",null,xe.a.createElement("div",{className:"gf-form",style:g},xe.a.createElement("span",{className:"gf-form-label width-10"},"Query Type"),xe.a.createElement(Oe.Select,{"aria-label":"Select query type",isSearchable:!1,options:Ne,onChange:function(t){e.query.queryType=t.value,e.setState({queryTypeOption:t}),d()},value:i})),xe.a.createElement("div",{className:"gf-form"},l&&xe.a.createElement("span",{className:"gf-form-label width-10"},"Metric Search Query"),(c||f)&&xe.a.createElement("span",{className:"gf-form-label width-10"},"Metric Search Filter"),p&&xe.a.createElement("span",{className:"gf-form-label width-10"},"Metric Name Search"),xe.a.createElement("input",{name:"metricFindQuery",className:"gf-form-input",onChange:function(t){e.query.metricFindQuery=t.currentTarget.value,e.setState({metricFindQuery:e.query.metricFindQuery})},onBlur:d,value:o})),f&&xe.a.createElement("div",{className:"gf-form"},xe.a.createElement("span",{className:"gf-form-label width-10"},"Tag Category"),xe.a.createElement("input",{name:"tagCategory",className:"gf-form-input",onChange:function(t){e.query.tagCategory=t.currentTarget.value,e.setState({tagCategory:e.query.tagCategory})},onBlur:d,value:u})),xe.a.createElement("div",{className:"gf-form",style:g},xe.a.createElement("span",{className:"gf-form-label width-10"},"Results Limit"),xe.a.createElement(Oe.Select,{"aria-label":"Select results limit",className:"width-15",isSearchable:!1,options:Ie,onChange:function(t){e.query.resultsLimit=t.value,e.setState({resultsLimitOption:t}),d()},value:s}),h&&xe.a.createElement("div",{style:{position:"absolute",top:"0.25rem",left:"375px",width:"300px",fontSize:"90%",lineHeight:"1",opacity:"0.5"}},"Large variable lists can cause performance problems on dashboards. Use with care.")))}}])&&ke(t.prototype,r),n&&ke(t,n),Object.defineProperty(t,"prototype",{writable:!1}),i}(Ee.PureComponent);r.d(t,"Datasource",(function(){return ie})),r.d(t,"QueryCtrl",(function(){return _e})),r.d(t,"ConfigCtrl",(function(){return Ae})),r.d(t,"AnnotationsQueryCtrl",(function(){return Ce})),r.d(t,"VariableQueryEditor",(function(){return Le}))}])}));
//# sourceMappingURL=module.js.map