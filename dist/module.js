/*! For license information please see module.js.LICENSE.txt */
define(["lodash","@grafana/data","app/plugins/sdk","app/core/app_events"],(function(e,t,r,n){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,r),a.l=!0,a.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(n,a,function(t){return e[t]}.bind(null,a));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/",r(r.s=118)}([function(t,r){t.exports=e},function(e,r){e.exports=t},function(e,t,r){"use strict";e.exports=function(e){if("function"!=typeof e)throw new TypeError(e+" is not a function");return e}},function(e,t,r){"use strict";var n=r(50)();e.exports=function(e){return e!==n&&null!==e}},function(e,t,r){"use strict";var n=r(51),a=Math.max;e.exports=function(e){return a(0,n(e))}},function(e,t,r){},function(e,t,r){"use strict";var n=r(27),a=r(65),o=r(24),i=r(22),u=r(69);(e.exports=function(e,t){var r,a,s,l,c;return arguments.length<2||"string"!=typeof e?(l=t,t=e,e=null):l=arguments[2],n(e)?(r=u.call(e,"c"),a=u.call(e,"e"),s=u.call(e,"w")):(r=s=!0,a=!1),c={value:t,configurable:r,enumerable:a,writable:s},l?o(i(l),c):c}).gs=function(e,t,r){var s,l,c,f;return"string"!=typeof e?(c=r,r=t,t=e,e=null):c=arguments[3],n(t)?a(t)?n(r)?a(r)||(c=r,r=void 0):r=void 0:(c=t,t=r=void 0):t=void 0,n(e)?(s=u.call(e,"c"),l=u.call(e,"e")):(s=!0,l=!1),f={get:t,set:r,configurable:s,enumerable:l},c?o(i(c),f):f}},function(e,t,r){"use strict";var n=r(3);e.exports=function(e){if(!n(e))throw new TypeError("Cannot use null or undefined");return e}},function(e,t){var r,n,a=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function u(e){if(r===setTimeout)return setTimeout(e,0);if((r===o||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:o}catch(e){r=o}try{n="function"==typeof clearTimeout?clearTimeout:i}catch(e){n=i}}();var s,l=[],c=!1,f=-1;function p(){c&&s&&(c=!1,s.length?l=s.concat(l):f=-1,l.length&&d())}function d(){if(!c){var e=u(p);c=!0;for(var t=l.length;t;){for(s=l,l=[];++f<t;)s&&s[f].run();f=-1,t=l.length}s=null,c=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===i||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function g(){}a.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];l.push(new h(e,t)),1!==l.length||c||u(d)},h.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=g,a.addListener=g,a.once=g,a.off=g,a.removeListener=g,a.removeAllListeners=g,a.emit=g,a.prependListener=g,a.prependOnceListener=g,a.listeners=function(e){return[]},a.binding=function(e){throw new Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(e){throw new Error("process.chdir is not supported")},a.umask=function(){return 0}},function(e,t,r){"use strict";(function(e){const n=r(15),a="win32"===e.platform,{REGEX_BACKSLASH:o,REGEX_REMOVE_BACKSLASH:i,REGEX_SPECIAL_CHARS:u,REGEX_SPECIAL_CHARS_GLOBAL:s}=r(10);t.isObject=e=>null!==e&&"object"==typeof e&&!Array.isArray(e),t.hasRegexChars=e=>u.test(e),t.isRegexChar=e=>1===e.length&&t.hasRegexChars(e),t.escapeRegex=e=>e.replace(s,"\\$1"),t.toPosixSlashes=e=>e.replace(o,"/"),t.removeBackslashes=e=>e.replace(i,e=>"\\"===e?"":e),t.supportsLookbehinds=()=>{const t=e.version.slice(1).split(".").map(Number);return 3===t.length&&t[0]>=9||8===t[0]&&t[1]>=10},t.isWindows=e=>e&&"boolean"==typeof e.windows?e.windows:!0===a||"\\"===n.sep,t.escapeLast=(e,r,n)=>{const a=e.lastIndexOf(r,n);return-1===a?e:"\\"===e[a-1]?t.escapeLast(e,r,a-1):`${e.slice(0,a)}\\${e.slice(a)}`},t.removePrefix=(e,t={})=>{let r=e;return r.startsWith("./")&&(r=r.slice(2),t.prefix="./"),r},t.wrapOutput=(e,t={},r={})=>{let n=`${r.contains?"":"^"}(?:${e})${r.contains?"":"$"}`;return!0===t.negated&&(n=`(?:^(?!${n}).*$)`),n}}).call(this,r(8))},function(e,t,r){"use strict";const n=r(15),a={DOT_LITERAL:"\\.",PLUS_LITERAL:"\\+",QMARK_LITERAL:"\\?",SLASH_LITERAL:"\\/",ONE_CHAR:"(?=.)",QMARK:"[^/]",END_ANCHOR:"(?:\\/|$)",DOTS_SLASH:"\\.{1,2}(?:\\/|$)",NO_DOT:"(?!\\.)",NO_DOTS:"(?!(?:^|\\/)\\.{1,2}(?:\\/|$))",NO_DOT_SLASH:"(?!\\.{0,1}(?:\\/|$))",NO_DOTS_SLASH:"(?!\\.{1,2}(?:\\/|$))",QMARK_NO_DOT:"[^.\\/]",STAR:"[^/]*?",START_ANCHOR:"(?:^|\\/)"},o={...a,SLASH_LITERAL:"[\\\\/]",QMARK:"[^\\\\/]",STAR:"[^\\\\/]*?",DOTS_SLASH:"\\.{1,2}(?:[\\\\/]|$)",NO_DOT:"(?!\\.)",NO_DOTS:"(?!(?:^|[\\\\/])\\.{1,2}(?:[\\\\/]|$))",NO_DOT_SLASH:"(?!\\.{0,1}(?:[\\\\/]|$))",NO_DOTS_SLASH:"(?!\\.{1,2}(?:[\\\\/]|$))",QMARK_NO_DOT:"[^.\\\\/]",START_ANCHOR:"(?:^|[\\\\/])",END_ANCHOR:"(?:[\\\\/]|$)"};e.exports={MAX_LENGTH:65536,POSIX_REGEX_SOURCE:{alnum:"a-zA-Z0-9",alpha:"a-zA-Z",ascii:"\\x00-\\x7F",blank:" \\t",cntrl:"\\x00-\\x1F\\x7F",digit:"0-9",graph:"\\x21-\\x7E",lower:"a-z",print:"\\x20-\\x7E ",punct:"\\-!\"#$%&'()\\*+,./:;<=>?@[\\]^_`{|}~",space:" \\t\\r\\n\\v\\f",upper:"A-Z",word:"A-Za-z0-9_",xdigit:"A-Fa-f0-9"},REGEX_BACKSLASH:/\\(?![*+?^${}(|)[\]])/g,REGEX_NON_SPECIAL_CHARS:/^[^@![\].,$*+?^{}()|\\/]+/,REGEX_SPECIAL_CHARS:/[-*+?.^${}(|)[\]]/,REGEX_SPECIAL_CHARS_BACKREF:/(\\?)((\W)(\3*))/g,REGEX_SPECIAL_CHARS_GLOBAL:/([-*+?.^${}(|)[\]])/g,REGEX_REMOVE_BACKSLASH:/(?:\[.*?[^\\]\]|\\(?=.))/g,REPLACEMENTS:{"***":"*","**/**":"**","**/**/**":"**"},CHAR_0:48,CHAR_9:57,CHAR_UPPERCASE_A:65,CHAR_LOWERCASE_A:97,CHAR_UPPERCASE_Z:90,CHAR_LOWERCASE_Z:122,CHAR_LEFT_PARENTHESES:40,CHAR_RIGHT_PARENTHESES:41,CHAR_ASTERISK:42,CHAR_AMPERSAND:38,CHAR_AT:64,CHAR_BACKWARD_SLASH:92,CHAR_CARRIAGE_RETURN:13,CHAR_CIRCUMFLEX_ACCENT:94,CHAR_COLON:58,CHAR_COMMA:44,CHAR_DOT:46,CHAR_DOUBLE_QUOTE:34,CHAR_EQUAL:61,CHAR_EXCLAMATION_MARK:33,CHAR_FORM_FEED:12,CHAR_FORWARD_SLASH:47,CHAR_GRAVE_ACCENT:96,CHAR_HASH:35,CHAR_HYPHEN_MINUS:45,CHAR_LEFT_ANGLE_BRACKET:60,CHAR_LEFT_CURLY_BRACE:123,CHAR_LEFT_SQUARE_BRACKET:91,CHAR_LINE_FEED:10,CHAR_NO_BREAK_SPACE:160,CHAR_PERCENT:37,CHAR_PLUS:43,CHAR_QUESTION_MARK:63,CHAR_RIGHT_ANGLE_BRACKET:62,CHAR_RIGHT_CURLY_BRACE:125,CHAR_RIGHT_SQUARE_BRACKET:93,CHAR_SEMICOLON:59,CHAR_SINGLE_QUOTE:39,CHAR_SPACE:32,CHAR_TAB:9,CHAR_UNDERSCORE:95,CHAR_VERTICAL_LINE:124,CHAR_ZERO_WIDTH_NOBREAK_SPACE:65279,SEP:n.sep,extglobChars:e=>({"!":{type:"negate",open:"(?:(?!(?:",close:`))${e.STAR})`},"?":{type:"qmark",open:"(?:",close:")?"},"+":{type:"plus",open:"(?:",close:")+"},"*":{type:"star",open:"(?:",close:")*"},"@":{type:"at",open:"(?:",close:")"}}),globChars:e=>!0===e?o:a}},function(e,t,r){"use strict";e.exports=r(56)("forEach")},function(e,t,r){"use strict";e.exports=r(79)()?globalThis:r(80)},function(e,t,r){"use strict";const n=r(14);e.exports=(e,t={})=>{let r=(e,a={})=>{let o=t.escapeInvalid&&n.isInvalidBrace(a),i=!0===e.invalid&&!0===t.escapeInvalid,u="";if(e.value)return(o||i)&&n.isOpenOrClose(e)?"\\"+e.value:e.value;if(e.value)return e.value;if(e.nodes)for(let t of e.nodes)u+=r(t);return u};return r(e)}},function(e,t,r){"use strict";t.isInteger=e=>"number"==typeof e?Number.isInteger(e):"string"==typeof e&&""!==e.trim()&&Number.isInteger(Number(e)),t.find=(e,t)=>e.nodes.find(e=>e.type===t),t.exceedsLimit=(e,r,n=1,a)=>!1!==a&&(!(!t.isInteger(e)||!t.isInteger(r))&&(Number(r)-Number(e))/Number(n)>=a),t.escapeNode=(e,t=0,r)=>{let n=e.nodes[t];n&&(r&&n.type===r||"open"===n.type||"close"===n.type)&&!0!==n.escaped&&(n.value="\\"+n.value,n.escaped=!0)},t.encloseBrace=e=>"brace"===e.type&&(e.commas>>0+e.ranges>>0==0&&(e.invalid=!0,!0)),t.isInvalidBrace=e=>"brace"===e.type&&(!(!0!==e.invalid&&!e.dollar)||(e.commas>>0+e.ranges>>0==0||!0!==e.open||!0!==e.close)&&(e.invalid=!0,!0)),t.isOpenOrClose=e=>"open"===e.type||"close"===e.type||(!0===e.open||!0===e.close),t.reduce=e=>e.reduce((e,t)=>("text"===t.type&&e.push(t.value),"range"===t.type&&(t.type="text"),e),[]),t.flatten=(...e)=>{const t=[],r=e=>{for(let n=0;n<e.length;n++){let a=e[n];Array.isArray(a)?r(a,t):void 0!==a&&t.push(a)}return t};return r(e),t}},function(e,t,r){(function(e){function r(e,t){for(var r=0,n=e.length-1;n>=0;n--){var a=e[n];"."===a?e.splice(n,1):".."===a?(e.splice(n,1),r++):r&&(e.splice(n,1),r--)}if(t)for(;r--;r)e.unshift("..");return e}function n(e,t){if(e.filter)return e.filter(t);for(var r=[],n=0;n<e.length;n++)t(e[n],n,e)&&r.push(e[n]);return r}t.resolve=function(){for(var t="",a=!1,o=arguments.length-1;o>=-1&&!a;o--){var i=o>=0?arguments[o]:e.cwd();if("string"!=typeof i)throw new TypeError("Arguments to path.resolve must be strings");i&&(t=i+"/"+t,a="/"===i.charAt(0))}return(a?"/":"")+(t=r(n(t.split("/"),(function(e){return!!e})),!a).join("/"))||"."},t.normalize=function(e){var o=t.isAbsolute(e),i="/"===a(e,-1);return(e=r(n(e.split("/"),(function(e){return!!e})),!o).join("/"))||o||(e="."),e&&i&&(e+="/"),(o?"/":"")+e},t.isAbsolute=function(e){return"/"===e.charAt(0)},t.join=function(){var e=Array.prototype.slice.call(arguments,0);return t.normalize(n(e,(function(e,t){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e})).join("/"))},t.relative=function(e,r){function n(e){for(var t=0;t<e.length&&""===e[t];t++);for(var r=e.length-1;r>=0&&""===e[r];r--);return t>r?[]:e.slice(t,r-t+1)}e=t.resolve(e).substr(1),r=t.resolve(r).substr(1);for(var a=n(e.split("/")),o=n(r.split("/")),i=Math.min(a.length,o.length),u=i,s=0;s<i;s++)if(a[s]!==o[s]){u=s;break}var l=[];for(s=u;s<a.length;s++)l.push("..");return(l=l.concat(o.slice(u))).join("/")},t.sep="/",t.delimiter=":",t.dirname=function(e){if("string"!=typeof e&&(e+=""),0===e.length)return".";for(var t=e.charCodeAt(0),r=47===t,n=-1,a=!0,o=e.length-1;o>=1;--o)if(47===(t=e.charCodeAt(o))){if(!a){n=o;break}}else a=!1;return-1===n?r?"/":".":r&&1===n?"/":e.slice(0,n)},t.basename=function(e,t){var r=function(e){"string"!=typeof e&&(e+="");var t,r=0,n=-1,a=!0;for(t=e.length-1;t>=0;--t)if(47===e.charCodeAt(t)){if(!a){r=t+1;break}}else-1===n&&(a=!1,n=t+1);return-1===n?"":e.slice(r,n)}(e);return t&&r.substr(-1*t.length)===t&&(r=r.substr(0,r.length-t.length)),r},t.extname=function(e){"string"!=typeof e&&(e+="");for(var t=-1,r=0,n=-1,a=!0,o=0,i=e.length-1;i>=0;--i){var u=e.charCodeAt(i);if(47!==u)-1===n&&(a=!1,n=i+1),46===u?-1===t?t=i:1!==o&&(o=1):-1!==t&&(o=-1);else if(!a){r=i+1;break}}return-1===t||-1===n||0===o||1===o&&t===n-1&&t===r+1?"":e.slice(t,n)};var a="b"==="ab".substr(-1)?function(e,t,r){return e.substr(t,r)}:function(e,t,r){return t<0&&(t=e.length+t),e.substr(t,r)}}).call(this,r(8))},function(e,t,r){"use strict";e.exports=r(75)()?Array.from:r(76)},function(e,t,r){"use strict";var n=r(93),a=r(4),o=r(7),i=Array.prototype.indexOf,u=Object.prototype.hasOwnProperty,s=Math.abs,l=Math.floor;e.exports=function(e){var t,r,c,f;if(!n(e))return i.apply(this,arguments);for(r=a(o(this).length),c=arguments[1],t=c=isNaN(c)?0:c>=0?l(c):a(this.length)-l(s(c));t<r;++t)if(u.call(this,t)&&(f=this[t],n(f)))return t;return-1}},function(e,t,r){"use strict";(function(t,r){var n=function(e){if("function"!=typeof e)throw new TypeError(e+" is not a function");return e},a=function(e){var t,r,a=document.createTextNode(""),o=0;return new e((function(){var e;if(t)r&&(t=r.concat(t));else{if(!r)return;t=r}if(r=t,t=null,"function"==typeof r)return e=r,r=null,void e();for(a.data=o=++o%2;r;)e=r.shift(),r.length||(r=null),e()})).observe(a,{characterData:!0}),function(e){n(e),t?"function"==typeof t?t=[t,e]:t.push(e):(t=e,a.data=o=++o%2)}};e.exports=function(){if("object"==typeof t&&t&&"function"==typeof t.nextTick)return t.nextTick;if("function"==typeof queueMicrotask)return function(e){queueMicrotask(n(e))};if("object"==typeof document&&document){if("function"==typeof MutationObserver)return a(MutationObserver);if("function"==typeof WebKitMutationObserver)return a(WebKitMutationObserver)}return"function"==typeof r?function(e){r(n(e))}:"function"==typeof setTimeout||"object"==typeof setTimeout?function(e){setTimeout(n(e),0)}:null}()}).call(this,r(8),r(99).setImmediate)},function(e,t,r){e.exports=function(){"use strict";var e=Object.prototype.toString,t=Array.isArray||function(t){return"[object Array]"===e.call(t)};function r(e){return"function"==typeof e}function n(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function a(e,t){return null!=e&&"object"==typeof e&&t in e}var o=RegExp.prototype.test,i=/\S/;function u(e){return!function(e,t){return o.call(e,t)}(i,e)}var s={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"},l=/\s*/,c=/\s+/,f=/\s*=/,p=/\s*\}/,d=/#|\^|\/|>|\{|&|=|!/;function h(e){this.string=e,this.tail=e,this.pos=0}function g(e,t){this.view=e,this.cache={".":this.view},this.parent=t}function y(){this.templateCache={_cache:{},set:function(e,t){this._cache[e]=t},get:function(e){return this._cache[e]},clear:function(){this._cache={}}}}h.prototype.eos=function(){return""===this.tail},h.prototype.scan=function(e){var t=this.tail.match(e);if(!t||0!==t.index)return"";var r=t[0];return this.tail=this.tail.substring(r.length),this.pos+=r.length,r},h.prototype.scanUntil=function(e){var t,r=this.tail.search(e);switch(r){case-1:t=this.tail,this.tail="";break;case 0:t="";break;default:t=this.tail.substring(0,r),this.tail=this.tail.substring(r)}return this.pos+=t.length,t},g.prototype.push=function(e){return new g(e,this)},g.prototype.lookup=function(e){var t,n,o,i=this.cache;if(i.hasOwnProperty(e))t=i[e];else{for(var u,s,l,c=this,f=!1;c;){if(e.indexOf(".")>0)for(u=c.view,s=e.split("."),l=0;null!=u&&l<s.length;)l===s.length-1&&(f=a(u,s[l])||(n=u,o=s[l],null!=n&&"object"!=typeof n&&n.hasOwnProperty&&n.hasOwnProperty(o))),u=u[s[l++]];else u=c.view[e],f=a(c.view,e);if(f){t=u;break}c=c.parent}i[e]=t}return r(t)&&(t=t.call(this.view)),t},y.prototype.clearCache=function(){void 0!==this.templateCache&&this.templateCache.clear()},y.prototype.parse=function(e,r){var a=this.templateCache,o=e+":"+(r||v.tags).join(":"),i=void 0!==a,s=i?a.get(o):void 0;return null==s&&(s=function(e,r){if(!e)return[];var a,o,i,s=!1,g=[],y=[],m=[],b=!1,_=!1,A="",S=0;function T(){if(b&&!_)for(;m.length;)delete y[m.pop()];else m=[];b=!1,_=!1}function x(e){if("string"==typeof e&&(e=e.split(c,2)),!t(e)||2!==e.length)throw new Error("Invalid tags: "+e);a=new RegExp(n(e[0])+"\\s*"),o=new RegExp("\\s*"+n(e[1])),i=new RegExp("\\s*"+n("}"+e[1]))}x(r||v.tags);for(var w,C,E,R,O,N,k=new h(e);!k.eos();){if(w=k.pos,E=k.scanUntil(a))for(var I=0,L=E.length;I<L;++I)u(R=E.charAt(I))?(m.push(y.length),A+=R):(_=!0,s=!0,A+=" "),y.push(["text",R,w,w+1]),w+=1,"\n"===R&&(T(),A="",S=0,s=!1);if(!k.scan(a))break;if(b=!0,C=k.scan(d)||"name",k.scan(l),"="===C?(E=k.scanUntil(f),k.scan(f),k.scanUntil(o)):"{"===C?(E=k.scanUntil(i),k.scan(p),k.scanUntil(o),C="&"):E=k.scanUntil(o),!k.scan(o))throw new Error("Unclosed tag at "+k.pos);if(O=">"==C?[C,E,w,k.pos,A,S,s]:[C,E,w,k.pos],S++,y.push(O),"#"===C||"^"===C)g.push(O);else if("/"===C){if(!(N=g.pop()))throw new Error('Unopened section "'+E+'" at '+w);if(N[1]!==E)throw new Error('Unclosed section "'+N[1]+'" at '+w)}else"name"===C||"{"===C||"&"===C?_=!0:"="===C&&x(E)}if(T(),N=g.pop())throw new Error('Unclosed section "'+N[1]+'" at '+k.pos);return function(e){for(var t,r=[],n=r,a=[],o=0,i=e.length;o<i;++o)switch((t=e[o])[0]){case"#":case"^":n.push(t),a.push(t),n=t[4]=[];break;case"/":a.pop()[5]=t[2],n=a.length>0?a[a.length-1][4]:r;break;default:n.push(t)}return r}(function(e){for(var t,r,n=[],a=0,o=e.length;a<o;++a)(t=e[a])&&("text"===t[0]&&r&&"text"===r[0]?(r[1]+=t[1],r[3]=t[3]):(n.push(t),r=t));return n}(y))}(e,r),i&&a.set(o,s)),s},y.prototype.render=function(e,t,r,n){var a=this.getConfigTags(n),o=this.parse(e,a),i=t instanceof g?t:new g(t,void 0);return this.renderTokens(o,i,r,e,n)},y.prototype.renderTokens=function(e,t,r,n,a){for(var o,i,u,s="",l=0,c=e.length;l<c;++l)u=void 0,"#"===(i=(o=e[l])[0])?u=this.renderSection(o,t,r,n,a):"^"===i?u=this.renderInverted(o,t,r,n,a):">"===i?u=this.renderPartial(o,t,r,a):"&"===i?u=this.unescapedValue(o,t):"name"===i?u=this.escapedValue(o,t,a):"text"===i&&(u=this.rawValue(o)),void 0!==u&&(s+=u);return s},y.prototype.renderSection=function(e,n,a,o,i){var u=this,s="",l=n.lookup(e[1]);if(l){if(t(l))for(var c=0,f=l.length;c<f;++c)s+=this.renderTokens(e[4],n.push(l[c]),a,o,i);else if("object"==typeof l||"string"==typeof l||"number"==typeof l)s+=this.renderTokens(e[4],n.push(l),a,o,i);else if(r(l)){if("string"!=typeof o)throw new Error("Cannot use higher-order sections without the original template");null!=(l=l.call(n.view,o.slice(e[3],e[5]),(function(e){return u.render(e,n,a,i)})))&&(s+=l)}else s+=this.renderTokens(e[4],n,a,o,i);return s}},y.prototype.renderInverted=function(e,r,n,a,o){var i=r.lookup(e[1]);if(!i||t(i)&&0===i.length)return this.renderTokens(e[4],r,n,a,o)},y.prototype.indentPartial=function(e,t,r){for(var n=t.replace(/[^ \t]/g,""),a=e.split("\n"),o=0;o<a.length;o++)a[o].length&&(o>0||!r)&&(a[o]=n+a[o]);return a.join("\n")},y.prototype.renderPartial=function(e,t,n,a){if(n){var o=this.getConfigTags(a),i=r(n)?n(e[1]):n[e[1]];if(null!=i){var u=e[6],s=e[5],l=e[4],c=i;0==s&&l&&(c=this.indentPartial(i,l,u));var f=this.parse(c,o);return this.renderTokens(f,t,n,c,a)}}},y.prototype.unescapedValue=function(e,t){var r=t.lookup(e[1]);if(null!=r)return r},y.prototype.escapedValue=function(e,t,r){var n=this.getConfigEscape(r)||v.escape,a=t.lookup(e[1]);if(null!=a)return"number"==typeof a&&n===v.escape?String(a):n(a)},y.prototype.rawValue=function(e){return e[1]},y.prototype.getConfigTags=function(e){return t(e)?e:e&&"object"==typeof e?e.tags:void 0},y.prototype.getConfigEscape=function(e){return e&&"object"==typeof e&&!t(e)?e.escape:void 0};var v={name:"mustache.js",version:"4.2.0",tags:["{{","}}"],clearCache:void 0,escape:void 0,parse:void 0,render:void 0,Scanner:void 0,Context:void 0,Writer:void 0,set templateCache(e){m.templateCache=e},get templateCache(){return m.templateCache}},m=new y;return v.clearCache=function(){return m.clearCache()},v.parse=function(e,t){return m.parse(e,t)},v.render=function(e,r,n,a){if("string"!=typeof e)throw new TypeError('Invalid template! Template should be a "string" but "'+(t(o=e)?"array":typeof o)+'" was given as the first argument for mustache#render(template, view, partials)');var o;return m.render(e,r,n,a)},v.escape=function(e){return String(e).replace(/[&<>"'`=\/]/g,(function(e){return s[e]}))},v.Scanner=h,v.Context=g,v.Writer=y,v}()},function(e,t,r){(function(e){var n=Object.getOwnPropertyDescriptors||function(e){for(var t=Object.keys(e),r={},n=0;n<t.length;n++)r[t[n]]=Object.getOwnPropertyDescriptor(e,t[n]);return r},a=/%[sdj%]/g;t.format=function(e){if(!v(e)){for(var t=[],r=0;r<arguments.length;r++)t.push(u(arguments[r]));return t.join(" ")}r=1;for(var n=arguments,o=n.length,i=String(e).replace(a,(function(e){if("%%"===e)return"%";if(r>=o)return e;switch(e){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch(e){return"[Circular]"}default:return e}})),s=n[r];r<o;s=n[++r])g(s)||!_(s)?i+=" "+s:i+=" "+u(s);return i},t.deprecate=function(r,n){if(void 0!==e&&!0===e.noDeprecation)return r;if(void 0===e)return function(){return t.deprecate(r,n).apply(this,arguments)};var a=!1;return function(){if(!a){if(e.throwDeprecation)throw new Error(n);e.traceDeprecation,a=!0}return r.apply(this,arguments)}};var o,i={};function u(e,r){var n={seen:[],stylize:l};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),h(r)?n.showHidden=r:r&&t._extend(n,r),m(n.showHidden)&&(n.showHidden=!1),m(n.depth)&&(n.depth=2),m(n.colors)&&(n.colors=!1),m(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=s),c(n,e,n.depth)}function s(e,t){var r=u.styles[t];return r?"["+u.colors[r][0]+"m"+e+"["+u.colors[r][1]+"m":e}function l(e,t){return e}function c(e,r,n){if(e.customInspect&&r&&T(r.inspect)&&r.inspect!==t.inspect&&(!r.constructor||r.constructor.prototype!==r)){var a=r.inspect(n,e);return v(a)||(a=c(e,a,n)),a}var o=function(e,t){if(m(t))return e.stylize("undefined","undefined");if(v(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}if(y(t))return e.stylize(""+t,"number");if(h(t))return e.stylize(""+t,"boolean");if(g(t))return e.stylize("null","null")}(e,r);if(o)return o;var i=Object.keys(r),u=function(e){var t={};return e.forEach((function(e,r){t[e]=!0})),t}(i);if(e.showHidden&&(i=Object.getOwnPropertyNames(r)),S(r)&&(i.indexOf("message")>=0||i.indexOf("description")>=0))return f(r);if(0===i.length){if(T(r)){var s=r.name?": "+r.name:"";return e.stylize("[Function"+s+"]","special")}if(b(r))return e.stylize(RegExp.prototype.toString.call(r),"regexp");if(A(r))return e.stylize(Date.prototype.toString.call(r),"date");if(S(r))return f(r)}var l,_="",x=!1,C=["{","}"];(d(r)&&(x=!0,C=["[","]"]),T(r))&&(_=" [Function"+(r.name?": "+r.name:"")+"]");return b(r)&&(_=" "+RegExp.prototype.toString.call(r)),A(r)&&(_=" "+Date.prototype.toUTCString.call(r)),S(r)&&(_=" "+f(r)),0!==i.length||x&&0!=r.length?n<0?b(r)?e.stylize(RegExp.prototype.toString.call(r),"regexp"):e.stylize("[Object]","special"):(e.seen.push(r),l=x?function(e,t,r,n,a){for(var o=[],i=0,u=t.length;i<u;++i)w(t,String(i))?o.push(p(e,t,r,n,String(i),!0)):o.push("");return a.forEach((function(a){a.match(/^\d+$/)||o.push(p(e,t,r,n,a,!0))})),o}(e,r,n,u,i):i.map((function(t){return p(e,r,n,u,t,x)})),e.seen.pop(),function(e,t,r){if(e.reduce((function(e,t){return t.indexOf("\n")>=0&&0,e+t.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60)return r[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+r[1];return r[0]+t+" "+e.join(", ")+" "+r[1]}(l,_,C)):C[0]+_+C[1]}function f(e){return"["+Error.prototype.toString.call(e)+"]"}function p(e,t,r,n,a,o){var i,u,s;if((s=Object.getOwnPropertyDescriptor(t,a)||{value:t[a]}).get?u=s.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):s.set&&(u=e.stylize("[Setter]","special")),w(n,a)||(i="["+a+"]"),u||(e.seen.indexOf(s.value)<0?(u=g(r)?c(e,s.value,null):c(e,s.value,r-1)).indexOf("\n")>-1&&(u=o?u.split("\n").map((function(e){return"  "+e})).join("\n").substr(2):"\n"+u.split("\n").map((function(e){return"   "+e})).join("\n")):u=e.stylize("[Circular]","special")),m(i)){if(o&&a.match(/^\d+$/))return u;(i=JSON.stringify(""+a)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(i=i.substr(1,i.length-2),i=e.stylize(i,"name")):(i=i.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),i=e.stylize(i,"string"))}return i+": "+u}function d(e){return Array.isArray(e)}function h(e){return"boolean"==typeof e}function g(e){return null===e}function y(e){return"number"==typeof e}function v(e){return"string"==typeof e}function m(e){return void 0===e}function b(e){return _(e)&&"[object RegExp]"===x(e)}function _(e){return"object"==typeof e&&null!==e}function A(e){return _(e)&&"[object Date]"===x(e)}function S(e){return _(e)&&("[object Error]"===x(e)||e instanceof Error)}function T(e){return"function"==typeof e}function x(e){return Object.prototype.toString.call(e)}t.debuglog=function(r){if(m(o)&&(o=e.env.NODE_DEBUG||""),r=r.toUpperCase(),!i[r])if(new RegExp("\\b"+r+"\\b","i").test(o)){e.pid;i[r]=function(){t.format.apply(t,arguments)}}else i[r]=function(){};return i[r]},t.inspect=u,u.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},u.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.isArray=d,t.isBoolean=h,t.isNull=g,t.isNullOrUndefined=function(e){return null==e},t.isNumber=y,t.isString=v,t.isSymbol=function(e){return"symbol"==typeof e},t.isUndefined=m,t.isRegExp=b,t.isObject=_,t.isDate=A,t.isError=S,t.isFunction=T,t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},t.isBuffer=r(37);function w(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.log=function(){},t.inherits=r(38),t._extend=function(e,t){if(!t||!_(t))return e;for(var r=Object.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]];return e};var C="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function E(e,t){if(!e){var r=new Error("Promise was rejected with a falsy value");r.reason=e,e=r}return t(e)}t.promisify=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');if(C&&e[C]){var t;if("function"!=typeof(t=e[C]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(t,C,{value:t,enumerable:!1,writable:!1,configurable:!0}),t}function t(){for(var t,r,n=new Promise((function(e,n){t=e,r=n})),a=[],o=0;o<arguments.length;o++)a.push(arguments[o]);a.push((function(e,n){e?r(e):t(n)}));try{e.apply(this,a)}catch(e){r(e)}return n}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),C&&Object.defineProperty(t,C,{value:t,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(t,n(e))},t.promisify.custom=C,t.callbackify=function(t){if("function"!=typeof t)throw new TypeError('The "original" argument must be of type Function');function r(){for(var r=[],n=0;n<arguments.length;n++)r.push(arguments[n]);var a=r.pop();if("function"!=typeof a)throw new TypeError("The last argument must be of type Function");var o=this,i=function(){return a.apply(o,arguments)};t.apply(this,r).then((function(t){e.nextTick(i,null,t)}),(function(t){e.nextTick(E,t,i)}))}return Object.setPrototypeOf(r,Object.getPrototypeOf(t)),Object.defineProperties(r,n(t)),r}}).call(this,r(8))},function(e,t,r){"use strict";const n=r(20),a=r(41),o=e=>null!==e&&"object"==typeof e&&!Array.isArray(e),i=e=>"number"==typeof e||"string"==typeof e&&""!==e,u=e=>Number.isInteger(+e),s=e=>{let t=""+e,r=-1;if("-"===t[0]&&(t=t.slice(1)),"0"===t)return!1;for(;"0"===t[++r];);return r>0},l=(e,t,r)=>{if(t>0){let r="-"===e[0]?"-":"";r&&(e=e.slice(1)),e=r+e.padStart(r?t-1:t,"0")}return!1===r?String(e):e},c=(e,t)=>{let r="-"===e[0]?"-":"";for(r&&(e=e.slice(1),t--);e.length<t;)e="0"+e;return r?"-"+e:e},f=(e,t,r,n)=>{if(r)return a(e,t,{wrap:!1,...n});let o=String.fromCharCode(e);return e===t?o:`[${o}-${String.fromCharCode(t)}]`},p=(e,t,r)=>{if(Array.isArray(e)){let t=!0===r.wrap,n=r.capture?"":"?:";return t?`(${n}${e.join("|")})`:e.join("|")}return a(e,t,r)},d=(...e)=>new RangeError("Invalid range arguments: "+n.inspect(...e)),h=(e,t,r)=>{if(!0===r.strictRanges)throw d([e,t]);return[]},g=(e,t,r=1,n={})=>{let a=Number(e),o=Number(t);if(!Number.isInteger(a)||!Number.isInteger(o)){if(!0===n.strictRanges)throw d([e,t]);return[]}0===a&&(a=0),0===o&&(o=0);let i=a>o,u=String(e),h=String(t),g=String(r);r=Math.max(Math.abs(r),1);let y=s(u)||s(h)||s(g),v=y?Math.max(u.length,h.length,g.length):0,m=!1===y&&!1===((e,t,r)=>"string"==typeof e||"string"==typeof t||!0===r.stringify)(e,t,n),b=n.transform||(e=>t=>!0===e?Number(t):String(t))(m);if(n.toRegex&&1===r)return f(c(e,v),c(t,v),!0,n);let _={negatives:[],positives:[]},A=[],S=0;for(;i?a>=o:a<=o;)!0===n.toRegex&&r>1?_[(T=a)<0?"negatives":"positives"].push(Math.abs(T)):A.push(l(b(a,S),v,m)),a=i?a-r:a+r,S++;var T;return!0===n.toRegex?r>1?((e,t)=>{e.negatives.sort((e,t)=>e<t?-1:e>t?1:0),e.positives.sort((e,t)=>e<t?-1:e>t?1:0);let r,n=t.capture?"":"?:",a="",o="";return e.positives.length&&(a=e.positives.join("|")),e.negatives.length&&(o=`-(${n}${e.negatives.join("|")})`),r=a&&o?`${a}|${o}`:a||o,t.wrap?`(${n}${r})`:r})(_,n):p(A,null,{wrap:!1,...n}):A},y=(e,t,r,n={})=>{if(null==t&&i(e))return[e];if(!i(e)||!i(t))return h(e,t,n);if("function"==typeof r)return y(e,t,1,{transform:r});if(o(r))return y(e,t,0,r);let a={...n};return!0===a.capture&&(a.wrap=!0),r=r||a.step||1,u(r)?u(e)&&u(t)?g(e,t,r,a):((e,t,r=1,n={})=>{if(!u(e)&&e.length>1||!u(t)&&t.length>1)return h(e,t,n);let a=n.transform||(e=>String.fromCharCode(e)),o=(""+e).charCodeAt(0),i=(""+t).charCodeAt(0),s=o>i,l=Math.min(o,i),c=Math.max(o,i);if(n.toRegex&&1===r)return f(l,c,!1,n);let d=[],g=0;for(;s?o>=i:o<=i;)d.push(a(o,g)),o=s?o-r:o+r,g++;return!0===n.toRegex?p(d,null,{wrap:!1,options:n}):d})(e,t,Math.max(Math.abs(r),1),a):null==r||o(r)?y(e,t,1,r):((e,t)=>{if(!0===t.strictRanges)throw new TypeError(`Expected step "${e}" to be a number`);return[]})(r,a)};e.exports=y},function(e,t,r){"use strict";var n=r(3),a=Array.prototype.forEach,o=Object.create,i=function(e,t){var r;for(r in e)t[r]=e[r]};e.exports=function(e){var t=o(null);return a.call(arguments,(function(e){n(e)&&i(Object(e),t)})),t}},function(e,t,r){"use strict";var n=r(4);e.exports=function(e,t,r){var a;return isNaN(e)?(a=t)>=0?r&&a?a-1:a:1:!1!==e&&n(e)}},function(e,t,r){"use strict";e.exports=r(59)()?Object.assign:r(60)},function(e,t,r){"use strict";var n,a,o,i,u,s=r(4),l=function(e,t){return t};try{Object.defineProperty(l,"length",{configurable:!0,writable:!1,enumerable:!1,value:1})}catch(e){}1===l.length?(n={configurable:!0,writable:!1,enumerable:!1},a=Object.defineProperty,e.exports=function(e,t){return t=s(t),e.length===t?e:(n.value=t,a(e,"length",n))}):(i=r(26),u=[],o=function(e){var t,r=0;if(u[e])return u[e];for(t=[];e--;)t.push("a"+(++r).toString(36));return new Function("fn","return function ("+t.join(", ")+") { return fn.apply(this, arguments); };")},e.exports=function(e,t){var r;if(t=s(t),e.length===t)return e;r=o(t)(e);try{i(r,e)}catch(e){}return r})},function(e,t,r){"use strict";var n=r(7),a=Object.defineProperty,o=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,u=Object.getOwnPropertySymbols;e.exports=function(e,t){var r,s=Object(n(t));if(e=Object(n(e)),i(s).forEach((function(n){try{a(e,n,o(t,n))}catch(e){r=e}})),"function"==typeof u&&u(s).forEach((function(n){try{a(e,n,o(t,n))}catch(e){r=e}})),void 0!==r)throw r;return e}},function(e,t,r){"use strict";e.exports=function(e){return null!=e}},function(e,t,r){"use strict";var n=r(82);e.exports=function(e){if(!n(e))throw new TypeError(e+" is not a symbol");return e}},function(e,t,r){"use strict";var n=r(2),a=r(11),o=Function.prototype.call;e.exports=function(e,t){var r={},i=arguments[2];return n(t),a(e,(function(e,n,a,u){r[n]=o.call(t,i,e,n,a,u)})),r}},function(e,t){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(e){"object"==typeof window&&(r=window)}e.exports=r},function(e,t,r){"use strict";e.exports=function(e){return"function"==typeof e}},function(e,t){function r(e){return!!e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof e.then}e.exports=r,e.exports.default=r},function(e,t,r){"use strict";const n=r(20),a=r(39),o=r(46),i=r(9),u=e=>""===e||"./"===e,s=(e,t,r)=>{t=[].concat(t),e=[].concat(e);let n=new Set,a=new Set,i=new Set,u=0,s=e=>{i.add(e.output),r&&r.onResult&&r.onResult(e)};for(let i=0;i<t.length;i++){let l=o(String(t[i]),{...r,onResult:s},!0),c=l.state.negated||l.state.negatedExtglob;c&&u++;for(let t of e){let e=l(t,!0);(c?!e.isMatch:e.isMatch)&&(c?n.add(e.output):(n.delete(e.output),a.add(e.output)))}}let l=(u===t.length?[...i]:[...a]).filter(e=>!n.has(e));if(r&&0===l.length){if(!0===r.failglob)throw new Error(`No matches found for "${t.join(", ")}"`);if(!0===r.nonull||!0===r.nullglob)return r.unescape?t.map(e=>e.replace(/\\/g,"")):t}return l};s.match=s,s.matcher=(e,t)=>o(e,t),s.any=s.isMatch=(e,t,r)=>o(t,r)(e),s.not=(e,t,r={})=>{t=[].concat(t).map(String);let n=new Set,a=[],o=s(e,t,{...r,onResult:e=>{r.onResult&&r.onResult(e),a.push(e.output)}});for(let e of a)o.includes(e)||n.add(e);return[...n]},s.contains=(e,t,r)=>{if("string"!=typeof e)throw new TypeError(`Expected a string: "${n.inspect(e)}"`);if(Array.isArray(t))return t.some(t=>s.contains(e,t,r));if("string"==typeof t){if(u(e)||u(t))return!1;if(e.includes(t)||e.startsWith("./")&&e.slice(2).includes(t))return!0}return s.isMatch(e,t,{...r,contains:!0})},s.matchKeys=(e,t,r)=>{if(!i.isObject(e))throw new TypeError("Expected the first argument to be an object");let n=s(Object.keys(e),t,r),a={};for(let t of n)a[t]=e[t];return a},s.some=(e,t,r)=>{let n=[].concat(e);for(let e of[].concat(t)){let t=o(String(e),r);if(n.some(e=>t(e)))return!0}return!1},s.every=(e,t,r)=>{let n=[].concat(e);for(let e of[].concat(t)){let t=o(String(e),r);if(!n.every(e=>t(e)))return!1}return!0},s.all=(e,t,r)=>{if("string"!=typeof e)throw new TypeError(`Expected a string: "${n.inspect(e)}"`);return[].concat(t).every(t=>o(t,r)(e))},s.capture=(e,t,r)=>{let n=i.isWindows(r),a=o.makeRe(String(e),{...r,capture:!0}).exec(n?i.toPosixSlashes(t):t);if(a)return a.slice(1).map(e=>void 0===e?"":e)},s.makeRe=(...e)=>o.makeRe(...e),s.scan=(...e)=>o.scan(...e),s.parse=(e,t)=>{let r=[];for(let n of[].concat(e||[]))for(let e of a(String(n),t))r.push(o.parse(e,t));return r},s.braces=(e,t)=>{if("string"!=typeof e)throw new TypeError("Expected a string");return t&&!0===t.nobrace||!/\{.*\}/.test(e)?[e]:a(e,t)},s.braceExpand=(e,t)=>{if("string"!=typeof e)throw new TypeError("Expected a string");return s.braces(e,{...t,expand:!0})},e.exports=s},function(e,t,r){"use strict";var n=r(22),a=r(23),o=r(55);e.exports=function(e){var t,i=n(arguments[1]);return i.normalizer||0!==(t=i.length=a(i.length,e.length,i.async))&&(i.primitive?!1===t?i.normalizer=r(90):t>1&&(i.normalizer=r(91)(t)):i.normalizer=!1===t?r(92)():1===t?r(96)():r(97)(t)),i.async&&r(98),i.promise&&r(101),i.dispose&&r(107),i.maxAge&&r(108),i.max&&r(111),i.refCounter&&r(113),o(e,i)}},function(e,t){e.exports=r},function(e,t){e.exports=n},function(e,t){e.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}},function(e,t,r){"use strict";const n=r(13),a=r(40),o=r(43),i=r(44),u=(e,t={})=>{let r=[];if(Array.isArray(e))for(let n of e){let e=u.create(n,t);Array.isArray(e)?r.push(...e):r.push(e)}else r=[].concat(u.create(e,t));return t&&!0===t.expand&&!0===t.nodupes&&(r=[...new Set(r)]),r};u.parse=(e,t={})=>i(e,t),u.stringify=(e,t={})=>n("string"==typeof e?u.parse(e,t):e,t),u.compile=(e,t={})=>("string"==typeof e&&(e=u.parse(e,t)),a(e,t)),u.expand=(e,t={})=>{"string"==typeof e&&(e=u.parse(e,t));let r=o(e,t);return!0===t.noempty&&(r=r.filter(Boolean)),!0===t.nodupes&&(r=[...new Set(r)]),r},u.create=(e,t={})=>""===e||e.length<3?[e]:!0!==t.expand?u.compile(e,t):u.expand(e,t),e.exports=u},function(e,t,r){"use strict";const n=r(21),a=r(14);e.exports=(e,t={})=>{let r=(e,o={})=>{let i=a.isInvalidBrace(o),u=!0===e.invalid&&!0===t.escapeInvalid,s=!0===i||!0===u,l=!0===t.escapeInvalid?"\\":"",c="";if(!0===e.isOpen)return l+e.value;if(!0===e.isClose)return l+e.value;if("open"===e.type)return s?l+e.value:"(";if("close"===e.type)return s?l+e.value:")";if("comma"===e.type)return"comma"===e.prev.type?"":s?e.value:"|";if(e.value)return e.value;if(e.nodes&&e.ranges>0){let r=a.reduce(e.nodes),o=n(...r,{...t,wrap:!1,toRegex:!0});if(0!==o.length)return r.length>1&&o.length>1?`(${o})`:o}if(e.nodes)for(let t of e.nodes)c+=r(t,e);return c};return r(e)}},function(e,t,r){"use strict";const n=r(42),a=(e,t,r)=>{if(!1===n(e))throw new TypeError("toRegexRange: expected the first argument to be a number");if(void 0===t||e===t)return String(e);if(!1===n(t))throw new TypeError("toRegexRange: expected the second argument to be a number.");let o={relaxZeros:!0,...r};"boolean"==typeof o.strictZeros&&(o.relaxZeros=!1===o.strictZeros);let s=e+":"+t+"="+String(o.relaxZeros)+String(o.shorthand)+String(o.capture)+String(o.wrap);if(a.cache.hasOwnProperty(s))return a.cache[s].result;let l=Math.min(e,t),c=Math.max(e,t);if(1===Math.abs(l-c)){let r=e+"|"+t;return o.capture?`(${r})`:!1===o.wrap?r:`(?:${r})`}let f=h(e)||h(t),p={min:e,max:t,a:l,b:c},d=[],g=[];if(f&&(p.isPadded=f,p.maxLen=String(p.max).length),l<0){g=i(c<0?Math.abs(c):1,Math.abs(l),p,o),l=p.a=0}return c>=0&&(d=i(l,c,p,o)),p.negatives=g,p.positives=d,p.result=function(e,t,r){let n=u(e,t,"-",!1,r)||[],a=u(t,e,"",!1,r)||[],o=u(e,t,"-?",!0,r)||[];return n.concat(o).concat(a).join("|")}(g,d,o),!0===o.capture?p.result=`(${p.result})`:!1!==o.wrap&&d.length+g.length>1&&(p.result=`(?:${p.result})`),a.cache[s]=p,p.result};function o(e,t,r){if(e===t)return{pattern:e,count:[],digits:0};let n=function(e,t){let r=[];for(let n=0;n<e.length;n++)r.push([e[n],t[n]]);return r}(e,t),a=n.length,o="",i=0;for(let e=0;e<a;e++){let[t,a]=n[e];t===a?o+=t:"0"!==t||"9"!==a?o+=d(t,a,r):i++}return i&&(o+=!0===r.shorthand?"\\d":"[0-9]"),{pattern:o,count:[i],digits:a}}function i(e,t,r,n){let a,i=function(e,t){let r=1,n=1,a=c(e,r),o=new Set([t]);for(;e<=a&&a<=t;)o.add(a),r+=1,a=c(e,r);for(a=f(t+1,n)-1;e<a&&a<=t;)o.add(a),n+=1,a=f(t+1,n)-1;return o=[...o],o.sort(s),o}(e,t),u=[],l=e;for(let e=0;e<i.length;e++){let t=i[e],s=o(String(l),String(t),n),c="";r.isPadded||!a||a.pattern!==s.pattern?(r.isPadded&&(c=g(t,r,n)),s.string=c+s.pattern+p(s.count),u.push(s),l=t+1,a=s):(a.count.length>1&&a.count.pop(),a.count.push(s.count[0]),a.string=a.pattern+p(a.count),l=t+1)}return u}function u(e,t,r,n,a){let o=[];for(let a of e){let{string:e}=a;n||l(t,"string",e)||o.push(r+e),n&&l(t,"string",e)&&o.push(r+e)}return o}function s(e,t){return e>t?1:t>e?-1:0}function l(e,t,r){return e.some(e=>e[t]===r)}function c(e,t){return Number(String(e).slice(0,-t)+"9".repeat(t))}function f(e,t){return e-e%Math.pow(10,t)}function p(e){let[t=0,r=""]=e;return r||t>1?`{${t+(r?","+r:"")}}`:""}function d(e,t,r){return`[${e}${t-e==1?"":"-"}${t}]`}function h(e){return/^-?(0+)\d/.test(e)}function g(e,t,r){if(!t.isPadded)return e;let n=Math.abs(t.maxLen-String(e).length),a=!1!==r.relaxZeros;switch(n){case 0:return"";case 1:return a?"0?":"0";case 2:return a?"0{0,2}":"00";default:return a?`0{0,${n}}`:`0{${n}}`}}a.cache={},a.clearCache=()=>a.cache={},e.exports=a},function(e,t,r){"use strict";e.exports=function(e){return"number"==typeof e?e-e==0:"string"==typeof e&&""!==e.trim()&&(Number.isFinite?Number.isFinite(+e):isFinite(+e))}},function(e,t,r){"use strict";const n=r(21),a=r(13),o=r(14),i=(e="",t="",r=!1)=>{let n=[];if(e=[].concat(e),!(t=[].concat(t)).length)return e;if(!e.length)return r?o.flatten(t).map(e=>`{${e}}`):t;for(let a of e)if(Array.isArray(a))for(let e of a)n.push(i(e,t,r));else for(let e of t)!0===r&&"string"==typeof e&&(e=`{${e}}`),n.push(Array.isArray(e)?i(a,e,r):a+e);return o.flatten(n)};e.exports=(e,t={})=>{let r=void 0===t.rangeLimit?1e3:t.rangeLimit,u=(e,s={})=>{e.queue=[];let l=s,c=s.queue;for(;"brace"!==l.type&&"root"!==l.type&&l.parent;)l=l.parent,c=l.queue;if(e.invalid||e.dollar)return void c.push(i(c.pop(),a(e,t)));if("brace"===e.type&&!0!==e.invalid&&2===e.nodes.length)return void c.push(i(c.pop(),["{}"]));if(e.nodes&&e.ranges>0){let u=o.reduce(e.nodes);if(o.exceedsLimit(...u,t.step,r))throw new RangeError("expanded array length exceeds range limit. Use options.rangeLimit to increase or disable the limit.");let s=n(...u,t);return 0===s.length&&(s=a(e,t)),c.push(i(c.pop(),s)),void(e.nodes=[])}let f=o.encloseBrace(e),p=e.queue,d=e;for(;"brace"!==d.type&&"root"!==d.type&&d.parent;)d=d.parent,p=d.queue;for(let t=0;t<e.nodes.length;t++){let r=e.nodes[t];"comma"!==r.type||"brace"!==e.type?"close"!==r.type?r.value&&"open"!==r.type?p.push(i(p.pop(),r.value)):r.nodes&&u(r,e):c.push(i(c.pop(),p,f)):(1===t&&p.push(""),p.push(""))}return p};return o.flatten(u(e))}},function(e,t,r){"use strict";const n=r(13),{MAX_LENGTH:a,CHAR_BACKSLASH:o,CHAR_BACKTICK:i,CHAR_COMMA:u,CHAR_DOT:s,CHAR_LEFT_PARENTHESES:l,CHAR_RIGHT_PARENTHESES:c,CHAR_LEFT_CURLY_BRACE:f,CHAR_RIGHT_CURLY_BRACE:p,CHAR_LEFT_SQUARE_BRACKET:d,CHAR_RIGHT_SQUARE_BRACKET:h,CHAR_DOUBLE_QUOTE:g,CHAR_SINGLE_QUOTE:y,CHAR_NO_BREAK_SPACE:v,CHAR_ZERO_WIDTH_NOBREAK_SPACE:m}=r(45);e.exports=(e,t={})=>{if("string"!=typeof e)throw new TypeError("Expected a string");let r=t||{},b="number"==typeof r.maxLength?Math.min(a,r.maxLength):a;if(e.length>b)throw new SyntaxError(`Input length (${e.length}), exceeds max characters (${b})`);let _,A={type:"root",input:e,nodes:[]},S=[A],T=A,x=A,w=0,C=e.length,E=0,R=0;const O=()=>e[E++],N=e=>{if("text"===e.type&&"dot"===x.type&&(x.type="text"),!x||"text"!==x.type||"text"!==e.type)return T.nodes.push(e),e.parent=T,e.prev=x,x=e,e;x.value+=e.value};for(N({type:"bos"});E<C;)if(T=S[S.length-1],_=O(),_!==m&&_!==v)if(_!==o)if(_!==h)if(_!==d)if(_!==l)if(_!==c)if(_!==g&&_!==y&&_!==i)if(_!==f)if(_!==p)if(_===u&&R>0){if(T.ranges>0){T.ranges=0;let e=T.nodes.shift();T.nodes=[e,{type:"text",value:n(T)}]}N({type:"comma",value:_}),T.commas++}else if(_===s&&R>0&&0===T.commas){let e=T.nodes;if(0===R||0===e.length){N({type:"text",value:_});continue}if("dot"===x.type){if(T.range=[],x.value+=_,x.type="range",3!==T.nodes.length&&5!==T.nodes.length){T.invalid=!0,T.ranges=0,x.type="text";continue}T.ranges++,T.args=[];continue}if("range"===x.type){e.pop();let t=e[e.length-1];t.value+=x.value+_,x=t,T.ranges--;continue}N({type:"dot",value:_})}else N({type:"text",value:_});else{if("brace"!==T.type){N({type:"text",value:_});continue}let e="close";T=S.pop(),T.close=!0,N({type:e,value:_}),R--,T=S[S.length-1]}else{R++;let e=x.value&&"$"===x.value.slice(-1)||!0===T.dollar;T=N({type:"brace",open:!0,close:!1,dollar:e,depth:R,commas:0,ranges:0,nodes:[]}),S.push(T),N({type:"open",value:_})}else{let e,r=_;for(!0!==t.keepQuotes&&(_="");E<C&&(e=O());)if(e!==o){if(e===r){!0===t.keepQuotes&&(_+=e);break}_+=e}else _+=e+O();N({type:"text",value:_})}else{if("paren"!==T.type){N({type:"text",value:_});continue}T=S.pop(),N({type:"text",value:_}),T=S[S.length-1]}else T=N({type:"paren",nodes:[]}),S.push(T),N({type:"text",value:_});else{w++;let e;for(;E<C&&(e=O());)if(_+=e,e!==d)if(e!==o){if(e===h&&(w--,0===w))break}else _+=O();else w++;N({type:"text",value:_})}else N({type:"text",value:"\\"+_});else N({type:"text",value:(t.keepEscaping?_:"")+O()});do{if(T=S.pop(),"root"!==T.type){T.nodes.forEach(e=>{e.nodes||("open"===e.type&&(e.isOpen=!0),"close"===e.type&&(e.isClose=!0),e.nodes||(e.type="text"),e.invalid=!0)});let e=S[S.length-1],t=e.nodes.indexOf(T);e.nodes.splice(t,1,...T.nodes)}}while(S.length>0);return N({type:"eos"}),A}},function(e,t,r){"use strict";e.exports={MAX_LENGTH:65536,CHAR_0:"0",CHAR_9:"9",CHAR_UPPERCASE_A:"A",CHAR_LOWERCASE_A:"a",CHAR_UPPERCASE_Z:"Z",CHAR_LOWERCASE_Z:"z",CHAR_LEFT_PARENTHESES:"(",CHAR_RIGHT_PARENTHESES:")",CHAR_ASTERISK:"*",CHAR_AMPERSAND:"&",CHAR_AT:"@",CHAR_BACKSLASH:"\\",CHAR_BACKTICK:"`",CHAR_CARRIAGE_RETURN:"\r",CHAR_CIRCUMFLEX_ACCENT:"^",CHAR_COLON:":",CHAR_COMMA:",",CHAR_DOLLAR:"$",CHAR_DOT:".",CHAR_DOUBLE_QUOTE:'"',CHAR_EQUAL:"=",CHAR_EXCLAMATION_MARK:"!",CHAR_FORM_FEED:"\f",CHAR_FORWARD_SLASH:"/",CHAR_HASH:"#",CHAR_HYPHEN_MINUS:"-",CHAR_LEFT_ANGLE_BRACKET:"<",CHAR_LEFT_CURLY_BRACE:"{",CHAR_LEFT_SQUARE_BRACKET:"[",CHAR_LINE_FEED:"\n",CHAR_NO_BREAK_SPACE:" ",CHAR_PERCENT:"%",CHAR_PLUS:"+",CHAR_QUESTION_MARK:"?",CHAR_RIGHT_ANGLE_BRACKET:">",CHAR_RIGHT_CURLY_BRACE:"}",CHAR_RIGHT_SQUARE_BRACKET:"]",CHAR_SEMICOLON:";",CHAR_SINGLE_QUOTE:"'",CHAR_SPACE:" ",CHAR_TAB:"\t",CHAR_UNDERSCORE:"_",CHAR_VERTICAL_LINE:"|",CHAR_ZERO_WIDTH_NOBREAK_SPACE:"\ufeff"}},function(e,t,r){"use strict";e.exports=r(47)},function(e,t,r){"use strict";const n=r(15),a=r(48),o=r(49),i=r(9),u=r(10),s=(e,t,r=!1)=>{if(Array.isArray(e)){const n=e.map(e=>s(e,t,r));return e=>{for(const t of n){const r=t(e);if(r)return r}return!1}}const n=(a=e)&&"object"==typeof a&&!Array.isArray(a)&&e.tokens&&e.input;var a;if(""===e||"string"!=typeof e&&!n)throw new TypeError("Expected pattern to be a non-empty string");const o=t||{},u=i.isWindows(t),l=n?s.compileRe(e,t):s.makeRe(e,t,!1,!0),c=l.state;delete l.state;let f=()=>!1;if(o.ignore){const e={...t,ignore:null,onMatch:null,onResult:null};f=s(o.ignore,e,r)}const p=(r,n=!1)=>{const{isMatch:a,match:i,output:p}=s.test(r,l,t,{glob:e,posix:u}),d={glob:e,state:c,regex:l,posix:u,input:r,output:p,match:i,isMatch:a};return"function"==typeof o.onResult&&o.onResult(d),!1===a?(d.isMatch=!1,!!n&&d):f(r)?("function"==typeof o.onIgnore&&o.onIgnore(d),d.isMatch=!1,!!n&&d):("function"==typeof o.onMatch&&o.onMatch(d),!n||d)};return r&&(p.state=c),p};s.test=(e,t,r,{glob:n,posix:a}={})=>{if("string"!=typeof e)throw new TypeError("Expected input to be a string");if(""===e)return{isMatch:!1,output:""};const o=r||{},u=o.format||(a?i.toPosixSlashes:null);let l=e===n,c=l&&u?u(e):e;return!1===l&&(c=u?u(e):e,l=c===n),!1!==l&&!0!==o.capture||(l=!0===o.matchBase||!0===o.basename?s.matchBase(e,t,r,a):t.exec(c)),{isMatch:Boolean(l),match:l,output:c}},s.matchBase=(e,t,r,a=i.isWindows(r))=>(t instanceof RegExp?t:s.makeRe(t,r)).test(n.basename(e)),s.isMatch=(e,t,r)=>s(t,r)(e),s.parse=(e,t)=>Array.isArray(e)?e.map(e=>s.parse(e,t)):o(e,{...t,fastpaths:!1}),s.scan=(e,t)=>a(e,t),s.compileRe=(e,t,r=!1,n=!1)=>{if(!0===r)return e.output;const a=t||{},o=a.contains?"":"^",i=a.contains?"":"$";let u=`${o}(?:${e.output})${i}`;e&&!0===e.negated&&(u=`^(?!${u}).*$`);const l=s.toRegex(u,t);return!0===n&&(l.state=e),l},s.makeRe=(e,t={},r=!1,n=!1)=>{if(!e||"string"!=typeof e)throw new TypeError("Expected a non-empty string");let a={negated:!1,fastpaths:!0};return!1===t.fastpaths||"."!==e[0]&&"*"!==e[0]||(a.output=o.fastpaths(e,t)),a.output||(a=o(e,t)),s.compileRe(a,t,r,n)},s.toRegex=(e,t)=>{try{const r=t||{};return new RegExp(e,r.flags||(r.nocase?"i":""))}catch(e){if(t&&!0===t.debug)throw e;return/$^/}},s.constants=u,e.exports=s},function(e,t,r){"use strict";const n=r(9),{CHAR_ASTERISK:a,CHAR_AT:o,CHAR_BACKWARD_SLASH:i,CHAR_COMMA:u,CHAR_DOT:s,CHAR_EXCLAMATION_MARK:l,CHAR_FORWARD_SLASH:c,CHAR_LEFT_CURLY_BRACE:f,CHAR_LEFT_PARENTHESES:p,CHAR_LEFT_SQUARE_BRACKET:d,CHAR_PLUS:h,CHAR_QUESTION_MARK:g,CHAR_RIGHT_CURLY_BRACE:y,CHAR_RIGHT_PARENTHESES:v,CHAR_RIGHT_SQUARE_BRACKET:m}=r(10),b=e=>e===c||e===i,_=e=>{!0!==e.isPrefix&&(e.depth=e.isGlobstar?1/0:1)};e.exports=(e,t)=>{const r=t||{},A=e.length-1,S=!0===r.parts||!0===r.scanToEnd,T=[],x=[],w=[];let C,E,R=e,O=-1,N=0,k=0,I=!1,L=!1,M=!1,H=!1,j=!1,P=!1,q=!1,$=!1,D=!1,F=!1,U=0,B={value:"",depth:0,isGlob:!1};const Q=()=>O>=A,G=()=>(C=E,R.charCodeAt(++O));for(;O<A;){let e;if(E=G(),E!==i){if(!0===P||E===f){for(U++;!0!==Q()&&(E=G());)if(E!==i)if(E!==f){if(!0!==P&&E===s&&(E=G())===s){if(I=B.isBrace=!0,M=B.isGlob=!0,F=!0,!0===S)continue;break}if(!0!==P&&E===u){if(I=B.isBrace=!0,M=B.isGlob=!0,F=!0,!0===S)continue;break}if(E===y&&(U--,0===U)){P=!1,I=B.isBrace=!0,F=!0;break}}else U++;else q=B.backslashes=!0,G();if(!0===S)continue;break}if(E!==c){if(!0!==r.noext){if(!0===(E===h||E===o||E===a||E===g||E===l)&&R.charCodeAt(O+1)===p){if(M=B.isGlob=!0,H=B.isExtglob=!0,F=!0,E===l&&O===N&&(D=!0),!0===S){for(;!0!==Q()&&(E=G());)if(E!==i){if(E===v){M=B.isGlob=!0,F=!0;break}}else q=B.backslashes=!0,E=G();continue}break}}if(E===a){if(C===a&&(j=B.isGlobstar=!0),M=B.isGlob=!0,F=!0,!0===S)continue;break}if(E===g){if(M=B.isGlob=!0,F=!0,!0===S)continue;break}if(E===d){for(;!0!==Q()&&(e=G());)if(e!==i){if(e===m){L=B.isBracket=!0,M=B.isGlob=!0,F=!0;break}}else q=B.backslashes=!0,G();if(!0===S)continue;break}if(!0===r.nonegate||E!==l||O!==N){if(!0!==r.noparen&&E===p){if(M=B.isGlob=!0,!0===S){for(;!0!==Q()&&(E=G());)if(E!==p){if(E===v){F=!0;break}}else q=B.backslashes=!0,E=G();continue}break}if(!0===M){if(F=!0,!0===S)continue;break}}else $=B.negated=!0,N++}else{if(T.push(O),x.push(B),B={value:"",depth:0,isGlob:!1},!0===F)continue;if(C===s&&O===N+1){N+=2;continue}k=O+1}}else q=B.backslashes=!0,E=G(),E===f&&(P=!0)}!0===r.noext&&(H=!1,M=!1);let V=R,z="",K="";N>0&&(z=R.slice(0,N),R=R.slice(N),k-=N),V&&!0===M&&k>0?(V=R.slice(0,k),K=R.slice(k)):!0===M?(V="",K=R):V=R,V&&""!==V&&"/"!==V&&V!==R&&b(V.charCodeAt(V.length-1))&&(V=V.slice(0,-1)),!0===r.unescape&&(K&&(K=n.removeBackslashes(K)),V&&!0===q&&(V=n.removeBackslashes(V)));const W={prefix:z,input:e,start:N,base:V,glob:K,isBrace:I,isBracket:L,isGlob:M,isExtglob:H,isGlobstar:j,negated:$,negatedExtglob:D};if(!0===r.tokens&&(W.maxDepth=0,b(E)||x.push(B),W.tokens=x),!0===r.parts||!0===r.tokens){let t;for(let n=0;n<T.length;n++){const a=t?t+1:N,o=T[n],i=e.slice(a,o);r.tokens&&(0===n&&0!==N?(x[n].isPrefix=!0,x[n].value=z):x[n].value=i,_(x[n]),W.maxDepth+=x[n].depth),0===n&&""===i||w.push(i),t=o}if(t&&t+1<e.length){const n=e.slice(t+1);w.push(n),r.tokens&&(x[x.length-1].value=n,_(x[x.length-1]),W.maxDepth+=x[x.length-1].depth)}W.slashes=T,W.parts=w}return W}},function(e,t,r){"use strict";const n=r(10),a=r(9),{MAX_LENGTH:o,POSIX_REGEX_SOURCE:i,REGEX_NON_SPECIAL_CHARS:u,REGEX_SPECIAL_CHARS_BACKREF:s,REPLACEMENTS:l}=n,c=(e,t)=>{if("function"==typeof t.expandRange)return t.expandRange(...e,t);e.sort();const r=`[${e.join("-")}]`;try{new RegExp(r)}catch(t){return e.map(e=>a.escapeRegex(e)).join("..")}return r},f=(e,t)=>`Missing ${e}: "${t}" - use "\\\\${t}" to match literal characters`,p=(e,t)=>{if("string"!=typeof e)throw new TypeError("Expected a string");e=l[e]||e;const r={...t},p="number"==typeof r.maxLength?Math.min(o,r.maxLength):o;let d=e.length;if(d>p)throw new SyntaxError(`Input length: ${d}, exceeds maximum allowed length: ${p}`);const h={type:"bos",value:"",output:r.prepend||""},g=[h],y=r.capture?"":"?:",v=a.isWindows(t),m=n.globChars(v),b=n.extglobChars(m),{DOT_LITERAL:_,PLUS_LITERAL:A,SLASH_LITERAL:S,ONE_CHAR:T,DOTS_SLASH:x,NO_DOT:w,NO_DOT_SLASH:C,NO_DOTS_SLASH:E,QMARK:R,QMARK_NO_DOT:O,STAR:N,START_ANCHOR:k}=m,I=e=>`(${y}(?:(?!${k}${e.dot?x:_}).)*?)`,L=r.dot?"":w,M=r.dot?R:O;let H=!0===r.bash?I(r):N;r.capture&&(H=`(${H})`),"boolean"==typeof r.noext&&(r.noextglob=r.noext);const j={input:e,index:-1,start:0,dot:!0===r.dot,consumed:"",output:"",prefix:"",backtrack:!1,negated:!1,brackets:0,braces:0,parens:0,quotes:0,globstar:!1,tokens:g};e=a.removePrefix(e,j),d=e.length;const P=[],q=[],$=[];let D,F=h;const U=()=>j.index===d-1,B=j.peek=(t=1)=>e[j.index+t],Q=j.advance=()=>e[++j.index]||"",G=()=>e.slice(j.index+1),V=(e="",t=0)=>{j.consumed+=e,j.index+=t},z=e=>{j.output+=null!=e.output?e.output:e.value,V(e.value)},K=()=>{let e=1;for(;"!"===B()&&("("!==B(2)||"?"===B(3));)Q(),j.start++,e++;return e%2!=0&&(j.negated=!0,j.start++,!0)},W=e=>{j[e]++,$.push(e)},X=e=>{j[e]--,$.pop()},J=e=>{if("globstar"===F.type){const t=j.braces>0&&("comma"===e.type||"brace"===e.type),r=!0===e.extglob||P.length&&("pipe"===e.type||"paren"===e.type);"slash"===e.type||"paren"===e.type||t||r||(j.output=j.output.slice(0,-F.output.length),F.type="star",F.value="*",F.output=H,j.output+=F.output)}if(P.length&&"paren"!==e.type&&(P[P.length-1].inner+=e.value),(e.value||e.output)&&z(e),F&&"text"===F.type&&"text"===e.type)return F.value+=e.value,void(F.output=(F.output||"")+e.value);e.prev=F,g.push(e),F=e},Z=(e,t)=>{const n={...b[t],conditions:1,inner:""};n.prev=F,n.parens=j.parens,n.output=j.output;const a=(r.capture?"(":"")+n.open;W("parens"),J({type:e,value:t,output:j.output?"":T}),J({type:"paren",extglob:!0,value:Q(),output:a}),P.push(n)},Y=e=>{let t,n=e.close+(r.capture?")":"");if("negate"===e.type){let a=H;e.inner&&e.inner.length>1&&e.inner.includes("/")&&(a=I(r)),(a!==H||U()||/^\)+$/.test(G()))&&(n=e.close=")$))"+a),e.inner.includes("*")&&(t=G())&&/^\.[^\\/.]+$/.test(t)&&(n=e.close=`)${t})${a})`),"bos"===e.prev.type&&(j.negatedExtglob=!0)}J({type:"paren",extglob:!0,value:D,output:n}),X("parens")};if(!1!==r.fastpaths&&!/(^[*!]|[/()[\]{}"])/.test(e)){let n=!1,o=e.replace(s,(e,t,r,a,o,i)=>"\\"===a?(n=!0,e):"?"===a?t?t+a+(o?R.repeat(o.length):""):0===i?M+(o?R.repeat(o.length):""):R.repeat(r.length):"."===a?_.repeat(r.length):"*"===a?t?t+a+(o?H:""):H:t?e:"\\"+e);return!0===n&&(o=!0===r.unescape?o.replace(/\\/g,""):o.replace(/\\+/g,e=>e.length%2==0?"\\\\":e?"\\":"")),o===e&&!0===r.contains?(j.output=e,j):(j.output=a.wrapOutput(o,j,t),j)}for(;!U();){if(D=Q(),"\0"===D)continue;if("\\"===D){const e=B();if("/"===e&&!0!==r.bash)continue;if("."===e||";"===e)continue;if(!e){D+="\\",J({type:"text",value:D});continue}const t=/^\\+/.exec(G());let n=0;if(t&&t[0].length>2&&(n=t[0].length,j.index+=n,n%2!=0&&(D+="\\")),!0===r.unescape?D=Q():D+=Q(),0===j.brackets){J({type:"text",value:D});continue}}if(j.brackets>0&&("]"!==D||"["===F.value||"[^"===F.value)){if(!1!==r.posix&&":"===D){const e=F.value.slice(1);if(e.includes("[")&&(F.posix=!0,e.includes(":"))){const e=F.value.lastIndexOf("["),t=F.value.slice(0,e),r=F.value.slice(e+2),n=i[r];if(n){F.value=t+n,j.backtrack=!0,Q(),h.output||1!==g.indexOf(F)||(h.output=T);continue}}}("["===D&&":"!==B()||"-"===D&&"]"===B())&&(D="\\"+D),"]"!==D||"["!==F.value&&"[^"!==F.value||(D="\\"+D),!0===r.posix&&"!"===D&&"["===F.value&&(D="^"),F.value+=D,z({value:D});continue}if(1===j.quotes&&'"'!==D){D=a.escapeRegex(D),F.value+=D,z({value:D});continue}if('"'===D){j.quotes=1===j.quotes?0:1,!0===r.keepQuotes&&J({type:"text",value:D});continue}if("("===D){W("parens"),J({type:"paren",value:D});continue}if(")"===D){if(0===j.parens&&!0===r.strictBrackets)throw new SyntaxError(f("opening","("));const e=P[P.length-1];if(e&&j.parens===e.parens+1){Y(P.pop());continue}J({type:"paren",value:D,output:j.parens?")":"\\)"}),X("parens");continue}if("["===D){if(!0!==r.nobracket&&G().includes("]"))W("brackets");else{if(!0!==r.nobracket&&!0===r.strictBrackets)throw new SyntaxError(f("closing","]"));D="\\"+D}J({type:"bracket",value:D});continue}if("]"===D){if(!0===r.nobracket||F&&"bracket"===F.type&&1===F.value.length){J({type:"text",value:D,output:"\\"+D});continue}if(0===j.brackets){if(!0===r.strictBrackets)throw new SyntaxError(f("opening","["));J({type:"text",value:D,output:"\\"+D});continue}X("brackets");const e=F.value.slice(1);if(!0===F.posix||"^"!==e[0]||e.includes("/")||(D="/"+D),F.value+=D,z({value:D}),!1===r.literalBrackets||a.hasRegexChars(e))continue;const t=a.escapeRegex(F.value);if(j.output=j.output.slice(0,-F.value.length),!0===r.literalBrackets){j.output+=t,F.value=t;continue}F.value=`(${y}${t}|${F.value})`,j.output+=F.value;continue}if("{"===D&&!0!==r.nobrace){W("braces");const e={type:"brace",value:D,output:"(",outputIndex:j.output.length,tokensIndex:j.tokens.length};q.push(e),J(e);continue}if("}"===D){const e=q[q.length-1];if(!0===r.nobrace||!e){J({type:"text",value:D,output:D});continue}let t=")";if(!0===e.dots){const e=g.slice(),n=[];for(let t=e.length-1;t>=0&&(g.pop(),"brace"!==e[t].type);t--)"dots"!==e[t].type&&n.unshift(e[t].value);t=c(n,r),j.backtrack=!0}if(!0!==e.comma&&!0!==e.dots){const r=j.output.slice(0,e.outputIndex),n=j.tokens.slice(e.tokensIndex);e.value=e.output="\\{",D=t="\\}",j.output=r;for(const e of n)j.output+=e.output||e.value}J({type:"brace",value:D,output:t}),X("braces"),q.pop();continue}if("|"===D){P.length>0&&P[P.length-1].conditions++,J({type:"text",value:D});continue}if(","===D){let e=D;const t=q[q.length-1];t&&"braces"===$[$.length-1]&&(t.comma=!0,e="|"),J({type:"comma",value:D,output:e});continue}if("/"===D){if("dot"===F.type&&j.index===j.start+1){j.start=j.index+1,j.consumed="",j.output="",g.pop(),F=h;continue}J({type:"slash",value:D,output:S});continue}if("."===D){if(j.braces>0&&"dot"===F.type){"."===F.value&&(F.output=_);const e=q[q.length-1];F.type="dots",F.output+=D,F.value+=D,e.dots=!0;continue}if(j.braces+j.parens===0&&"bos"!==F.type&&"slash"!==F.type){J({type:"text",value:D,output:_});continue}J({type:"dot",value:D,output:_});continue}if("?"===D){if(!(F&&"("===F.value)&&!0!==r.noextglob&&"("===B()&&"?"!==B(2)){Z("qmark",D);continue}if(F&&"paren"===F.type){const e=B();let t=D;if("<"===e&&!a.supportsLookbehinds())throw new Error("Node.js v10 or higher is required for regex lookbehinds");("("===F.value&&!/[!=<:]/.test(e)||"<"===e&&!/<([!=]|\w+>)/.test(G()))&&(t="\\"+D),J({type:"text",value:D,output:t});continue}if(!0!==r.dot&&("slash"===F.type||"bos"===F.type)){J({type:"qmark",value:D,output:O});continue}J({type:"qmark",value:D,output:R});continue}if("!"===D){if(!0!==r.noextglob&&"("===B()&&("?"!==B(2)||!/[!=<:]/.test(B(3)))){Z("negate",D);continue}if(!0!==r.nonegate&&0===j.index){K();continue}}if("+"===D){if(!0!==r.noextglob&&"("===B()&&"?"!==B(2)){Z("plus",D);continue}if(F&&"("===F.value||!1===r.regex){J({type:"plus",value:D,output:A});continue}if(F&&("bracket"===F.type||"paren"===F.type||"brace"===F.type)||j.parens>0){J({type:"plus",value:D});continue}J({type:"plus",value:A});continue}if("@"===D){if(!0!==r.noextglob&&"("===B()&&"?"!==B(2)){J({type:"at",extglob:!0,value:D,output:""});continue}J({type:"text",value:D});continue}if("*"!==D){"$"!==D&&"^"!==D||(D="\\"+D);const e=u.exec(G());e&&(D+=e[0],j.index+=e[0].length),J({type:"text",value:D});continue}if(F&&("globstar"===F.type||!0===F.star)){F.type="star",F.star=!0,F.value+=D,F.output=H,j.backtrack=!0,j.globstar=!0,V(D);continue}let t=G();if(!0!==r.noextglob&&/^\([^?]/.test(t)){Z("star",D);continue}if("star"===F.type){if(!0===r.noglobstar){V(D);continue}const n=F.prev,a=n.prev,o="slash"===n.type||"bos"===n.type,i=a&&("star"===a.type||"globstar"===a.type);if(!0===r.bash&&(!o||t[0]&&"/"!==t[0])){J({type:"star",value:D,output:""});continue}const u=j.braces>0&&("comma"===n.type||"brace"===n.type),s=P.length&&("pipe"===n.type||"paren"===n.type);if(!o&&"paren"!==n.type&&!u&&!s){J({type:"star",value:D,output:""});continue}for(;"/**"===t.slice(0,3);){const r=e[j.index+4];if(r&&"/"!==r)break;t=t.slice(3),V("/**",3)}if("bos"===n.type&&U()){F.type="globstar",F.value+=D,F.output=I(r),j.output=F.output,j.globstar=!0,V(D);continue}if("slash"===n.type&&"bos"!==n.prev.type&&!i&&U()){j.output=j.output.slice(0,-(n.output+F.output).length),n.output="(?:"+n.output,F.type="globstar",F.output=I(r)+(r.strictSlashes?")":"|$)"),F.value+=D,j.globstar=!0,j.output+=n.output+F.output,V(D);continue}if("slash"===n.type&&"bos"!==n.prev.type&&"/"===t[0]){const e=void 0!==t[1]?"|$":"";j.output=j.output.slice(0,-(n.output+F.output).length),n.output="(?:"+n.output,F.type="globstar",F.output=`${I(r)}${S}|${S}${e})`,F.value+=D,j.output+=n.output+F.output,j.globstar=!0,V(D+Q()),J({type:"slash",value:"/",output:""});continue}if("bos"===n.type&&"/"===t[0]){F.type="globstar",F.value+=D,F.output=`(?:^|${S}|${I(r)}${S})`,j.output=F.output,j.globstar=!0,V(D+Q()),J({type:"slash",value:"/",output:""});continue}j.output=j.output.slice(0,-F.output.length),F.type="globstar",F.output=I(r),F.value+=D,j.output+=F.output,j.globstar=!0,V(D);continue}const n={type:"star",value:D,output:H};!0!==r.bash?!F||"bracket"!==F.type&&"paren"!==F.type||!0!==r.regex?(j.index!==j.start&&"slash"!==F.type&&"dot"!==F.type||("dot"===F.type?(j.output+=C,F.output+=C):!0===r.dot?(j.output+=E,F.output+=E):(j.output+=L,F.output+=L),"*"!==B()&&(j.output+=T,F.output+=T)),J(n)):(n.output=D,J(n)):(n.output=".*?","bos"!==F.type&&"slash"!==F.type||(n.output=L+n.output),J(n))}for(;j.brackets>0;){if(!0===r.strictBrackets)throw new SyntaxError(f("closing","]"));j.output=a.escapeLast(j.output,"["),X("brackets")}for(;j.parens>0;){if(!0===r.strictBrackets)throw new SyntaxError(f("closing",")"));j.output=a.escapeLast(j.output,"("),X("parens")}for(;j.braces>0;){if(!0===r.strictBrackets)throw new SyntaxError(f("closing","}"));j.output=a.escapeLast(j.output,"{"),X("braces")}if(!0===r.strictSlashes||"star"!==F.type&&"bracket"!==F.type||J({type:"maybe_slash",value:"",output:S+"?"}),!0===j.backtrack){j.output="";for(const e of j.tokens)j.output+=null!=e.output?e.output:e.value,e.suffix&&(j.output+=e.suffix)}return j};p.fastpaths=(e,t)=>{const r={...t},i="number"==typeof r.maxLength?Math.min(o,r.maxLength):o,u=e.length;if(u>i)throw new SyntaxError(`Input length: ${u}, exceeds maximum allowed length: ${i}`);e=l[e]||e;const s=a.isWindows(t),{DOT_LITERAL:c,SLASH_LITERAL:f,ONE_CHAR:p,DOTS_SLASH:d,NO_DOT:h,NO_DOTS:g,NO_DOTS_SLASH:y,STAR:v,START_ANCHOR:m}=n.globChars(s),b=r.dot?g:h,_=r.dot?y:h,A=r.capture?"":"?:";let S=!0===r.bash?".*?":v;r.capture&&(S=`(${S})`);const T=e=>!0===e.noglobstar?S:`(${A}(?:(?!${m}${e.dot?d:c}).)*?)`,x=e=>{switch(e){case"*":return`${b}${p}${S}`;case".*":return`${c}${p}${S}`;case"*.*":return`${b}${S}${c}${p}${S}`;case"*/*":return`${b}${S}${f}${p}${_}${S}`;case"**":return b+T(r);case"**/*":return`(?:${b}${T(r)}${f})?${_}${p}${S}`;case"**/*.*":return`(?:${b}${T(r)}${f})?${_}${S}${c}${p}${S}`;case"**/.*":return`(?:${b}${T(r)}${f})?${c}${p}${S}`;default:{const t=/^(.*?)\.(\w+)$/.exec(e);if(!t)return;const r=x(t[1]);if(!r)return;return r+c+t[2]}}},w=a.removePrefix(e,{negated:!1,prefix:""});let C=x(w);return C&&!0!==r.strictSlashes&&(C+=f+"?"),C},e.exports=p},function(e,t,r){"use strict";e.exports=function(){}},function(e,t,r){"use strict";var n=r(52),a=Math.abs,o=Math.floor;e.exports=function(e){return isNaN(e)?0:0!==(e=Number(e))&&isFinite(e)?n(e)*o(a(e)):e}},function(e,t,r){"use strict";e.exports=r(53)()?Math.sign:r(54)},function(e,t,r){"use strict";e.exports=function(){var e=Math.sign;return"function"==typeof e&&(1===e(10)&&-1===e(-20))}},function(e,t,r){"use strict";e.exports=function(e){return e=Number(e),isNaN(e)||0===e?e:e>0?1:-1}},function(e,t,r){"use strict";var n=r(2),a=r(11),o=r(5),i=r(57),u=r(23);e.exports=function e(t){var r,s,l;if(n(t),(r=Object(arguments[1])).async&&r.promise)throw new Error("Options 'async' and 'promise' cannot be used together");return hasOwnProperty.call(t,"__memoized__")&&!r.force?t:(s=u(r.length,t.length,r.async&&o.async),l=i(t,s,r),a(o,(function(e,t){r[t]&&e(r[t],l,r)})),e.__profiler__&&e.__profiler__(l),l.updateEnv(),l.memoized)}},function(e,t,r){"use strict";var n=r(2),a=r(7),o=Function.prototype.bind,i=Function.prototype.call,u=Object.keys,s=Object.prototype.propertyIsEnumerable;e.exports=function(e,t){return function(r,l){var c,f=arguments[2],p=arguments[3];return r=Object(a(r)),n(l),c=u(r),p&&c.sort("function"==typeof p?o.call(p,r):void 0),"function"!=typeof e&&(e=c[e]),i.call(e,c,(function(e,n){return s.call(r,e)?i.call(l,f,r[e],e,r,n):t}))}}},function(e,t,r){"use strict";var n=r(58),a=r(25),o=r(6),i=r(72).methods,u=r(73),s=r(89),l=Function.prototype.apply,c=Function.prototype.call,f=Object.create,p=Object.defineProperties,d=i.on,h=i.emit;e.exports=function(e,t,r){var i,g,y,v,m,b,_,A,S,T,x,w,C,E,R,O=f(null);return g=!1!==t?t:isNaN(e.length)?1:e.length,r.normalizer&&(T=s(r.normalizer),y=T.get,v=T.set,m=T.delete,b=T.clear),null!=r.resolvers&&(R=u(r.resolvers)),E=y?a((function(t){var r,a,o=arguments;if(R&&(o=R(o)),null!==(r=y(o))&&hasOwnProperty.call(O,r))return x&&i.emit("get",r,o,this),O[r];if(a=1===o.length?c.call(e,this,o[0]):l.call(e,this,o),null===r){if(null!==(r=y(o)))throw n("Circular invocation","CIRCULAR_INVOCATION");r=v(o)}else if(hasOwnProperty.call(O,r))throw n("Circular invocation","CIRCULAR_INVOCATION");return O[r]=a,w&&i.emit("set",r,null,a),a}),g):0===t?function(){var t;if(hasOwnProperty.call(O,"data"))return x&&i.emit("get","data",arguments,this),O.data;if(t=arguments.length?l.call(e,this,arguments):c.call(e,this),hasOwnProperty.call(O,"data"))throw n("Circular invocation","CIRCULAR_INVOCATION");return O.data=t,w&&i.emit("set","data",null,t),t}:function(t){var r,a,o=arguments;if(R&&(o=R(arguments)),a=String(o[0]),hasOwnProperty.call(O,a))return x&&i.emit("get",a,o,this),O[a];if(r=1===o.length?c.call(e,this,o[0]):l.call(e,this,o),hasOwnProperty.call(O,a))throw n("Circular invocation","CIRCULAR_INVOCATION");return O[a]=r,w&&i.emit("set",a,null,r),r},i={original:e,memoized:E,profileName:r.profileName,get:function(e){return R&&(e=R(e)),y?y(e):String(e[0])},has:function(e){return hasOwnProperty.call(O,e)},delete:function(e){var t;hasOwnProperty.call(O,e)&&(m&&m(e),t=O[e],delete O[e],C&&i.emit("delete",e,t))},clear:function(){var e=O;b&&b(),O=f(null),i.emit("clear",e)},on:function(e,t){return"get"===e?x=!0:"set"===e?w=!0:"delete"===e&&(C=!0),d.call(this,e,t)},emit:h,updateEnv:function(){e=i.original}},_=y?a((function(e){var t,r=arguments;R&&(r=R(r)),null!==(t=y(r))&&i.delete(t)}),g):0===t?function(){return i.delete("data")}:function(e){return R&&(e=R(arguments)[0]),i.delete(e)},A=a((function(){var e,r=arguments;return 0===t?O.data:(R&&(r=R(r)),e=y?y(r):String(r[0]),O[e])})),S=a((function(){var e,r=arguments;return 0===t?i.has("data"):(R&&(r=R(r)),null!==(e=y?y(r):String(r[0]))&&i.has(e))})),p(E,{__memoized__:o(!0),delete:o(_),clear:o(i.clear),_get:o(A),_has:o(S)}),i}},function(e,t,r){"use strict";var n=r(24),a=r(64),o=r(3),i=Error.captureStackTrace;e.exports=function(t){var r=new Error(t),u=arguments[1],s=arguments[2];return o(s)||a(u)&&(s=u,u=null),o(s)&&n(r,s),o(u)&&(r.code=u),i&&i(r,e.exports),r}},function(e,t,r){"use strict";e.exports=function(){var e,t=Object.assign;return"function"==typeof t&&(t(e={foo:"raz"},{bar:"dwa"},{trzy:"trzy"}),e.foo+e.bar+e.trzy==="razdwatrzy")}},function(e,t,r){"use strict";var n=r(61),a=r(7),o=Math.max;e.exports=function(e,t){var r,i,u,s=o(arguments.length,2);for(e=Object(a(e)),u=function(n){try{e[n]=t[n]}catch(e){r||(r=e)}},i=1;i<s;++i)n(t=arguments[i]).forEach(u);if(void 0!==r)throw r;return e}},function(e,t,r){"use strict";e.exports=r(62)()?Object.keys:r(63)},function(e,t,r){"use strict";e.exports=function(){try{return Object.keys("primitive"),!0}catch(e){return!1}}},function(e,t,r){"use strict";var n=r(3),a=Object.keys;e.exports=function(e){return a(n(e)?Object(e):e)}},function(e,t,r){"use strict";var n=r(3),a={function:!0,object:!0};e.exports=function(e){return n(e)&&a[typeof e]||!1}},function(e,t,r){"use strict";var n=r(66),a=/^\s*class[\s{/}]/,o=Function.prototype.toString;e.exports=function(e){return!!n(e)&&!a.test(o.call(e))}},function(e,t,r){"use strict";var n=r(67);e.exports=function(e){if("function"!=typeof e)return!1;if(!hasOwnProperty.call(e,"length"))return!1;try{if("number"!=typeof e.length)return!1;if("function"!=typeof e.call)return!1;if("function"!=typeof e.apply)return!1}catch(e){return!1}return!n(e)}},function(e,t,r){"use strict";var n=r(68);e.exports=function(e){if(!n(e))return!1;try{return!!e.constructor&&e.constructor.prototype===e}catch(e){return!1}}},function(e,t,r){"use strict";var n=r(27),a={object:!0,function:!0,undefined:!0};e.exports=function(e){return!!n(e)&&hasOwnProperty.call(a,typeof e)}},function(e,t,r){"use strict";e.exports=r(70)()?String.prototype.contains:r(71)},function(e,t,r){"use strict";var n="razdwatrzy";e.exports=function(){return"function"==typeof n.contains&&(!0===n.contains("dwa")&&!1===n.contains("foo"))}},function(e,t,r){"use strict";var n=String.prototype.indexOf;e.exports=function(e){return n.call(this,e,arguments[1])>-1}},function(e,t,r){"use strict";var n,a,o,i,u,s,l,c=r(6),f=r(2),p=Function.prototype.apply,d=Function.prototype.call,h=Object.create,g=Object.defineProperty,y=Object.defineProperties,v=Object.prototype.hasOwnProperty,m={configurable:!0,enumerable:!1,writable:!0};a=function(e,t){var r,a;return f(t),a=this,n.call(this,e,r=function(){o.call(a,e,r),p.call(t,this,arguments)}),r.__eeOnceListener__=t,this},u={on:n=function(e,t){var r;return f(t),v.call(this,"__ee__")?r=this.__ee__:(r=m.value=h(null),g(this,"__ee__",m),m.value=null),r[e]?"object"==typeof r[e]?r[e].push(t):r[e]=[r[e],t]:r[e]=t,this},once:a,off:o=function(e,t){var r,n,a,o;if(f(t),!v.call(this,"__ee__"))return this;if(!(r=this.__ee__)[e])return this;if("object"==typeof(n=r[e]))for(o=0;a=n[o];++o)a!==t&&a.__eeOnceListener__!==t||(2===n.length?r[e]=n[o?0:1]:n.splice(o,1));else n!==t&&n.__eeOnceListener__!==t||delete r[e];return this},emit:i=function(e){var t,r,n,a,o;if(v.call(this,"__ee__")&&(a=this.__ee__[e]))if("object"==typeof a){for(r=arguments.length,o=new Array(r-1),t=1;t<r;++t)o[t-1]=arguments[t];for(a=a.slice(),t=0;n=a[t];++t)p.call(n,this,o)}else switch(arguments.length){case 1:d.call(a,this);break;case 2:d.call(a,this,arguments[1]);break;case 3:d.call(a,this,arguments[1],arguments[2]);break;default:for(r=arguments.length,o=new Array(r-1),t=1;t<r;++t)o[t-1]=arguments[t];p.call(a,this,o)}}},s={on:c(n),once:c(a),off:c(o),emit:c(i)},l=y({},s),e.exports=t=function(e){return null==e?h(l):y(Object(e),s)},t.methods=u},function(e,t,r){"use strict";var n,a=r(74),o=r(3),i=r(2),u=Array.prototype.slice;n=function(e){return this.map((function(t,r){return t?t(e[r]):e[r]})).concat(u.call(e,this.length))},e.exports=function(e){return(e=a(e)).forEach((function(e){o(e)&&i(e)})),n.bind(e)}},function(e,t,r){"use strict";var n=r(16),a=Array.isArray;e.exports=function(e){return a(e)?e:n(e)}},function(e,t,r){"use strict";e.exports=function(){var e,t,r=Array.from;return"function"==typeof r&&(t=r(e=["raz","dwa"]),Boolean(t&&t!==e&&"dwa"===t[1]))}},function(e,t,r){"use strict";var n=r(77).iterator,a=r(86),o=r(87),i=r(4),u=r(2),s=r(7),l=r(3),c=r(88),f=Array.isArray,p=Function.prototype.call,d={configurable:!0,enumerable:!0,writable:!0,value:null},h=Object.defineProperty;e.exports=function(e){var t,r,g,y,v,m,b,_,A,S,T=arguments[1],x=arguments[2];if(e=Object(s(e)),l(T)&&u(T),this&&this!==Array&&o(this))t=this;else{if(!T){if(a(e))return 1!==(v=e.length)?Array.apply(null,e):((y=new Array(1))[0]=e[0],y);if(f(e)){for(y=new Array(v=e.length),r=0;r<v;++r)y[r]=e[r];return y}}y=[]}if(!f(e))if(void 0!==(A=e[n])){for(b=u(A).call(e),t&&(y=new t),_=b.next(),r=0;!_.done;)S=T?p.call(T,x,_.value,r):_.value,t?(d.value=S,h(y,r,d)):y[r]=S,_=b.next(),++r;v=r}else if(c(e)){for(v=e.length,t&&(y=new t),r=0,g=0;r<v;++r)S=e[r],r+1<v&&(m=S.charCodeAt(0))>=55296&&m<=56319&&(S+=e[++r]),S=T?p.call(T,x,S,g):S,t?(d.value=S,h(y,g,d)):y[g]=S,++g;v=g}if(void 0===v)for(v=i(e.length),t&&(y=new t(v)),r=0;r<v;++r)S=T?p.call(T,x,e[r],r):e[r],t?(d.value=S,h(y,r,d)):y[r]=S;return t&&(d.value=null,y.length=v),y}},function(e,t,r){"use strict";e.exports=r(78)()?r(12).Symbol:r(81)},function(e,t,r){"use strict";var n=r(12),a={object:!0,symbol:!0};e.exports=function(){var e,t=n.Symbol;if("function"!=typeof t)return!1;e=t("test symbol");try{String(e)}catch(e){return!1}return!!a[typeof t.iterator]&&(!!a[typeof t.toPrimitive]&&!!a[typeof t.toStringTag])}},function(e,t,r){"use strict";e.exports=function(){return"object"==typeof globalThis&&(!!globalThis&&globalThis.Array===Array)}},function(e,t){var r=function(){if("object"==typeof self&&self)return self;if("object"==typeof window&&window)return window;throw new Error("Unable to resolve global `this`")};e.exports=function(){if(this)return this;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch(e){return r()}try{return __global__||r()}finally{delete Object.prototype.__global__}}()},function(e,t,r){"use strict";var n,a,o,i=r(6),u=r(28),s=r(12).Symbol,l=r(83),c=r(84),f=r(85),p=Object.create,d=Object.defineProperties,h=Object.defineProperty;if("function"==typeof s)try{String(s()),o=!0}catch(e){}else s=null;a=function(e){if(this instanceof a)throw new TypeError("Symbol is not a constructor");return n(e)},e.exports=n=function e(t){var r;if(this instanceof e)throw new TypeError("Symbol is not a constructor");return o?s(t):(r=p(a.prototype),t=void 0===t?"":String(t),d(r,{__description__:i("",t),__name__:i("",l(t))}))},c(n),f(n),d(a.prototype,{constructor:i(n),toString:i("",(function(){return this.__name__}))}),d(n.prototype,{toString:i((function(){return"Symbol ("+u(this).__description__+")"})),valueOf:i((function(){return u(this)}))}),h(n.prototype,n.toPrimitive,i("",(function(){var e=u(this);return"symbol"==typeof e?e:e.toString()}))),h(n.prototype,n.toStringTag,i("c","Symbol")),h(a.prototype,n.toStringTag,i("c",n.prototype[n.toStringTag])),h(a.prototype,n.toPrimitive,i("c",n.prototype[n.toPrimitive]))},function(e,t,r){"use strict";e.exports=function(e){return!!e&&("symbol"==typeof e||!!e.constructor&&("Symbol"===e.constructor.name&&"Symbol"===e[e.constructor.toStringTag]))}},function(e,t,r){"use strict";var n=r(6),a=Object.create,o=Object.defineProperty,i=Object.prototype,u=a(null);e.exports=function(e){for(var t,r,a=0;u[e+(a||"")];)++a;return u[e+=a||""]=!0,o(i,t="@@"+e,n.gs(null,(function(e){r||(r=!0,o(this,t,n(e)),r=!1)}))),t}},function(e,t,r){"use strict";var n=r(6),a=r(12).Symbol;e.exports=function(e){return Object.defineProperties(e,{hasInstance:n("",a&&a.hasInstance||e("hasInstance")),isConcatSpreadable:n("",a&&a.isConcatSpreadable||e("isConcatSpreadable")),iterator:n("",a&&a.iterator||e("iterator")),match:n("",a&&a.match||e("match")),replace:n("",a&&a.replace||e("replace")),search:n("",a&&a.search||e("search")),species:n("",a&&a.species||e("species")),split:n("",a&&a.split||e("split")),toPrimitive:n("",a&&a.toPrimitive||e("toPrimitive")),toStringTag:n("",a&&a.toStringTag||e("toStringTag")),unscopables:n("",a&&a.unscopables||e("unscopables"))})}},function(e,t,r){"use strict";var n=r(6),a=r(28),o=Object.create(null);e.exports=function(e){return Object.defineProperties(e,{for:n((function(t){return o[t]?o[t]:o[t]=e(String(t))})),keyFor:n((function(e){var t;for(t in a(e),o)if(o[t]===e)return t}))})}},function(e,t,r){"use strict";var n=Object.prototype.toString,a=n.call(function(){return arguments}());e.exports=function(e){return n.call(e)===a}},function(e,t,r){"use strict";var n=Object.prototype.toString,a=RegExp.prototype.test.bind(/^[object [A-Za-z0-9]*Function]$/);e.exports=function(e){return"function"==typeof e&&a(n.call(e))}},function(e,t,r){"use strict";var n=Object.prototype.toString,a=n.call("");e.exports=function(e){return"string"==typeof e||e&&"object"==typeof e&&(e instanceof String||n.call(e)===a)||!1}},function(e,t,r){"use strict";var n=r(2);e.exports=function(e){var t;return"function"==typeof e?{set:e,get:e}:(t={get:n(e.get)},void 0!==e.set?(t.set=n(e.set),e.delete&&(t.delete=n(e.delete)),e.clear&&(t.clear=n(e.clear)),t):(t.set=t.get,t))}},function(e,t,r){"use strict";e.exports=function(e){var t,r,n=e.length;if(!n)return"";for(t=String(e[r=0]);--n;)t+=""+e[++r];return t}},function(e,t,r){"use strict";e.exports=function(e){return e?function(t){for(var r=String(t[0]),n=0,a=e;--a;)r+=""+t[++n];return r}:function(){return""}}},function(e,t,r){"use strict";var n=r(17),a=Object.create;e.exports=function(){var e=0,t=[],r=a(null);return{get:function(e){var r,a=0,o=t,i=e.length;if(0===i)return o[i]||null;if(o=o[i]){for(;a<i-1;){if(-1===(r=n.call(o[0],e[a])))return null;o=o[1][r],++a}return-1===(r=n.call(o[0],e[a]))?null:o[1][r]||null}return null},set:function(a){var o,i=0,u=t,s=a.length;if(0===s)u[s]=++e;else{for(u[s]||(u[s]=[[],[]]),u=u[s];i<s-1;)-1===(o=n.call(u[0],a[i]))&&(o=u[0].push(a[i])-1,u[1].push([[],[]])),u=u[1][o],++i;-1===(o=n.call(u[0],a[i]))&&(o=u[0].push(a[i])-1),u[1][o]=++e}return r[e]=a,e},delete:function(e){var a,o=0,i=t,u=r[e],s=u.length,l=[];if(0===s)delete i[s];else if(i=i[s]){for(;o<s-1;){if(-1===(a=n.call(i[0],u[o])))return;l.push(i,a),i=i[1][a],++o}if(-1===(a=n.call(i[0],u[o])))return;for(e=i[1][a],i[0].splice(a,1),i[1].splice(a,1);!i[0].length&&l.length;)a=l.pop(),(i=l.pop())[0].splice(a,1),i[1].splice(a,1)}delete r[e]},clear:function(){t=[],r=a(null)}}}},function(e,t,r){"use strict";e.exports=r(94)()?Number.isNaN:r(95)},function(e,t,r){"use strict";e.exports=function(){var e=Number.isNaN;return"function"==typeof e&&(!e({})&&e(NaN)&&!e(34))}},function(e,t,r){"use strict";e.exports=function(e){return e!=e}},function(e,t,r){"use strict";var n=r(17);e.exports=function(){var e=0,t=[],r=[];return{get:function(e){var a=n.call(t,e[0]);return-1===a?null:r[a]},set:function(n){return t.push(n[0]),r.push(++e),e},delete:function(e){var a=n.call(r,e);-1!==a&&(t.splice(a,1),r.splice(a,1))},clear:function(){t=[],r=[]}}}},function(e,t,r){"use strict";var n=r(17),a=Object.create;e.exports=function(e){var t=0,r=[[],[]],o=a(null);return{get:function(t){for(var a,o=0,i=r;o<e-1;){if(-1===(a=n.call(i[0],t[o])))return null;i=i[1][a],++o}return-1===(a=n.call(i[0],t[o]))?null:i[1][a]||null},set:function(a){for(var i,u=0,s=r;u<e-1;)-1===(i=n.call(s[0],a[u]))&&(i=s[0].push(a[u])-1,s[1].push([[],[]])),s=s[1][i],++u;return-1===(i=n.call(s[0],a[u]))&&(i=s[0].push(a[u])-1),s[1][i]=++t,o[t]=a,t},delete:function(t){for(var a,i=0,u=r,s=[],l=o[t];i<e-1;){if(-1===(a=n.call(u[0],l[i])))return;s.push(u,a),u=u[1][a],++i}if(-1!==(a=n.call(u[0],l[i]))){for(t=u[1][a],u[0].splice(a,1),u[1].splice(a,1);!u[0].length&&s.length;)a=s.pop(),(u=s.pop())[0].splice(a,1),u[1].splice(a,1);delete o[t]}},clear:function(){r=[[],[]],o=a(null)}}}},function(e,t,r){"use strict";var n=r(16),a=r(29),o=r(26),i=r(25),u=r(18),s=Array.prototype.slice,l=Function.prototype.apply,c=Object.create;r(5).async=function(e,t){var r,f,p,d=c(null),h=c(null),g=t.memoized,y=t.original;t.memoized=i((function(e){var t=arguments,n=t[t.length-1];return"function"==typeof n&&(r=n,t=s.call(t,0,-1)),g.apply(f=this,p=t)}),g);try{o(t.memoized,g)}catch(e){}t.on("get",(function(e){var n,a,o;if(r){if(d[e])return"function"==typeof d[e]?d[e]=[d[e],r]:d[e].push(r),void(r=null);n=r,a=f,o=p,r=f=p=null,u((function(){var i;hasOwnProperty.call(h,e)?(i=h[e],t.emit("getasync",e,o,a),l.call(n,i.context,i.args)):(r=n,f=a,p=o,g.apply(a,o))}))}})),t.original=function(){var e,a,o,i;return r?(e=n(arguments),a=function e(r){var a,o,s=e.id;if(null!=s){if(delete e.id,a=d[s],delete d[s],a)return o=n(arguments),t.has(s)&&(r?t.delete(s):(h[s]={context:this,args:o},t.emit("setasync",s,"function"==typeof a?1:a.length))),"function"==typeof a?i=l.call(a,this,o):a.forEach((function(e){i=l.call(e,this,o)}),this),i}else u(l.bind(e,this,arguments))},o=r,r=f=p=null,e.push(a),i=l.call(y,this,e),a.cb=o,r=a,i):l.call(y,this,arguments)},t.on("set",(function(e){r?(d[e]?"function"==typeof d[e]?d[e]=[d[e],r.cb]:d[e].push(r.cb):d[e]=r.cb,delete r.cb,r.id=e,r=null):t.delete(e)})),t.on("delete",(function(e){var r;hasOwnProperty.call(d,e)||h[e]&&(r=h[e],delete h[e],t.emit("deleteasync",e,s.call(r.args,1)))})),t.on("clear",(function(){var e=h;h=c(null),t.emit("clearasync",a(e,(function(e){return s.call(e.args,1)})))}))}},function(e,t,r){(function(e){var n=void 0!==e&&e||"undefined"!=typeof self&&self||window,a=Function.prototype.apply;function o(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new o(a.call(setTimeout,n,arguments),clearTimeout)},t.setInterval=function(){return new o(a.call(setInterval,n,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(n,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout((function(){e._onTimeout&&e._onTimeout()}),t))},r(100),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(this,r(30))},function(e,t,r){(function(e,t){!function(e,r){"use strict";if(!e.setImmediate){var n,a,o,i,u,s=1,l={},c=!1,f=e.document,p=Object.getPrototypeOf&&Object.getPrototypeOf(e);p=p&&p.setTimeout?p:e,"[object process]"==={}.toString.call(e.process)?n=function(e){t.nextTick((function(){h(e)}))}:!function(){if(e.postMessage&&!e.importScripts){var t=!0,r=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=r,t}}()?e.MessageChannel?((o=new MessageChannel).port1.onmessage=function(e){h(e.data)},n=function(e){o.port2.postMessage(e)}):f&&"onreadystatechange"in f.createElement("script")?(a=f.documentElement,n=function(e){var t=f.createElement("script");t.onreadystatechange=function(){h(e),t.onreadystatechange=null,a.removeChild(t),t=null},a.appendChild(t)}):n=function(e){setTimeout(h,0,e)}:(i="setImmediate$"+Math.random()+"$",u=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(i)&&h(+t.data.slice(i.length))},e.addEventListener?e.addEventListener("message",u,!1):e.attachEvent("onmessage",u),n=function(t){e.postMessage(i+t,"*")}),p.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),r=0;r<t.length;r++)t[r]=arguments[r+1];var a={callback:e,args:t};return l[s]=a,n(s),s++},p.clearImmediate=d}function d(e){delete l[e]}function h(e){if(c)setTimeout(h,0,e);else{var t=l[e];if(t){c=!0;try{!function(e){var t=e.callback,r=e.args;switch(r.length){case 0:t();break;case 1:t(r[0]);break;case 2:t(r[0],r[1]);break;case 3:t(r[0],r[1],r[2]);break;default:t.apply(void 0,r)}}(t)}finally{d(e),c=!1}}}}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,r(30),r(8))},function(e,t,r){"use strict";var n=r(29),a=r(102),o=r(103),i=r(105),u=r(32),s=r(18),l=Object.create,c=a("then","then:finally","done","done:finally");r(5).promise=function(e,t){var r=l(null),a=l(null),f=l(null);if(!0===e)e=null;else if(e=o(e),!c[e])throw new TypeError("'"+i(e)+"' is not valid promise mode");t.on("set",(function(n,o,i){var l=!1;if(!u(i))return a[n]=i,void t.emit("setasync",n,1);r[n]=1,f[n]=i;var c=function(e){var o=r[n];if(l)throw new Error("Memoizee error: Detected unordered then|done & finally resolution, which in turn makes proper detection of success/failure impossible (when in 'done:finally' mode)\nConsider to rely on 'then' or 'done' mode instead.");o&&(delete r[n],a[n]=e,t.emit("setasync",n,o))},p=function(){l=!0,r[n]&&(delete r[n],delete f[n],t.delete(n))},d=e;if(d||(d="then"),"then"===d){var h=function(){s(p)};"function"==typeof(i=i.then((function(e){s(c.bind(this,e))}),h)).finally&&i.finally(h)}else if("done"===d){if("function"!=typeof i.done)throw new Error("Memoizee error: Retrieved promise does not implement 'done' in 'done' mode");i.done(c,p)}else if("done:finally"===d){if("function"!=typeof i.done)throw new Error("Memoizee error: Retrieved promise does not implement 'done' in 'done:finally' mode");if("function"!=typeof i.finally)throw new Error("Memoizee error: Retrieved promise does not implement 'finally' in 'done:finally' mode");i.done(c),i.finally(p)}})),t.on("get",(function(e,n,a){var o;if(r[e])++r[e];else{o=f[e];var i=function(){t.emit("getasync",e,n,a)};u(o)?"function"==typeof o.done?o.done(i):o.then((function(){s(i)})):i()}})),t.on("delete",(function(e){if(delete f[e],r[e])delete r[e];else if(hasOwnProperty.call(a,e)){var n=a[e];delete a[e],t.emit("deleteasync",e,[n])}})),t.on("clear",(function(){var e=a;a=l(null),r=l(null),f=l(null),t.emit("clearasync",n(e,(function(e){return[e]})))}))}},function(e,t,r){"use strict";var n=Array.prototype.forEach,a=Object.create;e.exports=function(e){var t=a(null);return n.call(arguments,(function(e){t[e]=!0})),t}},function(e,t,r){"use strict";var n=r(7),a=r(104);e.exports=function(e){return a(n(e))}},function(e,t,r){"use strict";var n=r(31);e.exports=function(e){try{return e&&n(e.toString)?e.toString():String(e)}catch(e){throw new TypeError("Passed argument cannot be stringifed")}}},function(e,t,r){"use strict";var n=r(106),a=/[\n\r\u2028\u2029]/g;e.exports=function(e){var t=n(e);return t.length>100&&(t=t.slice(0,99)+"…"),t=t.replace(a,(function(e){return JSON.stringify(e).slice(1,-1)}))}},function(e,t,r){"use strict";var n=r(31);e.exports=function(e){try{return e&&n(e.toString)?e.toString():String(e)}catch(e){return"<Non-coercible to string value>"}}},function(e,t,r){"use strict";var n=r(2),a=r(11),o=r(5),i=Function.prototype.apply;o.dispose=function(e,t,r){var u;if(n(e),r.async&&o.async||r.promise&&o.promise)return t.on("deleteasync",u=function(t,r){i.call(e,null,r)}),void t.on("clearasync",(function(e){a(e,(function(e,t){u(t,e)}))}));t.on("delete",u=function(t,r){e(r)}),t.on("clear",(function(e){a(e,(function(e,t){u(t,e)}))}))}},function(e,t,r){"use strict";var n=r(16),a=r(11),o=r(18),i=r(32),u=r(109),s=r(5),l=Function.prototype,c=Math.max,f=Math.min,p=Object.create;s.maxAge=function(e,t,r){var d,h,g,y;(e=u(e))&&(d=p(null),h=r.async&&s.async||r.promise&&s.promise?"async":"",t.on("set"+h,(function(r){d[r]=setTimeout((function(){t.delete(r)}),e),"function"==typeof d[r].unref&&d[r].unref(),y&&(y[r]&&"nextTick"!==y[r]&&clearTimeout(y[r]),y[r]=setTimeout((function(){delete y[r]}),g),"function"==typeof y[r].unref&&y[r].unref())})),t.on("delete"+h,(function(e){clearTimeout(d[e]),delete d[e],y&&("nextTick"!==y[e]&&clearTimeout(y[e]),delete y[e])})),r.preFetch&&(g=!0===r.preFetch||isNaN(r.preFetch)?.333:c(f(Number(r.preFetch),1),0))&&(y={},g=(1-g)*e,t.on("get"+h,(function(e,a,u){y[e]||(y[e]="nextTick",o((function(){var o;"nextTick"===y[e]&&(delete y[e],t.delete(e),r.async&&(a=n(a)).push(l),o=t.memoized.apply(u,a),r.promise&&i(o)&&("function"==typeof o.done?o.done(l,l):o.then(l,l)))})))}))),t.on("clear"+h,(function(){a(d,(function(e){clearTimeout(e)})),d={},y&&(a(y,(function(e){"nextTick"!==e&&clearTimeout(e)})),y={})})))}},function(e,t,r){"use strict";var n=r(4),a=r(110);e.exports=function(e){if((e=n(e))>a)throw new TypeError(e+" exceeds maximum possible timeout");return e}},function(e,t,r){"use strict";e.exports=2147483647},function(e,t,r){"use strict";var n=r(4),a=r(112),o=r(5);o.max=function(e,t,r){var i,u,s;(e=n(e))&&(u=a(e),i=r.async&&o.async||r.promise&&o.promise?"async":"",t.on("set"+i,s=function(e){void 0!==(e=u.hit(e))&&t.delete(e)}),t.on("get"+i,s),t.on("delete"+i,u.delete),t.on("clear"+i,u.clear))}},function(e,t,r){"use strict";var n=r(4),a=Object.create,o=Object.prototype.hasOwnProperty;e.exports=function(e){var t,r=0,i=1,u=a(null),s=a(null),l=0;return e=n(e),{hit:function(n){var a=s[n],c=++l;if(u[c]=n,s[n]=c,!a){if(++r<=e)return;return n=u[i],t(n),n}if(delete u[a],i===a)for(;!o.call(u,++i);)continue},delete:t=function(e){var t=s[e];if(t&&(delete u[t],delete s[e],--r,i===t)){if(!r)return l=0,void(i=1);for(;!o.call(u,++i);)continue}},clear:function(){r=0,i=1,u=a(null),s=a(null),l=0}}}},function(e,t,r){"use strict";var n=r(6),a=r(5),o=Object.create,i=Object.defineProperties;a.refCounter=function(e,t,r){var u,s;u=o(null),s=r.async&&a.async||r.promise&&a.promise?"async":"",t.on("set"+s,(function(e,t){u[e]=t||1})),t.on("get"+s,(function(e){++u[e]})),t.on("delete"+s,(function(e){delete u[e]})),t.on("clear"+s,(function(){u={}})),i(t.memoized,{deleteRef:n((function(){var e=t.get(arguments);return null===e?null:u[e]?!--u[e]&&(t.delete(e),!0):null})),getRefCount:n((function(){var e=t.get(arguments);return null===e?0:u[e]?u[e]:0}))})}},function(e,t,r){var n=r(115),a=r(116);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.i,a,""]]);var o={insert:"head",singleton:!1},i=(n(a,o),a.locals?a.locals:{});e.exports=i},function(e,t,r){"use strict";var n,a=function(){return void 0===n&&(n=Boolean(window&&document&&document.all&&!window.atob)),n},o=function(){var e={};return function(t){if(void 0===e[t]){var r=document.querySelector(t);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(e){r=null}e[t]=r}return e[t]}}(),i=[];function u(e){for(var t=-1,r=0;r<i.length;r++)if(i[r].identifier===e){t=r;break}return t}function s(e,t){for(var r={},n=[],a=0;a<e.length;a++){var o=e[a],s=t.base?o[0]+t.base:o[0],l=r[s]||0,c="".concat(s," ").concat(l);r[s]=l+1;var f=u(c),p={css:o[1],media:o[2],sourceMap:o[3]};-1!==f?(i[f].references++,i[f].updater(p)):i.push({identifier:c,updater:y(p,t),references:1}),n.push(c)}return n}function l(e){var t=document.createElement("style"),n=e.attributes||{};if(void 0===n.nonce){var a=r.nc;a&&(n.nonce=a)}if(Object.keys(n).forEach((function(e){t.setAttribute(e,n[e])})),"function"==typeof e.insert)e.insert(t);else{var i=o(e.insert||"head");if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(t)}return t}var c,f=(c=[],function(e,t){return c[e]=t,c.filter(Boolean).join("\n")});function p(e,t,r,n){var a=r?"":n.media?"@media ".concat(n.media," {").concat(n.css,"}"):n.css;if(e.styleSheet)e.styleSheet.cssText=f(t,a);else{var o=document.createTextNode(a),i=e.childNodes;i[t]&&e.removeChild(i[t]),i.length?e.insertBefore(o,i[t]):e.appendChild(o)}}function d(e,t,r){var n=r.css,a=r.media,o=r.sourceMap;if(a?e.setAttribute("media",a):e.removeAttribute("media"),o&&btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}var h=null,g=0;function y(e,t){var r,n,a;if(t.singleton){var o=g++;r=h||(h=l(t)),n=p.bind(null,r,o,!1),a=p.bind(null,r,o,!0)}else r=l(t),n=d.bind(null,r,t),a=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(r)};return n(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;n(e=t)}else a()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=a());var r=s(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var n=0;n<r.length;n++){var a=u(r[n]);i[a].references--}for(var o=s(e,t),l=0;l<r.length;l++){var c=u(r[l]);0===i[c].references&&(i[c].updater(),i.splice(c,1))}r=o}}}},function(e,t,r){(t=r(117)(!0)).push([e.i,'.min-width-10{min-width:10rem}.min-width-12{min-width:12rem}.min-width-20{min-width:20rem}.gf-form-select-wrapper select.gf-form-input{height:2.64rem}.gf-form-select-wrapper--caret-indent.gf-form-select-wrapper::after{right:.775rem}.ml-1{margin-left:2px !important}.join-r .gf-form-label{margin-right:0}.join-l .gf-form-label{border-left-width:0;border-radius:0}.mash-r .gf-form-label{padding-right:0}.mash-l .gf-form-label{padding-left:0}.irondb-tag-op .gf-form-label,.irondb-tag-end .gf-form-label{color:#eb7b18}.irondb-tag-cat .gf-form-label{color:#598}.irondb-tag-val .gf-form-label{color:#5ca}.irondb-tag-pair .gf-form-label,.irondb-tag-sep .gf-form-label{color:#888}.irondb-tag-op .gf-form-label:focus,.irondb-tag-op .gf-form-label:hover,.irondb-tag-cat .gf-form-label:focus,.irondb-tag-cat .gf-form-label:hover,.irondb-tag-val .gf-form-label:focus,.irondb-tag-val .gf-form-label:hover,.gf-form-label:focus .template-variable,.gf-form-label:hover .template-variable{color:#fff}.irondb-tag-op .typeahead.dropdown-menu [data-value=REMOVE] a{color:#bb002c !important}.irondb-tag-val .typeahead.dropdown-menu [data-value^="$"] a{color:#33b5e5 !important}.irondb-tag-op .typeahead.dropdown-menu [data-value="or("] a,.irondb-tag-op .typeahead.dropdown-menu [data-value="not("] a,.irondb-tag-op .typeahead.dropdown-menu [data-value="and("] a,.irondb-tag-plus .typeahead.dropdown-menu [data-value="or("] a,.irondb-tag-plus .typeahead.dropdown-menu [data-value="not("] a,.irondb-tag-plus .typeahead.dropdown-menu [data-value="and("] a{color:#eb7b18 !important}.irondb-tag-op .typeahead.dropdown-menu [data-value=REMOVE] a:focus,.irondb-tag-op .typeahead.dropdown-menu [data-value=REMOVE] a:hover,.irondb-tag-val .typeahead.dropdown-menu [data-value^="$"] a:focus,.irondb-tag-val .typeahead.dropdown-menu [data-value^="$"] a:hover,.irondb-tag-op .typeahead.dropdown-menu [data-value="or("] a:focus,.irondb-tag-op .typeahead.dropdown-menu [data-value="or("] a:hover,.irondb-tag-op .typeahead.dropdown-menu [data-value="not("] a:focus,.irondb-tag-op .typeahead.dropdown-menu [data-value="not("] a:hover,.irondb-tag-op .typeahead.dropdown-menu [data-value="and("] a:focus,.irondb-tag-op .typeahead.dropdown-menu [data-value="and("] a:hover,.irondb-tag-plus .typeahead.dropdown-menu [data-value="or("] a:focus,.irondb-tag-plus .typeahead.dropdown-menu [data-value="or("] a:hover,.irondb-tag-plus .typeahead.dropdown-menu [data-value="not("] a:focus,.irondb-tag-plus .typeahead.dropdown-menu [data-value="not("] a:hover,.irondb-tag-plus .typeahead.dropdown-menu [data-value="and("] a:focus,.irondb-tag-plus .typeahead.dropdown-menu [data-value="and("] a:hover{color:#fff !important}',"",{version:3,sources:["query_editor.css"],names:[],mappings:"AAAA,cAAc,eAAe,CAAC,cAAc,eAAe,CAAC,cAAc,eAAe,CAAC,6CAA6C,cAAc,CAAC,oEAAoE,aAAa,CAAC,MAAM,0BAA0B,CAAC,uBAAuB,cAAc,CAAC,uBAAuB,mBAAmB,CAAC,eAAe,CAAC,uBAAuB,eAAe,CAAC,uBAAuB,cAAc,CAAC,6DAA6D,aAAa,CAAC,+BAA+B,UAAU,CAAC,+BAA+B,UAAU,CAAC,+DAA+D,UAAU,CAAC,4SAA4S,UAAU,CAAC,8DAA8D,wBAAwB,CAAC,6DAA6D,wBAAwB,CAAC,wXAAwX,wBAAwB,CAAC,skCAAskC,qBAAqB",file:"query_editor.css",sourcesContent:['.min-width-10{min-width:10rem}.min-width-12{min-width:12rem}.min-width-20{min-width:20rem}.gf-form-select-wrapper select.gf-form-input{height:2.64rem}.gf-form-select-wrapper--caret-indent.gf-form-select-wrapper::after{right:.775rem}.ml-1{margin-left:2px !important}.join-r .gf-form-label{margin-right:0}.join-l .gf-form-label{border-left-width:0;border-radius:0}.mash-r .gf-form-label{padding-right:0}.mash-l .gf-form-label{padding-left:0}.irondb-tag-op .gf-form-label,.irondb-tag-end .gf-form-label{color:#eb7b18}.irondb-tag-cat .gf-form-label{color:#598}.irondb-tag-val .gf-form-label{color:#5ca}.irondb-tag-pair .gf-form-label,.irondb-tag-sep .gf-form-label{color:#888}.irondb-tag-op .gf-form-label:focus,.irondb-tag-op .gf-form-label:hover,.irondb-tag-cat .gf-form-label:focus,.irondb-tag-cat .gf-form-label:hover,.irondb-tag-val .gf-form-label:focus,.irondb-tag-val .gf-form-label:hover,.gf-form-label:focus .template-variable,.gf-form-label:hover .template-variable{color:#fff}.irondb-tag-op .typeahead.dropdown-menu [data-value=REMOVE] a{color:#bb002c !important}.irondb-tag-val .typeahead.dropdown-menu [data-value^="$"] a{color:#33b5e5 !important}.irondb-tag-op .typeahead.dropdown-menu [data-value="or("] a,.irondb-tag-op .typeahead.dropdown-menu [data-value="not("] a,.irondb-tag-op .typeahead.dropdown-menu [data-value="and("] a,.irondb-tag-plus .typeahead.dropdown-menu [data-value="or("] a,.irondb-tag-plus .typeahead.dropdown-menu [data-value="not("] a,.irondb-tag-plus .typeahead.dropdown-menu [data-value="and("] a{color:#eb7b18 !important}.irondb-tag-op .typeahead.dropdown-menu [data-value=REMOVE] a:focus,.irondb-tag-op .typeahead.dropdown-menu [data-value=REMOVE] a:hover,.irondb-tag-val .typeahead.dropdown-menu [data-value^="$"] a:focus,.irondb-tag-val .typeahead.dropdown-menu [data-value^="$"] a:hover,.irondb-tag-op .typeahead.dropdown-menu [data-value="or("] a:focus,.irondb-tag-op .typeahead.dropdown-menu [data-value="or("] a:hover,.irondb-tag-op .typeahead.dropdown-menu [data-value="not("] a:focus,.irondb-tag-op .typeahead.dropdown-menu [data-value="not("] a:hover,.irondb-tag-op .typeahead.dropdown-menu [data-value="and("] a:focus,.irondb-tag-op .typeahead.dropdown-menu [data-value="and("] a:hover,.irondb-tag-plus .typeahead.dropdown-menu [data-value="or("] a:focus,.irondb-tag-plus .typeahead.dropdown-menu [data-value="or("] a:hover,.irondb-tag-plus .typeahead.dropdown-menu [data-value="not("] a:focus,.irondb-tag-plus .typeahead.dropdown-menu [data-value="not("] a:hover,.irondb-tag-plus .typeahead.dropdown-menu [data-value="and("] a:focus,.irondb-tag-plus .typeahead.dropdown-menu [data-value="and("] a:hover{color:#fff !important}']}]),e.exports=t},function(e,t,r){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var r=function(e,t){var r=e[1]||"",n=e[3];if(!n)return r;if(t&&"function"==typeof btoa){var a=(i=n,u=btoa(unescape(encodeURIComponent(JSON.stringify(i)))),s="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(u),"/*# ".concat(s," */")),o=n.sources.map((function(e){return"/*# sourceURL=".concat(n.sourceRoot||"").concat(e," */")}));return[r].concat(o).concat([a]).join("\n")}var i,u,s;return[r].join("\n")}(t,e);return t[2]?"@media ".concat(t[2]," {").concat(r,"}"):r})).join("")},t.i=function(e,r,n){"string"==typeof e&&(e=[[null,e,""]]);var a={};if(n)for(var o=0;o<this.length;o++){var i=this[o][0];null!=i&&(a[i]=!0)}for(var u=0;u<e.length;u++){var s=[].concat(e[u]);n&&a[s[0]]||(r&&(s[2]?s[2]="".concat(r," and ").concat(s[2]):s[2]=r),t.push(s))}},t}},function(e,t,r){"use strict";r.r(t);var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)};function a(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}function o(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function i(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,a,o=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=o.next()).done;)i.push(n.value)}catch(e){a={error:e}}finally{try{n&&!n.done&&(r=o.return)&&r.call(o)}finally{if(a)throw a.error}}return i}function u(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(i(arguments[t]));return e}var s=r(0),l=r.n(s);function c(e){return e=" ["+e+"] ",function(e){}}var f,p=r(33),d=r.n(p),h=r(34),g=r.n(h),y=c("IrondbQuery");function v(e,t){var r,n;void 0===t&&(t=!0);var a={};try{for(var i=o(e.split(/,/g)),u=i.next();!u.done;u=i.next()){var s=u.value.split(/:/g),c=s.shift(),f=s.join(":");t&&(c=O(c),f=O(f));var p=a[c];l.a.isUndefined(p)&&(a[c]=p=[]),p.push(f)}}catch(e){r={error:e}}finally{try{u&&!u.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return a}function m(e,t){for(var r in t){var n=e[r];l.a.isUndefined(n)&&(e[r]=n=[]),n.push.apply(n,t[r])}}function b(e){var t="",r=e.indexOf("ST[");return-1!==r&&(t=e.substring(r+3,e.length-1),e=e.substring(0,r-1)),[e,t]}function _(e){return b(e)[0]}!function(e){e[e.MetricName=0]="MetricName",e[e.TagCat=1]="TagCat",e[e.TagVal=2]="TagVal",e[e.TagPair=3]="TagPair",e[e.TagSep=4]="TagSep",e[e.TagEnd=5]="TagEnd",e[e.TagOp=6]="TagOp",e[e.TagPlus=7]="TagPlus"}(f||(f={}));var A={};function S(e,t){for(var r,n,a=0,u=new Map,s=0;s<e.length;s++){var l=i(b(e[s].metric_name),2),c=(l[0],v(l[1]));try{for(var f=(r=void 0,o(e[s].check_tags)),p=f.next();!p.done;p=f.next()){var d=p.value.split(/:/g),h=d.shift();if(!h.startsWith("__")&&""!==h){var g=d.join(":");h=O(h),g=O(g),void 0===c[h]&&(c[h]=[]),c[h].push(g)}}}catch(e){r={error:e}}finally{try{p&&!p.done&&(n=f.return)&&n.call(f)}finally{if(r)throw r.error}}var y=""!==t&&void 0!==c[t]?c[t][0]:A;void 0===u.get(y)&&(a+=1),u.set(y,!0)}return a>1}var T=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,0,0,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],x=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];function w(e){return 1===T[e]}function C(e){return 1===x[e]}function E(e,t){for(var r=0,n=0;n<e.length;n++){t(e.charCodeAt(n))&&(r+=1)}return r===e.length}function R(e,t,r){void 0===r&&(r=!0),e===f.MetricName&&(e=f.TagVal);var n=!1;if((e!==f.TagCat||function(e){return E(e,w)}(t))&&(e!==f.TagVal||function(e){return E(e,C)}(t)||1===t.length&&"*"===t.charAt(0))||(n=!0),n){var a='"';r&&(a="!"),t=["b",a,btoa(t),a].join("")}return t}function O(e){return(e.startsWith('b"')&&e.endsWith('"')||e.startsWith("b!")&&e.endsWith("!"))&&(e=atob(e.slice(2,e.length-1))),e}function N(e){var t=i(b(e),2),r=(t[0],v(t[1]).statsd_type);return!(void 0===r||!r.includes("count"))}var k=function(){function e(e,t,r,n){this.datasource=e,this.target=t,this.parseTarget()}return e.$inject=["datasource","target","templateSrv","scopedVars"],e.prototype.parseTarget=function(){var e,t,r=this;if(this.segments=[],this.error=null,!this.target.rawQuery){y((function(){return"parseTarget() target = "+JSON.stringify(r.target)}));var n=this.target.query,a=(n=n.slice(11,-1)||"*").split(",");n=a.shift(),this.segments.push({type:f.MetricName,value:O(n)});var i=!0;try{for(var u=o(a),s=u.next();!s.done;s=u.next()){var c=s.value;i?i=!1:this.segments.push({type:f.TagSep});var p=(c=c.split(":")).shift(),d=c.join(":"),h=!1,g=4;p.startsWith("and(")||p.startsWith("not(")?h=!0:p.startsWith("or(")&&(h=!0,g=3),h&&(this.segments.push({type:f.TagOp,value:p.slice(0,g)}),p=p.slice(g)),this.segments.push({type:f.TagCat,value:O(p)}),this.segments.push({type:f.TagPair});for(var v=0;d.endsWith(")");)d=d.slice(0,-1),v++;this.segments.push({type:f.TagVal,value:O(d)});for(var m=0;m<v;m++)this.segments.push({type:f.TagPlus}),this.segments.push({type:f.TagEnd})}}catch(t){e={error:t}}finally{try{s&&!s.done&&(t=u.return)&&t.call(u)}finally{if(e)throw e.error}}0===a.length&&this.segments.push({type:f.TagPlus}),y((function(){return"parseTarget() SegmentType = "+JSON.stringify(l.a.map(r.segments,(function(e){return f[e.type]})))}))}},e.prototype.updateSegmentValue=function(e,t){var r=this;y((function(){return"updateSegmentValue() "+t+" segment = "+JSON.stringify(e)})),y((function(){return"updateSegmentValue() length = "+r.segments.length})),void 0!==this.segments[t]&&(this.segments[t].value=e.value)},e.prototype.addSelectMetricSegment=function(){this.segments.push({value:"select metric"})},e}(),I=r(1),L=r(19),M=c("IrondbDatasource"),H={ms:1,s:1e3,m:6e4,h:36e5,d:864e5};function j(e){if(!/^[0-9]+(ms|s|m|h|d)?$/g.test(e.toLocaleLowerCase()))throw new Error("Invalid time duration: "+e);var t="s";for(var r in H)e.endsWith(r)&&(t=r,e=e.slice(0,e.length-r.length));return parseInt(e,10)*H[t]}var P=[[1,.5,.25,.2,.1,.05,.025,.02,.01,.005,.002,.001],[60,30,20,15,10,5,3,2,1],[60,30,20,15,10,5,3,2,1].map((function(e){return 60*e})),[24,12,8,6,4,3,2,1].map((function(e){return 60*e*60}))];function q(e,t){if(-1!==t&&(t=1),e<.001)return.001;for(var r=0;r<P.length;r++){var n=P[r];if(e<n[0])for(var a=1;a<n.length;a++){if(e>n[a])return-1===t?n[a]:n[a-1];if(e===n[a])return n[a]}}return e%86400==0?e:1===t?86400*(1+Math.floor(e/86400)):86400*Math.floor(e/86400)}var $={count:"count",average:"average",stddev:"stddev",derive:"rate",derive_stddev:"derive_stddev",counter:"rate",counter_stddev:"counter_stddev"},D=function(e){function t(r,n,a,o){var i=e.call(this,r)||this;return i.$q=n,i.backendSrv=a,i.templateSrv=o,i.type="irondb",i.name=r.name,i.id=r.id,i.accountId=r.jsonData.accountId,i.irondbType=r.jsonData.irondbType,i.resultsLimit=r.jsonData.resultsLimit,i.apiToken=r.jsonData.apiToken,i.useCaching=r.jsonData.useCaching,i.activityTracking=r.jsonData.activityTracking,i.url=r.url,i.supportAnnotations=!1,i.supportMetrics=!0,i.appName="Grafana",i.datasourceRequest=t.setupCache(i.useCaching,a),i}return t.$inject=["instanceSettings","$q","backendSrv","templateSrv"],a(t,e),t.stripActivityWindow=function(e){return l.a.split(e,"&").map((function(e){return e.split("=")})).filter((function(e){return!e[0].startsWith("activity_")})).map((function(e){return e.join("=")})).join("&")},t.requestCacheKey=function(e){var r=e.method;if("GET"===r)return t.stripActivityWindow(e.url);if("POST"===r)return JSON.stringify(e.data);throw new Error("Unsupported HTTP method type: "+(r||"?"))},t.setupCache=function(e,r){var n=function(e){return r.datasourceRequest(e)};if(!e)return M((function(){return"setupCache() caching disabled"})),n;var a={max:t.DEFAULT_CACHE_ENTRIES,maxAge:t.DEFAULT_CACHE_TIME_MS,promise:!0,normalizer:function(e){var r=e[0],n=t.requestCacheKey(r);return M((function(){return"normalizer() cache lookup key = "+n})),n}};return M((function(){return"setupCache() caching enabled"})),g()((function(e){return M((function(){return"doRequest() cache miss key = "+t.requestCacheKey(e)})),n(e)}),a)},t.prototype.query=function(e){var t=this;(M((function(){return"query() options = "+JSON.stringify(e)})),l.a.isUndefined(this.queryRange)||l.a.isEqual(e.range,this.queryRange))||(M((function(){return"query() time range changed "+JSON.stringify(t.queryRange)+" -> "+JSON.stringify(e.range)})),this.useCaching&&(M((function(){return"query() clearing cache"})),this.datasourceRequest.clear()));return this.queryRange=e.range,l.a.isEmpty(e.targets[0])?this.$q.when({data:[]}):Promise.all([this.buildIrondbParams(e)]).then((function(e){return l.a.isEmpty(e[0])?t.$q.when({data:[]}):t.irondbRequest(e[0])})).then((function(e){return"ts"===e.t&&e.data.constructor===Array&&e.data.sort((function(e,t){return e.target.localeCompare(t.target)})),M((function(){return"query() queryResults = "+JSON.stringify(e)})),e})).catch((function(e){(0!==e.status||e.status>=300)&&t.throwerr(e)}))},t.prototype.annotationQuery=function(e){var t=this;(M((function(){return"annotationQuery() options = "+JSON.stringify(e.annotation)})),M((function(){return"annotationQuery() range = "+JSON.stringify(e.range)})),l.a.isUndefined(this.queryRange)||l.a.isEqual(e.range,this.queryRange))||(M((function(){return"query() time range changed "+JSON.stringify(t.queryRange)+" -> "+JSON.stringify(e.range)})),this.useCaching&&(M((function(){return"query() clearing cache"})),this.datasourceRequest.clear()));this.queryRange=e.range;var r={},n=[],a={"Content-Type":"application/json"};if(a["X-Circonus-Auth-Token"]=this.apiToken,a["X-Circonus-App-Name"]=this.appName,a.Accept="application/json","alerts"===e.annotation.annotationQueryType){(r={}).url=this.url,r.url=r.url+"/v2",r.method="GET",r.url=r.url+"/alert";var u=this.templateSrv.replace(e.annotation.alertId),s=this.templateSrv.replace(e.annotation.annotationQueryText);r.url=""!==u?r.url+"/"+u:r.url+"?search="+encodeURIComponent(s)+"&size=500",r.headers=a,r.retry=1,r.start=e.range.from.valueOf()/1e3,r.end=e.range.to.valueOf()/1e3,r.isAlert=!0,r.local_filter=e.annotation.annotationFilterText,r.local_filter_match=e.annotation.annotationFilterApply,r.annotation=e.annotation,(this.basicAuth||this.withCredentials)&&(r.withCredentials=!0),this.basicAuth&&(r.headers.Authorization=this.basicAuth),r.isCaql=!1,n.push(r)}return Promise.all(n.map((function(e){return t.datasourceRequest(e).then((function(r){if(M((function(){return"annotationQuery() query = "+JSON.stringify(e)})),M((function(){return"annotationQuery() result = "+JSON.stringify(r)})),!l.a.isUndefined(e.isAlert))return t.enrichAlertsWithRules(r,e)})).then((function(t){var r,n,a,u,s=[];try{for(var l=o(t),c=l.next();!c.done;c=l.next()){var f=c.value,p=f.alert,d=f.rule,h={};if(!(p._occurred_on<e.start||p._occurred_on>e.end)){var g=p._canonical_metric_name,y=p._metric_name;if(void 0!==g&&""!==g){var _=i(b(g),2);_[0];m(h,v(_[1]))}try{for(var A=(a=void 0,o(p._tags)),S=A.next();!S.done;S=A.next()){var T=S.value.split(/:/g);if(!(C=T.shift()).startsWith("__")&&""!==C){var x=T.join(":");C=O(C),x=O(x),void 0===h[C]&&(h[C]=[]),h[C].push(x)}}}catch(e){a={error:e}}finally{try{S&&!S.done&&(u=A.return)&&u.call(A)}finally{if(a)throw a.error}}var w=[];for(var C in h)w.push(C+":"+h[C][0]);var E={};E.metric=y,E.value=p._value;var R={evalMatches:[]};R.evalMatches.push(E);var N=null!=d&&null!==d.notes&&""!==d.notes?d.notes:"Oh no!";N=L.render(N,h);var k={time:1e3*p._occurred_on,title:"ALERTING",text:"<br />"+N+"<br />Sev: "+p._severity+"<br >"+(null!==p._metric_link&&""!==p._metric_link?'<a href="'+p._metric_link+'" target="_blank">Info</a><br />':""),tags:w,alertId:p._cid.replace("/alert/",""),newState:"alerting",source:e.annotation,data:R};if(s.push(k),N=null!=d&&null!==d.notes&&""!==d.notes?d.notes:"Yay!",N=L.render(N,h),null!==p._cleared_on){var I={};I.metric=y,I.value=p._cleared_value;var M={evalMatches:[]};M.evalMatches.push(I);var H={time:1e3*p._cleared_on,title:"OK",text:"<br />"+N+"<br />Sev: "+p._severity+"<br >"+(null!==p._metric_link&&""!==p._metric_link?'<a href="'+p._metric_link+'" target="_blank">Info</a><br />':""),tags:w,alertId:p._cid.replace("/alert/",""),newState:"ok",source:e.annotation,data:M};s.push(H)}}}}catch(e){r={error:e}}finally{try{c&&!c.done&&(n=l.return)&&n.call(l)}finally{if(r)throw r.error}}return s}))}))).then((function(e){return e}))},t.prototype.interpolateExpr=function(e,t){if(void 0===e&&(e=[]),!t.multi&&!t.includeAll)return e;if("string"==typeof e)return e;if(1===e.length)return e[0];for(var r="",n=0;n<e.length;n++)n>0&&(r+=","),r+=e[n],n+=1;return r},t.prototype.metricFindQuery=function(e,t){var r=this,n=t.variable,a=t.range,o=void 0,i=void 0;if(!l.a.isUndefined(a)){if(o=a.from.valueOf()/1e3,i=a.to.valueOf()/1e3,!l.a.isUndefined(this.queryRange)&&!l.a.isEqual(a,this.queryRange))if(M((function(){return"query() time range changed "+JSON.stringify(r.queryRange)+" -> "+JSON.stringify(a)})),this.useCaching)M((function(){return"query() clearing cache"})),this.datasourceRequest.clear();this.queryRange=a}if(M((function(){return"Options: "+JSON.stringify(t)})),""!==e&&void 0!==n&&(""!==n.regex||n.useTags)){M((function(){return"metricFindQuery() incoming query = "+e})),M((function(){return"metricFindQuery() incoming regex = "+n.regex}));var u=this.templateSrv.replace(e,null,this.interpolateExpr),s=n.tagValuesQuery;return M((function(){return"metricFindQuery() interpolatedQuery = "+u})),M((function(){return"metricFindQuery() tagCat = "+s})),u.includes("and(")||u.includes("or(")||u.includes("not(")||(u="and(__name:"+u+")"),""!==s?this.metricTagValsQuery(u,s,o,i).then((function(e){return l.a.map(e.data,(function(e){return{value:e}}))})):this.metricTagsQuery(u,!1,o,i).then((function(e){return l.a.map(e.data,(function(e){return{value:e.metric_name}}))}))}return Promise.resolve([])},t.prototype.getAccountId=function(){return"standalone"===this.irondbType?"/"+this.accountId:""},t.prototype.metricTagsQuery=function(e,t,r,n){if(void 0===t&&(t=!1),void 0===r&&(r=null),void 0===n&&(n=null),""===e||void 0===e||!t&&"and(__name:*)"===e)return Promise.resolve({data:[]});var a="/find"+this.getAccountId()+"/tags?query=";return a+=e,this.activityTracking&&r&&n&&(M((function(){return"metricTagsQuery() activityWindow = ["+r+","+n+"]"})),a+="&activity_start_secs="+l.a.toInteger(r),a+="&activity_end_secs="+l.a.toInteger(n)),M((function(){return"metricTagsQuery() queryUrl = "+a})),this.irondbSimpleRequest("GET",a,!1,!0)},t.prototype.metricTagValsQuery=function(e,t,r,n){void 0===r&&(r=null),void 0===n&&(n=null);var a="/find"+this.getAccountId()+"/tag_vals?category="+t+"&query=";return a+=e,this.activityTracking&&r&&n&&(M((function(){return"metricTagsQuery() activityWindow = ["+r+","+n+"]"})),a+="&activity_start_secs="+l.a.toInteger(r),a+="&activity_end_secs="+l.a.toInteger(n)),M((function(){return"metricTagValsQuery() queryUrl = "+a})),this.irondbSimpleRequest("GET",a,!1,!0,!1)},t.prototype.testDatasource=function(){return this.metricTagsQuery("and(__name:ametric)").then((function(e){var t=l.a.get(e,"results[0].error");return t?{status:"error",message:t,title:"Error"}:{status:"success",message:"Data source is working",title:"Success"}})).catch((function(e){var t=(e.data||{}).message;return void 0===t&&(t="Error "+(e.status||"")+" "+(e.statusText||"")),{status:"error",message:t,title:"Error"}}))},t.prototype.throwerr=function(e){if(M((function(){return"throwerr() err = "+e})),e.data&&e.data.error)throw new Error("Circonus IRONdb Error: "+e.data.error);if(e.data&&e.data.user_error){var t=e.data.method||"IRONdb",r="";throw e.data.user_error.query&&(r=' in"'+e.data.user_error.query+'"'),new Error(t+" error: "+e.data.user_error.message+r)}throw"Not Found"===e.statusText?new Error("Circonus IRONdb Error: "+e.statusText):e.statusText&&e.status>0?new Error("Network Error: "+e.statusText+"("+e.status+")"):new Error("Error: "+(e?e.toString():"unknown"))},t.prototype.irondbSimpleRequest=function(e,t,r,n,a){void 0===r&&(r=!1),void 0===n&&(n=!1),void 0===a&&(a=!0);var o=this.url,i={"Content-Type":"application/json"};"hosted"!==this.irondbType&&(i["X-Circonus-Account"]=this.accountId),"hosted"!==this.irondbType||r||(o+="/irondb",n||(o+="/series_multi"),i["X-Circonus-Auth-Token"]=this.apiToken,i["X-Circonus-App-Name"]=this.appName),i["X-Snowth-Advisory-Limit"]=a?this.resultsLimit:"none","standalone"!==this.irondbType||r||n||(o+="/series_multi"),r&&!n&&(o+="/extension/lua/caql_v1");var u={method:e,url:o+t,headers:i,retry:1};return M((function(){return"irondbSimpleRequest() options = "+JSON.stringify(u)})),this.datasourceRequest(u)},t.prototype.irondbRequest=function(e,t){var r=this;void 0===t&&(t=!0),M((function(){return"irondbRequest() irondbOptions = "+JSON.stringify(e)}));var n={"Content-Type":"application/json"},a={},o=[],i={data:[],t:"ts"};if("hosted"===this.irondbType?(n["X-Circonus-Auth-Token"]=this.apiToken,n["X-Circonus-App-Name"]=this.appName):n["X-Circonus-Account"]=this.accountId,n["X-Snowth-Advisory-Limit"]=t?this.resultsLimit:"none",n.Accept="application/json",e.std.names.length)for(var u=e.std.names[0].leaf_data.format||"ts",s=function(t){(a={}).url=c.url,"hosted"===c.irondbType&&(a.url=a.url+"/irondb"),a.url=a.url+"/fetch",a.method="POST";var r=[],i=[],s=e.std.start,l=e.std.end,f=c.getRollupSpan(e,s,l,!1,e.std.names[t].leaf_data);s-=f,l+=f;var p="heatmap"===u?"merge":"pass",d=[],h={streams:d};h.period=f,h.start=s,h.count=Math.round((l-s)/f),h.reduce=[{label:"",method:p}];var g=e.std.names[t].leaf_data.metrictype;r.push(e.std.names[t].leaf_data.metriclabel),i.push(e.std.names[t].leaf_data.check_tags);var y={},v=e.std.names[t].leaf_data.egress_function;if("histogram"===g)if("heatmap"===u)v="none";else{v=$[v];var m="default";N(e.std.names[t].leaf_name)&&(m="statsd_counter"),e.std.names[t].leaf_data.target.hist_transform=m}y.transform=v,y.name=e.std.names[t].leaf_name,y.uuid=e.std.names[t].leaf_data.uuid,y.kind=g,d.push(y),M((function(){return"irondbRequest() data = "+JSON.stringify(h)})),a.data=h,a.name="fetch",a.headers=n,(c.basicAuth||c.withCredentials)&&(a.withCredentials=!0),c.basicAuth&&(a.headers.Authorization=c.basicAuth),a.metricLabels=r,a.check_tags=i,a.paneltype=u,a.format=e.std.names[t].leaf_data.format,a.isCaql=!1,a.retry=1,o.push(a)},c=this,f=0;f<e.std.names.length;f++)s(f);if(e.caql.names.length)for(f=0;f<e.caql.names.length;f++){(a={}).url=this.url,"hosted"===this.irondbType&&(a.url=a.url+"/irondb"),a.method="GET",a.url=a.url+"/extension/lua","hosted"===this.irondbType&&(a.url=a.url+"/public");var p=e.caql.start,d=e.caql.end,h=this.getRollupSpan(e,p,d,!0,e.caql.names[f].leaf_data);p-=h,d+=h;var g=this.templateSrv.replace(e.caql.names[f].leaf_name,e.scopedVars);a.url=a.url+"/caql_v1?format=DF4&start="+p.toFixed(3),a.url=a.url+"&end="+d.toFixed(3),a.url=a.url+"&period="+h,a.url=a.url+"&q="+encodeURIComponent(g),a.name=e.caql.names[f],a.headers=n,a.start=p,a.end=d,a.retry=1,(this.basicAuth||this.withCredentials)&&(a.withCredentials=!0),this.basicAuth&&(a.headers.Authorization=this.basicAuth),a.isCaql=!0,a.format=e.caql.names[f].leaf_data.format,o.push(a)}if(e.alert.names.length)for(f=0;f<e.alert.names.length;f++){(a={}).url=this.url,"hosted"===this.irondbType&&(a.url=a.url+"/v2"),a.method="GET",a.url=a.url+"/alert";var y=this.templateSrv.replace(e.alert.names[f],e.scopedVars);y.startsWith("alert_id:")?a.url=a.url+"/"+y.split(":")[1]:a.url=a.url+"?search="+encodeURIComponent(y)+"&size=1000",a.headers=n,a.retry=1,a.start=e.alert.start,a.end=e.alert.end,a.isAlert=!0,a.counts_only=e.alert.counts_only,a.label=e.alert.labels[f],a.local_filter=e.alert.local_filters[f],a.local_filter_match=e.alert.local_filter_matches[f],a.query_type=e.alert.query_type,a.target=e.alert.target,(this.basicAuth||this.withCredentials)&&(a.withCredentials=!0),this.basicAuth&&(a.headers.Authorization=this.basicAuth),a.isCaql=!1,o.push(a)}return M((function(){return"irondbRequest() queries = "+JSON.stringify(o)})),Promise.all(o.map((function(e){return r.datasourceRequest(e).then((function(t){return M((function(){return"irondbRequest() query = "+JSON.stringify(e)})),M((function(){return"irondbRequest() result = "+JSON.stringify(t)})),l.a.isUndefined(e.isAlert)?r.convertIrondbDf4DataToGrafana(t,e):!1===e.counts_only?r.enrichAlertsWithRules(t,e).then((function(e){return r.convertAlertDataToGrafana(e)})):r.countAlerts(t,e)})).then((function(e){if(e.data.constructor===Array)for(var t=0;t<e.data.length;t++)"target"in e&&"refId"in e.target&&(e.data[t].target=e.target.refId),i.data.push(e.data[t]);return e.data.constructor===Object&&("target"in e&&"refId"in e.target&&(e.data.target=e.target.refId),i.data.push(e.data)),i.t=e.t,i}))}))).then((function(e){return i})).catch((function(e){(0!==e.status||e.status>=300)&&r.throwerr(e)}))},t.prototype.filterMatches=function(e,t){var r,n,a,u,s,l;if("alert_id"===e.key)return!!t._cid.endsWith(e.value);if("acknowledged"===e.key)return"true"===e.value?null!==t._acknowledgement:"false"!==e.value||null===t._acknowledgement;if("severities"===e.key)return-1!==e.value.indexOf(t._severity);if("tag"===e.key){var c=[],f=t._canonical_metric_name;if(void 0!==f&&""!==f){var p=i(b(f),2),h=(p[0],p[1].split(","));try{for(var g=o(h),y=g.next();!y.done;y=g.next()){if(!(S=(A=(w=y.value).split(/:/g)).shift()).startsWith("__")&&""!==S){var v=A.join(":");S=O(S),v=O(v),c.push({cat:S,val:v})}}}catch(e){r={error:e}}finally{try{y&&!y.done&&(n=g.return)&&n.call(g)}finally{if(r)throw r.error}}}try{for(var m=o(t._tags),_=m.next();!_.done;_=m.next()){var A,S;if(!(S=(A=(w=_.value).split(/:/g)).shift()).startsWith("__")&&""!==S){v=A.join(":");S=O(S),v=O(v),c.push({cat:S,val:v})}}}catch(e){a={error:e}}finally{try{_&&!_.done&&(u=m.return)&&u.call(m)}finally{if(a)throw a.error}}try{for(var T=o(c),x=T.next();!x.done;x=T.next()){var w=x.value,C=e.value.split(":");if(w.cat===C[0]&&d.a.isMatch(w.val,C[1]))return!0}}catch(e){s={error:e}}finally{try{x&&!x.done&&(l=T.return)&&l.call(T)}finally{if(s)throw s.error}}return!1}},t.prototype.alertFiltered=function(e,t,r){var n,a,i,u;if(0===e.length)return!1;if("all"===t){try{for(var s=o(e),l=s.next();!l.done;l=s.next()){var c=l.value;if(!this.filterMatches(c,r))return!0}}catch(e){n={error:e}}finally{try{l&&!l.done&&(a=s.return)&&a.call(s)}finally{if(n)throw n.error}}return!1}try{for(var f=o(e),p=f.next();!p.done;p=f.next()){c=p.value;if(this.filterMatches(c,r))return!1}}catch(e){i={error:e}}finally{try{p&&!p.done&&(u=f.return)&&u.call(f)}finally{if(i)throw i.error}}return!0},t.prototype.countAlerts=function(e,t){var r,n,a,u,s=e.data,l=[];s.constructor===Array?l=s:l.push(s);var c=[],f=t.local_filter_match;if(void 0!==t.local_filter&&""!==t.local_filter){var p=t.local_filter.split(",");try{for(var d=o(p),h=d.next();!h.done;h=d.next()){var g=h.value.trim();if(-1!==(_=g.indexOf(":"))){var y={};y.key=g.slice(0,_),y.value=g.slice(_+1),c.push(y)}}}catch(e){r={error:e}}finally{try{h&&!h.done&&(n=d.return)&&n.call(d)}finally{if(r)throw r.error}}}var v={};if("range"===t.query_type){var m=t.start;m-=m%60;var b=t.end;b-=b%60;for(var _=m;_<b;_+=60)v[_.toString()]=0}var A=0;for(_=0;_<l.length;_++)if(!this.alertFiltered(c,f,l[_])){var S=l[_]._occurred_on;"range"===t.query_type?(S-=S%60).toString()in v&&(v[S.toString()]=v[S.toString()]+1):A+=1}var T="Value";t.label&&(T=t.label);var x=F(),w=U(T),C=[];if("range"===t.query_type){try{for(var E=o(Object.entries(v)),R=E.next();!R.done;R=E.next()){var O=i(R.value,2),N=(S=O[0],O[1]);x.values.add(1e3*Number(S)),w.values.add(N)}}catch(e){a={error:e}}finally{try{R&&!R.done&&(u=E.return)&&u.call(E)}finally{if(a)throw a.error}}C.push({length:x.values.length,fields:[x,w]})}else w.values.add(A),C.push({length:1,fields:[w]});return{t:"ts",data:C,target:t.target,state:I.LoadingState.Done}},t.prototype.enrichAlertsWithRules=function(e,t){var r,n,a=this,i=e.data,u=[];i.constructor===Array?u=i:u.push(i);var s=[],l={"Content-Type":"application/json"};"hosted"!==this.irondbType&&this.throwerr("Alert queries only supported on hosted irondb requests"),l["X-Circonus-Auth-Token"]=this.apiToken,l["X-Circonus-App-Name"]=this.appName,l.Accept="application/json";var c=[],f=t.local_filter_match;if(void 0!==t.local_filter&&""!==t.local_filter){var p=t.local_filter.split(",");try{for(var d=o(p),h=d.next();!h.done;h=d.next()){var g=h.value.trim();if(-1!==(v=g.indexOf(":"))){var y={};y.key=g.slice(0,v),y.value=g.slice(v+1),c.push(y)}}}catch(e){r={error:e}}finally{try{h&&!h.done&&(n=d.return)&&n.call(d)}finally{if(r)throw r.error}}}for(var v=0;v<u.length;v++)if(!this.alertFiltered(c,f,u[v])){var m={};m.url=this.url,"hosted"===this.irondbType&&(m.url=m.url+"/v2"),m.method="GET",m.url=m.url+u[v]._rule_set,m.headers=l,m.retry=1,m.alert_data=u[v],(this.basicAuth||this.withCredentials)&&(m.withCredentials=!0),this.basicAuth&&(m.headers.Authorization=this.basicAuth),s.push(m)}return Promise.all(s.map((function(e){return a.datasourceRequest(e).then((function(t){return M((function(){return"enrichAlertsWithRules() query = "+JSON.stringify(e)})),M((function(){return"enrichAlertsWithRules() result = "+JSON.stringify(t)})),{alert:e.alert_data,rule:t.data}})).catch((function(t){return{alert:e.alert_data,rule:null}}))}))).then((function(e){return e}))},t.checkRollupAligned=function(e){var r,n;try{for(var a=o(t.ROLLUP_ALIGN_MS),i=a.next();!i.done;i=a.next()){var u=i.value;if(e<u&&u%e!=0)throw new Error("Unaligned rollup period requested")}}catch(e){r={error:e}}finally{try{i&&!i.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}if(e>t.ROLLUP_ALIGN_MS_1DAY&&e%t.ROLLUP_ALIGN_MS_1DAY!=0)throw new Error("Unaligned rollup period requested")},t.prototype.getRollupSpan=function(e,r,n,a,o){M((function(){return"getRollupSpan() intervalMs = "+e.intervalMs+", maxDataPoints = "+e.maxDataPoints})),M((function(){return"getRollupSpan() "+(a?"CAQL":"/fetch")+" "+JSON.stringify(o)}));var i=o.rolluptype,u=o.metricrollup;if("automatic"!==i&&l.a.isEmpty(u)&&(i="automatic",M((function(){return"getRollupSpan() defaulting to automatic"}))),"exact"===i){var s=j(u),c=Math.floor(1e3*(n-r)/s);if(M((function(){return"getRollupSpan() exactMs = "+s+", exactDatapoints = "+c})),c>e.maxDataPoints*t.MAX_EXACT_DATAPOINTS_THRESHOLD)throw new Error("Too many datapoints requested");return t.checkRollupAligned(s),s/1e3}var f=t.MIN_DURATION_MS_FETCH;a&&(f=t.MIN_DURATION_MS_CAQL),"minimum"===i&&(f=j(u),M((function(){return"getRollupSpan() minimumMs = "+f})));var p=e.intervalMs;p<f&&(p=f);for(var d=q(p/1e3,-1);(n-r)/d>e.maxDatapoints*t.MAX_DATAPOINTS_THRESHOLD;)d=q(d+.001,1);return M((function(){return"getRollupSpan() intervalMs = "+p+" -> interval "+d})),d},t.prototype.filterMetricsByType=function(e,t){return l.a.filter(t,(function(e){var t=e.type.split(",");return!l.a.includes(t,"text")}))},t.prototype.buildFetchStream=function(e,t,r,n){t[r].leaf_data={egress_function:"average",uuid:t[r].uuid,paneltype:t[r].target.paneltype,target:e};var a=t[r].metric_name;"average"!==e.egressoverride&&("automatic"===e.egressoverride?N(a)&&(t[r].leaf_data.egress_function="counter"):t[r].leaf_data.egress_function=e.egressoverride);var u=e.metriclabel;return"default"===e.labeltype?u="%n | %t{*}":"name"===e.labeltype?u="%n":"cardinality"===e.labeltype&&(u="%n | %t-{*}"),u=function(e,t,r){var n,a,u=t[r],s=e.replace(/%d/g,(r+1).toString());s=(s=s.replace(/%n/g,_(u.metric_name))).replace(/%cn/g,u.metric_name);var c=i(b(u.metric_name),2),f=(c[0],v(c[1]));try{for(var p=o(u.check_tags),d=p.next();!d.done;d=p.next()){var h=d.value.split(/:/g),g=h.shift();if(!g.startsWith("__")&&""!==g){var y=h.join(":");g=O(g),y=O(y),void 0===f[g]&&(f[g]=[]),f[g].push(y)}}}catch(e){n={error:e}}finally{try{d&&!d.done&&(a=p.return)&&a.call(p)}finally{if(n)throw n.error}}return s=(s=s.replace(/%tv-?{([^}]*)}/g,(function(e){var r,n,a=e.substring(3,4),i="-"===a?S:function(){return!0},u=e.substring("-"===a?5:4,e.length-1);if("*"===u){var s=[];try{for(var c=o(l.a.keys(f)),p=c.next();!p.done;p=c.next()){var d=p.value;!d.startsWith("__")&&""!==d&&i(t,d)&&s.push(d)}}catch(e){r={error:e}}finally{try{p&&!p.done&&(n=c.return)&&n.call(c)}finally{if(r)throw r.error}}return s.sort(),l.a.map(s,(function(e){return f[e][0]})).join(",")}return void 0!==f[u]&&""!==u&&i(t,u)?f[u][0]:""}))).replace(/%t-?{([^}]*)}/g,(function(e){var r,n,a=e.substring(2,3),i="-"===a?S:function(){return!0},u=e.substring("-"===a?4:3,e.length-1);if("*"===u){var s=[];try{for(var c=o(l.a.keys(f)),p=c.next();!p.done;p=c.next()){var d=p.value;if(!d.startsWith("__")&&""!==d&&i(t,d)){var h=f[d][0];s.push(d+":"+h)}}}catch(e){r={error:e}}finally{try{p&&!p.done&&(n=c.return)&&n.call(c)}finally{if(r)throw r.error}}return s.sort(),s.join(",")}return void 0!==f[u]&&""!==u&&i(t,u)?u+":"+f[u][0]:""}))}(u,t,r),u=this.templateSrv.replace(u,n),t[r].leaf_data.metriclabel=u,t[r].leaf_data.check_tags=t[r].check_tags,"automatic"===e.rolluptype||l.a.isEmpty(e.metricrollup)||(t[r].leaf_data.rolluptype=e.rolluptype,t[r].leaf_data.metricrollup=e.metricrollup),t[r].leaf_data.metrictype=t[r].type,{leaf_name:a,leaf_data:t[r].leaf_data}},t.prototype.buildAlertFetchStream=function(e,t,r){var n,a;t[r].leaf_data={target:e};var i=t[r].metric_name,u=(t[r].uuid,void 0);try{for(var s=o(t[r].check_tags),c=s.next();!c.done;c=s.next()){var f=v(c.value);if(!l.a.isUndefined(f.__check_id)){u=f.__check_id;break}}}catch(e){n={error:e}}finally{try{c&&!c.done&&(a=s.return)&&a.call(s)}finally{if(n)throw n.error}}var p="active"===e.alert_state,d="(metric:"+i+")";return l.a.isUndefined(u)||(d=d+"(check_id:"+u+")"),p&&(d+="(active:1)"),{leaf_name:d,leaf_data:t[r].leaf_data}},t.prototype.buildFetchParamsAsync=function(e,t,r,n){var a=this,o=this.templateSrv.replace(t.query,e.scopedVars);return this.metricTagsQuery(o,!1,r,n).then((function(e){e.data=a.filterMetricsByType(t,e.data);for(var r=0;r<e.data.length;r++)e.data[r].target=t;return e.data})).then((function(r){for(var n=0;n<r.length;n++)e.std.names.push(a.buildFetchStream(t,r,n,e.scopedVars));return e}))},t.prototype.buildAlertQueryAsync=function(e,t,r,n){var a=this.templateSrv.replace(t.query,e.scopedVars);""!==t.alert_id&&(a="alert_id:"+this.templateSrv.replace(t.alert_id,e.scopedVars)),e.alert.names.push(a),e.alert.local_filters.push(this.templateSrv.replace(t.local_filter,e.scopedVars)),e.alert.local_filter_matches.push(t.local_filter_match),e.alert.counts_only="alert_counts"===t.querytype,e.alert.query_type=t.alert_count_query_type,e.alert.labels.push(this.templateSrv.replace(t.metriclabel,e.scopedVars)),e.alert.target=t},t.prototype.buildIrondbParamsAsync=function(e){var t=this,r={},n=new Date(e.range.from).getTime()/1e3,a=new Date(e.range.to).getTime()/1e3,o=Math.round((e.range.to.valueOf()-e.range.from.valueOf())/e.maxDataPoints);r.scopedVars=e.scopedVars,r.meta=e.meta,r.refId=e.refId,r.maxDataPoints=e.maxDataPoints,r.intervalMs=o,r.std={},r.std.start=n,r.std.end=a,r.std.names=[],r.caql={},r.caql.start=n,r.caql.end=a,r.caql.names=[],r.alert={},r.alert.names=[],r.alert.start=n,r.alert.end=a,r.alert.local_filters=[],r.alert.local_filter_matches=[],r.alert.labels=[];var i=l.a.reject(e.targets,(function(e){return e.hide||void 0===e.query&&void 0===e.alert_id||0===e.query.length&&0===e.alert_id.length}));if(!i.length)return{};var u=i.map((function(e){return e.isCaql||"caql"===e.querytype?(r.caql.names.push({leaf_name:e.query,leaf_data:{rolluptype:e.rolluptype,metricrollup:e.metricrollup,format:e.format}}),Promise.resolve(r)):"alerts"===e.querytype||"alert_counts"===e.querytype?t.buildAlertQueryAsync(r,e,n,a):t.buildFetchParamsAsync(r,e,n,a)}));return Promise.all(u).then((function(e){return r})).catch((function(e){M((function(){return"buildIrondbParams() err = "+JSON.stringify(e)})),0!==e.status||e.status}))},t.prototype.buildIrondbParams=function(e){var t=this;return new Promise((function(r,n){r(t.buildIrondbParamsAsync(e))}))},t.prototype.convertIrondbDf4DataToGrafana=function(e,t){var r=t.name,n=t.metricLabels||{},a=t.check_tags||[],i=e.data.data,s=e.data.meta,c=e.data.head.start,f=e.data.head.period,p=e.data.head.error,d=t.format||"ts";if(!l.a.isEmpty(p))throw new Error(p.join("\n"));if(!i||0===i.length)return{data:[]};if(M((function(){return"Format: "+d})),"table"===d){for(var h=F(),g=new Set,y=new Set,v={},m={},b=function(e){var u=1e3*(c+e*f);if(u<1e3*t.start)return"continue";for(var p=function(t){var c,f;M((function(){return"convertIrondbDf4DataToGrafana(table) ts: "+u})),h.values.add(u);var p=r+" ["+(t+1)+"]",d=s[t]?s[t].label:p;d=_(d);var b=s[t].tags,A=n[t];if(l.a.isString(A)&&(d=A),void 0!==a[t]&&(void 0===b?b=a[t]:b.push.apply(b,a[t])),M((function(){return"convertIrondbDf4DataToGrafana(table) name: "+d+", tags: "+b})),void 0!==b)try{for(var S=(c=void 0,o(b)),T=S.next();!T.done;T=S.next()){var x=T.value.split(/:/g),w=x.shift(),C=x.join(":");if(!w.startsWith("__")){if(w=O(w),C=O(C),!v[w]){var E={name:w,config:{filterable:!1},type:I.FieldType.other,values:new I.ArrayVector};v[w]=E,g.add(E)}v[w].values.add(C)}}}catch(e){c={error:e}}finally{try{T&&!T.done&&(f=S.return)&&f.call(S)}finally{if(c)throw c.error}}if(!m[d]){var R={name:d,config:{filterable:!1,displayName:d},type:I.FieldType.number,values:new I.ArrayVector};m[d]=R,y.add(R)}var N=m[d];null!==i[t][e]&&i[t][e].constructor===Number?N.values.add(i[t][e]):N.values.add(null)},d=0;d<i.length;d++)p(d)},A=0;A<i[0].length;A++)b(A);return{t:"table",data:{length:h.values.length,fields:u([h],g,y)},state:I.LoadingState.Done}}for(var S=[],T={},x=function(e){var u,p,d=r+" ["+(e+1)+"]",h=s[e]?s[e].label:d,g=null!=h.match(/\|ST\[[^\]]*\]/),y=_(h),v=s[e].tags,m=n[e];l.a.isString(m)&&(y=m),M((function(){return"convertIrondbDf4DataToGrafana() tags: "+v}));var b={};void 0!==a[e]&&(void 0===v?v=a[e]:v.push.apply(v,a[e]));var A=[];if(void 0!==v)try{for(var x=(u=void 0,o(v)),w=x.next();!w.done;w=x.next()){var C=w.value.split(/:/g),E=C.shift(),R=C.join(":");E.startsWith("__")||(E=O(E),R=O(R),b[E]=R,A.push(E+":"+R))}}catch(e){u={error:e}}finally{try{w&&!w.done&&(p=x.return)&&p.call(x)}finally{if(u)throw u.error}}var N=y=function(e){for(var t=0,r=e.length,n=e;t<r&&-1!==t;){if(-1===(t=e.indexOf('b"',t)))return n;var a=e.indexOf('"',t+2);if(-1===a)return n;var o=O(e.substring(t,a+1));n=n.replace(e.substring(t,a+1),o),t=a+1}return n}(y);A.length>0&&g&&(N=N+" { "+A.join(", ")+" }");var k=F(),L={name:I.TIME_SERIES_VALUE_FIELD_NAME,type:I.FieldType.number,config:{displayName:N},labels:b,values:new I.ArrayVector};M((function(){return"convertIrondbDf4DataToGrafana() Labels: "+JSON.stringify(b)}));for(var H=0;H<i[e].length;H++)if(null!==i[e][H]){var j=1e3*(c+H*f);if(!(j<1e3*t.start))if(i[e][H].constructor===Number)k.values.add(j),L.values.add(i[e][H]);else if(i[e][H].constructor===Object)for(var P in i[e][H]){var q=i[e][H][P];P=parseFloat(P).toString();var $=j.toString();l.a.isUndefined(T[P])&&(T[P]={target:P,title:P,tags:b,datapoints:[],_ts:{}},S.push(T[P])),l.a.isUndefined(T[P]._ts[$])?(T[P]._ts[$]=[q,j],T[P].datapoints.push(T[P]._ts[$])):T[P]._ts[$][0]+=q}}L.values.length>0&&S.push({length:k.values.length,fields:[k,L]})},w=0;w<i.length;w++)x(w);return{data:S}},t.prototype.convertAlertDataToGrafana=function(e){var t,r,n,a,s,c,f,p;if(l.a.isUndefined(e)||0===e.length)return{data:[]};for(var d=[],h=0;h<e.length;h++){var g=F(),y=F("alert_timestamp"),_=new Set,A=new Set,S={},T={_acknowledgement:B("acknowledgement"),_alert_url:B("circonus_alert_url"),_check_name:B("check_name"),_cleared_on:F("cleared_timestamp"),_metric_link:B("metric_link"),_severity:U("severity"),derive:B("derive"),metric_type:B("metric_type"),_value:Q("alert_value"),_cleared_value:Q("cleared_value"),_cid:B("alert_id")},x={_signature:B("check_uuid"),_canonical_metric_name:B("metric_name"),_metric_name:1,_tags:1},w={threshold_1:U("threshold_1"),threshold_2:U("threshold_2"),threshold_3:U("threshold_3"),threshold_4:U("threshold_4"),threshold_5:U("threshold_5")},C=e[h].alert,E=e[h].rule,R={};for(var N in C)if("_occurred_on"===N){var k=C[N];g.values.add(1e3*k),y.values.add(1e3*k);var L=k-1800,M=C._cleared_on,H=k+1800;null!=M&&(H=M+1800),H>Math.floor(Date.now()/1e3)&&(H=Math.floor(Date.now()/1e3));var j=U("alert_window_start"),P=U("alert_window_end");A.add(j),A.add(P),j.values.add(1e3*L),P.values.add(1e3*H);var q=B("state");A.add(q),null!=M?q.values.add("OK"):q.values.add("ALERTING")}else if("_cid"===N){var $=C[N];T[N].values.add($.replace("/alert/","")),A.add(T[N])}else if("_cleared_on"===N){null!==(k=C[N])?T[N].values.add(1e3*k):T[N].values.add(null),S[N]||(S[N]=T[N],A.add(T[N]))}else if(void 0!==T[N]){var D=C[N];"_cleared_value"===N&&null===C[N]&&(D=""),("_value"===N&&null===C[N]||""===C[N])&&(D=""),T[N].values.add(D),S[N]||(S[N]=T[N],A.add(T[N]))}else if(void 0!==x[N])if("_signature"===N){var G=C._signature.substring(0,C._signature.indexOf("`"));x[N].values.add(G),S[N]||(S[N]=x[N],A.add(x[N]))}else if("_canonical_metric_name"===N){var V=C[N];if(void 0!==V&&""!==V){var z=i(b(V),2),K=z[0],W=z[1];x[N].values.add(K),S[N]||(S[N]=x[N],A.add(x[N]));var X=B("canonical_metric_name");A.add(X),X.values.add(V),m(R,v(W))}}else if("_metric_name"===N&&""===C._canonical_metric_name){var J=C[N];x._canonical_metric_name.values.add(J),S[N]||(S[N]=x._canonical_metric_name,A.add(x._canonical_metric_name))}else if("_tags"===N)try{for(var Z=(t=void 0,o(C[N])),Y=Z.next();!Y.done;Y=Z.next()){var ee=(ie=Y.value).split(/:/g),te=ee.shift();if(!te.startsWith("__")&&""!==te){var re=ee.join(":");te=O(te),re=O(re),void 0===R[te]&&(R[te]=[]),R[te].push(re)}}}catch(e){t={error:e}}finally{try{Y&&!Y.done&&(r=Z.return)&&r.call(Z)}finally{if(t)throw t.error}}var ne=B("tags");A.add(ne);var ae=0,oe="";for(var ie in R)if(ae>0&&(oe+="|"),""!==ie&&!ie.startsWith("__")){ae++,oe=oe+ie+":"+R[ie][0];var ue=B(ie);ue.values.add(R[ie][0]),A.add(ue)}ne.values.add(oe);for(var se=1;se<6;se++){S[N="threshold_"+se]||(S[N]=w[N],A.add(w[N]))}var le={};if(!l.a.isUndefined(E)&&null!==E&&"numeric"===E.metric_type){var ce=E.derive;if("mixed"===ce)try{for(var fe=(n=void 0,o(E.rules)),pe=fe.next();!pe.done;pe=fe.next()){if(null!=(ce=(Ce=pe.value).windowing_function))break}}catch(e){n={error:e}}finally{try{pe&&!pe.done&&(a=fe.return)&&a.call(fe)}finally{if(n)throw n.error}}var de=B("function");A.add(de),de.values.add(ce);try{for(var he=(s=void 0,o(E.rules)),ge=he.next();!ge.done;ge=he.next()){var ye=(Ce=ge.value).severity;if(0!==ye)w[N="threshold_"+ye].values.add(Ce.value),le[ye]=1}}catch(e){s={error:e}}finally{try{ge&&!ge.done&&(c=he.return)&&c.call(he)}finally{if(s)throw s.error}}}for(var ve=1;ve<6;ve++){if(void 0===le[ve])w[N="threshold_"+ve].values.add(-1)}var me=B("rule_text"),be=B("notes");if(A.add(me),A.add(be),l.a.isUndefined(E)||null===E)me.values.add(""),be.values.add("");else{if(null!==E.notes&&E.notes.length>0)be.values.add(E.notes);else{var _e=C.metric_notes;if(void 0!==_e&&_e.length>0)try{var Ae=JSON.parse(_e);be.values.add(Ae.notes)}catch(e){be.values.add("")}}var Se="",Te=0;try{for(var xe=(f=void 0,o(E.rules)),we=xe.next();!we.done;we=xe.next()){var Ce,Ee=(Ce=we.value).windowing_function,Re="";null===Ee?Ee="value":Re="(over "+Ce.windowing_duration+" seconds) ";var Oe="if the "+Ee+" "+Re;"on absence"===Ce.criteria?Oe+="is absent for "+Ce.value+" seconds, ":"max value"===Ce.criteria?Oe+="is present and >= "+Ce.value+", ":"min value"===Ce.criteria?Oe+="is present and < "+Ce.value+", ":"matches"===Ce.criteria?Oe+="is present and matches '"+Ce.value+"', ":"does not match"===Ce.criteria&&(Oe+="is present and does not match '"+Ce.value+"', "),Te>0&&(Oe+="and prior rules aren't triggered, "),0===Ce.severity?Oe+="clear the alert.":Oe+="trigger a sev "+Ce.severity+" alert and wait "+Ce.wait+" minutes before notifying.",Te>0&&(Se+="|"),Se+=Oe,Te++}}catch(e){f={error:e}}finally{try{we&&!we.done&&(p=xe.return)&&p.call(xe)}finally{if(f)throw f.error}}me.values.add(Se)}d.push({length:g.values.length,fields:u([g,y],_,A)})}return{t:"table",data:d,state:I.LoadingState.Done}},t.DEFAULT_CACHE_ENTRIES=128,t.DEFAULT_CACHE_TIME_MS=6e4,t.MAX_DATAPOINTS_THRESHOLD=1.5,t.MAX_EXACT_DATAPOINTS_THRESHOLD=1.5,t.MIN_DURATION_MS_FETCH=1,t.MIN_DURATION_MS_CAQL=6e4,t.ROLLUP_ALIGN_MS=l.a.map([1,60,3600,86400],(function(e){return 1e3*e})),t.ROLLUP_ALIGN_MS_1DAY=864e5,t}(I.DataSourceApi);function F(e){return void 0===e&&(e=I.TIME_SERIES_TIME_FIELD_NAME),{name:e,type:I.FieldType.time,config:{},values:new I.ArrayVector}}function U(e){return void 0===e&&(e=I.TIME_SERIES_VALUE_FIELD_NAME),{name:e,type:I.FieldType.number,config:{},values:new I.ArrayVector}}function B(e){return{name:e,type:I.FieldType.string,config:{},values:new I.ArrayVector}}function Q(e){return{name:e,type:I.FieldType.other,config:{},values:new I.ArrayVector}}var G=r(35),V=r(36),z=r.n(V);r(114);function K(e){return(K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var W=c("IrondbQueryCtrl");var X=function(e){function t(t,r,n,a){var o=e.call(this,t,r)||this;return o.uiSegmentSrv=n,o.templateSrv=a,o.defaults={},o.alertStateOptions=[{value:"active",text:"Active"},{value:"inactive",text:"Inactive"}],o.queryTypeOptions=[{value:"caql",text:"CAQL"},{value:"basic",text:"Basic"},{value:"alerts",text:"Alerts"},{value:"alert_counts",text:"Alert Counts"}],o.localFilterMatchOptions=[{value:"all",text:"ALL"},{value:"any",text:"ANY"}],o.alertCountQueryTypeOptions=[{value:"instant",text:"instant"},{value:"range",text:"range"}],o.labelTypeOptions=[{value:"default",text:"name and tags"},{value:"name",text:"name only"},{value:"cardinality",text:"high cardinality tags"},{value:"custom",text:"custom"}],o.egressTypeOptions=[{value:"automatic",text:"automatic"},{value:"count",text:"number of data points (count)"},{value:"average",text:"average value (gauge)"},{value:"stddev",text:"standard deviation a.k.a. σ (stddev)"},{value:"derive",text:"rate of change (derive)"},{value:"derive_stddev",text:"rate of change σ (derive_stddev)"},{value:"counter",text:"rate of positive change (counter)"},{value:"counter_stddev",text:"rate of positive change σ (counter_stddev)"}],o.rollupTypeOptions=[{value:"automatic",text:"automatic"},{value:"minimum",text:"minimum"},{value:"exact",text:"exact"}],o.formatOptions=[{value:"ts",text:"Time Series"},{value:"table",text:"Table"},{value:"heatmap",text:"Heatmap"}],o.caqlFindFunctions={count:"count",average:"average",stddev:"stddev",derive:"derivative",derive_stddev:"derivative_stddev",counter:"counter",counter_stddev:"counter_stddev"},o.histogramTransforms={count:" | histogram:count()",average:" | histogram:mean()",stddev:" | histogram:stddev()",derive:" | histogram:rate()",derive_stddev:"",counter:" | histogram:rate()",counter_stddev:""},l.a.defaultsDeep(o.target,o.defaults),o.target.egressoverride=o.target.egressoverride||"average",o.target.metriclabel=o.target.metriclabel||"",o.target.labeltype=o.target.labeltype||"default",o.target.rolluptype=o.target.rolluptype||"automatic",o.target.query=o.target.query||"",o.target.segments=o.target.segments||[],o.target.format=o.target.format||"ts",void 0!==o.target.isCaql?o.target.querytype=o.target.isCaql?"caql":"basic":o.target.querytype=o.target.querytype||"caql",o.target.lastQueryType=o.target.lastQueryType||o.target.querytype,o.target.local_filter=o.target.local_filter||"",o.target.local_filter_match=o.target.local_filter_match||"all",o.target.alert_count_query_type=o.target.alert_count_query_type||"instant",o.target.alert_id=o.target.alert_id||"",o.queryModel=new k(o.datasource,o.target,a),o.buildSegments(),o.updateMetricLabelValue(!1),o}return t.$inject=["$scope","$injector","uiSegmentSrv","templateSrv"],a(t,e),t.prototype.resetQueryTarget=function(){W((function(){return"resetQueryTarget()"})),this.target.query="",this.target.egressoverride="average",this.target.labeltype="default",this.target.rolluptype="automatic",this.target.format="ts",this.target.local_filter="",this.target.local_filter_match="all",this.target.alert_id="",this.emptySegments(),this.parseTarget(),this.panelCtrl.refresh()},t.prototype.toggleEditorMode=function(){var e=this;if(W((function(){return"toggleEditorMode()"})),"caql"===this.target.lastQueryType&&"basic"===this.target.querytype){var t=function(){e.resetQueryTarget()};""===this.target.query?setTimeout(t,0):z.a.emit("confirm-modal",{title:"Warning",text2:"Switching to basic may overwrite your raw CAQL.",icon:"fa-exclamation",yesText:"Switch",onConfirm:t})}else if("basic"===this.target.lastQueryType&&"caql"===this.target.querytype){var r=this.segmentsToCaqlFind();W((function(){return"toggleEditorMode() caqlQuery = "+r})),this.target.query=r,this.panelCtrl.refresh()}else"alerts"!==this.target.querytype&&"alert_counts"!==this.target.queryType||(this.target.query="",this.panelCtrl.refresh());this.target.lastQueryType=this.target.querytype},t.prototype.alertStateValueChanged=function(){this.panelCtrl.refresh()},t.prototype.updateAlertQuery=function(){this.panelCtrl.refresh()},t.prototype.updateAlertId=function(){this.target.query="",this.panelCtrl.refresh()},t.prototype.updateAlertLocalFilter=function(){this.panelCtrl.refresh()},t.prototype.localFilterMatchValueChanged=function(){this.panelCtrl.refresh()},t.prototype.alertCountQueryTypeValueChanged=function(){this.panelCtrl.refresh()},t.prototype.queryTypeValueChanged=function(){this.toggleEditorMode(),this.panelCtrl.refresh()},t.prototype.labelTypeValueChanged=function(){"custom"===this.target.labeltype&&setTimeout((function(){document.getElementById("metriclabel").focus()}),50),this.panelCtrl.refresh()},t.prototype.metricLabelKeyUp=function(e){var t=this,r=e.currentTarget;13===e.keyCode&&setTimeout((function(){t.target.metriclabel=r.value,t.updateMetricLabelValue()}),0)},t.prototype.updateMetricLabelValue=function(e){void 0===e&&(e=!0),""===this.target.metriclabel&&"custom"===this.target.labeltype&&(this.target.labeltype="default"),e&&this.panelCtrl.refresh()},t.prototype.rollupTypeValueChanged=function(){var e=!0;"automatic"!==this.target.rolluptype&&(l.a.isEmpty(this.target.metricrollup)&&(e=!1),setTimeout((function(){document.getElementById("metricrollup").focus()}),50)),e&&this.panelCtrl.refresh()},t.prototype.metricRollupKeyUp=function(e){var t=this,r=e.currentTarget;13===e.keyCode&&setTimeout((function(){t.target.metricrollup=r.value,t.updateMetricRollupValue()}),0)},t.prototype.updateMetricRollupValue=function(e){void 0===e&&(e=!0),""===this.target.metricrollup&&"automatic"!==this.target.rolluptype&&(this.target.rolluptype="automatic"),e&&this.panelCtrl.refresh()},t.prototype.egressValueChanged=function(){this.panelCtrl.refresh()},t.prototype.onChangeInternal=function(){this.panelCtrl.refresh()},t.prototype.getCollapsedText=function(){return"caql"===this.target.querytype?this.target.query:this.segmentsToCaqlFind()},t.prototype.getSegments=function(e,t){var r=this;W((function(){return"getSegments() "+e+" prefix = "+t}));var n=t&&t.length>0?t:"",a=this.segments[e]._type;if(W((function(){return"getSegments() "+e+" SegmentType = "+f[a]})),a===f.MetricName)return R(f.MetricName,n)!==n?n="b/"+btoa(String(n).replace(/[\\^$*+?.()|[\]{}]/g,"\\$&"))+"/":n+="*",this.datasource.metricTagsQuery("and(__name:"+n+")",!0).then((function(e){var t=l.a.map(e.data,(function(e){return _(e.metric_name)}));return t=l.a.uniq(t),W((function(){return"getSegments() metricnames = "+JSON.stringify(t)})),l.a.map(t,(function(e){return r.newSegment(f.MetricName,{value:e,expandable:!0})}))})).catch((function(e){return W((function(){return"getSegments() err = "+e.toString()})),[]}));if(a===f.TagCat||a===f.TagPlus){var i=R(f.MetricName,this.segments[0].value);return W((function(){return"getSegments() tags for "+i})),this.datasource.metricTagCatsQuery(i).then((function(e){var t,n;if(e.data&&e.data.length>0){var i=e.data,u=[];try{for(var s=o(i),l=s.next();!l.done;l=s.next()){var c=l.value;u.push(r.newSegment(f.TagCat,{value:O(c),expandable:!0}))}}catch(e){t={error:e}}finally{try{l&&!l.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}return a===f.TagPlus&&(u.unshift(r.newSegment(f.TagOp,{value:"and("})),u.unshift(r.newSegment(f.TagOp,{value:"not("})),u.unshift(r.newSegment(f.TagOp,{value:"or("}))),u}})).catch((function(e){return W((function(){return"getSegments() err = "+e})),[]}))}if(a===f.TagOp){var u=[this.newSegment(f.TagOp,{value:"REMOVE"}),this.newSegment(f.TagOp,{value:"and("}),this.newSegment(f.TagOp,{value:"not("}),this.newSegment(f.TagOp,{value:"or("})];return Promise.resolve(u)}if(a===f.TagVal){var s=R(f.MetricName,this.segments[0].value),c=this.segments[e-2].value;return"select tag"===c?Promise.resolve([]):(W((function(){return"getSegments() tag vals for "+s+", "+c})),this.datasource.metricTagValsQuery(s,R(f.TagCat,c,!1)).then((function(e){var t,n;if(e.data&&e.data.length>0){var a=e.data,i=[];i.push(r.newSegment(f.TagVal,{value:"*",expandable:!0})),l.a.eachRight(r.templateSrv.variables,(function(e){i.push(r.newSegment(f.TagVal,{type:"template",value:"$"+e.name,expandable:!0}))}));try{for(var u=o(a),s=u.next();!s.done;s=u.next()){var c=s.value;i.push(r.newSegment(f.TagVal,{value:O(c),expandable:!0}))}}catch(e){t={error:e}}finally{try{s&&!s.done&&(n=u.return)&&n.call(u)}finally{if(t)throw t.error}}return i}})).catch((function(e){return W((function(){return"getSegments() err = "+e})),[]})))}return Promise.resolve([])},t.prototype.parseTarget=function(){this.queryModel.parseTarget(),this.buildSegments()},t.prototype.setSegmentType=function(e,t){return e._type=t,e._typeName=K(f[t]),e},t.prototype.newSegment=function(e,t){var r=this.uiSegmentSrv.newSegment(t);return this.setSegmentType(r,e)},t.prototype.mapSegment=function(e){var t;return t=e.type===f.TagOp?this.uiSegmentSrv.newOperator(e.value):e.type===f.TagEnd?this.uiSegmentSrv.newOperator(")"):e.type===f.TagPair?this.uiSegmentSrv.newCondition(":"):e.type===f.TagSep?this.uiSegmentSrv.newCondition(","):e.type===f.TagPlus?this.buildSelectTagPlusSegment():this.uiSegmentSrv.newSegment(e),this.setSegmentType(t,e.type)},t.prototype.buildSegments=function(){var e=this;this.segments=l.a.map(this.queryModel.segments,(function(t){return e.mapSegment(t)})),W((function(){return"buildSegments()"}));var t=this.queryModel.checkOtherSegmentsIndex||0;this.checkOtherSegments(t)},t.prototype.addSelectMetricSegment=function(){this.queryModel.addSelectMetricSegment();var e=this.uiSegmentSrv.newSelectMetric();this.setSegmentType(e,f.MetricName),this.segments.push(e)},t.prototype.buildSelectTagPlusSegment=function(){var e=this.uiSegmentSrv.newPlusButton();return this.setSegmentType(e,f.TagPlus),e},t.prototype.addSelectTagPlusSegment=function(){this.segments.push(this.buildSelectTagPlusSegment())},t.prototype.newSelectTagValSegment=function(){var e=this.uiSegmentSrv.newKeyValue("*");return this.setSegmentType(e,f.TagVal),e},t.prototype.checkOtherSegments=function(e){if(e===this.segments.length){var t=this.segments[e-1]._type;W((function(){return"checkOtherSegments() "+(e-1)+" SegmentType = "+f[t]})),t===f.MetricName&&this.addSelectTagPlusSegment()}return Promise.resolve()},t.prototype.setSegmentFocus=function(e){l.a.each(this.segments,(function(t,r){t.focus=e===r}))},t.prototype.segmentValueChanged=function(e,t){var r=this;if(W((function(){return"segmentValueChanged()"})),this.error=null,this.queryModel.updateSegmentValue(e,t),e._type!==f.TagOp){if(e._type===f.TagPlus){if("and("===e.value||"not("===e.value||"or("===e.value)return this.segments.splice(t,1),t>2&&this.segments.splice(t,0,this.mapSegment({type:f.TagSep})),this.segments.splice(t+1,0,this.mapSegment({type:f.TagOp,value:e.value}),this.mapSegment({type:f.TagCat,value:"select tag",fake:!0}),this.mapSegment({type:f.TagPair}),this.newSelectTagValSegment(),this.buildSelectTagPlusSegment(),this.mapSegment({type:f.TagEnd})),t>2&&this.segments.splice(t+7,0,this.buildSelectTagPlusSegment()),void this.setSegmentFocus(t+3);this.segments.splice(t,1),t>2&&this.segments.splice(t,0,this.mapSegment({type:f.TagSep})),this.segments.splice(t+1,0,this.mapSegment({type:f.TagCat,value:e.value}),this.mapSegment({type:f.TagPair}),this.newSelectTagValSegment(),this.buildSelectTagPlusSegment()),1===t&&(this.segments.splice(t,0,this.mapSegment({type:f.TagOp,value:"and("})),this.segments.push(this.mapSegment({type:f.TagEnd})))}if(0===t&&this.spliceSegments(t+1),e.expandable)return this.checkOtherSegments(t+1).then((function(){r.setSegmentFocus(t+1),r.targetChanged()}));this.setSegmentFocus(t+1),this.targetChanged()}else{if("REMOVE"===e.value){for(var n=t+1,a=1,o=this.segments.length;a>0&&n<o;){var i=this.segments[n]._type;if(i===f.TagOp)a++;else if(i===f.TagEnd&&0===--a)break;n++}var u=t,s=n-t+1;t>2&&(u--,s++),this.segments.splice(u,s),o===n+1&&this.segments.push(this.buildSelectTagPlusSegment())}this.targetChanged()}},t.prototype.spliceSegments=function(e){this.segments=this.segments.splice(0,e),this.queryModel.segments=this.queryModel.segments.splice(0,e)},t.prototype.emptySegments=function(){this.queryModel.segments=[],this.segments=[]},t.prototype.segmentsToStreamTags=function(){var e,t,r=this.segments.slice(),n=r.shift().value,a="and(__name:"+R(f.MetricName,n),i=!1;try{for(var u=o(r),s=u.next();!s.done;s=u.next()){var l=s.value,c=l._type;c!==f.TagPlus&&(i||c===f.TagEnd||c===f.TagSep||(a+=","),i=c===f.TagOp||c===f.TagPair||c===f.TagCat||c===f.TagSep,a+=R(c,l.value))}}catch(t){e={error:t}}finally{try{s&&!s.done&&(t=u.return)&&t.call(u)}finally{if(e)throw e.error}}return a+=")"},t.prototype.queryFunctionToCaqlFind=function(){if("Heatmap"===this.target.paneltype||void 0!==this.target.hist_transform)return"find:histogram";var e="find",t=this.target.egressoverride;return"average"!==t&&(e+=":"+(t=this.caqlFindFunctions[t])),e},t.prototype.buildHistogramTransform=function(){if(void 0!==this.target.hist_transform){var e=this.target.egressoverride;return"automatic"===e&&(e="statsd_counter"===this.target.hist_transform?"counter":"average"),this.histogramTransforms[e]}return""},t.prototype.buildCaqlLabel=function(){var e=this.target.labeltype,t=this.target.metriclabel;if("default"!==e){if("custom"===e&&""!==t)return" | label('"+(t=t.replace(/'/g,'"'))+"')";if("name"===e)return" | label('%n')";if("cardinality"===e)return" | label('%n | %t-{*}')"}return" | label('%cn')"},t.prototype.segmentsToCaqlFind=function(){var e,t,r=this.segments.slice(),n=r.shift().value,a=1===r.length&&r[0]._type===f.TagPlus;if("*"===n&&a)return"";var i=this.queryFunctionToCaqlFind()+"('"+n+"'";if(a)return i+=")"+this.buildHistogramTransform()+this.buildCaqlLabel();var u=!0,s=!1;try{for(var l=o(r),c=l.next();!c.done;c=l.next()){var p=c.value,d=p._type;d!==f.TagPlus&&(s||d===f.TagEnd||d===f.TagSep||(i+=",",u&&(i+=" '",u=!1)),s=d===f.TagOp||d===f.TagPair||d===f.TagCat||d===f.TagSep,i+=R(d,p.value))}}catch(t){e={error:t}}finally{try{c&&!c.done&&(t=l.return)&&t.call(l)}finally{if(e)throw e.error}}return i+="')"+this.buildHistogramTransform()+this.buildCaqlLabel()},t.prototype.updateModelTarget=function(){var e=this.segmentsToStreamTags();W((function(){return"updateModelTarget() streamTags = "+e})),this.queryModel.target.query=e},t.prototype.targetChanged=function(){if(W((function(){return"targetChanged()"})),!this.queryModel.error){var e=this.queryModel.target.query;this.updateModelTarget(),this.queryModel.target!==e&&this.panelCtrl.refresh()}},t.templateUrl="partials/query.editor.html",t}(G.QueryCtrl),J=function(){function e(e){this.current.jsonData.irondbType=this.current.jsonData.irondbType||"standalone",this.current.jsonData.resultsLimit=this.current.jsonData.resultsLimit||"100",this.current.jsonData.useCaching=l.a.defaultTo(this.current.jsonData.useCaching,!0),this.current.jsonData.activityTracking=l.a.defaultTo(this.current.jsonData.activityTracking,!0)}return e.$inject=["$scope"],e.templateUrl="partials/config.html",e}(),Z=function(){function e(){this.annotationQueryTypeOptions=[{value:"alerts",text:"Alerts"}],this.annotationFilterApplyOptions=[{value:"all",text:"ALL"},{value:"any",text:"ANY"}],this.annotation.alertId=this.annotation.alertId||"",this.annotation.annotationQueryText=this.annotation.annotationQueryText||"",this.annotation.annotationQueryType=this.annotation.annotationQueryType||"alerts",this.annotation.annotationFilterApply=this.annotation.annotationFilterApply||"all",this.annotation.annotationFilterText=this.annotation.annotationFilterText||""}return e.templateUrl="partials/annotation.editor.html",e}();r.d(t,"Datasource",(function(){return D})),r.d(t,"QueryCtrl",(function(){return X})),r.d(t,"ConfigCtrl",(function(){return J})),r.d(t,"AnnotationsQueryCtrl",(function(){return Z}))}])}));
//# sourceMappingURL=module.js.map