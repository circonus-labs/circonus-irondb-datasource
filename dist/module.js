/*! For license information please see module.js.LICENSE.txt */
define(["lodash","@grafana/data","react","@grafana/ui","app/plugins/sdk"],(function(e,t,r,n,a){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,r),a.l=!0,a.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(n,a,function(t){return e[t]}.bind(null,a));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/",r(r.s=119)}([function(t,r){t.exports=e},function(e,r){e.exports=t},function(e,t){e.exports=r},function(e,t,r){"use strict";e.exports=function(e){if("function"!=typeof e)throw new TypeError(e+" is not a function");return e}},function(e,t,r){"use strict";var n=r(51)();e.exports=function(e){return e!==n&&null!==e}},function(e,t,r){"use strict";var n=r(52),a=Math.max;e.exports=function(e){return a(0,n(e))}},function(e,t,r){},function(e,t,r){"use strict";var n=r(29),a=r(66),i=r(26),o=r(24),s=r(70);(e.exports=function(e,t){var r,a,u,l,c;return arguments.length<2||"string"!=typeof e?(l=t,t=e,e=null):l=arguments[2],n(e)?(r=s.call(e,"c"),a=s.call(e,"e"),u=s.call(e,"w")):(r=u=!0,a=!1),c={value:t,configurable:r,enumerable:a,writable:u},l?i(o(l),c):c}).gs=function(e,t,r){var u,l,c,p;return"string"!=typeof e?(c=r,r=t,t=e,e=null):c=arguments[3],n(t)?a(t)?n(r)?a(r)||(c=r,r=void 0):r=void 0:(c=t,t=r=void 0):t=void 0,n(e)?(u=s.call(e,"c"),l=s.call(e,"e")):(u=!0,l=!1),p={get:t,set:r,configurable:u,enumerable:l},c?i(o(c),p):p}},function(e,t,r){"use strict";var n=r(4);e.exports=function(e){if(!n(e))throw new TypeError("Cannot use null or undefined");return e}},function(e,t){var r,n,a=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function s(e){if(r===setTimeout)return setTimeout(e,0);if((r===i||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:i}catch(e){r=i}try{n="function"==typeof clearTimeout?clearTimeout:o}catch(e){n=o}}();var u,l=[],c=!1,p=-1;function f(){c&&u&&(c=!1,u.length?l=u.concat(l):p=-1,l.length&&h())}function h(){if(!c){var e=s(f);c=!0;for(var t=l.length;t;){for(u=l,l=[];++p<t;)u&&u[p].run();p=-1,t=l.length}u=null,c=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===o||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function d(e,t){this.fun=e,this.array=t}function g(){}a.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];l.push(new d(e,t)),1!==l.length||c||s(h)},d.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=g,a.addListener=g,a.once=g,a.off=g,a.removeListener=g,a.removeAllListeners=g,a.emit=g,a.prependListener=g,a.prependOnceListener=g,a.listeners=function(e){return[]},a.binding=function(e){throw new Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(e){throw new Error("process.chdir is not supported")},a.umask=function(){return 0}},function(e,t,r){"use strict";(function(e){const n=r(16),a="win32"===e.platform,{REGEX_BACKSLASH:i,REGEX_REMOVE_BACKSLASH:o,REGEX_SPECIAL_CHARS:s,REGEX_SPECIAL_CHARS_GLOBAL:u}=r(11);t.isObject=e=>null!==e&&"object"==typeof e&&!Array.isArray(e),t.hasRegexChars=e=>s.test(e),t.isRegexChar=e=>1===e.length&&t.hasRegexChars(e),t.escapeRegex=e=>e.replace(u,"\\$1"),t.toPosixSlashes=e=>e.replace(i,"/"),t.removeBackslashes=e=>e.replace(o,e=>"\\"===e?"":e),t.supportsLookbehinds=()=>{const t=e.version.slice(1).split(".").map(Number);return 3===t.length&&t[0]>=9||8===t[0]&&t[1]>=10},t.isWindows=e=>e&&"boolean"==typeof e.windows?e.windows:!0===a||"\\"===n.sep,t.escapeLast=(e,r,n)=>{const a=e.lastIndexOf(r,n);return-1===a?e:"\\"===e[a-1]?t.escapeLast(e,r,a-1):`${e.slice(0,a)}\\${e.slice(a)}`},t.removePrefix=(e,t={})=>{let r=e;return r.startsWith("./")&&(r=r.slice(2),t.prefix="./"),r},t.wrapOutput=(e,t={},r={})=>{let n=`${r.contains?"":"^"}(?:${e})${r.contains?"":"$"}`;return!0===t.negated&&(n=`(?:^(?!${n}).*$)`),n}}).call(this,r(9))},function(e,t,r){"use strict";const n=r(16),a={DOT_LITERAL:"\\.",PLUS_LITERAL:"\\+",QMARK_LITERAL:"\\?",SLASH_LITERAL:"\\/",ONE_CHAR:"(?=.)",QMARK:"[^/]",END_ANCHOR:"(?:\\/|$)",DOTS_SLASH:"\\.{1,2}(?:\\/|$)",NO_DOT:"(?!\\.)",NO_DOTS:"(?!(?:^|\\/)\\.{1,2}(?:\\/|$))",NO_DOT_SLASH:"(?!\\.{0,1}(?:\\/|$))",NO_DOTS_SLASH:"(?!\\.{1,2}(?:\\/|$))",QMARK_NO_DOT:"[^.\\/]",STAR:"[^/]*?",START_ANCHOR:"(?:^|\\/)"},i={...a,SLASH_LITERAL:"[\\\\/]",QMARK:"[^\\\\/]",STAR:"[^\\\\/]*?",DOTS_SLASH:"\\.{1,2}(?:[\\\\/]|$)",NO_DOT:"(?!\\.)",NO_DOTS:"(?!(?:^|[\\\\/])\\.{1,2}(?:[\\\\/]|$))",NO_DOT_SLASH:"(?!\\.{0,1}(?:[\\\\/]|$))",NO_DOTS_SLASH:"(?!\\.{1,2}(?:[\\\\/]|$))",QMARK_NO_DOT:"[^.\\\\/]",START_ANCHOR:"(?:^|[\\\\/])",END_ANCHOR:"(?:[\\\\/]|$)"};e.exports={MAX_LENGTH:65536,POSIX_REGEX_SOURCE:{alnum:"a-zA-Z0-9",alpha:"a-zA-Z",ascii:"\\x00-\\x7F",blank:" \\t",cntrl:"\\x00-\\x1F\\x7F",digit:"0-9",graph:"\\x21-\\x7E",lower:"a-z",print:"\\x20-\\x7E ",punct:"\\-!\"#$%&'()\\*+,./:;<=>?@[\\]^_`{|}~",space:" \\t\\r\\n\\v\\f",upper:"A-Z",word:"A-Za-z0-9_",xdigit:"A-Fa-f0-9"},REGEX_BACKSLASH:/\\(?![*+?^${}(|)[\]])/g,REGEX_NON_SPECIAL_CHARS:/^[^@![\].,$*+?^{}()|\\/]+/,REGEX_SPECIAL_CHARS:/[-*+?.^${}(|)[\]]/,REGEX_SPECIAL_CHARS_BACKREF:/(\\?)((\W)(\3*))/g,REGEX_SPECIAL_CHARS_GLOBAL:/([-*+?.^${}(|)[\]])/g,REGEX_REMOVE_BACKSLASH:/(?:\[.*?[^\\]\]|\\(?=.))/g,REPLACEMENTS:{"***":"*","**/**":"**","**/**/**":"**"},CHAR_0:48,CHAR_9:57,CHAR_UPPERCASE_A:65,CHAR_LOWERCASE_A:97,CHAR_UPPERCASE_Z:90,CHAR_LOWERCASE_Z:122,CHAR_LEFT_PARENTHESES:40,CHAR_RIGHT_PARENTHESES:41,CHAR_ASTERISK:42,CHAR_AMPERSAND:38,CHAR_AT:64,CHAR_BACKWARD_SLASH:92,CHAR_CARRIAGE_RETURN:13,CHAR_CIRCUMFLEX_ACCENT:94,CHAR_COLON:58,CHAR_COMMA:44,CHAR_DOT:46,CHAR_DOUBLE_QUOTE:34,CHAR_EQUAL:61,CHAR_EXCLAMATION_MARK:33,CHAR_FORM_FEED:12,CHAR_FORWARD_SLASH:47,CHAR_GRAVE_ACCENT:96,CHAR_HASH:35,CHAR_HYPHEN_MINUS:45,CHAR_LEFT_ANGLE_BRACKET:60,CHAR_LEFT_CURLY_BRACE:123,CHAR_LEFT_SQUARE_BRACKET:91,CHAR_LINE_FEED:10,CHAR_NO_BREAK_SPACE:160,CHAR_PERCENT:37,CHAR_PLUS:43,CHAR_QUESTION_MARK:63,CHAR_RIGHT_ANGLE_BRACKET:62,CHAR_RIGHT_CURLY_BRACE:125,CHAR_RIGHT_SQUARE_BRACKET:93,CHAR_SEMICOLON:59,CHAR_SINGLE_QUOTE:39,CHAR_SPACE:32,CHAR_TAB:9,CHAR_UNDERSCORE:95,CHAR_VERTICAL_LINE:124,CHAR_ZERO_WIDTH_NOBREAK_SPACE:65279,SEP:n.sep,extglobChars:e=>({"!":{type:"negate",open:"(?:(?!(?:",close:`))${e.STAR})`},"?":{type:"qmark",open:"(?:",close:")?"},"+":{type:"plus",open:"(?:",close:")+"},"*":{type:"star",open:"(?:",close:")*"},"@":{type:"at",open:"(?:",close:")"}}),globChars:e=>!0===e?i:a}},function(e,t,r){"use strict";e.exports=r(57)("forEach")},function(e,t,r){"use strict";e.exports=r(80)()?globalThis:r(81)},function(e,t,r){"use strict";const n=r(15);e.exports=(e,t={})=>{let r=(e,a={})=>{let i=t.escapeInvalid&&n.isInvalidBrace(a),o=!0===e.invalid&&!0===t.escapeInvalid,s="";if(e.value)return(i||o)&&n.isOpenOrClose(e)?"\\"+e.value:e.value;if(e.value)return e.value;if(e.nodes)for(let t of e.nodes)s+=r(t);return s};return r(e)}},function(e,t,r){"use strict";t.isInteger=e=>"number"==typeof e?Number.isInteger(e):"string"==typeof e&&""!==e.trim()&&Number.isInteger(Number(e)),t.find=(e,t)=>e.nodes.find(e=>e.type===t),t.exceedsLimit=(e,r,n=1,a)=>!1!==a&&(!(!t.isInteger(e)||!t.isInteger(r))&&(Number(r)-Number(e))/Number(n)>=a),t.escapeNode=(e,t=0,r)=>{let n=e.nodes[t];n&&(r&&n.type===r||"open"===n.type||"close"===n.type)&&!0!==n.escaped&&(n.value="\\"+n.value,n.escaped=!0)},t.encloseBrace=e=>"brace"===e.type&&(e.commas>>0+e.ranges>>0==0&&(e.invalid=!0,!0)),t.isInvalidBrace=e=>"brace"===e.type&&(!(!0!==e.invalid&&!e.dollar)||(e.commas>>0+e.ranges>>0==0||!0!==e.open||!0!==e.close)&&(e.invalid=!0,!0)),t.isOpenOrClose=e=>"open"===e.type||"close"===e.type||(!0===e.open||!0===e.close),t.reduce=e=>e.reduce((e,t)=>("text"===t.type&&e.push(t.value),"range"===t.type&&(t.type="text"),e),[]),t.flatten=(...e)=>{const t=[],r=e=>{for(let n=0;n<e.length;n++){let a=e[n];Array.isArray(a)?r(a,t):void 0!==a&&t.push(a)}return t};return r(e),t}},function(e,t,r){(function(e){function r(e,t){for(var r=0,n=e.length-1;n>=0;n--){var a=e[n];"."===a?e.splice(n,1):".."===a?(e.splice(n,1),r++):r&&(e.splice(n,1),r--)}if(t)for(;r--;r)e.unshift("..");return e}function n(e,t){if(e.filter)return e.filter(t);for(var r=[],n=0;n<e.length;n++)t(e[n],n,e)&&r.push(e[n]);return r}t.resolve=function(){for(var t="",a=!1,i=arguments.length-1;i>=-1&&!a;i--){var o=i>=0?arguments[i]:e.cwd();if("string"!=typeof o)throw new TypeError("Arguments to path.resolve must be strings");o&&(t=o+"/"+t,a="/"===o.charAt(0))}return(a?"/":"")+(t=r(n(t.split("/"),(function(e){return!!e})),!a).join("/"))||"."},t.normalize=function(e){var i=t.isAbsolute(e),o="/"===a(e,-1);return(e=r(n(e.split("/"),(function(e){return!!e})),!i).join("/"))||i||(e="."),e&&o&&(e+="/"),(i?"/":"")+e},t.isAbsolute=function(e){return"/"===e.charAt(0)},t.join=function(){var e=Array.prototype.slice.call(arguments,0);return t.normalize(n(e,(function(e,t){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e})).join("/"))},t.relative=function(e,r){function n(e){for(var t=0;t<e.length&&""===e[t];t++);for(var r=e.length-1;r>=0&&""===e[r];r--);return t>r?[]:e.slice(t,r-t+1)}e=t.resolve(e).substr(1),r=t.resolve(r).substr(1);for(var a=n(e.split("/")),i=n(r.split("/")),o=Math.min(a.length,i.length),s=o,u=0;u<o;u++)if(a[u]!==i[u]){s=u;break}var l=[];for(u=s;u<a.length;u++)l.push("..");return(l=l.concat(i.slice(s))).join("/")},t.sep="/",t.delimiter=":",t.dirname=function(e){if("string"!=typeof e&&(e+=""),0===e.length)return".";for(var t=e.charCodeAt(0),r=47===t,n=-1,a=!0,i=e.length-1;i>=1;--i)if(47===(t=e.charCodeAt(i))){if(!a){n=i;break}}else a=!1;return-1===n?r?"/":".":r&&1===n?"/":e.slice(0,n)},t.basename=function(e,t){var r=function(e){"string"!=typeof e&&(e+="");var t,r=0,n=-1,a=!0;for(t=e.length-1;t>=0;--t)if(47===e.charCodeAt(t)){if(!a){r=t+1;break}}else-1===n&&(a=!1,n=t+1);return-1===n?"":e.slice(r,n)}(e);return t&&r.substr(-1*t.length)===t&&(r=r.substr(0,r.length-t.length)),r},t.extname=function(e){"string"!=typeof e&&(e+="");for(var t=-1,r=0,n=-1,a=!0,i=0,o=e.length-1;o>=0;--o){var s=e.charCodeAt(o);if(47!==s)-1===n&&(a=!1,n=o+1),46===s?-1===t?t=o:1!==i&&(i=1):-1!==t&&(i=-1);else if(!a){r=o+1;break}}return-1===t||-1===n||0===i||1===i&&t===n-1&&t===r+1?"":e.slice(t,n)};var a="b"==="ab".substr(-1)?function(e,t,r){return e.substr(t,r)}:function(e,t,r){return t<0&&(t=e.length+t),e.substr(t,r)}}).call(this,r(9))},function(e,t,r){"use strict";e.exports=r(76)()?Array.from:r(77)},function(e,t,r){"use strict";var n=r(94),a=r(5),i=r(8),o=Array.prototype.indexOf,s=Object.prototype.hasOwnProperty,u=Math.abs,l=Math.floor;e.exports=function(e){var t,r,c,p;if(!n(e))return o.apply(this,arguments);for(r=a(i(this).length),c=arguments[1],t=c=isNaN(c)?0:c>=0?l(c):a(this.length)-l(u(c));t<r;++t)if(s.call(this,t)&&(p=this[t],n(p)))return t;return-1}},function(e,t,r){"use strict";(function(t,r){var n=function(e){if("function"!=typeof e)throw new TypeError(e+" is not a function");return e},a=function(e){var t,r,a=document.createTextNode(""),i=0;return new e((function(){var e;if(t)r&&(t=r.concat(t));else{if(!r)return;t=r}if(r=t,t=null,"function"==typeof r)return e=r,r=null,void e();for(a.data=i=++i%2;r;)e=r.shift(),r.length||(r=null),e()})).observe(a,{characterData:!0}),function(e){n(e),t?"function"==typeof t?t=[t,e]:t.push(e):(t=e,a.data=i=++i%2)}};e.exports=function(){if("object"==typeof t&&t&&"function"==typeof t.nextTick)return t.nextTick;if("function"==typeof queueMicrotask)return function(e){queueMicrotask(n(e))};if("object"==typeof document&&document){if("function"==typeof MutationObserver)return a(MutationObserver);if("function"==typeof WebKitMutationObserver)return a(WebKitMutationObserver)}return"function"==typeof r?function(e){r(n(e))}:"function"==typeof setTimeout||"object"==typeof setTimeout?function(e){setTimeout(n(e),0)}:null}()}).call(this,r(9),r(100).setImmediate)},function(e,t,r){e.exports=function(){"use strict";var e=Object.prototype.toString,t=Array.isArray||function(t){return"[object Array]"===e.call(t)};function r(e){return"function"==typeof e}function n(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function a(e,t){return null!=e&&"object"==typeof e&&t in e}var i=RegExp.prototype.test,o=/\S/;function s(e){return!function(e,t){return i.call(e,t)}(o,e)}var u={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"},l=/\s*/,c=/\s+/,p=/\s*=/,f=/\s*\}/,h=/#|\^|\/|>|\{|&|=|!/;function d(e){this.string=e,this.tail=e,this.pos=0}function g(e,t){this.view=e,this.cache={".":this.view},this.parent=t}function y(){this.templateCache={_cache:{},set:function(e,t){this._cache[e]=t},get:function(e){return this._cache[e]},clear:function(){this._cache={}}}}d.prototype.eos=function(){return""===this.tail},d.prototype.scan=function(e){var t=this.tail.match(e);if(!t||0!==t.index)return"";var r=t[0];return this.tail=this.tail.substring(r.length),this.pos+=r.length,r},d.prototype.scanUntil=function(e){var t,r=this.tail.search(e);switch(r){case-1:t=this.tail,this.tail="";break;case 0:t="";break;default:t=this.tail.substring(0,r),this.tail=this.tail.substring(r)}return this.pos+=t.length,t},g.prototype.push=function(e){return new g(e,this)},g.prototype.lookup=function(e){var t,n,i,o=this.cache;if(o.hasOwnProperty(e))t=o[e];else{for(var s,u,l,c=this,p=!1;c;){if(e.indexOf(".")>0)for(s=c.view,u=e.split("."),l=0;null!=s&&l<u.length;)l===u.length-1&&(p=a(s,u[l])||(n=s,i=u[l],null!=n&&"object"!=typeof n&&n.hasOwnProperty&&n.hasOwnProperty(i))),s=s[u[l++]];else s=c.view[e],p=a(c.view,e);if(p){t=s;break}c=c.parent}o[e]=t}return r(t)&&(t=t.call(this.view)),t},y.prototype.clearCache=function(){void 0!==this.templateCache&&this.templateCache.clear()},y.prototype.parse=function(e,r){var a=this.templateCache,i=e+":"+(r||m.tags).join(":"),o=void 0!==a,u=o?a.get(i):void 0;return null==u&&(u=function(e,r){if(!e)return[];var a,i,o,u=!1,g=[],y=[],v=[],b=!1,_=!1,A="",S=0;function T(){if(b&&!_)for(;v.length;)delete y[v.pop()];else v=[];b=!1,_=!1}function w(e){if("string"==typeof e&&(e=e.split(c,2)),!t(e)||2!==e.length)throw new Error("Invalid tags: "+e);a=new RegExp(n(e[0])+"\\s*"),i=new RegExp("\\s*"+n(e[1])),o=new RegExp("\\s*"+n("}"+e[1]))}w(r||m.tags);for(var x,C,E,R,O,q,k=new d(e);!k.eos();){if(x=k.pos,E=k.scanUntil(a))for(var M=0,N=E.length;M<N;++M)s(R=E.charAt(M))?(v.push(y.length),A+=R):(_=!0,u=!0,A+=" "),y.push(["text",R,x,x+1]),x+=1,"\n"===R&&(T(),A="",S=0,u=!1);if(!k.scan(a))break;if(b=!0,C=k.scan(h)||"name",k.scan(l),"="===C?(E=k.scanUntil(p),k.scan(p),k.scanUntil(i)):"{"===C?(E=k.scanUntil(o),k.scan(f),k.scanUntil(i),C="&"):E=k.scanUntil(i),!k.scan(i))throw new Error("Unclosed tag at "+k.pos);if(O=">"==C?[C,E,x,k.pos,A,S,u]:[C,E,x,k.pos],S++,y.push(O),"#"===C||"^"===C)g.push(O);else if("/"===C){if(!(q=g.pop()))throw new Error('Unopened section "'+E+'" at '+x);if(q[1]!==E)throw new Error('Unclosed section "'+q[1]+'" at '+x)}else"name"===C||"{"===C||"&"===C?_=!0:"="===C&&w(E)}if(T(),q=g.pop())throw new Error('Unclosed section "'+q[1]+'" at '+k.pos);return function(e){for(var t,r=[],n=r,a=[],i=0,o=e.length;i<o;++i)switch((t=e[i])[0]){case"#":case"^":n.push(t),a.push(t),n=t[4]=[];break;case"/":a.pop()[5]=t[2],n=a.length>0?a[a.length-1][4]:r;break;default:n.push(t)}return r}(function(e){for(var t,r,n=[],a=0,i=e.length;a<i;++a)(t=e[a])&&("text"===t[0]&&r&&"text"===r[0]?(r[1]+=t[1],r[3]=t[3]):(n.push(t),r=t));return n}(y))}(e,r),o&&a.set(i,u)),u},y.prototype.render=function(e,t,r,n){var a=this.getConfigTags(n),i=this.parse(e,a),o=t instanceof g?t:new g(t,void 0);return this.renderTokens(i,o,r,e,n)},y.prototype.renderTokens=function(e,t,r,n,a){for(var i,o,s,u="",l=0,c=e.length;l<c;++l)s=void 0,"#"===(o=(i=e[l])[0])?s=this.renderSection(i,t,r,n,a):"^"===o?s=this.renderInverted(i,t,r,n,a):">"===o?s=this.renderPartial(i,t,r,a):"&"===o?s=this.unescapedValue(i,t):"name"===o?s=this.escapedValue(i,t,a):"text"===o&&(s=this.rawValue(i)),void 0!==s&&(u+=s);return u},y.prototype.renderSection=function(e,n,a,i,o){var s=this,u="",l=n.lookup(e[1]);if(l){if(t(l))for(var c=0,p=l.length;c<p;++c)u+=this.renderTokens(e[4],n.push(l[c]),a,i,o);else if("object"==typeof l||"string"==typeof l||"number"==typeof l)u+=this.renderTokens(e[4],n.push(l),a,i,o);else if(r(l)){if("string"!=typeof i)throw new Error("Cannot use higher-order sections without the original template");null!=(l=l.call(n.view,i.slice(e[3],e[5]),(function(e){return s.render(e,n,a,o)})))&&(u+=l)}else u+=this.renderTokens(e[4],n,a,i,o);return u}},y.prototype.renderInverted=function(e,r,n,a,i){var o=r.lookup(e[1]);if(!o||t(o)&&0===o.length)return this.renderTokens(e[4],r,n,a,i)},y.prototype.indentPartial=function(e,t,r){for(var n=t.replace(/[^ \t]/g,""),a=e.split("\n"),i=0;i<a.length;i++)a[i].length&&(i>0||!r)&&(a[i]=n+a[i]);return a.join("\n")},y.prototype.renderPartial=function(e,t,n,a){if(n){var i=this.getConfigTags(a),o=r(n)?n(e[1]):n[e[1]];if(null!=o){var s=e[6],u=e[5],l=e[4],c=o;0==u&&l&&(c=this.indentPartial(o,l,s));var p=this.parse(c,i);return this.renderTokens(p,t,n,c,a)}}},y.prototype.unescapedValue=function(e,t){var r=t.lookup(e[1]);if(null!=r)return r},y.prototype.escapedValue=function(e,t,r){var n=this.getConfigEscape(r)||m.escape,a=t.lookup(e[1]);if(null!=a)return"number"==typeof a&&n===m.escape?String(a):n(a)},y.prototype.rawValue=function(e){return e[1]},y.prototype.getConfigTags=function(e){return t(e)?e:e&&"object"==typeof e?e.tags:void 0},y.prototype.getConfigEscape=function(e){return e&&"object"==typeof e&&!t(e)?e.escape:void 0};var m={name:"mustache.js",version:"4.2.0",tags:["{{","}}"],clearCache:void 0,escape:void 0,parse:void 0,render:void 0,Scanner:void 0,Context:void 0,Writer:void 0,set templateCache(e){v.templateCache=e},get templateCache(){return v.templateCache}},v=new y;return m.clearCache=function(){return v.clearCache()},m.parse=function(e,t){return v.parse(e,t)},m.render=function(e,r,n,a){if("string"!=typeof e)throw new TypeError('Invalid template! Template should be a "string" but "'+(t(i=e)?"array":typeof i)+'" was given as the first argument for mustache#render(template, view, partials)');var i;return v.render(e,r,n,a)},m.escape=function(e){return String(e).replace(/[&<>"'`=\/]/g,(function(e){return u[e]}))},m.Scanner=d,m.Context=g,m.Writer=y,m}()},function(e,t){e.exports=n},function(e,t,r){(function(e){var n=Object.getOwnPropertyDescriptors||function(e){for(var t=Object.keys(e),r={},n=0;n<t.length;n++)r[t[n]]=Object.getOwnPropertyDescriptor(e,t[n]);return r},a=/%[sdj%]/g;t.format=function(e){if(!m(e)){for(var t=[],r=0;r<arguments.length;r++)t.push(s(arguments[r]));return t.join(" ")}r=1;for(var n=arguments,i=n.length,o=String(e).replace(a,(function(e){if("%%"===e)return"%";if(r>=i)return e;switch(e){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch(e){return"[Circular]"}default:return e}})),u=n[r];r<i;u=n[++r])g(u)||!_(u)?o+=" "+u:o+=" "+s(u);return o},t.deprecate=function(r,n){if(void 0!==e&&!0===e.noDeprecation)return r;if(void 0===e)return function(){return t.deprecate(r,n).apply(this,arguments)};var a=!1;return function(){if(!a){if(e.throwDeprecation)throw new Error(n);e.traceDeprecation,a=!0}return r.apply(this,arguments)}};var i,o={};function s(e,r){var n={seen:[],stylize:l};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),d(r)?n.showHidden=r:r&&t._extend(n,r),v(n.showHidden)&&(n.showHidden=!1),v(n.depth)&&(n.depth=2),v(n.colors)&&(n.colors=!1),v(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=u),c(n,e,n.depth)}function u(e,t){var r=s.styles[t];return r?"["+s.colors[r][0]+"m"+e+"["+s.colors[r][1]+"m":e}function l(e,t){return e}function c(e,r,n){if(e.customInspect&&r&&T(r.inspect)&&r.inspect!==t.inspect&&(!r.constructor||r.constructor.prototype!==r)){var a=r.inspect(n,e);return m(a)||(a=c(e,a,n)),a}var i=function(e,t){if(v(t))return e.stylize("undefined","undefined");if(m(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}if(y(t))return e.stylize(""+t,"number");if(d(t))return e.stylize(""+t,"boolean");if(g(t))return e.stylize("null","null")}(e,r);if(i)return i;var o=Object.keys(r),s=function(e){var t={};return e.forEach((function(e,r){t[e]=!0})),t}(o);if(e.showHidden&&(o=Object.getOwnPropertyNames(r)),S(r)&&(o.indexOf("message")>=0||o.indexOf("description")>=0))return p(r);if(0===o.length){if(T(r)){var u=r.name?": "+r.name:"";return e.stylize("[Function"+u+"]","special")}if(b(r))return e.stylize(RegExp.prototype.toString.call(r),"regexp");if(A(r))return e.stylize(Date.prototype.toString.call(r),"date");if(S(r))return p(r)}var l,_="",w=!1,C=["{","}"];(h(r)&&(w=!0,C=["[","]"]),T(r))&&(_=" [Function"+(r.name?": "+r.name:"")+"]");return b(r)&&(_=" "+RegExp.prototype.toString.call(r)),A(r)&&(_=" "+Date.prototype.toUTCString.call(r)),S(r)&&(_=" "+p(r)),0!==o.length||w&&0!=r.length?n<0?b(r)?e.stylize(RegExp.prototype.toString.call(r),"regexp"):e.stylize("[Object]","special"):(e.seen.push(r),l=w?function(e,t,r,n,a){for(var i=[],o=0,s=t.length;o<s;++o)x(t,String(o))?i.push(f(e,t,r,n,String(o),!0)):i.push("");return a.forEach((function(a){a.match(/^\d+$/)||i.push(f(e,t,r,n,a,!0))})),i}(e,r,n,s,o):o.map((function(t){return f(e,r,n,s,t,w)})),e.seen.pop(),function(e,t,r){if(e.reduce((function(e,t){return t.indexOf("\n")>=0&&0,e+t.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60)return r[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+r[1];return r[0]+t+" "+e.join(", ")+" "+r[1]}(l,_,C)):C[0]+_+C[1]}function p(e){return"["+Error.prototype.toString.call(e)+"]"}function f(e,t,r,n,a,i){var o,s,u;if((u=Object.getOwnPropertyDescriptor(t,a)||{value:t[a]}).get?s=u.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):u.set&&(s=e.stylize("[Setter]","special")),x(n,a)||(o="["+a+"]"),s||(e.seen.indexOf(u.value)<0?(s=g(r)?c(e,u.value,null):c(e,u.value,r-1)).indexOf("\n")>-1&&(s=i?s.split("\n").map((function(e){return"  "+e})).join("\n").substr(2):"\n"+s.split("\n").map((function(e){return"   "+e})).join("\n")):s=e.stylize("[Circular]","special")),v(o)){if(i&&a.match(/^\d+$/))return s;(o=JSON.stringify(""+a)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(o=o.substr(1,o.length-2),o=e.stylize(o,"name")):(o=o.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),o=e.stylize(o,"string"))}return o+": "+s}function h(e){return Array.isArray(e)}function d(e){return"boolean"==typeof e}function g(e){return null===e}function y(e){return"number"==typeof e}function m(e){return"string"==typeof e}function v(e){return void 0===e}function b(e){return _(e)&&"[object RegExp]"===w(e)}function _(e){return"object"==typeof e&&null!==e}function A(e){return _(e)&&"[object Date]"===w(e)}function S(e){return _(e)&&("[object Error]"===w(e)||e instanceof Error)}function T(e){return"function"==typeof e}function w(e){return Object.prototype.toString.call(e)}t.debuglog=function(r){if(v(i)&&(i=e.env.NODE_DEBUG||""),r=r.toUpperCase(),!o[r])if(new RegExp("\\b"+r+"\\b","i").test(i)){e.pid;o[r]=function(){t.format.apply(t,arguments)}}else o[r]=function(){};return o[r]},t.inspect=s,s.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},s.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.isArray=h,t.isBoolean=d,t.isNull=g,t.isNullOrUndefined=function(e){return null==e},t.isNumber=y,t.isString=m,t.isSymbol=function(e){return"symbol"==typeof e},t.isUndefined=v,t.isRegExp=b,t.isObject=_,t.isDate=A,t.isError=S,t.isFunction=T,t.isPrimitive=function(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||void 0===e},t.isBuffer=r(38);function x(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.log=function(){},t.inherits=r(39),t._extend=function(e,t){if(!t||!_(t))return e;for(var r=Object.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]];return e};var C="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function E(e,t){if(!e){var r=new Error("Promise was rejected with a falsy value");r.reason=e,e=r}return t(e)}t.promisify=function(e){if("function"!=typeof e)throw new TypeError('The "original" argument must be of type Function');if(C&&e[C]){var t;if("function"!=typeof(t=e[C]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(t,C,{value:t,enumerable:!1,writable:!1,configurable:!0}),t}function t(){for(var t,r,n=new Promise((function(e,n){t=e,r=n})),a=[],i=0;i<arguments.length;i++)a.push(arguments[i]);a.push((function(e,n){e?r(e):t(n)}));try{e.apply(this,a)}catch(e){r(e)}return n}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),C&&Object.defineProperty(t,C,{value:t,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(t,n(e))},t.promisify.custom=C,t.callbackify=function(t){if("function"!=typeof t)throw new TypeError('The "original" argument must be of type Function');function r(){for(var r=[],n=0;n<arguments.length;n++)r.push(arguments[n]);var a=r.pop();if("function"!=typeof a)throw new TypeError("The last argument must be of type Function");var i=this,o=function(){return a.apply(i,arguments)};t.apply(this,r).then((function(t){e.nextTick(o,null,t)}),(function(t){e.nextTick(E,t,o)}))}return Object.setPrototypeOf(r,Object.getPrototypeOf(t)),Object.defineProperties(r,n(t)),r}}).call(this,r(9))},function(e,t,r){"use strict";const n=r(22),a=r(42),i=e=>null!==e&&"object"==typeof e&&!Array.isArray(e),o=e=>"number"==typeof e||"string"==typeof e&&""!==e,s=e=>Number.isInteger(+e),u=e=>{let t=""+e,r=-1;if("-"===t[0]&&(t=t.slice(1)),"0"===t)return!1;for(;"0"===t[++r];);return r>0},l=(e,t,r)=>{if(t>0){let r="-"===e[0]?"-":"";r&&(e=e.slice(1)),e=r+e.padStart(r?t-1:t,"0")}return!1===r?String(e):e},c=(e,t)=>{let r="-"===e[0]?"-":"";for(r&&(e=e.slice(1),t--);e.length<t;)e="0"+e;return r?"-"+e:e},p=(e,t,r,n)=>{if(r)return a(e,t,{wrap:!1,...n});let i=String.fromCharCode(e);return e===t?i:`[${i}-${String.fromCharCode(t)}]`},f=(e,t,r)=>{if(Array.isArray(e)){let t=!0===r.wrap,n=r.capture?"":"?:";return t?`(${n}${e.join("|")})`:e.join("|")}return a(e,t,r)},h=(...e)=>new RangeError("Invalid range arguments: "+n.inspect(...e)),d=(e,t,r)=>{if(!0===r.strictRanges)throw h([e,t]);return[]},g=(e,t,r=1,n={})=>{let a=Number(e),i=Number(t);if(!Number.isInteger(a)||!Number.isInteger(i)){if(!0===n.strictRanges)throw h([e,t]);return[]}0===a&&(a=0),0===i&&(i=0);let o=a>i,s=String(e),d=String(t),g=String(r);r=Math.max(Math.abs(r),1);let y=u(s)||u(d)||u(g),m=y?Math.max(s.length,d.length,g.length):0,v=!1===y&&!1===((e,t,r)=>"string"==typeof e||"string"==typeof t||!0===r.stringify)(e,t,n),b=n.transform||(e=>t=>!0===e?Number(t):String(t))(v);if(n.toRegex&&1===r)return p(c(e,m),c(t,m),!0,n);let _={negatives:[],positives:[]},A=[],S=0;for(;o?a>=i:a<=i;)!0===n.toRegex&&r>1?_[(T=a)<0?"negatives":"positives"].push(Math.abs(T)):A.push(l(b(a,S),m,v)),a=o?a-r:a+r,S++;var T;return!0===n.toRegex?r>1?((e,t)=>{e.negatives.sort((e,t)=>e<t?-1:e>t?1:0),e.positives.sort((e,t)=>e<t?-1:e>t?1:0);let r,n=t.capture?"":"?:",a="",i="";return e.positives.length&&(a=e.positives.join("|")),e.negatives.length&&(i=`-(${n}${e.negatives.join("|")})`),r=a&&i?`${a}|${i}`:a||i,t.wrap?`(${n}${r})`:r})(_,n):f(A,null,{wrap:!1,...n}):A},y=(e,t,r,n={})=>{if(null==t&&o(e))return[e];if(!o(e)||!o(t))return d(e,t,n);if("function"==typeof r)return y(e,t,1,{transform:r});if(i(r))return y(e,t,0,r);let a={...n};return!0===a.capture&&(a.wrap=!0),r=r||a.step||1,s(r)?s(e)&&s(t)?g(e,t,r,a):((e,t,r=1,n={})=>{if(!s(e)&&e.length>1||!s(t)&&t.length>1)return d(e,t,n);let a=n.transform||(e=>String.fromCharCode(e)),i=(""+e).charCodeAt(0),o=(""+t).charCodeAt(0),u=i>o,l=Math.min(i,o),c=Math.max(i,o);if(n.toRegex&&1===r)return p(l,c,!1,n);let h=[],g=0;for(;u?i>=o:i<=o;)h.push(a(i,g)),i=u?i-r:i+r,g++;return!0===n.toRegex?f(h,null,{wrap:!1,options:n}):h})(e,t,Math.max(Math.abs(r),1),a):null==r||i(r)?y(e,t,1,r):((e,t)=>{if(!0===t.strictRanges)throw new TypeError(`Expected step "${e}" to be a number`);return[]})(r,a)};e.exports=y},function(e,t,r){"use strict";var n=r(4),a=Array.prototype.forEach,i=Object.create,o=function(e,t){var r;for(r in e)t[r]=e[r]};e.exports=function(e){var t=i(null);return a.call(arguments,(function(e){n(e)&&o(Object(e),t)})),t}},function(e,t,r){"use strict";var n=r(5);e.exports=function(e,t,r){var a;return isNaN(e)?(a=t)>=0?r&&a?a-1:a:1:!1!==e&&n(e)}},function(e,t,r){"use strict";e.exports=r(60)()?Object.assign:r(61)},function(e,t,r){"use strict";var n,a,i,o,s,u=r(5),l=function(e,t){return t};try{Object.defineProperty(l,"length",{configurable:!0,writable:!1,enumerable:!1,value:1})}catch(e){}1===l.length?(n={configurable:!0,writable:!1,enumerable:!1},a=Object.defineProperty,e.exports=function(e,t){return t=u(t),e.length===t?e:(n.value=t,a(e,"length",n))}):(o=r(28),s=[],i=function(e){var t,r=0;if(s[e])return s[e];for(t=[];e--;)t.push("a"+(++r).toString(36));return new Function("fn","return function ("+t.join(", ")+") { return fn.apply(this, arguments); };")},e.exports=function(e,t){var r;if(t=u(t),e.length===t)return e;r=i(t)(e);try{o(r,e)}catch(e){}return r})},function(e,t,r){"use strict";var n=r(8),a=Object.defineProperty,i=Object.getOwnPropertyDescriptor,o=Object.getOwnPropertyNames,s=Object.getOwnPropertySymbols;e.exports=function(e,t){var r,u=Object(n(t));if(e=Object(n(e)),o(u).forEach((function(n){try{a(e,n,i(t,n))}catch(e){r=e}})),"function"==typeof s&&s(u).forEach((function(n){try{a(e,n,i(t,n))}catch(e){r=e}})),void 0!==r)throw r;return e}},function(e,t,r){"use strict";e.exports=function(e){return null!=e}},function(e,t,r){"use strict";var n=r(83);e.exports=function(e){if(!n(e))throw new TypeError(e+" is not a symbol");return e}},function(e,t,r){"use strict";var n=r(3),a=r(12),i=Function.prototype.call;e.exports=function(e,t){var r={},o=arguments[2];return n(t),a(e,(function(e,n,a,s){r[n]=i.call(t,o,e,n,a,s)})),r}},function(e,t){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(e){"object"==typeof window&&(r=window)}e.exports=r},function(e,t,r){"use strict";e.exports=function(e){return"function"==typeof e}},function(e,t){function r(e){return!!e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof e.then}e.exports=r,e.exports.default=r},function(e,t,r){"use strict";const n=r(22),a=r(40),i=r(47),o=r(10),s=e=>""===e||"./"===e,u=(e,t,r)=>{t=[].concat(t),e=[].concat(e);let n=new Set,a=new Set,o=new Set,s=0,u=e=>{o.add(e.output),r&&r.onResult&&r.onResult(e)};for(let o=0;o<t.length;o++){let l=i(String(t[o]),{...r,onResult:u},!0),c=l.state.negated||l.state.negatedExtglob;c&&s++;for(let t of e){let e=l(t,!0);(c?!e.isMatch:e.isMatch)&&(c?n.add(e.output):(n.delete(e.output),a.add(e.output)))}}let l=(s===t.length?[...o]:[...a]).filter(e=>!n.has(e));if(r&&0===l.length){if(!0===r.failglob)throw new Error(`No matches found for "${t.join(", ")}"`);if(!0===r.nonull||!0===r.nullglob)return r.unescape?t.map(e=>e.replace(/\\/g,"")):t}return l};u.match=u,u.matcher=(e,t)=>i(e,t),u.any=u.isMatch=(e,t,r)=>i(t,r)(e),u.not=(e,t,r={})=>{t=[].concat(t).map(String);let n=new Set,a=[],i=new Set(u(e,t,{...r,onResult:e=>{r.onResult&&r.onResult(e),a.push(e.output)}}));for(let e of a)i.has(e)||n.add(e);return[...n]},u.contains=(e,t,r)=>{if("string"!=typeof e)throw new TypeError(`Expected a string: "${n.inspect(e)}"`);if(Array.isArray(t))return t.some(t=>u.contains(e,t,r));if("string"==typeof t){if(s(e)||s(t))return!1;if(e.includes(t)||e.startsWith("./")&&e.slice(2).includes(t))return!0}return u.isMatch(e,t,{...r,contains:!0})},u.matchKeys=(e,t,r)=>{if(!o.isObject(e))throw new TypeError("Expected the first argument to be an object");let n=u(Object.keys(e),t,r),a={};for(let t of n)a[t]=e[t];return a},u.some=(e,t,r)=>{let n=[].concat(e);for(let e of[].concat(t)){let t=i(String(e),r);if(n.some(e=>t(e)))return!0}return!1},u.every=(e,t,r)=>{let n=[].concat(e);for(let e of[].concat(t)){let t=i(String(e),r);if(!n.every(e=>t(e)))return!1}return!0},u.all=(e,t,r)=>{if("string"!=typeof e)throw new TypeError(`Expected a string: "${n.inspect(e)}"`);return[].concat(t).every(t=>i(t,r)(e))},u.capture=(e,t,r)=>{let n=o.isWindows(r),a=i.makeRe(String(e),{...r,capture:!0}).exec(n?o.toPosixSlashes(t):t);if(a)return a.slice(1).map(e=>void 0===e?"":e)},u.makeRe=(...e)=>i.makeRe(...e),u.scan=(...e)=>i.scan(...e),u.parse=(e,t)=>{let r=[];for(let n of[].concat(e||[]))for(let e of a(String(n),t))r.push(i.parse(e,t));return r},u.braces=(e,t)=>{if("string"!=typeof e)throw new TypeError("Expected a string");return t&&!0===t.nobrace||!/\{.*\}/.test(e)?[e]:a(e,t)},u.braceExpand=(e,t)=>{if("string"!=typeof e)throw new TypeError("Expected a string");return u.braces(e,{...t,expand:!0})},e.exports=u},function(e,t,r){"use strict";var n=r(24),a=r(25),i=r(56);e.exports=function(e){var t,o=n(arguments[1]);return o.normalizer||0!==(t=o.length=a(o.length,e.length,o.async))&&(o.primitive?!1===t?o.normalizer=r(91):t>1&&(o.normalizer=r(92)(t)):o.normalizer=!1===t?r(93)():1===t?r(97)():r(98)(t)),o.async&&r(99),o.promise&&r(102),o.dispose&&r(108),o.maxAge&&r(109),o.max&&r(112),o.refCounter&&r(114),i(e,o)}},function(e,t){e.exports=a},function(e,t){e.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},function(e,t){"function"==typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}},function(e,t,r){"use strict";const n=r(14),a=r(41),i=r(44),o=r(45),s=(e,t={})=>{let r=[];if(Array.isArray(e))for(let n of e){let e=s.create(n,t);Array.isArray(e)?r.push(...e):r.push(e)}else r=[].concat(s.create(e,t));return t&&!0===t.expand&&!0===t.nodupes&&(r=[...new Set(r)]),r};s.parse=(e,t={})=>o(e,t),s.stringify=(e,t={})=>n("string"==typeof e?s.parse(e,t):e,t),s.compile=(e,t={})=>("string"==typeof e&&(e=s.parse(e,t)),a(e,t)),s.expand=(e,t={})=>{"string"==typeof e&&(e=s.parse(e,t));let r=i(e,t);return!0===t.noempty&&(r=r.filter(Boolean)),!0===t.nodupes&&(r=[...new Set(r)]),r},s.create=(e,t={})=>""===e||e.length<3?[e]:!0!==t.expand?s.compile(e,t):s.expand(e,t),e.exports=s},function(e,t,r){"use strict";const n=r(23),a=r(15);e.exports=(e,t={})=>{let r=(e,i={})=>{let o=a.isInvalidBrace(i),s=!0===e.invalid&&!0===t.escapeInvalid,u=!0===o||!0===s,l=!0===t.escapeInvalid?"\\":"",c="";if(!0===e.isOpen)return l+e.value;if(!0===e.isClose)return l+e.value;if("open"===e.type)return u?l+e.value:"(";if("close"===e.type)return u?l+e.value:")";if("comma"===e.type)return"comma"===e.prev.type?"":u?e.value:"|";if(e.value)return e.value;if(e.nodes&&e.ranges>0){let r=a.reduce(e.nodes),i=n(...r,{...t,wrap:!1,toRegex:!0});if(0!==i.length)return r.length>1&&i.length>1?`(${i})`:i}if(e.nodes)for(let t of e.nodes)c+=r(t,e);return c};return r(e)}},function(e,t,r){"use strict";const n=r(43),a=(e,t,r)=>{if(!1===n(e))throw new TypeError("toRegexRange: expected the first argument to be a number");if(void 0===t||e===t)return String(e);if(!1===n(t))throw new TypeError("toRegexRange: expected the second argument to be a number.");let i={relaxZeros:!0,...r};"boolean"==typeof i.strictZeros&&(i.relaxZeros=!1===i.strictZeros);let u=e+":"+t+"="+String(i.relaxZeros)+String(i.shorthand)+String(i.capture)+String(i.wrap);if(a.cache.hasOwnProperty(u))return a.cache[u].result;let l=Math.min(e,t),c=Math.max(e,t);if(1===Math.abs(l-c)){let r=e+"|"+t;return i.capture?`(${r})`:!1===i.wrap?r:`(?:${r})`}let p=d(e)||d(t),f={min:e,max:t,a:l,b:c},h=[],g=[];if(p&&(f.isPadded=p,f.maxLen=String(f.max).length),l<0){g=o(c<0?Math.abs(c):1,Math.abs(l),f,i),l=f.a=0}return c>=0&&(h=o(l,c,f,i)),f.negatives=g,f.positives=h,f.result=function(e,t,r){let n=s(e,t,"-",!1,r)||[],a=s(t,e,"",!1,r)||[],i=s(e,t,"-?",!0,r)||[];return n.concat(i).concat(a).join("|")}(g,h,i),!0===i.capture?f.result=`(${f.result})`:!1!==i.wrap&&h.length+g.length>1&&(f.result=`(?:${f.result})`),a.cache[u]=f,f.result};function i(e,t,r){if(e===t)return{pattern:e,count:[],digits:0};let n=function(e,t){let r=[];for(let n=0;n<e.length;n++)r.push([e[n],t[n]]);return r}(e,t),a=n.length,i="",o=0;for(let e=0;e<a;e++){let[t,a]=n[e];t===a?i+=t:"0"!==t||"9"!==a?i+=h(t,a,r):o++}return o&&(i+=!0===r.shorthand?"\\d":"[0-9]"),{pattern:i,count:[o],digits:a}}function o(e,t,r,n){let a,o=function(e,t){let r=1,n=1,a=c(e,r),i=new Set([t]);for(;e<=a&&a<=t;)i.add(a),r+=1,a=c(e,r);for(a=p(t+1,n)-1;e<a&&a<=t;)i.add(a),n+=1,a=p(t+1,n)-1;return i=[...i],i.sort(u),i}(e,t),s=[],l=e;for(let e=0;e<o.length;e++){let t=o[e],u=i(String(l),String(t),n),c="";r.isPadded||!a||a.pattern!==u.pattern?(r.isPadded&&(c=g(t,r,n)),u.string=c+u.pattern+f(u.count),s.push(u),l=t+1,a=u):(a.count.length>1&&a.count.pop(),a.count.push(u.count[0]),a.string=a.pattern+f(a.count),l=t+1)}return s}function s(e,t,r,n,a){let i=[];for(let a of e){let{string:e}=a;n||l(t,"string",e)||i.push(r+e),n&&l(t,"string",e)&&i.push(r+e)}return i}function u(e,t){return e>t?1:t>e?-1:0}function l(e,t,r){return e.some(e=>e[t]===r)}function c(e,t){return Number(String(e).slice(0,-t)+"9".repeat(t))}function p(e,t){return e-e%Math.pow(10,t)}function f(e){let[t=0,r=""]=e;return r||t>1?`{${t+(r?","+r:"")}}`:""}function h(e,t,r){return`[${e}${t-e==1?"":"-"}${t}]`}function d(e){return/^-?(0+)\d/.test(e)}function g(e,t,r){if(!t.isPadded)return e;let n=Math.abs(t.maxLen-String(e).length),a=!1!==r.relaxZeros;switch(n){case 0:return"";case 1:return a?"0?":"0";case 2:return a?"0{0,2}":"00";default:return a?`0{0,${n}}`:`0{${n}}`}}a.cache={},a.clearCache=()=>a.cache={},e.exports=a},function(e,t,r){"use strict";e.exports=function(e){return"number"==typeof e?e-e==0:"string"==typeof e&&""!==e.trim()&&(Number.isFinite?Number.isFinite(+e):isFinite(+e))}},function(e,t,r){"use strict";const n=r(23),a=r(14),i=r(15),o=(e="",t="",r=!1)=>{let n=[];if(e=[].concat(e),!(t=[].concat(t)).length)return e;if(!e.length)return r?i.flatten(t).map(e=>`{${e}}`):t;for(let a of e)if(Array.isArray(a))for(let e of a)n.push(o(e,t,r));else for(let e of t)!0===r&&"string"==typeof e&&(e=`{${e}}`),n.push(Array.isArray(e)?o(a,e,r):a+e);return i.flatten(n)};e.exports=(e,t={})=>{let r=void 0===t.rangeLimit?1e3:t.rangeLimit,s=(e,u={})=>{e.queue=[];let l=u,c=u.queue;for(;"brace"!==l.type&&"root"!==l.type&&l.parent;)l=l.parent,c=l.queue;if(e.invalid||e.dollar)return void c.push(o(c.pop(),a(e,t)));if("brace"===e.type&&!0!==e.invalid&&2===e.nodes.length)return void c.push(o(c.pop(),["{}"]));if(e.nodes&&e.ranges>0){let s=i.reduce(e.nodes);if(i.exceedsLimit(...s,t.step,r))throw new RangeError("expanded array length exceeds range limit. Use options.rangeLimit to increase or disable the limit.");let u=n(...s,t);return 0===u.length&&(u=a(e,t)),c.push(o(c.pop(),u)),void(e.nodes=[])}let p=i.encloseBrace(e),f=e.queue,h=e;for(;"brace"!==h.type&&"root"!==h.type&&h.parent;)h=h.parent,f=h.queue;for(let t=0;t<e.nodes.length;t++){let r=e.nodes[t];"comma"!==r.type||"brace"!==e.type?"close"!==r.type?r.value&&"open"!==r.type?f.push(o(f.pop(),r.value)):r.nodes&&s(r,e):c.push(o(c.pop(),f,p)):(1===t&&f.push(""),f.push(""))}return f};return i.flatten(s(e))}},function(e,t,r){"use strict";const n=r(14),{MAX_LENGTH:a,CHAR_BACKSLASH:i,CHAR_BACKTICK:o,CHAR_COMMA:s,CHAR_DOT:u,CHAR_LEFT_PARENTHESES:l,CHAR_RIGHT_PARENTHESES:c,CHAR_LEFT_CURLY_BRACE:p,CHAR_RIGHT_CURLY_BRACE:f,CHAR_LEFT_SQUARE_BRACKET:h,CHAR_RIGHT_SQUARE_BRACKET:d,CHAR_DOUBLE_QUOTE:g,CHAR_SINGLE_QUOTE:y,CHAR_NO_BREAK_SPACE:m,CHAR_ZERO_WIDTH_NOBREAK_SPACE:v}=r(46);e.exports=(e,t={})=>{if("string"!=typeof e)throw new TypeError("Expected a string");let r=t||{},b="number"==typeof r.maxLength?Math.min(a,r.maxLength):a;if(e.length>b)throw new SyntaxError(`Input length (${e.length}), exceeds max characters (${b})`);let _,A={type:"root",input:e,nodes:[]},S=[A],T=A,w=A,x=0,C=e.length,E=0,R=0;const O=()=>e[E++],q=e=>{if("text"===e.type&&"dot"===w.type&&(w.type="text"),!w||"text"!==w.type||"text"!==e.type)return T.nodes.push(e),e.parent=T,e.prev=w,w=e,e;w.value+=e.value};for(q({type:"bos"});E<C;)if(T=S[S.length-1],_=O(),_!==v&&_!==m)if(_!==i)if(_!==d)if(_!==h)if(_!==l)if(_!==c)if(_!==g&&_!==y&&_!==o)if(_!==p)if(_!==f)if(_===s&&R>0){if(T.ranges>0){T.ranges=0;let e=T.nodes.shift();T.nodes=[e,{type:"text",value:n(T)}]}q({type:"comma",value:_}),T.commas++}else if(_===u&&R>0&&0===T.commas){let e=T.nodes;if(0===R||0===e.length){q({type:"text",value:_});continue}if("dot"===w.type){if(T.range=[],w.value+=_,w.type="range",3!==T.nodes.length&&5!==T.nodes.length){T.invalid=!0,T.ranges=0,w.type="text";continue}T.ranges++,T.args=[];continue}if("range"===w.type){e.pop();let t=e[e.length-1];t.value+=w.value+_,w=t,T.ranges--;continue}q({type:"dot",value:_})}else q({type:"text",value:_});else{if("brace"!==T.type){q({type:"text",value:_});continue}let e="close";T=S.pop(),T.close=!0,q({type:e,value:_}),R--,T=S[S.length-1]}else{R++;let e=w.value&&"$"===w.value.slice(-1)||!0===T.dollar;T=q({type:"brace",open:!0,close:!1,dollar:e,depth:R,commas:0,ranges:0,nodes:[]}),S.push(T),q({type:"open",value:_})}else{let e,r=_;for(!0!==t.keepQuotes&&(_="");E<C&&(e=O());)if(e!==i){if(e===r){!0===t.keepQuotes&&(_+=e);break}_+=e}else _+=e+O();q({type:"text",value:_})}else{if("paren"!==T.type){q({type:"text",value:_});continue}T=S.pop(),q({type:"text",value:_}),T=S[S.length-1]}else T=q({type:"paren",nodes:[]}),S.push(T),q({type:"text",value:_});else{x++;let e;for(;E<C&&(e=O());)if(_+=e,e!==h)if(e!==i){if(e===d&&(x--,0===x))break}else _+=O();else x++;q({type:"text",value:_})}else q({type:"text",value:"\\"+_});else q({type:"text",value:(t.keepEscaping?_:"")+O()});do{if(T=S.pop(),"root"!==T.type){T.nodes.forEach(e=>{e.nodes||("open"===e.type&&(e.isOpen=!0),"close"===e.type&&(e.isClose=!0),e.nodes||(e.type="text"),e.invalid=!0)});let e=S[S.length-1],t=e.nodes.indexOf(T);e.nodes.splice(t,1,...T.nodes)}}while(S.length>0);return q({type:"eos"}),A}},function(e,t,r){"use strict";e.exports={MAX_LENGTH:65536,CHAR_0:"0",CHAR_9:"9",CHAR_UPPERCASE_A:"A",CHAR_LOWERCASE_A:"a",CHAR_UPPERCASE_Z:"Z",CHAR_LOWERCASE_Z:"z",CHAR_LEFT_PARENTHESES:"(",CHAR_RIGHT_PARENTHESES:")",CHAR_ASTERISK:"*",CHAR_AMPERSAND:"&",CHAR_AT:"@",CHAR_BACKSLASH:"\\",CHAR_BACKTICK:"`",CHAR_CARRIAGE_RETURN:"\r",CHAR_CIRCUMFLEX_ACCENT:"^",CHAR_COLON:":",CHAR_COMMA:",",CHAR_DOLLAR:"$",CHAR_DOT:".",CHAR_DOUBLE_QUOTE:'"',CHAR_EQUAL:"=",CHAR_EXCLAMATION_MARK:"!",CHAR_FORM_FEED:"\f",CHAR_FORWARD_SLASH:"/",CHAR_HASH:"#",CHAR_HYPHEN_MINUS:"-",CHAR_LEFT_ANGLE_BRACKET:"<",CHAR_LEFT_CURLY_BRACE:"{",CHAR_LEFT_SQUARE_BRACKET:"[",CHAR_LINE_FEED:"\n",CHAR_NO_BREAK_SPACE:" ",CHAR_PERCENT:"%",CHAR_PLUS:"+",CHAR_QUESTION_MARK:"?",CHAR_RIGHT_ANGLE_BRACKET:">",CHAR_RIGHT_CURLY_BRACE:"}",CHAR_RIGHT_SQUARE_BRACKET:"]",CHAR_SEMICOLON:";",CHAR_SINGLE_QUOTE:"'",CHAR_SPACE:" ",CHAR_TAB:"\t",CHAR_UNDERSCORE:"_",CHAR_VERTICAL_LINE:"|",CHAR_ZERO_WIDTH_NOBREAK_SPACE:"\ufeff"}},function(e,t,r){"use strict";e.exports=r(48)},function(e,t,r){"use strict";const n=r(16),a=r(49),i=r(50),o=r(10),s=r(11),u=(e,t,r=!1)=>{if(Array.isArray(e)){const n=e.map(e=>u(e,t,r));return e=>{for(const t of n){const r=t(e);if(r)return r}return!1}}const n=(a=e)&&"object"==typeof a&&!Array.isArray(a)&&e.tokens&&e.input;var a;if(""===e||"string"!=typeof e&&!n)throw new TypeError("Expected pattern to be a non-empty string");const i=t||{},s=o.isWindows(t),l=n?u.compileRe(e,t):u.makeRe(e,t,!1,!0),c=l.state;delete l.state;let p=()=>!1;if(i.ignore){const e={...t,ignore:null,onMatch:null,onResult:null};p=u(i.ignore,e,r)}const f=(r,n=!1)=>{const{isMatch:a,match:o,output:f}=u.test(r,l,t,{glob:e,posix:s}),h={glob:e,state:c,regex:l,posix:s,input:r,output:f,match:o,isMatch:a};return"function"==typeof i.onResult&&i.onResult(h),!1===a?(h.isMatch=!1,!!n&&h):p(r)?("function"==typeof i.onIgnore&&i.onIgnore(h),h.isMatch=!1,!!n&&h):("function"==typeof i.onMatch&&i.onMatch(h),!n||h)};return r&&(f.state=c),f};u.test=(e,t,r,{glob:n,posix:a}={})=>{if("string"!=typeof e)throw new TypeError("Expected input to be a string");if(""===e)return{isMatch:!1,output:""};const i=r||{},s=i.format||(a?o.toPosixSlashes:null);let l=e===n,c=l&&s?s(e):e;return!1===l&&(c=s?s(e):e,l=c===n),!1!==l&&!0!==i.capture||(l=!0===i.matchBase||!0===i.basename?u.matchBase(e,t,r,a):t.exec(c)),{isMatch:Boolean(l),match:l,output:c}},u.matchBase=(e,t,r,a=o.isWindows(r))=>(t instanceof RegExp?t:u.makeRe(t,r)).test(n.basename(e)),u.isMatch=(e,t,r)=>u(t,r)(e),u.parse=(e,t)=>Array.isArray(e)?e.map(e=>u.parse(e,t)):i(e,{...t,fastpaths:!1}),u.scan=(e,t)=>a(e,t),u.compileRe=(e,t,r=!1,n=!1)=>{if(!0===r)return e.output;const a=t||{},i=a.contains?"":"^",o=a.contains?"":"$";let s=`${i}(?:${e.output})${o}`;e&&!0===e.negated&&(s=`^(?!${s}).*$`);const l=u.toRegex(s,t);return!0===n&&(l.state=e),l},u.makeRe=(e,t={},r=!1,n=!1)=>{if(!e||"string"!=typeof e)throw new TypeError("Expected a non-empty string");let a={negated:!1,fastpaths:!0};return!1===t.fastpaths||"."!==e[0]&&"*"!==e[0]||(a.output=i.fastpaths(e,t)),a.output||(a=i(e,t)),u.compileRe(a,t,r,n)},u.toRegex=(e,t)=>{try{const r=t||{};return new RegExp(e,r.flags||(r.nocase?"i":""))}catch(e){if(t&&!0===t.debug)throw e;return/$^/}},u.constants=s,e.exports=u},function(e,t,r){"use strict";const n=r(10),{CHAR_ASTERISK:a,CHAR_AT:i,CHAR_BACKWARD_SLASH:o,CHAR_COMMA:s,CHAR_DOT:u,CHAR_EXCLAMATION_MARK:l,CHAR_FORWARD_SLASH:c,CHAR_LEFT_CURLY_BRACE:p,CHAR_LEFT_PARENTHESES:f,CHAR_LEFT_SQUARE_BRACKET:h,CHAR_PLUS:d,CHAR_QUESTION_MARK:g,CHAR_RIGHT_CURLY_BRACE:y,CHAR_RIGHT_PARENTHESES:m,CHAR_RIGHT_SQUARE_BRACKET:v}=r(11),b=e=>e===c||e===o,_=e=>{!0!==e.isPrefix&&(e.depth=e.isGlobstar?1/0:1)};e.exports=(e,t)=>{const r=t||{},A=e.length-1,S=!0===r.parts||!0===r.scanToEnd,T=[],w=[],x=[];let C,E,R=e,O=-1,q=0,k=0,M=!1,N=!1,P=!1,L=!1,I=!1,j=!1,D=!1,H=!1,$=!1,F=!1,Q=0,G={value:"",depth:0,isGlob:!1};const U=()=>O>=A,V=()=>(C=E,R.charCodeAt(++O));for(;O<A;){let e;if(E=V(),E!==o){if(!0===j||E===p){for(Q++;!0!==U()&&(E=V());)if(E!==o)if(E!==p){if(!0!==j&&E===u&&(E=V())===u){if(M=G.isBrace=!0,P=G.isGlob=!0,F=!0,!0===S)continue;break}if(!0!==j&&E===s){if(M=G.isBrace=!0,P=G.isGlob=!0,F=!0,!0===S)continue;break}if(E===y&&(Q--,0===Q)){j=!1,M=G.isBrace=!0,F=!0;break}}else Q++;else D=G.backslashes=!0,V();if(!0===S)continue;break}if(E!==c){if(!0!==r.noext){if(!0===(E===d||E===i||E===a||E===g||E===l)&&R.charCodeAt(O+1)===f){if(P=G.isGlob=!0,L=G.isExtglob=!0,F=!0,E===l&&O===q&&($=!0),!0===S){for(;!0!==U()&&(E=V());)if(E!==o){if(E===m){P=G.isGlob=!0,F=!0;break}}else D=G.backslashes=!0,E=V();continue}break}}if(E===a){if(C===a&&(I=G.isGlobstar=!0),P=G.isGlob=!0,F=!0,!0===S)continue;break}if(E===g){if(P=G.isGlob=!0,F=!0,!0===S)continue;break}if(E===h){for(;!0!==U()&&(e=V());)if(e!==o){if(e===v){N=G.isBracket=!0,P=G.isGlob=!0,F=!0;break}}else D=G.backslashes=!0,V();if(!0===S)continue;break}if(!0===r.nonegate||E!==l||O!==q){if(!0!==r.noparen&&E===f){if(P=G.isGlob=!0,!0===S){for(;!0!==U()&&(E=V());)if(E!==f){if(E===m){F=!0;break}}else D=G.backslashes=!0,E=V();continue}break}if(!0===P){if(F=!0,!0===S)continue;break}}else H=G.negated=!0,q++}else{if(T.push(O),w.push(G),G={value:"",depth:0,isGlob:!1},!0===F)continue;if(C===u&&O===q+1){q+=2;continue}k=O+1}}else D=G.backslashes=!0,E=V(),E===p&&(j=!0)}!0===r.noext&&(L=!1,P=!1);let B=R,z="",K="";q>0&&(z=R.slice(0,q),R=R.slice(q),k-=q),B&&!0===P&&k>0?(B=R.slice(0,k),K=R.slice(k)):!0===P?(B="",K=R):B=R,B&&""!==B&&"/"!==B&&B!==R&&b(B.charCodeAt(B.length-1))&&(B=B.slice(0,-1)),!0===r.unescape&&(K&&(K=n.removeBackslashes(K)),B&&!0===D&&(B=n.removeBackslashes(B)));const W={prefix:z,input:e,start:q,base:B,glob:K,isBrace:M,isBracket:N,isGlob:P,isExtglob:L,isGlobstar:I,negated:H,negatedExtglob:$};if(!0===r.tokens&&(W.maxDepth=0,b(E)||w.push(G),W.tokens=w),!0===r.parts||!0===r.tokens){let t;for(let n=0;n<T.length;n++){const a=t?t+1:q,i=T[n],o=e.slice(a,i);r.tokens&&(0===n&&0!==q?(w[n].isPrefix=!0,w[n].value=z):w[n].value=o,_(w[n]),W.maxDepth+=w[n].depth),0===n&&""===o||x.push(o),t=i}if(t&&t+1<e.length){const n=e.slice(t+1);x.push(n),r.tokens&&(w[w.length-1].value=n,_(w[w.length-1]),W.maxDepth+=w[w.length-1].depth)}W.slashes=T,W.parts=x}return W}},function(e,t,r){"use strict";const n=r(11),a=r(10),{MAX_LENGTH:i,POSIX_REGEX_SOURCE:o,REGEX_NON_SPECIAL_CHARS:s,REGEX_SPECIAL_CHARS_BACKREF:u,REPLACEMENTS:l}=n,c=(e,t)=>{if("function"==typeof t.expandRange)return t.expandRange(...e,t);e.sort();const r=`[${e.join("-")}]`;try{new RegExp(r)}catch(t){return e.map(e=>a.escapeRegex(e)).join("..")}return r},p=(e,t)=>`Missing ${e}: "${t}" - use "\\\\${t}" to match literal characters`,f=(e,t)=>{if("string"!=typeof e)throw new TypeError("Expected a string");e=l[e]||e;const r={...t},h="number"==typeof r.maxLength?Math.min(i,r.maxLength):i;let d=e.length;if(d>h)throw new SyntaxError(`Input length: ${d}, exceeds maximum allowed length: ${h}`);const g={type:"bos",value:"",output:r.prepend||""},y=[g],m=r.capture?"":"?:",v=a.isWindows(t),b=n.globChars(v),_=n.extglobChars(b),{DOT_LITERAL:A,PLUS_LITERAL:S,SLASH_LITERAL:T,ONE_CHAR:w,DOTS_SLASH:x,NO_DOT:C,NO_DOT_SLASH:E,NO_DOTS_SLASH:R,QMARK:O,QMARK_NO_DOT:q,STAR:k,START_ANCHOR:M}=b,N=e=>`(${m}(?:(?!${M}${e.dot?x:A}).)*?)`,P=r.dot?"":C,L=r.dot?O:q;let I=!0===r.bash?N(r):k;r.capture&&(I=`(${I})`),"boolean"==typeof r.noext&&(r.noextglob=r.noext);const j={input:e,index:-1,start:0,dot:!0===r.dot,consumed:"",output:"",prefix:"",backtrack:!1,negated:!1,brackets:0,braces:0,parens:0,quotes:0,globstar:!1,tokens:y};e=a.removePrefix(e,j),d=e.length;const D=[],H=[],$=[];let F,Q=g;const G=()=>j.index===d-1,U=j.peek=(t=1)=>e[j.index+t],V=j.advance=()=>e[++j.index]||"",B=()=>e.slice(j.index+1),z=(e="",t=0)=>{j.consumed+=e,j.index+=t},K=e=>{j.output+=null!=e.output?e.output:e.value,z(e.value)},W=()=>{let e=1;for(;"!"===U()&&("("!==U(2)||"?"===U(3));)V(),j.start++,e++;return e%2!=0&&(j.negated=!0,j.start++,!0)},X=e=>{j[e]++,$.push(e)},J=e=>{j[e]--,$.pop()},Z=e=>{if("globstar"===Q.type){const t=j.braces>0&&("comma"===e.type||"brace"===e.type),r=!0===e.extglob||D.length&&("pipe"===e.type||"paren"===e.type);"slash"===e.type||"paren"===e.type||t||r||(j.output=j.output.slice(0,-Q.output.length),Q.type="star",Q.value="*",Q.output=I,j.output+=Q.output)}if(D.length&&"paren"!==e.type&&(D[D.length-1].inner+=e.value),(e.value||e.output)&&K(e),Q&&"text"===Q.type&&"text"===e.type)return Q.value+=e.value,void(Q.output=(Q.output||"")+e.value);e.prev=Q,y.push(e),Q=e},Y=(e,t)=>{const n={..._[t],conditions:1,inner:""};n.prev=Q,n.parens=j.parens,n.output=j.output;const a=(r.capture?"(":"")+n.open;X("parens"),Z({type:e,value:t,output:j.output?"":w}),Z({type:"paren",extglob:!0,value:V(),output:a}),D.push(n)},ee=e=>{let n,a=e.close+(r.capture?")":"");if("negate"===e.type){let i=I;if(e.inner&&e.inner.length>1&&e.inner.includes("/")&&(i=N(r)),(i!==I||G()||/^\)+$/.test(B()))&&(a=e.close=")$))"+i),e.inner.includes("*")&&(n=B())&&/^\.[^\\/.]+$/.test(n)){const r=f(n,{...t,fastpaths:!1}).output;a=e.close=`)${r})${i})`}"bos"===e.prev.type&&(j.negatedExtglob=!0)}Z({type:"paren",extglob:!0,value:F,output:a}),J("parens")};if(!1!==r.fastpaths&&!/(^[*!]|[/()[\]{}"])/.test(e)){let n=!1,i=e.replace(u,(e,t,r,a,i,o)=>"\\"===a?(n=!0,e):"?"===a?t?t+a+(i?O.repeat(i.length):""):0===o?L+(i?O.repeat(i.length):""):O.repeat(r.length):"."===a?A.repeat(r.length):"*"===a?t?t+a+(i?I:""):I:t?e:"\\"+e);return!0===n&&(i=!0===r.unescape?i.replace(/\\/g,""):i.replace(/\\+/g,e=>e.length%2==0?"\\\\":e?"\\":"")),i===e&&!0===r.contains?(j.output=e,j):(j.output=a.wrapOutput(i,j,t),j)}for(;!G();){if(F=V(),"\0"===F)continue;if("\\"===F){const e=U();if("/"===e&&!0!==r.bash)continue;if("."===e||";"===e)continue;if(!e){F+="\\",Z({type:"text",value:F});continue}const t=/^\\+/.exec(B());let n=0;if(t&&t[0].length>2&&(n=t[0].length,j.index+=n,n%2!=0&&(F+="\\")),!0===r.unescape?F=V():F+=V(),0===j.brackets){Z({type:"text",value:F});continue}}if(j.brackets>0&&("]"!==F||"["===Q.value||"[^"===Q.value)){if(!1!==r.posix&&":"===F){const e=Q.value.slice(1);if(e.includes("[")&&(Q.posix=!0,e.includes(":"))){const e=Q.value.lastIndexOf("["),t=Q.value.slice(0,e),r=Q.value.slice(e+2),n=o[r];if(n){Q.value=t+n,j.backtrack=!0,V(),g.output||1!==y.indexOf(Q)||(g.output=w);continue}}}("["===F&&":"!==U()||"-"===F&&"]"===U())&&(F="\\"+F),"]"!==F||"["!==Q.value&&"[^"!==Q.value||(F="\\"+F),!0===r.posix&&"!"===F&&"["===Q.value&&(F="^"),Q.value+=F,K({value:F});continue}if(1===j.quotes&&'"'!==F){F=a.escapeRegex(F),Q.value+=F,K({value:F});continue}if('"'===F){j.quotes=1===j.quotes?0:1,!0===r.keepQuotes&&Z({type:"text",value:F});continue}if("("===F){X("parens"),Z({type:"paren",value:F});continue}if(")"===F){if(0===j.parens&&!0===r.strictBrackets)throw new SyntaxError(p("opening","("));const e=D[D.length-1];if(e&&j.parens===e.parens+1){ee(D.pop());continue}Z({type:"paren",value:F,output:j.parens?")":"\\)"}),J("parens");continue}if("["===F){if(!0!==r.nobracket&&B().includes("]"))X("brackets");else{if(!0!==r.nobracket&&!0===r.strictBrackets)throw new SyntaxError(p("closing","]"));F="\\"+F}Z({type:"bracket",value:F});continue}if("]"===F){if(!0===r.nobracket||Q&&"bracket"===Q.type&&1===Q.value.length){Z({type:"text",value:F,output:"\\"+F});continue}if(0===j.brackets){if(!0===r.strictBrackets)throw new SyntaxError(p("opening","["));Z({type:"text",value:F,output:"\\"+F});continue}J("brackets");const e=Q.value.slice(1);if(!0===Q.posix||"^"!==e[0]||e.includes("/")||(F="/"+F),Q.value+=F,K({value:F}),!1===r.literalBrackets||a.hasRegexChars(e))continue;const t=a.escapeRegex(Q.value);if(j.output=j.output.slice(0,-Q.value.length),!0===r.literalBrackets){j.output+=t,Q.value=t;continue}Q.value=`(${m}${t}|${Q.value})`,j.output+=Q.value;continue}if("{"===F&&!0!==r.nobrace){X("braces");const e={type:"brace",value:F,output:"(",outputIndex:j.output.length,tokensIndex:j.tokens.length};H.push(e),Z(e);continue}if("}"===F){const e=H[H.length-1];if(!0===r.nobrace||!e){Z({type:"text",value:F,output:F});continue}let t=")";if(!0===e.dots){const e=y.slice(),n=[];for(let t=e.length-1;t>=0&&(y.pop(),"brace"!==e[t].type);t--)"dots"!==e[t].type&&n.unshift(e[t].value);t=c(n,r),j.backtrack=!0}if(!0!==e.comma&&!0!==e.dots){const r=j.output.slice(0,e.outputIndex),n=j.tokens.slice(e.tokensIndex);e.value=e.output="\\{",F=t="\\}",j.output=r;for(const e of n)j.output+=e.output||e.value}Z({type:"brace",value:F,output:t}),J("braces"),H.pop();continue}if("|"===F){D.length>0&&D[D.length-1].conditions++,Z({type:"text",value:F});continue}if(","===F){let e=F;const t=H[H.length-1];t&&"braces"===$[$.length-1]&&(t.comma=!0,e="|"),Z({type:"comma",value:F,output:e});continue}if("/"===F){if("dot"===Q.type&&j.index===j.start+1){j.start=j.index+1,j.consumed="",j.output="",y.pop(),Q=g;continue}Z({type:"slash",value:F,output:T});continue}if("."===F){if(j.braces>0&&"dot"===Q.type){"."===Q.value&&(Q.output=A);const e=H[H.length-1];Q.type="dots",Q.output+=F,Q.value+=F,e.dots=!0;continue}if(j.braces+j.parens===0&&"bos"!==Q.type&&"slash"!==Q.type){Z({type:"text",value:F,output:A});continue}Z({type:"dot",value:F,output:A});continue}if("?"===F){if(!(Q&&"("===Q.value)&&!0!==r.noextglob&&"("===U()&&"?"!==U(2)){Y("qmark",F);continue}if(Q&&"paren"===Q.type){const e=U();let t=F;if("<"===e&&!a.supportsLookbehinds())throw new Error("Node.js v10 or higher is required for regex lookbehinds");("("===Q.value&&!/[!=<:]/.test(e)||"<"===e&&!/<([!=]|\w+>)/.test(B()))&&(t="\\"+F),Z({type:"text",value:F,output:t});continue}if(!0!==r.dot&&("slash"===Q.type||"bos"===Q.type)){Z({type:"qmark",value:F,output:q});continue}Z({type:"qmark",value:F,output:O});continue}if("!"===F){if(!0!==r.noextglob&&"("===U()&&("?"!==U(2)||!/[!=<:]/.test(U(3)))){Y("negate",F);continue}if(!0!==r.nonegate&&0===j.index){W();continue}}if("+"===F){if(!0!==r.noextglob&&"("===U()&&"?"!==U(2)){Y("plus",F);continue}if(Q&&"("===Q.value||!1===r.regex){Z({type:"plus",value:F,output:S});continue}if(Q&&("bracket"===Q.type||"paren"===Q.type||"brace"===Q.type)||j.parens>0){Z({type:"plus",value:F});continue}Z({type:"plus",value:S});continue}if("@"===F){if(!0!==r.noextglob&&"("===U()&&"?"!==U(2)){Z({type:"at",extglob:!0,value:F,output:""});continue}Z({type:"text",value:F});continue}if("*"!==F){"$"!==F&&"^"!==F||(F="\\"+F);const e=s.exec(B());e&&(F+=e[0],j.index+=e[0].length),Z({type:"text",value:F});continue}if(Q&&("globstar"===Q.type||!0===Q.star)){Q.type="star",Q.star=!0,Q.value+=F,Q.output=I,j.backtrack=!0,j.globstar=!0,z(F);continue}let t=B();if(!0!==r.noextglob&&/^\([^?]/.test(t)){Y("star",F);continue}if("star"===Q.type){if(!0===r.noglobstar){z(F);continue}const n=Q.prev,a=n.prev,i="slash"===n.type||"bos"===n.type,o=a&&("star"===a.type||"globstar"===a.type);if(!0===r.bash&&(!i||t[0]&&"/"!==t[0])){Z({type:"star",value:F,output:""});continue}const s=j.braces>0&&("comma"===n.type||"brace"===n.type),u=D.length&&("pipe"===n.type||"paren"===n.type);if(!i&&"paren"!==n.type&&!s&&!u){Z({type:"star",value:F,output:""});continue}for(;"/**"===t.slice(0,3);){const r=e[j.index+4];if(r&&"/"!==r)break;t=t.slice(3),z("/**",3)}if("bos"===n.type&&G()){Q.type="globstar",Q.value+=F,Q.output=N(r),j.output=Q.output,j.globstar=!0,z(F);continue}if("slash"===n.type&&"bos"!==n.prev.type&&!o&&G()){j.output=j.output.slice(0,-(n.output+Q.output).length),n.output="(?:"+n.output,Q.type="globstar",Q.output=N(r)+(r.strictSlashes?")":"|$)"),Q.value+=F,j.globstar=!0,j.output+=n.output+Q.output,z(F);continue}if("slash"===n.type&&"bos"!==n.prev.type&&"/"===t[0]){const e=void 0!==t[1]?"|$":"";j.output=j.output.slice(0,-(n.output+Q.output).length),n.output="(?:"+n.output,Q.type="globstar",Q.output=`${N(r)}${T}|${T}${e})`,Q.value+=F,j.output+=n.output+Q.output,j.globstar=!0,z(F+V()),Z({type:"slash",value:"/",output:""});continue}if("bos"===n.type&&"/"===t[0]){Q.type="globstar",Q.value+=F,Q.output=`(?:^|${T}|${N(r)}${T})`,j.output=Q.output,j.globstar=!0,z(F+V()),Z({type:"slash",value:"/",output:""});continue}j.output=j.output.slice(0,-Q.output.length),Q.type="globstar",Q.output=N(r),Q.value+=F,j.output+=Q.output,j.globstar=!0,z(F);continue}const n={type:"star",value:F,output:I};!0!==r.bash?!Q||"bracket"!==Q.type&&"paren"!==Q.type||!0!==r.regex?(j.index!==j.start&&"slash"!==Q.type&&"dot"!==Q.type||("dot"===Q.type?(j.output+=E,Q.output+=E):!0===r.dot?(j.output+=R,Q.output+=R):(j.output+=P,Q.output+=P),"*"!==U()&&(j.output+=w,Q.output+=w)),Z(n)):(n.output=F,Z(n)):(n.output=".*?","bos"!==Q.type&&"slash"!==Q.type||(n.output=P+n.output),Z(n))}for(;j.brackets>0;){if(!0===r.strictBrackets)throw new SyntaxError(p("closing","]"));j.output=a.escapeLast(j.output,"["),J("brackets")}for(;j.parens>0;){if(!0===r.strictBrackets)throw new SyntaxError(p("closing",")"));j.output=a.escapeLast(j.output,"("),J("parens")}for(;j.braces>0;){if(!0===r.strictBrackets)throw new SyntaxError(p("closing","}"));j.output=a.escapeLast(j.output,"{"),J("braces")}if(!0===r.strictSlashes||"star"!==Q.type&&"bracket"!==Q.type||Z({type:"maybe_slash",value:"",output:T+"?"}),!0===j.backtrack){j.output="";for(const e of j.tokens)j.output+=null!=e.output?e.output:e.value,e.suffix&&(j.output+=e.suffix)}return j};f.fastpaths=(e,t)=>{const r={...t},o="number"==typeof r.maxLength?Math.min(i,r.maxLength):i,s=e.length;if(s>o)throw new SyntaxError(`Input length: ${s}, exceeds maximum allowed length: ${o}`);e=l[e]||e;const u=a.isWindows(t),{DOT_LITERAL:c,SLASH_LITERAL:p,ONE_CHAR:f,DOTS_SLASH:h,NO_DOT:d,NO_DOTS:g,NO_DOTS_SLASH:y,STAR:m,START_ANCHOR:v}=n.globChars(u),b=r.dot?g:d,_=r.dot?y:d,A=r.capture?"":"?:";let S=!0===r.bash?".*?":m;r.capture&&(S=`(${S})`);const T=e=>!0===e.noglobstar?S:`(${A}(?:(?!${v}${e.dot?h:c}).)*?)`,w=e=>{switch(e){case"*":return`${b}${f}${S}`;case".*":return`${c}${f}${S}`;case"*.*":return`${b}${S}${c}${f}${S}`;case"*/*":return`${b}${S}${p}${f}${_}${S}`;case"**":return b+T(r);case"**/*":return`(?:${b}${T(r)}${p})?${_}${f}${S}`;case"**/*.*":return`(?:${b}${T(r)}${p})?${_}${S}${c}${f}${S}`;case"**/.*":return`(?:${b}${T(r)}${p})?${c}${f}${S}`;default:{const t=/^(.*?)\.(\w+)$/.exec(e);if(!t)return;const r=w(t[1]);if(!r)return;return r+c+t[2]}}},x=a.removePrefix(e,{negated:!1,prefix:""});let C=w(x);return C&&!0!==r.strictSlashes&&(C+=p+"?"),C},e.exports=f},function(e,t,r){"use strict";e.exports=function(){}},function(e,t,r){"use strict";var n=r(53),a=Math.abs,i=Math.floor;e.exports=function(e){return isNaN(e)?0:0!==(e=Number(e))&&isFinite(e)?n(e)*i(a(e)):e}},function(e,t,r){"use strict";e.exports=r(54)()?Math.sign:r(55)},function(e,t,r){"use strict";e.exports=function(){var e=Math.sign;return"function"==typeof e&&(1===e(10)&&-1===e(-20))}},function(e,t,r){"use strict";e.exports=function(e){return e=Number(e),isNaN(e)||0===e?e:e>0?1:-1}},function(e,t,r){"use strict";var n=r(3),a=r(12),i=r(6),o=r(58),s=r(25);e.exports=function e(t){var r,u,l;if(n(t),(r=Object(arguments[1])).async&&r.promise)throw new Error("Options 'async' and 'promise' cannot be used together");return hasOwnProperty.call(t,"__memoized__")&&!r.force?t:(u=s(r.length,t.length,r.async&&i.async),l=o(t,u,r),a(i,(function(e,t){r[t]&&e(r[t],l,r)})),e.__profiler__&&e.__profiler__(l),l.updateEnv(),l.memoized)}},function(e,t,r){"use strict";var n=r(3),a=r(8),i=Function.prototype.bind,o=Function.prototype.call,s=Object.keys,u=Object.prototype.propertyIsEnumerable;e.exports=function(e,t){return function(r,l){var c,p=arguments[2],f=arguments[3];return r=Object(a(r)),n(l),c=s(r),f&&c.sort("function"==typeof f?i.call(f,r):void 0),"function"!=typeof e&&(e=c[e]),o.call(e,c,(function(e,n){return u.call(r,e)?o.call(l,p,r[e],e,r,n):t}))}}},function(e,t,r){"use strict";var n=r(59),a=r(27),i=r(7),o=r(73).methods,s=r(74),u=r(90),l=Function.prototype.apply,c=Function.prototype.call,p=Object.create,f=Object.defineProperties,h=o.on,d=o.emit;e.exports=function(e,t,r){var o,g,y,m,v,b,_,A,S,T,w,x,C,E,R,O=p(null);return g=!1!==t?t:isNaN(e.length)?1:e.length,r.normalizer&&(T=u(r.normalizer),y=T.get,m=T.set,v=T.delete,b=T.clear),null!=r.resolvers&&(R=s(r.resolvers)),E=y?a((function(t){var r,a,i=arguments;if(R&&(i=R(i)),null!==(r=y(i))&&hasOwnProperty.call(O,r))return w&&o.emit("get",r,i,this),O[r];if(a=1===i.length?c.call(e,this,i[0]):l.call(e,this,i),null===r){if(null!==(r=y(i)))throw n("Circular invocation","CIRCULAR_INVOCATION");r=m(i)}else if(hasOwnProperty.call(O,r))throw n("Circular invocation","CIRCULAR_INVOCATION");return O[r]=a,x&&o.emit("set",r,null,a),a}),g):0===t?function(){var t;if(hasOwnProperty.call(O,"data"))return w&&o.emit("get","data",arguments,this),O.data;if(t=arguments.length?l.call(e,this,arguments):c.call(e,this),hasOwnProperty.call(O,"data"))throw n("Circular invocation","CIRCULAR_INVOCATION");return O.data=t,x&&o.emit("set","data",null,t),t}:function(t){var r,a,i=arguments;if(R&&(i=R(arguments)),a=String(i[0]),hasOwnProperty.call(O,a))return w&&o.emit("get",a,i,this),O[a];if(r=1===i.length?c.call(e,this,i[0]):l.call(e,this,i),hasOwnProperty.call(O,a))throw n("Circular invocation","CIRCULAR_INVOCATION");return O[a]=r,x&&o.emit("set",a,null,r),r},o={original:e,memoized:E,profileName:r.profileName,get:function(e){return R&&(e=R(e)),y?y(e):String(e[0])},has:function(e){return hasOwnProperty.call(O,e)},delete:function(e){var t;hasOwnProperty.call(O,e)&&(v&&v(e),t=O[e],delete O[e],C&&o.emit("delete",e,t))},clear:function(){var e=O;b&&b(),O=p(null),o.emit("clear",e)},on:function(e,t){return"get"===e?w=!0:"set"===e?x=!0:"delete"===e&&(C=!0),h.call(this,e,t)},emit:d,updateEnv:function(){e=o.original}},_=y?a((function(e){var t,r=arguments;R&&(r=R(r)),null!==(t=y(r))&&o.delete(t)}),g):0===t?function(){return o.delete("data")}:function(e){return R&&(e=R(arguments)[0]),o.delete(e)},A=a((function(){var e,r=arguments;return 0===t?O.data:(R&&(r=R(r)),e=y?y(r):String(r[0]),O[e])})),S=a((function(){var e,r=arguments;return 0===t?o.has("data"):(R&&(r=R(r)),null!==(e=y?y(r):String(r[0]))&&o.has(e))})),f(E,{__memoized__:i(!0),delete:i(_),clear:i(o.clear),_get:i(A),_has:i(S)}),o}},function(e,t,r){"use strict";var n=r(26),a=r(65),i=r(4),o=Error.captureStackTrace;e.exports=function(t){var r=new Error(t),s=arguments[1],u=arguments[2];return i(u)||a(s)&&(u=s,s=null),i(u)&&n(r,u),i(s)&&(r.code=s),o&&o(r,e.exports),r}},function(e,t,r){"use strict";e.exports=function(){var e,t=Object.assign;return"function"==typeof t&&(t(e={foo:"raz"},{bar:"dwa"},{trzy:"trzy"}),e.foo+e.bar+e.trzy==="razdwatrzy")}},function(e,t,r){"use strict";var n=r(62),a=r(8),i=Math.max;e.exports=function(e,t){var r,o,s,u=i(arguments.length,2);for(e=Object(a(e)),s=function(n){try{e[n]=t[n]}catch(e){r||(r=e)}},o=1;o<u;++o)n(t=arguments[o]).forEach(s);if(void 0!==r)throw r;return e}},function(e,t,r){"use strict";e.exports=r(63)()?Object.keys:r(64)},function(e,t,r){"use strict";e.exports=function(){try{return Object.keys("primitive"),!0}catch(e){return!1}}},function(e,t,r){"use strict";var n=r(4),a=Object.keys;e.exports=function(e){return a(n(e)?Object(e):e)}},function(e,t,r){"use strict";var n=r(4),a={function:!0,object:!0};e.exports=function(e){return n(e)&&a[typeof e]||!1}},function(e,t,r){"use strict";var n=r(67),a=/^\s*class[\s{/}]/,i=Function.prototype.toString;e.exports=function(e){return!!n(e)&&!a.test(i.call(e))}},function(e,t,r){"use strict";var n=r(68);e.exports=function(e){if("function"!=typeof e)return!1;if(!hasOwnProperty.call(e,"length"))return!1;try{if("number"!=typeof e.length)return!1;if("function"!=typeof e.call)return!1;if("function"!=typeof e.apply)return!1}catch(e){return!1}return!n(e)}},function(e,t,r){"use strict";var n=r(69);e.exports=function(e){if(!n(e))return!1;try{return!!e.constructor&&e.constructor.prototype===e}catch(e){return!1}}},function(e,t,r){"use strict";var n=r(29),a={object:!0,function:!0,undefined:!0};e.exports=function(e){return!!n(e)&&hasOwnProperty.call(a,typeof e)}},function(e,t,r){"use strict";e.exports=r(71)()?String.prototype.contains:r(72)},function(e,t,r){"use strict";var n="razdwatrzy";e.exports=function(){return"function"==typeof n.contains&&(!0===n.contains("dwa")&&!1===n.contains("foo"))}},function(e,t,r){"use strict";var n=String.prototype.indexOf;e.exports=function(e){return n.call(this,e,arguments[1])>-1}},function(e,t,r){"use strict";var n,a,i,o,s,u,l,c=r(7),p=r(3),f=Function.prototype.apply,h=Function.prototype.call,d=Object.create,g=Object.defineProperty,y=Object.defineProperties,m=Object.prototype.hasOwnProperty,v={configurable:!0,enumerable:!1,writable:!0};a=function(e,t){var r,a;return p(t),a=this,n.call(this,e,r=function(){i.call(a,e,r),f.call(t,this,arguments)}),r.__eeOnceListener__=t,this},s={on:n=function(e,t){var r;return p(t),m.call(this,"__ee__")?r=this.__ee__:(r=v.value=d(null),g(this,"__ee__",v),v.value=null),r[e]?"object"==typeof r[e]?r[e].push(t):r[e]=[r[e],t]:r[e]=t,this},once:a,off:i=function(e,t){var r,n,a,i;if(p(t),!m.call(this,"__ee__"))return this;if(!(r=this.__ee__)[e])return this;if("object"==typeof(n=r[e]))for(i=0;a=n[i];++i)a!==t&&a.__eeOnceListener__!==t||(2===n.length?r[e]=n[i?0:1]:n.splice(i,1));else n!==t&&n.__eeOnceListener__!==t||delete r[e];return this},emit:o=function(e){var t,r,n,a,i;if(m.call(this,"__ee__")&&(a=this.__ee__[e]))if("object"==typeof a){for(r=arguments.length,i=new Array(r-1),t=1;t<r;++t)i[t-1]=arguments[t];for(a=a.slice(),t=0;n=a[t];++t)f.call(n,this,i)}else switch(arguments.length){case 1:h.call(a,this);break;case 2:h.call(a,this,arguments[1]);break;case 3:h.call(a,this,arguments[1],arguments[2]);break;default:for(r=arguments.length,i=new Array(r-1),t=1;t<r;++t)i[t-1]=arguments[t];f.call(a,this,i)}}},u={on:c(n),once:c(a),off:c(i),emit:c(o)},l=y({},u),e.exports=t=function(e){return null==e?d(l):y(Object(e),u)},t.methods=s},function(e,t,r){"use strict";var n,a=r(75),i=r(4),o=r(3),s=Array.prototype.slice;n=function(e){return this.map((function(t,r){return t?t(e[r]):e[r]})).concat(s.call(e,this.length))},e.exports=function(e){return(e=a(e)).forEach((function(e){i(e)&&o(e)})),n.bind(e)}},function(e,t,r){"use strict";var n=r(17),a=Array.isArray;e.exports=function(e){return a(e)?e:n(e)}},function(e,t,r){"use strict";e.exports=function(){var e,t,r=Array.from;return"function"==typeof r&&(t=r(e=["raz","dwa"]),Boolean(t&&t!==e&&"dwa"===t[1]))}},function(e,t,r){"use strict";var n=r(78).iterator,a=r(87),i=r(88),o=r(5),s=r(3),u=r(8),l=r(4),c=r(89),p=Array.isArray,f=Function.prototype.call,h={configurable:!0,enumerable:!0,writable:!0,value:null},d=Object.defineProperty;e.exports=function(e){var t,r,g,y,m,v,b,_,A,S,T=arguments[1],w=arguments[2];if(e=Object(u(e)),l(T)&&s(T),this&&this!==Array&&i(this))t=this;else{if(!T){if(a(e))return 1!==(m=e.length)?Array.apply(null,e):((y=new Array(1))[0]=e[0],y);if(p(e)){for(y=new Array(m=e.length),r=0;r<m;++r)y[r]=e[r];return y}}y=[]}if(!p(e))if(void 0!==(A=e[n])){for(b=s(A).call(e),t&&(y=new t),_=b.next(),r=0;!_.done;)S=T?f.call(T,w,_.value,r):_.value,t?(h.value=S,d(y,r,h)):y[r]=S,_=b.next(),++r;m=r}else if(c(e)){for(m=e.length,t&&(y=new t),r=0,g=0;r<m;++r)S=e[r],r+1<m&&(v=S.charCodeAt(0))>=55296&&v<=56319&&(S+=e[++r]),S=T?f.call(T,w,S,g):S,t?(h.value=S,d(y,g,h)):y[g]=S,++g;m=g}if(void 0===m)for(m=o(e.length),t&&(y=new t(m)),r=0;r<m;++r)S=T?f.call(T,w,e[r],r):e[r],t?(h.value=S,d(y,r,h)):y[r]=S;return t&&(h.value=null,y.length=m),y}},function(e,t,r){"use strict";e.exports=r(79)()?r(13).Symbol:r(82)},function(e,t,r){"use strict";var n=r(13),a={object:!0,symbol:!0};e.exports=function(){var e,t=n.Symbol;if("function"!=typeof t)return!1;e=t("test symbol");try{String(e)}catch(e){return!1}return!!a[typeof t.iterator]&&(!!a[typeof t.toPrimitive]&&!!a[typeof t.toStringTag])}},function(e,t,r){"use strict";e.exports=function(){return"object"==typeof globalThis&&(!!globalThis&&globalThis.Array===Array)}},function(e,t){var r=function(){if("object"==typeof self&&self)return self;if("object"==typeof window&&window)return window;throw new Error("Unable to resolve global `this`")};e.exports=function(){if(this)return this;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch(e){return r()}try{return __global__||r()}finally{delete Object.prototype.__global__}}()},function(e,t,r){"use strict";var n,a,i,o=r(7),s=r(30),u=r(13).Symbol,l=r(84),c=r(85),p=r(86),f=Object.create,h=Object.defineProperties,d=Object.defineProperty;if("function"==typeof u)try{String(u()),i=!0}catch(e){}else u=null;a=function(e){if(this instanceof a)throw new TypeError("Symbol is not a constructor");return n(e)},e.exports=n=function e(t){var r;if(this instanceof e)throw new TypeError("Symbol is not a constructor");return i?u(t):(r=f(a.prototype),t=void 0===t?"":String(t),h(r,{__description__:o("",t),__name__:o("",l(t))}))},c(n),p(n),h(a.prototype,{constructor:o(n),toString:o("",(function(){return this.__name__}))}),h(n.prototype,{toString:o((function(){return"Symbol ("+s(this).__description__+")"})),valueOf:o((function(){return s(this)}))}),d(n.prototype,n.toPrimitive,o("",(function(){var e=s(this);return"symbol"==typeof e?e:e.toString()}))),d(n.prototype,n.toStringTag,o("c","Symbol")),d(a.prototype,n.toStringTag,o("c",n.prototype[n.toStringTag])),d(a.prototype,n.toPrimitive,o("c",n.prototype[n.toPrimitive]))},function(e,t,r){"use strict";e.exports=function(e){return!!e&&("symbol"==typeof e||!!e.constructor&&("Symbol"===e.constructor.name&&"Symbol"===e[e.constructor.toStringTag]))}},function(e,t,r){"use strict";var n=r(7),a=Object.create,i=Object.defineProperty,o=Object.prototype,s=a(null);e.exports=function(e){for(var t,r,a=0;s[e+(a||"")];)++a;return s[e+=a||""]=!0,i(o,t="@@"+e,n.gs(null,(function(e){r||(r=!0,i(this,t,n(e)),r=!1)}))),t}},function(e,t,r){"use strict";var n=r(7),a=r(13).Symbol;e.exports=function(e){return Object.defineProperties(e,{hasInstance:n("",a&&a.hasInstance||e("hasInstance")),isConcatSpreadable:n("",a&&a.isConcatSpreadable||e("isConcatSpreadable")),iterator:n("",a&&a.iterator||e("iterator")),match:n("",a&&a.match||e("match")),replace:n("",a&&a.replace||e("replace")),search:n("",a&&a.search||e("search")),species:n("",a&&a.species||e("species")),split:n("",a&&a.split||e("split")),toPrimitive:n("",a&&a.toPrimitive||e("toPrimitive")),toStringTag:n("",a&&a.toStringTag||e("toStringTag")),unscopables:n("",a&&a.unscopables||e("unscopables"))})}},function(e,t,r){"use strict";var n=r(7),a=r(30),i=Object.create(null);e.exports=function(e){return Object.defineProperties(e,{for:n((function(t){return i[t]?i[t]:i[t]=e(String(t))})),keyFor:n((function(e){var t;for(t in a(e),i)if(i[t]===e)return t}))})}},function(e,t,r){"use strict";var n=Object.prototype.toString,a=n.call(function(){return arguments}());e.exports=function(e){return n.call(e)===a}},function(e,t,r){"use strict";var n=Object.prototype.toString,a=RegExp.prototype.test.bind(/^[object [A-Za-z0-9]*Function]$/);e.exports=function(e){return"function"==typeof e&&a(n.call(e))}},function(e,t,r){"use strict";var n=Object.prototype.toString,a=n.call("");e.exports=function(e){return"string"==typeof e||e&&"object"==typeof e&&(e instanceof String||n.call(e)===a)||!1}},function(e,t,r){"use strict";var n=r(3);e.exports=function(e){var t;return"function"==typeof e?{set:e,get:e}:(t={get:n(e.get)},void 0!==e.set?(t.set=n(e.set),e.delete&&(t.delete=n(e.delete)),e.clear&&(t.clear=n(e.clear)),t):(t.set=t.get,t))}},function(e,t,r){"use strict";e.exports=function(e){var t,r,n=e.length;if(!n)return"";for(t=String(e[r=0]);--n;)t+=""+e[++r];return t}},function(e,t,r){"use strict";e.exports=function(e){return e?function(t){for(var r=String(t[0]),n=0,a=e;--a;)r+=""+t[++n];return r}:function(){return""}}},function(e,t,r){"use strict";var n=r(18),a=Object.create;e.exports=function(){var e=0,t=[],r=a(null);return{get:function(e){var r,a=0,i=t,o=e.length;if(0===o)return i[o]||null;if(i=i[o]){for(;a<o-1;){if(-1===(r=n.call(i[0],e[a])))return null;i=i[1][r],++a}return-1===(r=n.call(i[0],e[a]))?null:i[1][r]||null}return null},set:function(a){var i,o=0,s=t,u=a.length;if(0===u)s[u]=++e;else{for(s[u]||(s[u]=[[],[]]),s=s[u];o<u-1;)-1===(i=n.call(s[0],a[o]))&&(i=s[0].push(a[o])-1,s[1].push([[],[]])),s=s[1][i],++o;-1===(i=n.call(s[0],a[o]))&&(i=s[0].push(a[o])-1),s[1][i]=++e}return r[e]=a,e},delete:function(e){var a,i=0,o=t,s=r[e],u=s.length,l=[];if(0===u)delete o[u];else if(o=o[u]){for(;i<u-1;){if(-1===(a=n.call(o[0],s[i])))return;l.push(o,a),o=o[1][a],++i}if(-1===(a=n.call(o[0],s[i])))return;for(e=o[1][a],o[0].splice(a,1),o[1].splice(a,1);!o[0].length&&l.length;)a=l.pop(),(o=l.pop())[0].splice(a,1),o[1].splice(a,1)}delete r[e]},clear:function(){t=[],r=a(null)}}}},function(e,t,r){"use strict";e.exports=r(95)()?Number.isNaN:r(96)},function(e,t,r){"use strict";e.exports=function(){var e=Number.isNaN;return"function"==typeof e&&(!e({})&&e(NaN)&&!e(34))}},function(e,t,r){"use strict";e.exports=function(e){return e!=e}},function(e,t,r){"use strict";var n=r(18);e.exports=function(){var e=0,t=[],r=[];return{get:function(e){var a=n.call(t,e[0]);return-1===a?null:r[a]},set:function(n){return t.push(n[0]),r.push(++e),e},delete:function(e){var a=n.call(r,e);-1!==a&&(t.splice(a,1),r.splice(a,1))},clear:function(){t=[],r=[]}}}},function(e,t,r){"use strict";var n=r(18),a=Object.create;e.exports=function(e){var t=0,r=[[],[]],i=a(null);return{get:function(t){for(var a,i=0,o=r;i<e-1;){if(-1===(a=n.call(o[0],t[i])))return null;o=o[1][a],++i}return-1===(a=n.call(o[0],t[i]))?null:o[1][a]||null},set:function(a){for(var o,s=0,u=r;s<e-1;)-1===(o=n.call(u[0],a[s]))&&(o=u[0].push(a[s])-1,u[1].push([[],[]])),u=u[1][o],++s;return-1===(o=n.call(u[0],a[s]))&&(o=u[0].push(a[s])-1),u[1][o]=++t,i[t]=a,t},delete:function(t){for(var a,o=0,s=r,u=[],l=i[t];o<e-1;){if(-1===(a=n.call(s[0],l[o])))return;u.push(s,a),s=s[1][a],++o}if(-1!==(a=n.call(s[0],l[o]))){for(t=s[1][a],s[0].splice(a,1),s[1].splice(a,1);!s[0].length&&u.length;)a=u.pop(),(s=u.pop())[0].splice(a,1),s[1].splice(a,1);delete i[t]}},clear:function(){r=[[],[]],i=a(null)}}}},function(e,t,r){"use strict";var n=r(17),a=r(31),i=r(28),o=r(27),s=r(19),u=Array.prototype.slice,l=Function.prototype.apply,c=Object.create;r(6).async=function(e,t){var r,p,f,h=c(null),d=c(null),g=t.memoized,y=t.original;t.memoized=o((function(e){var t=arguments,n=t[t.length-1];return"function"==typeof n&&(r=n,t=u.call(t,0,-1)),g.apply(p=this,f=t)}),g);try{i(t.memoized,g)}catch(e){}t.on("get",(function(e){var n,a,i;if(r){if(h[e])return"function"==typeof h[e]?h[e]=[h[e],r]:h[e].push(r),void(r=null);n=r,a=p,i=f,r=p=f=null,s((function(){var o;hasOwnProperty.call(d,e)?(o=d[e],t.emit("getasync",e,i,a),l.call(n,o.context,o.args)):(r=n,p=a,f=i,g.apply(a,i))}))}})),t.original=function(){var e,a,i,o;return r?(e=n(arguments),a=function e(r){var a,i,u=e.id;if(null!=u){if(delete e.id,a=h[u],delete h[u],a)return i=n(arguments),t.has(u)&&(r?t.delete(u):(d[u]={context:this,args:i},t.emit("setasync",u,"function"==typeof a?1:a.length))),"function"==typeof a?o=l.call(a,this,i):a.forEach((function(e){o=l.call(e,this,i)}),this),o}else s(l.bind(e,this,arguments))},i=r,r=p=f=null,e.push(a),o=l.call(y,this,e),a.cb=i,r=a,o):l.call(y,this,arguments)},t.on("set",(function(e){r?(h[e]?"function"==typeof h[e]?h[e]=[h[e],r.cb]:h[e].push(r.cb):h[e]=r.cb,delete r.cb,r.id=e,r=null):t.delete(e)})),t.on("delete",(function(e){var r;hasOwnProperty.call(h,e)||d[e]&&(r=d[e],delete d[e],t.emit("deleteasync",e,u.call(r.args,1)))})),t.on("clear",(function(){var e=d;d=c(null),t.emit("clearasync",a(e,(function(e){return u.call(e.args,1)})))}))}},function(e,t,r){(function(e){var n=void 0!==e&&e||"undefined"!=typeof self&&self||window,a=Function.prototype.apply;function i(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new i(a.call(setTimeout,n,arguments),clearTimeout)},t.setInterval=function(){return new i(a.call(setInterval,n,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},i.prototype.unref=i.prototype.ref=function(){},i.prototype.close=function(){this._clearFn.call(n,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout((function(){e._onTimeout&&e._onTimeout()}),t))},r(101),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(this,r(32))},function(e,t,r){(function(e,t){!function(e,r){"use strict";if(!e.setImmediate){var n,a,i,o,s,u=1,l={},c=!1,p=e.document,f=Object.getPrototypeOf&&Object.getPrototypeOf(e);f=f&&f.setTimeout?f:e,"[object process]"==={}.toString.call(e.process)?n=function(e){t.nextTick((function(){d(e)}))}:!function(){if(e.postMessage&&!e.importScripts){var t=!0,r=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=r,t}}()?e.MessageChannel?((i=new MessageChannel).port1.onmessage=function(e){d(e.data)},n=function(e){i.port2.postMessage(e)}):p&&"onreadystatechange"in p.createElement("script")?(a=p.documentElement,n=function(e){var t=p.createElement("script");t.onreadystatechange=function(){d(e),t.onreadystatechange=null,a.removeChild(t),t=null},a.appendChild(t)}):n=function(e){setTimeout(d,0,e)}:(o="setImmediate$"+Math.random()+"$",s=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(o)&&d(+t.data.slice(o.length))},e.addEventListener?e.addEventListener("message",s,!1):e.attachEvent("onmessage",s),n=function(t){e.postMessage(o+t,"*")}),f.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),r=0;r<t.length;r++)t[r]=arguments[r+1];var a={callback:e,args:t};return l[u]=a,n(u),u++},f.clearImmediate=h}function h(e){delete l[e]}function d(e){if(c)setTimeout(d,0,e);else{var t=l[e];if(t){c=!0;try{!function(e){var t=e.callback,r=e.args;switch(r.length){case 0:t();break;case 1:t(r[0]);break;case 2:t(r[0],r[1]);break;case 3:t(r[0],r[1],r[2]);break;default:t.apply(void 0,r)}}(t)}finally{h(e),c=!1}}}}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,r(32),r(9))},function(e,t,r){"use strict";var n=r(31),a=r(103),i=r(104),o=r(106),s=r(34),u=r(19),l=Object.create,c=a("then","then:finally","done","done:finally");r(6).promise=function(e,t){var r=l(null),a=l(null),p=l(null);if(!0===e)e=null;else if(e=i(e),!c[e])throw new TypeError("'"+o(e)+"' is not valid promise mode");t.on("set",(function(n,i,o){var l=!1;if(!s(o))return a[n]=o,void t.emit("setasync",n,1);r[n]=1,p[n]=o;var c=function(e){var i=r[n];if(l)throw new Error("Memoizee error: Detected unordered then|done & finally resolution, which in turn makes proper detection of success/failure impossible (when in 'done:finally' mode)\nConsider to rely on 'then' or 'done' mode instead.");i&&(delete r[n],a[n]=e,t.emit("setasync",n,i))},f=function(){l=!0,r[n]&&(delete r[n],delete p[n],t.delete(n))},h=e;if(h||(h="then"),"then"===h){var d=function(){u(f)};"function"==typeof(o=o.then((function(e){u(c.bind(this,e))}),d)).finally&&o.finally(d)}else if("done"===h){if("function"!=typeof o.done)throw new Error("Memoizee error: Retrieved promise does not implement 'done' in 'done' mode");o.done(c,f)}else if("done:finally"===h){if("function"!=typeof o.done)throw new Error("Memoizee error: Retrieved promise does not implement 'done' in 'done:finally' mode");if("function"!=typeof o.finally)throw new Error("Memoizee error: Retrieved promise does not implement 'finally' in 'done:finally' mode");o.done(c),o.finally(f)}})),t.on("get",(function(e,n,a){var i;if(r[e])++r[e];else{i=p[e];var o=function(){t.emit("getasync",e,n,a)};s(i)?"function"==typeof i.done?i.done(o):i.then((function(){u(o)})):o()}})),t.on("delete",(function(e){if(delete p[e],r[e])delete r[e];else if(hasOwnProperty.call(a,e)){var n=a[e];delete a[e],t.emit("deleteasync",e,[n])}})),t.on("clear",(function(){var e=a;a=l(null),r=l(null),p=l(null),t.emit("clearasync",n(e,(function(e){return[e]})))}))}},function(e,t,r){"use strict";var n=Array.prototype.forEach,a=Object.create;e.exports=function(e){var t=a(null);return n.call(arguments,(function(e){t[e]=!0})),t}},function(e,t,r){"use strict";var n=r(8),a=r(105);e.exports=function(e){return a(n(e))}},function(e,t,r){"use strict";var n=r(33);e.exports=function(e){try{return e&&n(e.toString)?e.toString():String(e)}catch(e){throw new TypeError("Passed argument cannot be stringifed")}}},function(e,t,r){"use strict";var n=r(107),a=/[\n\r\u2028\u2029]/g;e.exports=function(e){var t=n(e);return t.length>100&&(t=t.slice(0,99)+"…"),t=t.replace(a,(function(e){return JSON.stringify(e).slice(1,-1)}))}},function(e,t,r){"use strict";var n=r(33);e.exports=function(e){try{return e&&n(e.toString)?e.toString():String(e)}catch(e){return"<Non-coercible to string value>"}}},function(e,t,r){"use strict";var n=r(3),a=r(12),i=r(6),o=Function.prototype.apply;i.dispose=function(e,t,r){var s;if(n(e),r.async&&i.async||r.promise&&i.promise)return t.on("deleteasync",s=function(t,r){o.call(e,null,r)}),void t.on("clearasync",(function(e){a(e,(function(e,t){s(t,e)}))}));t.on("delete",s=function(t,r){e(r)}),t.on("clear",(function(e){a(e,(function(e,t){s(t,e)}))}))}},function(e,t,r){"use strict";var n=r(17),a=r(12),i=r(19),o=r(34),s=r(110),u=r(6),l=Function.prototype,c=Math.max,p=Math.min,f=Object.create;u.maxAge=function(e,t,r){var h,d,g,y;(e=s(e))&&(h=f(null),d=r.async&&u.async||r.promise&&u.promise?"async":"",t.on("set"+d,(function(r){h[r]=setTimeout((function(){t.delete(r)}),e),"function"==typeof h[r].unref&&h[r].unref(),y&&(y[r]&&"nextTick"!==y[r]&&clearTimeout(y[r]),y[r]=setTimeout((function(){delete y[r]}),g),"function"==typeof y[r].unref&&y[r].unref())})),t.on("delete"+d,(function(e){clearTimeout(h[e]),delete h[e],y&&("nextTick"!==y[e]&&clearTimeout(y[e]),delete y[e])})),r.preFetch&&(g=!0===r.preFetch||isNaN(r.preFetch)?.333:c(p(Number(r.preFetch),1),0))&&(y={},g=(1-g)*e,t.on("get"+d,(function(e,a,s){y[e]||(y[e]="nextTick",i((function(){var i;"nextTick"===y[e]&&(delete y[e],t.delete(e),r.async&&(a=n(a)).push(l),i=t.memoized.apply(s,a),r.promise&&o(i)&&("function"==typeof i.done?i.done(l,l):i.then(l,l)))})))}))),t.on("clear"+d,(function(){a(h,(function(e){clearTimeout(e)})),h={},y&&(a(y,(function(e){"nextTick"!==e&&clearTimeout(e)})),y={})})))}},function(e,t,r){"use strict";var n=r(5),a=r(111);e.exports=function(e){if((e=n(e))>a)throw new TypeError(e+" exceeds maximum possible timeout");return e}},function(e,t,r){"use strict";e.exports=2147483647},function(e,t,r){"use strict";var n=r(5),a=r(113),i=r(6);i.max=function(e,t,r){var o,s,u;(e=n(e))&&(s=a(e),o=r.async&&i.async||r.promise&&i.promise?"async":"",t.on("set"+o,u=function(e){void 0!==(e=s.hit(e))&&t.delete(e)}),t.on("get"+o,u),t.on("delete"+o,s.delete),t.on("clear"+o,s.clear))}},function(e,t,r){"use strict";var n=r(5),a=Object.create,i=Object.prototype.hasOwnProperty;e.exports=function(e){var t,r=0,o=1,s=a(null),u=a(null),l=0;return e=n(e),{hit:function(n){var a=u[n],c=++l;if(s[c]=n,u[n]=c,!a){if(++r<=e)return;return n=s[o],t(n),n}if(delete s[a],o===a)for(;!i.call(s,++o);)continue},delete:t=function(e){var t=u[e];if(t&&(delete s[t],delete u[e],--r,o===t)){if(!r)return l=0,void(o=1);for(;!i.call(s,++o);)continue}},clear:function(){r=0,o=1,s=a(null),u=a(null),l=0}}}},function(e,t,r){"use strict";var n=r(7),a=r(6),i=Object.create,o=Object.defineProperties;a.refCounter=function(e,t,r){var s,u;s=i(null),u=r.async&&a.async||r.promise&&a.promise?"async":"",t.on("set"+u,(function(e,t){s[e]=t||1})),t.on("get"+u,(function(e){++s[e]})),t.on("delete"+u,(function(e){delete s[e]})),t.on("clear"+u,(function(){s={}})),o(t.memoized,{deleteRef:n((function(){var e=t.get(arguments);return null===e?null:s[e]?!--s[e]&&(t.delete(e),!0):null})),getRefCount:n((function(){var e=t.get(arguments);return null===e?0:s[e]?s[e]:0}))})}},function(e,t,r){var n=r(116),a=r(117);"string"==typeof(a=a.__esModule?a.default:a)&&(a=[[e.i,a,""]]);var i={insert:"head",singleton:!1},o=(n(a,i),a.locals?a.locals:{});e.exports=o},function(e,t,r){"use strict";var n,a=function(){return void 0===n&&(n=Boolean(window&&document&&document.all&&!window.atob)),n},i=function(){var e={};return function(t){if(void 0===e[t]){var r=document.querySelector(t);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(e){r=null}e[t]=r}return e[t]}}(),o=[];function s(e){for(var t=-1,r=0;r<o.length;r++)if(o[r].identifier===e){t=r;break}return t}function u(e,t){for(var r={},n=[],a=0;a<e.length;a++){var i=e[a],u=t.base?i[0]+t.base:i[0],l=r[u]||0,c="".concat(u," ").concat(l);r[u]=l+1;var p=s(c),f={css:i[1],media:i[2],sourceMap:i[3]};-1!==p?(o[p].references++,o[p].updater(f)):o.push({identifier:c,updater:y(f,t),references:1}),n.push(c)}return n}function l(e){var t=document.createElement("style"),n=e.attributes||{};if(void 0===n.nonce){var a=r.nc;a&&(n.nonce=a)}if(Object.keys(n).forEach((function(e){t.setAttribute(e,n[e])})),"function"==typeof e.insert)e.insert(t);else{var o=i(e.insert||"head");if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(t)}return t}var c,p=(c=[],function(e,t){return c[e]=t,c.filter(Boolean).join("\n")});function f(e,t,r,n){var a=r?"":n.media?"@media ".concat(n.media," {").concat(n.css,"}"):n.css;if(e.styleSheet)e.styleSheet.cssText=p(t,a);else{var i=document.createTextNode(a),o=e.childNodes;o[t]&&e.removeChild(o[t]),o.length?e.insertBefore(i,o[t]):e.appendChild(i)}}function h(e,t,r){var n=r.css,a=r.media,i=r.sourceMap;if(a?e.setAttribute("media",a):e.removeAttribute("media"),i&&btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}var d=null,g=0;function y(e,t){var r,n,a;if(t.singleton){var i=g++;r=d||(d=l(t)),n=f.bind(null,r,i,!1),a=f.bind(null,r,i,!0)}else r=l(t),n=h.bind(null,r,t),a=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(r)};return n(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;n(e=t)}else a()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=a());var r=u(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var n=0;n<r.length;n++){var a=s(r[n]);o[a].references--}for(var i=u(e,t),l=0;l<r.length;l++){var c=s(r[l]);0===o[c].references&&(o[c].updater(),o.splice(c,1))}r=i}}}},function(e,t,r){(t=r(118)(!0)).push([e.i,'.min-width-10{min-width:10rem}.min-width-12{min-width:12rem}.min-width-20{min-width:20rem}.gf-form-select-wrapper select.gf-form-input{height:2.64rem}.gf-form-select-wrapper--caret-indent.gf-form-select-wrapper::after{right:.775rem}.ml-1{margin-left:2px !important}.join-r .gf-form-label{margin-right:0}.join-l .gf-form-label{border-left-width:0;border-radius:0}.mash-r .gf-form-label{padding-right:0}.mash-l .gf-form-label{padding-left:0}.irondb-tag-op .gf-form-label,.irondb-tag-end .gf-form-label{color:#eb7b18}.irondb-tag-cat .gf-form-label{color:#598}.irondb-tag-val .gf-form-label{color:#5ca}.irondb-tag-pair .gf-form-label,.irondb-tag-sep .gf-form-label{color:#888}.irondb-tag-op .gf-form-label:focus,.irondb-tag-op .gf-form-label:hover,.irondb-tag-cat .gf-form-label:focus,.irondb-tag-cat .gf-form-label:hover,.irondb-tag-val .gf-form-label:focus,.irondb-tag-val .gf-form-label:hover,.gf-form-label:focus .template-variable,.gf-form-label:hover .template-variable{color:#fff}.irondb-tag-op .typeahead.dropdown-menu [data-value=REMOVE] a{color:#bb002c !important}.irondb-tag-val .typeahead.dropdown-menu [data-value^="$"] a{color:#33b5e5 !important}.irondb-tag-op .typeahead.dropdown-menu [data-value="or("] a,.irondb-tag-op .typeahead.dropdown-menu [data-value="not("] a,.irondb-tag-op .typeahead.dropdown-menu [data-value="and("] a,.irondb-tag-plus .typeahead.dropdown-menu [data-value="or("] a,.irondb-tag-plus .typeahead.dropdown-menu [data-value="not("] a,.irondb-tag-plus .typeahead.dropdown-menu [data-value="and("] a{color:#eb7b18 !important}.irondb-tag-op .typeahead.dropdown-menu [data-value=REMOVE] a:focus,.irondb-tag-op .typeahead.dropdown-menu [data-value=REMOVE] a:hover,.irondb-tag-val .typeahead.dropdown-menu [data-value^="$"] a:focus,.irondb-tag-val .typeahead.dropdown-menu [data-value^="$"] a:hover,.irondb-tag-op .typeahead.dropdown-menu [data-value="or("] a:focus,.irondb-tag-op .typeahead.dropdown-menu [data-value="or("] a:hover,.irondb-tag-op .typeahead.dropdown-menu [data-value="not("] a:focus,.irondb-tag-op .typeahead.dropdown-menu [data-value="not("] a:hover,.irondb-tag-op .typeahead.dropdown-menu [data-value="and("] a:focus,.irondb-tag-op .typeahead.dropdown-menu [data-value="and("] a:hover,.irondb-tag-plus .typeahead.dropdown-menu [data-value="or("] a:focus,.irondb-tag-plus .typeahead.dropdown-menu [data-value="or("] a:hover,.irondb-tag-plus .typeahead.dropdown-menu [data-value="not("] a:focus,.irondb-tag-plus .typeahead.dropdown-menu [data-value="not("] a:hover,.irondb-tag-plus .typeahead.dropdown-menu [data-value="and("] a:focus,.irondb-tag-plus .typeahead.dropdown-menu [data-value="and("] a:hover{color:#fff !important}',"",{version:3,sources:["query_editor.css"],names:[],mappings:"AAAA,cAAc,eAAe,CAAC,cAAc,eAAe,CAAC,cAAc,eAAe,CAAC,6CAA6C,cAAc,CAAC,oEAAoE,aAAa,CAAC,MAAM,0BAA0B,CAAC,uBAAuB,cAAc,CAAC,uBAAuB,mBAAmB,CAAC,eAAe,CAAC,uBAAuB,eAAe,CAAC,uBAAuB,cAAc,CAAC,6DAA6D,aAAa,CAAC,+BAA+B,UAAU,CAAC,+BAA+B,UAAU,CAAC,+DAA+D,UAAU,CAAC,4SAA4S,UAAU,CAAC,8DAA8D,wBAAwB,CAAC,6DAA6D,wBAAwB,CAAC,wXAAwX,wBAAwB,CAAC,skCAAskC,qBAAqB",file:"query_editor.css",sourcesContent:['.min-width-10{min-width:10rem}.min-width-12{min-width:12rem}.min-width-20{min-width:20rem}.gf-form-select-wrapper select.gf-form-input{height:2.64rem}.gf-form-select-wrapper--caret-indent.gf-form-select-wrapper::after{right:.775rem}.ml-1{margin-left:2px !important}.join-r .gf-form-label{margin-right:0}.join-l .gf-form-label{border-left-width:0;border-radius:0}.mash-r .gf-form-label{padding-right:0}.mash-l .gf-form-label{padding-left:0}.irondb-tag-op .gf-form-label,.irondb-tag-end .gf-form-label{color:#eb7b18}.irondb-tag-cat .gf-form-label{color:#598}.irondb-tag-val .gf-form-label{color:#5ca}.irondb-tag-pair .gf-form-label,.irondb-tag-sep .gf-form-label{color:#888}.irondb-tag-op .gf-form-label:focus,.irondb-tag-op .gf-form-label:hover,.irondb-tag-cat .gf-form-label:focus,.irondb-tag-cat .gf-form-label:hover,.irondb-tag-val .gf-form-label:focus,.irondb-tag-val .gf-form-label:hover,.gf-form-label:focus .template-variable,.gf-form-label:hover .template-variable{color:#fff}.irondb-tag-op .typeahead.dropdown-menu [data-value=REMOVE] a{color:#bb002c !important}.irondb-tag-val .typeahead.dropdown-menu [data-value^="$"] a{color:#33b5e5 !important}.irondb-tag-op .typeahead.dropdown-menu [data-value="or("] a,.irondb-tag-op .typeahead.dropdown-menu [data-value="not("] a,.irondb-tag-op .typeahead.dropdown-menu [data-value="and("] a,.irondb-tag-plus .typeahead.dropdown-menu [data-value="or("] a,.irondb-tag-plus .typeahead.dropdown-menu [data-value="not("] a,.irondb-tag-plus .typeahead.dropdown-menu [data-value="and("] a{color:#eb7b18 !important}.irondb-tag-op .typeahead.dropdown-menu [data-value=REMOVE] a:focus,.irondb-tag-op .typeahead.dropdown-menu [data-value=REMOVE] a:hover,.irondb-tag-val .typeahead.dropdown-menu [data-value^="$"] a:focus,.irondb-tag-val .typeahead.dropdown-menu [data-value^="$"] a:hover,.irondb-tag-op .typeahead.dropdown-menu [data-value="or("] a:focus,.irondb-tag-op .typeahead.dropdown-menu [data-value="or("] a:hover,.irondb-tag-op .typeahead.dropdown-menu [data-value="not("] a:focus,.irondb-tag-op .typeahead.dropdown-menu [data-value="not("] a:hover,.irondb-tag-op .typeahead.dropdown-menu [data-value="and("] a:focus,.irondb-tag-op .typeahead.dropdown-menu [data-value="and("] a:hover,.irondb-tag-plus .typeahead.dropdown-menu [data-value="or("] a:focus,.irondb-tag-plus .typeahead.dropdown-menu [data-value="or("] a:hover,.irondb-tag-plus .typeahead.dropdown-menu [data-value="not("] a:focus,.irondb-tag-plus .typeahead.dropdown-menu [data-value="not("] a:hover,.irondb-tag-plus .typeahead.dropdown-menu [data-value="and("] a:focus,.irondb-tag-plus .typeahead.dropdown-menu [data-value="and("] a:hover{color:#fff !important}']}]),e.exports=t},function(e,t,r){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var r=function(e,t){var r=e[1]||"",n=e[3];if(!n)return r;if(t&&"function"==typeof btoa){var a=(o=n,s=btoa(unescape(encodeURIComponent(JSON.stringify(o)))),u="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(s),"/*# ".concat(u," */")),i=n.sources.map((function(e){return"/*# sourceURL=".concat(n.sourceRoot||"").concat(e," */")}));return[r].concat(i).concat([a]).join("\n")}var o,s,u;return[r].join("\n")}(t,e);return t[2]?"@media ".concat(t[2]," {").concat(r,"}"):r})).join("")},t.i=function(e,r,n){"string"==typeof e&&(e=[[null,e,""]]);var a={};if(n)for(var i=0;i<this.length;i++){var o=this[i][0];null!=o&&(a[o]=!0)}for(var s=0;s<e.length;s++){var u=[].concat(e[s]);n&&a[u[0]]||(r&&(u[2]?u[2]="".concat(r," and ").concat(u[2]):u[2]=r),t.push(u))}},t}},function(e,t,r){"use strict";r.r(t);var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}Object.create;function i(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function o(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,a,i=r.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)o.push(n.value)}catch(e){a={error:e}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(a)throw a.error}}return o}function s(e,t,r){if(r||2===arguments.length)for(var n,a=0,i=t.length;a<i;a++)!n&&a in t||(n||(n=Array.prototype.slice.call(t,0,a)),n[a]=t[a]);return e.concat(n||Array.prototype.slice.call(t))}Object.create;var u=r(0),l=r.n(u);function c(e){return e=" ["+e+"] ",function(e){}}for(var p=r(35),f=r.n(p),h=r(36),d=r.n(h),g=[170,170,181,181,186,186,192,214,216,246,248,705,710,721,736,740,748,748,750,750,880,884,886,887,890,893,902,902,904,906,908,908,910,929,931,1013,1015,1153,1162,1319,1329,1366,1369,1369,1377,1415,1488,1514,1520,1522,1568,1610,1646,1647,1649,1747,1749,1749,1765,1766,1774,1775,1786,1788,1791,1791,1808,1808,1810,1839,1869,1957,1969,1969,1994,2026,2036,2037,2042,2042,2048,2069,2074,2074,2084,2084,2088,2088,2112,2136,2308,2361,2365,2365,2384,2384,2392,2401,2417,2423,2425,2431,2437,2444,2447,2448,2451,2472,2474,2480,2482,2482,2486,2489,2493,2493,2510,2510,2524,2525,2527,2529,2544,2545,2565,2570,2575,2576,2579,2600,2602,2608,2610,2611,2613,2614,2616,2617,2649,2652,2654,2654,2674,2676,2693,2701,2703,2705,2707,2728,2730,2736,2738,2739,2741,2745,2749,2749,2768,2768,2784,2785,2821,2828,2831,2832,2835,2856,2858,2864,2866,2867,2869,2873,2877,2877,2908,2909,2911,2913,2929,2929,2947,2947,2949,2954,2958,2960,2962,2965,2969,2970,2972,2972,2974,2975,2979,2980,2984,2986,2990,3001,3024,3024,3077,3084,3086,3088,3090,3112,3114,3123,3125,3129,3133,3133,3160,3161,3168,3169,3205,3212,3214,3216,3218,3240,3242,3251,3253,3257,3261,3261,3294,3294,3296,3297,3313,3314,3333,3340,3342,3344,3346,3386,3389,3389,3406,3406,3424,3425,3450,3455,3461,3478,3482,3505,3507,3515,3517,3517,3520,3526,3585,3632,3634,3635,3648,3654,3713,3714,3716,3716,3719,3720,3722,3722,3725,3725,3732,3735,3737,3743,3745,3747,3749,3749,3751,3751,3754,3755,3757,3760,3762,3763,3773,3773,3776,3780,3782,3782,3804,3805,3840,3840,3904,3911,3913,3948,3976,3980,4096,4138,4159,4159,4176,4181,4186,4189,4193,4193,4197,4198,4206,4208,4213,4225,4238,4238,4256,4293,4304,4346,4348,4348,4352,4680,4682,4685,4688,4694,4696,4696,4698,4701,4704,4744,4746,4749,4752,4784,4786,4789,4792,4798,4800,4800,4802,4805,4808,4822,4824,4880,4882,4885,4888,4954,4992,5007,5024,5108,5121,5740,5743,5759,5761,5786,5792,5866,5870,5872,5888,5900,5902,5905,5920,5937,5952,5969,5984,5996,5998,6e3,6016,6067,6103,6103,6108,6108,6176,6263,6272,6312,6314,6314,6320,6389,6400,6428,6480,6509,6512,6516,6528,6571,6593,6599,6656,6678,6688,6740,6823,6823,6917,6963,6981,6987,7043,7072,7086,7087,7104,7141,7168,7203,7245,7247,7258,7293,7401,7404,7406,7409,7424,7615,7680,7957,7960,7965,7968,8005,8008,8013,8016,8023,8025,8025,8027,8027,8029,8029,8031,8061,8064,8116,8118,8124,8126,8126,8130,8132,8134,8140,8144,8147,8150,8155,8160,8172,8178,8180,8182,8188,8305,8305,8319,8319,8336,8348,8450,8450,8455,8455,8458,8467,8469,8469,8473,8477,8484,8484,8486,8486,8488,8488,8490,8493,8495,8505,8508,8511,8517,8521,8526,8526,8544,8584,11264,11310,11312,11358,11360,11492,11499,11502,11520,11557,11568,11621,11631,11631,11648,11670,11680,11686,11688,11694,11696,11702,11704,11710,11712,11718,11720,11726,11728,11734,11736,11742,11823,11823,12293,12295,12321,12329,12337,12341,12344,12348,12353,12438,12445,12447,12449,12538,12540,12543,12549,12589,12593,12686,12704,12730,12784,12799,13312,13312,19893,19893,19968,19968,40907,40907,40960,42124,42192,42237,42240,42508,42512,42527,42538,42539,42560,42606,42623,42647,42656,42735,42775,42783,42786,42888,42891,42894,42896,42897,42912,42921,43002,43009,43011,43013,43015,43018,43020,43042,43072,43123,43138,43187,43250,43255,43259,43259,43274,43301,43312,43334,43360,43388,43396,43442,43471,43471,43520,43560,43584,43586,43588,43595,43616,43638,43642,43642,43648,43695,43697,43697,43701,43702,43705,43709,43712,43712,43714,43714,43739,43741,43777,43782,43785,43790,43793,43798,43808,43814,43816,43822,43968,44002,44032,44032,55203,55203,55216,55238,55243,55291,63744,64045,64048,64109,64112,64217,64256,64262,64275,64279,64285,64285,64287,64296,64298,64310,64312,64316,64318,64318,64320,64321,64323,64324,64326,64433,64467,64829,64848,64911,64914,64967,65008,65019,65136,65140,65142,65276,65313,65338,65345,65370,65382,65470,65474,65479,65482,65487,65490,65495,65498,65500,65536,65547,65549,65574,65576,65594,65596,65597,65599,65613,65616,65629,65664,65786,65856,65908,66176,66204,66208,66256,66304,66334,66352,66378,66432,66461,66464,66499,66504,66511,66513,66517,66560,66717,67584,67589,67592,67592,67594,67637,67639,67640,67644,67644,67647,67669,67840,67861,67872,67897,68096,68096,68112,68115,68117,68119,68121,68147,68192,68220,68352,68405,68416,68437,68448,68466,68608,68680,69635,69687,69763,69807,73728,74606,74752,74850,77824,78894,92160,92728,110592,110593,119808,119892,119894,119964,119966,119967,119970,119970,119973,119974,119977,119980,119982,119993,119995,119995,119997,120003,120005,120069,120071,120074,120077,120084,120086,120092,120094,120121,120123,120126,120128,120132,120134,120134,120138,120144,120146,120485,120488,120512,120514,120538,120540,120570,120572,120596,120598,120628,120630,120654,120656,120686,120688,120712,120714,120744,120746,120770,120772,120779,131072,131072,173782,173782,173824,173824,177972,177972,177984,177984,178205,178205,194560,195101],y=[],m=0;m<128;m++)y[m]=m>=48&&m<=57||36===m||126===m||124===m||m>=65&&m<=90||95===m||45===m||42===m||58===m||91===m||93===m||63===m||37===m||35===m||61===m||59===m||m>=97&&m<=122;var v=y;function b(e){this.input=e,this.char=1,this.from=1}function _(e){this.expression=e,this.lexer=new b(e),this.tokens=this.lexer.tokenize(),this.index=0}b.prototype={peek:function(e){return this.input.charAt(e||0)},skip:function(e){e=e||1,this.char+=e,this.input=this.input.slice(e)},tokenize:function(){var e,t=[];if(void 0!==this.input)for(;e=this.next();)t.push(e);return t},next:function(){if(this.from=this.char,/\s/.test(this.peek())){for(;/\s/.test(this.peek());)this.from+=1,this.skip();if(""===this.peek())return null}var e=this.scanStringLiteral();return e||((e=this.scanPunctuator()||this.scanNumericLiteral()||this.scanIdentifier()||this.scanTemplateSequence())?(this.skip(e.value.length),e):null)},scanTemplateSequence:function(){return"["===this.peek()&&"["===this.peek(1)?{type:"templateStart",value:"[[",pos:this.char}:"]"===this.peek()&&"]"===this.peek(1)?{type:"templateEnd",value:"[[",pos:this.char}:null},scanIdentifier:function(){var e,t,r="",n=0;function a(e){for(var t=0;t<g.length;){if(e<g[t++])return!1;if(e<=g[t++])return!0}return!1}function i(e){return/^[0-9a-fA-F]$/.test(e)}var o=l.a.bind((function(){if(n+=1,"u"!==this.peek(n))return null;var e=this.peek(n+1),t=this.peek(n+2),r=this.peek(n+3),o=this.peek(n+4);return i(e)&&i(t)&&i(r)&&i(o)&&a(parseInt(e+t+r+o,16))?(n+=5,"\\u"+e+t+r+o):null}),this),s=l.a.bind((function(){var e=this.peek(n),t=e.charCodeAt(0);return"*"===e?(n+=1,e):92===t?o():t<128?y[t]?(n+=1,e):null:a(t)?(n+=1,e):null}),this),u=l.a.bind((function(){var e=this.peek(n),t=e.charCodeAt(0);return 92===t?o():t<128?v[t]?(n+=1,e):null:a(t)?(n+=1,e):null}),this);if(null===(t=s()))return null;for(r=t;null!==(t=u());)r+=t;switch(r){case"true":case"false":e="bool";break;default:e="identifier"}return{type:e,value:r,pos:this.char}},scanNumericLiteral:function(){var e,t=0,r="",n=this.input.length,a=this.peek(t);function i(e){return/^[0-9]$/.test(e)}function o(e){return/^[0-7]$/.test(e)}function s(e){return"$"===e||"_"===e||"\\"===e||e>="a"&&e<="z"||e>="A"&&e<="Z"}if("-"===a&&(r+=a,t+=1,a=this.peek(t)),"."!==a&&!i(a))return null;if("."!==a){if(r+=this.peek(t),t+=1,a=this.peek(t),"0"===r){if("x"===a||"X"===a){for(t+=1,r+=a;t<n&&(a=this.peek(t),/^[0-9a-fA-F]$/.test(a));)r+=a,t+=1;return r.length<=2?{type:"number",value:r,isMalformed:!0,pos:this.char}:t<n&&s(a=this.peek(t))?null:{type:"number",value:r,base:16,isMalformed:!1,pos:this.char}}if(o(a)){for(t+=1,r+=a,e=!1;t<n;){if(i(a=this.peek(t))&&(e=!0),!o(a)){if(!this.isPunctuator(a))return null;break}r+=a,t+=1}return t<n&&s(a=this.peek(t))?null:{type:"number",value:r,base:8,isMalformed:e}}i(a)&&(t+=1,r+=a)}for(;t<n&&i(a=this.peek(t));)r+=a,t+=1}if("."===a)for(r+=a,t+=1;t<n&&i(a=this.peek(t));)r+=a,t+=1;if("e"===a||"E"===a){if(r+=a,t+=1,"+"!==(a=this.peek(t))&&"-"!==a||(r+=this.peek(t),t+=1),!i(a=this.peek(t)))return null;for(r+=a,t+=1;t<n&&i(a=this.peek(t));)r+=a,t+=1}return t<n&&(a=this.peek(t),!this.isPunctuator(a))?null:{type:"number",value:r,base:10,pos:this.char,isMalformed:!isFinite(+r)}},isPunctuator:function(e){switch(e){case".":case"(":case")":case",":case"{":case"}":return!0}return!1},scanPunctuator:function(){var e=this.peek();return this.isPunctuator(e)?{type:e,value:e,pos:this.char}:null},scanStringLiteral:function(){var e=this.peek();if('"'!==e&&"'"!==e)return null;var t="";for(this.skip();this.peek()!==e;){if(""===this.peek())return{type:"string",value:t,isUnclosed:!0,quote:e,pos:this.char};t+=this.peek(),this.skip(1)}return this.skip(),{type:"string",value:t,isUnclosed:!1,quote:e,pos:this.char}}},_.prototype={getAst:function(){return this.start()},start:function(){try{return this.functionCall()||this.metricExpression()}catch(e){return{type:"error",message:e.message,pos:e.pos}}},curlyBraceSegment:function(){if(this.match("identifier","{")||this.match("{")){for(var e="";!this.match("")&&!this.match("}");)e+=this.consumeToken().value;return this.match("}")||this.errorMark("Expected closing '}'"),e+=this.consumeToken().value,this.match("identifier")&&(e+=this.consumeToken().value),{type:"segment",value:e}}return null},metricSegment:function(){var e=this.curlyBraceSegment();if(e)return e;if(this.match("identifier")||this.match("number")){var t=this.consumeToken().value.split(".");return 2===t.length&&(this.tokens.splice(this.index,0,{type:"."}),this.tokens.splice(this.index+1,0,{type:"number",value:t[1]})),{type:"segment",value:t[0]}}this.match("templateStart")||this.errorMark("Expected metric identifier"),this.consumeToken(),this.match("identifier")||this.errorMark("Expected identifier after templateStart");var r={type:"template",value:this.consumeToken().value};return this.match("templateEnd")||this.errorMark("Expected templateEnd"),this.consumeToken(),r},metricExpression:function(){if(!(this.match("templateStart")||this.match("identifier")||this.match("number")||this.match("{")))return null;var e={type:"metric",segments:[]};for(e.segments.push(this.metricSegment());this.match(".");){this.consumeToken();var t=this.metricSegment();t||this.errorMark("Expected metric identifier"),e.segments.push(t)}return e},functionCall:function(){if(!this.match("identifier","("))return null;var e={type:"function",name:this.consumeToken().value};return this.consumeToken(),e.params=this.functionParameters(),this.match(")")||this.errorMark("Expected closing parenthesis"),this.consumeToken(),e},boolExpression:function(){return this.match("bool")?{type:"bool",value:"true"===this.consumeToken().value}:null},functionParameters:function(){if(this.match(")")||this.match(""))return[];var e=this.functionCall()||this.numericLiteral()||this.boolExpression()||this.metricExpression()||this.stringLiteral();return this.match(",")?(this.consumeToken(),[e].concat(this.functionParameters())):[e]},numericLiteral:function(){return this.match("number")?{type:"number",value:parseFloat(this.consumeToken().value)}:null},stringLiteral:function(){if(!this.match("string"))return null;var e=this.consumeToken();if(e.isUnclosed)throw{message:"Unclosed string parameter",pos:e.pos};return{type:"string",value:e.value}},errorMark:function(e){var t=this.tokens[this.index];throw{message:e+" instead found "+(t?t.type:"end of string"),pos:t?t.pos:this.lexer.char}},consumeToken:function(){return this.index++,this.tokens[this.index-1]},matchToken:function(e,t){var r=this.tokens[this.index+t];return void 0===r&&""===e||r&&r.type===e},match:function(e,t){return this.matchToken(e,0)&&(!t||this.matchToken(t,1))}};var A,S=c("IrondbQuery");function T(e,t){var r,n;void 0===t&&(t=!0);var a={};try{for(var o=i(e.split(/,/g)),s=o.next();!s.done;s=o.next()){var u=s.value.split(/:/g),c=u.shift(),p=u.join(":");t&&(c=L(c),p=L(p));var f=a[c];l.a.isUndefined(f)&&(a[c]=f=[]),f.push(p)}}catch(e){r={error:e}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return a}function w(e,t){for(var r in t){var n=e[r];l.a.isUndefined(n)&&(e[r]=n=[]),n.push.apply(n,t[r])}}function x(e){var t="",r=e.indexOf("ST[");return-1!==r&&(t=e.substring(r+3,e.length-1),e=e.substring(0,r-1)),[e,t]}function C(e){return x(e)[0]}!function(e){e[e.MetricName=0]="MetricName",e[e.TagCat=1]="TagCat",e[e.TagVal=2]="TagVal",e[e.TagPair=3]="TagPair",e[e.TagSep=4]="TagSep",e[e.TagEnd=5]="TagEnd",e[e.TagOp=6]="TagOp",e[e.TagPlus=7]="TagPlus"}(A||(A={}));var E={};function R(e,t){for(var r,n,a=0,s=new Map,u=0;u<e.length;u++){var l=o(x(e[u].metric_name),2),c=(l[0],T(l[1]));try{for(var p=(r=void 0,i(e[u].check_tags)),f=p.next();!f.done;f=p.next()){var h=f.value.split(/:/g),d=h.shift();if(!d.startsWith("__")&&""!==d){var g=h.join(":");d=L(d),g=L(g),void 0===c[d]&&(c[d]=[]),c[d].push(g)}}}catch(e){r={error:e}}finally{try{f&&!f.done&&(n=p.return)&&n.call(p)}finally{if(r)throw r.error}}var y=""!==t&&void 0!==c[t]?c[t][0]:E;void 0===s.get(y)&&(a+=1),s.set(y,!0)}return a>1}var O=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,0,0,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],q=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];function k(e){return 1===O[e]}function M(e){return 1===q[e]}function N(e,t){for(var r=0,n=0;n<e.length;n++){t(e.charCodeAt(n))&&(r+=1)}return r===e.length}function P(e,t,r){void 0===r&&(r=!0),e===A.MetricName&&(e=A.TagVal);var n=!1;if((e!==A.TagCat||function(e){return N(e,k)}(t))&&(e!==A.TagVal||function(e){return N(e,M)}(t)||1===t.length&&"*"===t.charAt(0))||(n=!0),n){var a='"';r&&(a="!"),t=["b",a,btoa(t),a].join("")}return t}function L(e){return/^b(["!]{1}).+\1$/.test(e)&&(e=atob(e.slice(2,e.length-1))),e}function I(e){var t=o(x(e),2),r=(t[0],T(t[1]).statsd_type);return!(void 0===r||!r.includes("count"))}var j=function(){function e(e,t,r,n){this.datasource=e,this.target=t,this.parseGraphiteTarget(),this.parseTarget()}return e.$inject=["datasource","target","templateSrv","scopedVars"],e.prototype.parseTarget=function(){var e=this;this.segments=[],this.error=null,S((function(){return"parseTarget() target = "+JSON.stringify(e.target)}));var t=this.target.query||"",r="caql"===this.target.querytype?"":t,n=(r=r.slice(11,-1)||"*").split(",");r=n.shift(),this.segments.push({type:A.MetricName,value:L(r)});var a=n.join(","),i=this.parseTagFilter(a);this.segments=this.segments.concat(i)},e.prototype.parseGraphiteTarget=function(){this.gSegments=[],this.error=null;var e={segment:A.MetricName},t=this.target.query||"",r=new _("caql"===this.target.querytype?"":t).getAst();if(null!==r)if("error"!==r.type){switch(r.type){case"metric":this.gSegments=r.segments}this.gSegments.forEach((function(t){t.type=null!=e[t.type]?e[t.type]:t.type}));var n=this.target.tagFilter||"";if(n){var a=this.parseTagFilter(n);this.gSegments=this.gSegments.concat(a)}}else this.error=r.message+" at position: "+r.pos;else this.gSegments.push({type:A.TagPlus})},e.prototype.parseTagFilter=function(e){var t,r;void 0===e&&(e="");var n=e?e.split(","):[],a=[],o=!0;try{for(var s=i(n),u=s.next();!u.done;u=s.next()){var l=u.value;o?o=!1:a.push({type:A.TagSep});var c=l.split(":"),p=c.shift(),f=c.join(":"),h=!1,d=4;p.startsWith("and(")||p.startsWith("not(")?h=!0:p.startsWith("or(")&&(h=!0,d=3),h&&(a.push({type:A.TagOp,value:p.slice(0,d)}),p=p.slice(d)),a.push({type:A.TagCat,value:L(p)}),a.push({type:A.TagPair});for(var g=0;f.endsWith(")");)f=f.slice(0,-1),g++;a.push({type:A.TagVal,value:L(f)});for(var y=0;y<g;y++)a.push({type:A.TagPlus}),a.push({type:A.TagEnd})}}catch(e){t={error:e}}finally{try{u&&!u.done&&(r=s.return)&&r.call(s)}finally{if(t)throw t.error}}return 0===n.length&&a.push({type:A.TagPlus}),a},e.prototype.convertStandardToGraphite=function(e){void 0===e&&(e="");var t=[],r=[],n=this.segments.length,a=this.segments[0]||{},i=this.segments[1]||{};e?t=e.split("|ST")[0].split(".").map((function(e){return{type:A.MetricName,value:e}})):2===n&&a.type===A.MetricName&&i.type===A.TagPlus?(this.addSelectMetricSegment(),this.addPlusSegment()):this.segments.forEach((function(e){if(e.type===A.MetricName)t=(e.value||"").split("|ST")[0].split(".").map((function(e){return{type:A.MetricName,value:e}}));else{var n=l.a.assign({},e);r.push(n)}})),this.gSegments=t.concat(r),1===this.gSegments.length&&"*"===this.gSegments[0].value&&this.gSegments.splice(0,1)},e.prototype.convertGraphiteToStandard=function(){var e="__check_uuid",t=[],r=[],n="";if(this.gSegments.forEach((function(e,a){if(e.type===A.MetricName)/^\w{8}-\w{4}-\w{4}-\w{4}-\w{12}$/.test(e.value)&&0===a?n=e.value:t.push("select metric"===e.value?"*":e.value);else{var i=l.a.assign({},e);r.push(i)}})),this.segments=[{type:A.MetricName,value:t.join(".")}].concat(r),n){var a=!1,i=this.segments.some((function(e){return e.type===A.TagOp&&(a="and("===e.value),e.type===A.TagOp}));if(i&&a){var o=this.segments[this.segments.length-1],s=this.segments[this.segments.length-2],u=-1;o.type===A.TagEnd&&(u=s.type===A.TagPlus?this.segments.length-2:this.segments.length-1),~u&&this.segments.splice(u,0,{type:A.TagSep},{type:A.TagCat,value:e},{type:A.TagPair},{type:A.TagVal,value:n})}if(i&&!a){var c=this.segments.findIndex((function(e){return e.type===A.TagOp}));~c&&this.segments.splice(c,0,{type:A.TagOp,value:"and("}),this.segments.push({type:A.TagSep},{type:A.TagCat,value:e},{type:A.TagPair},{type:A.TagVal,value:n},{type:A.TagPlus},{type:A.TagEnd})}i||this.segments.push({type:A.TagOp,value:"and("},{type:A.TagCat,value:e},{type:A.TagPair},{type:A.TagVal,value:n},{type:A.TagPlus},{type:A.TagEnd})}},e.prototype.getGraphiteSegmentPath=function(){var e=this.gSegments.findIndex((function(e){return null!=e.type&&e.type!==A.MetricName}));return~e||(e=this.gSegments.length),this.getGraphiteSegmentPathUpTo(e)},e.prototype.getGraphiteSegmentPathUpTo=function(e){var t=this.gSegments.findIndex((function(e){return null!=e.type&&e.type!==A.MetricName})),r=this.gSegments.slice(0,Math.min(e,t));return r.length||r.push(""),r.reduce((function(e,t){return(e||"")+(t.value||"")+"."}),"")},e.prototype.updateSegmentValue=function(e,t){(this["graphite"===this.target.querytype?"gSegments":"segments"][t]||{}).value=e.value},e.prototype.addSelectMetricSegment=function(){var e="graphite"===this.target.querytype,t=this[e?"gSegments":"segments"].some((function(e){return"select metric"===e.value})),r=this[e?"gSegments":"segments"].findIndex((function(e){return null!=e.type&&e.type!==A.MetricName}));~r||(r=this[e?"gSegments":"segments"].length),t||this[e?"gSegments":"segments"].splice(r,0,{type:A.MetricName,value:"select metric"})},e.prototype.addPlusSegment=function(){var e="graphite"===this.target.querytype;this[e?"gSegments":"segments"].some((function(e){return e.type===A.TagPlus}))||this[e?"gSegments":"segments"].push({type:A.TagPlus})},e.prototype.removeSegments=function(e){if(null!=e){var t="graphite"===this.target.querytype;this[t?"gSegments":"segments"]=this[t?"gSegments":"segments"].splice(0,e)}},e.prototype.emptySegments=function(){this["graphite"===this.target.querytype?"gSegments":"segments"]=[]},e.prototype.removeOperator=function(e){for(var t="graphite"===this.target.querytype,r=e+1,n=1,a=this[t?"gSegments":"segments"].length;n>0&&r<a;){var i=this[t?"gSegments":"segments"][r].type;if(i===A.TagOp)n++;else if(i===A.TagEnd&&0===--n)break;r++}var o=e,s=r-e+1;(this[t?"gSegments":"segments"][e-1]||{}).type===A.TagSep&&(o--,s++),this[t?"gSegments":"segments"].splice(o,s),a===r+1&&this[t?"gSegments":"segments"].push({type:A.TagPlus})},e.prototype.addOperator=function(e,t){var r="graphite"===this.target.querytype,n=this[r?"gSegments":"segments"].findIndex((function(e){return null!=e.type&&e.type!==A.MetricName})),a=r&&n<e||!r&&e>2,i=0;"and("!==t&&"not("!==t&&"or("!==t||((this[r?"gSegments":"segments"][e]||{}).type===A.TagPlus&&this[r?"gSegments":"segments"].splice(e,1),a&&(this[r?"gSegments":"segments"].splice(e,0,{type:A.TagSep}),i=1),this[r?"gSegments":"segments"].splice(e+i,0,{type:A.TagOp,value:t},{type:A.TagCat,value:"select tag",fake:!0},{type:A.TagPair},{type:A.TagVal,value:"*"},{type:A.TagPlus},{type:A.TagEnd}),a&&this[r?"gSegments":"segments"].splice(e+i+6,0,{type:A.TagPlus}))},e.prototype.addTag=function(e,t){var r="graphite"===this.target.querytype;e>2&&this[r?"gSegments":"segments"].splice(e,0,{type:A.TagSep}),this[r?"gSegments":"segments"].splice(e+(e>2?1:0),0,{type:A.TagCat,value:t},{type:A.TagPair},{type:A.TagVal,value:"*"}),1===e&&(this[r?"gSegments":"segments"].splice(e,0,{type:A.TagOp,value:"and("}),this[r?"gSegments":"segments"].push({type:A.TagEnd}))},e.prototype.renderQueries=function(e){var t,r;this.renderQueryReferences(this.target,e);try{for(var n=i(e||[]),a=n.next();!a.done;a=n.next()){var o=a.value;o.refId!==this.target.refId&&this.renderQueryReferences(o,e)}}catch(e){t={error:e}}finally{try{a&&!a.done&&(r=n.return)&&r.call(n)}finally{if(t)throw t.error}}},e.prototype.renderQueryReferences=function(e,t){var r=/\#([A-Z])/g,n=""+e.queryDisplay,a=l.a.keyBy(t,"refId");for(delete a[e.refId],l.a.each(a,(function(e,t){var n=0;l.a.each(a,(function(e,a){if(a!==t){var i=((e.query||"").match(r)||[]).filter((function(e){return e==="#"+t}));n+=i.length}})),e.refCount=n}));null!==n.match(r);){var i=n.replace(r,(function(e,t,r,n){var i=a[t];return i?(i.refCount<=0&&delete a[t],i.refCount--,i.query):e}));if(i===n)break;n=i}delete e.targetFull,e.query!==n&&(e.query=e.targetFull=n)},e}(),D=r(1),H=r(20);function $(e){return($="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var F=c("IrondbDatasource"),Q=[[1,.5,.25,.2,.1,.05,.025,.02,.01,.005,.002,.001],[60,30,20,15,10,5,3,2,1],[60,30,20,15,10,5,3,2,1].map((function(e){return 60*e})),[24,12,8,6,4,3,2,1].map((function(e){return 60*e*60}))];function G(e,t){if(-1!==t&&(t=1),e<.001)return.001;for(var r=0;r<Q.length;r++){var n=Q[r];if(e<n[0])for(var a=1;a<n.length;a++){if(e>n[a])return-1===t?n[a]:n[a-1];if(e===n[a])return n[a]}}return e%86400==0?e:1===t?86400*(1+Math.floor(e/86400)):86400*Math.floor(e/86400)}var U={count:"count",average:"average",stddev:"stddev",derive:"rate",derive_stddev:"derive_stddev",counter:"rate",counter_stddev:"counter_stddev"},V={ms:1,s:1e3,m:6e4,h:36e5,d:864e5};function B(e){var t=e.toLocaleLowerCase().match(/^([0-9]+)(ms|s|m|h|d)?$/);if(!t)throw new Error("Invalid time duration: "+e);return parseInt(t[1],10)*V[t[2]||"s"]}var z=function(e){function t(r,n,a,i){var o=e.call(this,r)||this;return o.$q=n,o.backendSrv=a,o.templateSrv=i,o.type="irondb",o.name=r.name,o.id=r.id,o.accountId=r.jsonData.accountId,o.irondbType=r.jsonData.irondbType,o.resultsLimit=r.jsonData.resultsLimit,o.caqlMinPeriod=r.jsonData.caqlMinPeriod,o.apiToken=r.jsonData.apiToken,o.useCaching=r.jsonData.useCaching,o.truncateNow=r.jsonData.truncateNow,o.minTruncation=r.jsonData.minTruncation||"0",o.activityTracking=r.jsonData.activityTracking,o.allowGraphite=r.jsonData.allowGraphite,o.queryPrefix=r.jsonData.queryPrefix,o.url=r.url,o.supportAnnotations=!1,o.supportMetrics=!0,o.appName="Grafana",o.datasourceRequest=t.setupCache(o.useCaching,a),o}return t.$inject=["instanceSettings","$q","backendSrv","templateSrv"],a(t,e),t.stripActivityWindow=function(e){return l.a.split(e,"&").map((function(e){return e.split("=")})).filter((function(e){return!e[0].startsWith("activity_")})).map((function(e){return e.join("=")})).join("&")},t.requestCacheKey=function(e){var r=e.method;if("GET"===r)return t.stripActivityWindow(e.url);if("POST"===r)return JSON.stringify(e.data);throw new Error("Unsupported HTTP method type: "+(r||"?"))},t.setupCache=function(e,r){var n=function(e){return r.datasourceRequest(e)};if(!e)return F((function(){return"setupCache() caching disabled"})),n;var a={max:t.DEFAULT_CACHE_ENTRIES,maxAge:t.DEFAULT_CACHE_TIME_MS,promise:!0,normalizer:function(e){var r=e[0],n=t.requestCacheKey(r);return F((function(){return"normalizer() cache lookup key = "+n})),n}};return F((function(){return"setupCache() caching enabled"})),d()((function(e){return F((function(){return"doRequest() cache miss key = "+t.requestCacheKey(e)})),n(e)}),a)},t.prototype.query=function(e){var t=this;l.a.isUndefined(this.queryRange)||l.a.isEqual(e.range,this.queryRange)||(F((function(){return"query() time range changed "+JSON.stringify(t.queryRange)+" -> "+JSON.stringify(e.range)})),this.useCaching&&(F((function(){return"query() clearing cache"})),this.datasourceRequest.clear()));return this.queryRange=e.range,l.a.isEmpty(e.targets[0])?this.$q.when({data:[]}):Promise.all([this.buildIrondbParams(e)]).then((function(e){return l.a.isEmpty(e[0])?t.$q.when({data:[]}):t.irondbRequest(e,!0)})).then((function(e){return"ts"===e.t&&e.data.constructor===Array&&e.data.sort((function(e,t){return e&&null==t?-1:t&&null==e?1:null==e&&null==t?0:(e.target||"").localeCompare(t.target)})),F((function(){return"query() queryResults = "+JSON.stringify(e)})),e})).catch((function(e){(0!==e.status||e.status>=300)&&t.throwerr(e)}))},t.prototype.annotationQuery=function(e){var t=this;(F((function(){return"annotationQuery() options = "+JSON.stringify(e.annotation)})),F((function(){return"annotationQuery() range = "+JSON.stringify(e.range)})),l.a.isUndefined(this.queryRange)||l.a.isEqual(e.range,this.queryRange))||(F((function(){return"query() time range changed "+JSON.stringify(t.queryRange)+" -> "+JSON.stringify(e.range)})),this.useCaching&&(F((function(){return"query() clearing cache"})),this.datasourceRequest.clear()));this.queryRange=e.range;var r={},n=[],a={"Content-Type":"application/json"};if(a["X-Circonus-Auth-Token"]=this.apiToken,a["X-Circonus-App-Name"]=this.appName,a.Accept="application/json","alerts"===e.annotation.annotationQueryType){(r={}).url=this.url,r.url=r.url+"/v2",r.method="GET",r.url=r.url+"/alert";var s=this.templateSrv.replace(e.annotation.alertId),u=this.templateSrv.replace(e.annotation.annotationQueryText);r.url=""!==s?r.url+"/"+s:r.url+"?search="+encodeURIComponent(u)+"&size=500",r.headers=a,r.retry=1,r.start=e.range.from.valueOf()/1e3,r.end=e.range.to.valueOf()/1e3,r.isAlert=!0,r.local_filter=e.annotation.annotationFilterText,r.local_filter_match=e.annotation.annotationFilterApply,r.annotation=e.annotation,(this.basicAuth||this.withCredentials)&&(r.withCredentials=!0),this.basicAuth&&(r.headers.Authorization=this.basicAuth),r.isCaql=!1,n.push(r)}return Promise.all(n.map((function(e){return t.datasourceRequest(e).then((function(r){if(F((function(){return"annotationQuery() query = "+JSON.stringify(e)})),F((function(){return"annotationQuery() result = "+JSON.stringify(r)})),!l.a.isUndefined(e.isAlert))return t.enrichAlertsWithRules(r,e)})).then((function(t){var r,n,a,s,u=[];try{for(var l=i(t),c=l.next();!c.done;c=l.next()){var p=c.value,f=p.alert,h=p.rule,d={};if(!(f._occurred_on<e.start||f._occurred_on>e.end)){var g=f._canonical_metric_name,y=f._metric_name;if(void 0!==g&&""!==g){var m=o(x(g),2);m[0];w(d,T(m[1]))}try{for(var v=(a=void 0,i(f._tags)),b=v.next();!b.done;b=v.next()){var _=b.value.split(/:/g);if(!(C=_.shift()).startsWith("__")&&""!==C){var A=_.join(":");C=L(C),A=L(A),void 0===d[C]&&(d[C]=[]),d[C].push(A)}}}catch(e){a={error:e}}finally{try{b&&!b.done&&(s=v.return)&&s.call(v)}finally{if(a)throw a.error}}var S=[];for(var C in d)S.push(C+":"+d[C][0]);var E={};E.metric=y,E.value=f._value;var R={evalMatches:[]};R.evalMatches.push(E);var O=null!=h&&null!==h.notes&&""!==h.notes?h.notes:"Oh no!";O=H.render(O,d);var q={time:1e3*f._occurred_on,title:"ALERTING",text:"<br />"+O+"<br />Sev: "+f._severity+"<br >"+(null!==f._metric_link&&""!==f._metric_link?'<a href="'+f._metric_link+'" target="_blank">Info</a><br />':""),tags:S,alertId:f._cid.replace("/alert/",""),newState:"alerting",source:e.annotation,data:R};if(u.push(q),O=null!=h&&null!==h.notes&&""!==h.notes?h.notes:"Yay!",O=H.render(O,d),null!==f._cleared_on){var k={};k.metric=y,k.value=f._cleared_value;var M={evalMatches:[]};M.evalMatches.push(k);var N={time:1e3*f._cleared_on,title:"OK",text:"<br />"+O+"<br />Sev: "+f._severity+"<br >"+(null!==f._metric_link&&""!==f._metric_link?'<a href="'+f._metric_link+'" target="_blank">Info</a><br />':""),tags:S,alertId:f._cid.replace("/alert/",""),newState:"ok",source:e.annotation,data:M};u.push(N)}}}}catch(e){r={error:e}}finally{try{c&&!c.done&&(n=l.return)&&n.call(l)}finally{if(r)throw r.error}}return u}))}))).then((function(e){return e}))},t.prototype.interpolateExpr=function(e,t){if(void 0===e&&(e=[]),!t.multi&&!t.includeAll)return e;if("string"==typeof e)return e;if(1===e.length)return e[0];for(var r="",n=0;n<e.length;n++)n>0&&(r+=","),r+=e[n],n+=1;return r},t.prototype.metricFindQuery=function(e,t){var r=this,n=t.variable,a=t.range,i=void 0,o=void 0;if(!l.a.isUndefined(a)){if(i=a.from.valueOf()/1e3,o=a.to.valueOf()/1e3,!l.a.isUndefined(this.queryRange)&&!l.a.isEqual(a,this.queryRange))if(F((function(){return"query() time range changed "+JSON.stringify(r.queryRange)+" -> "+JSON.stringify(a)})),this.useCaching)F((function(){return"query() clearing cache"})),this.datasourceRequest.clear();this.queryRange=a}var s=null;if(s="string"==typeof e?{queryType:void 0!==n&&n.useTags&&n.tagValuesQuery?"tag values":"metric names",metricFindQuery:e,tagCategory:void 0!==n&&n.useTags?n.tagValuesQuery:"",resultsLimit:100}:e,F((function(){return"Options: "+JSON.stringify(t)})),void 0!==s){var u=s&&s.queryType||(s.tagCategory?"tag values":"metric names"),c=s&&s.resultsLimit||100,p=this.templateSrv.replace(s.metricFindQuery,null,this.interpolateExpr);return"graphite style"===u||p.includes("and(")||p.includes("or(")||p.includes("not(")||(p="and(__name:"+p+")"),"tag values"===u?this.metricTagValsQuery(p,s.tagCategory,i,o,c).then((function(e){var t=e.headers.get("X-Snowth-Search-Result-Count");return t>1e3?setTimeout((function(){f(t)}),100):h(),l.a.map(e.data,(function(e){return{value:r.decodeBase64(e)}}))})):"tag categories"===u?this.metricTagCatsQuery(p,i,o,c).then((function(e){var t=e.headers.get("X-Snowth-Search-Result-Count");return t>1e3?setTimeout((function(){f(t)}),100):h(),l.a.map(e.data,(function(e){return{value:r.decodeBase64(e)}}))})):"graphite style"===u?this.metricGraphiteQuery(p,!1,i,o,"",c).then((function(e){var t=e.headers.get("X-Snowth-Search-Result-Count");t>1e3?setTimeout((function(){f(t)}),100):h();var r=[];return e.data.forEach((function(e){var t=(e.name||"").replace(/^\w{8}-\w{4}-\w{4}-\w{4}-\w{12}\./).split(".").pop().split(";").shift();r.find((function(e){return e.value===t}))||r.push({value:t})})),r})):this.metricTagsQuery(p,!1,i,o,c).then((function(e){var t=e.headers.get("X-Snowth-Search-Result-Count");return t>1e3?setTimeout((function(){f(t)}),100):h(),l.a.map(e.data,(function(e){return{value:e.metric_name}}))}))}return Promise.resolve([]);function f(e){var t=document.querySelector('[aria-label="Variable editor Form"]'),r=Array.from(t?t.querySelectorAll("h3,h4,h5"):[]).find((function(e){return/^Preview\s/.test(e.innerText)}));if(r){var n=document.createElement("span");n.className="result-warning",n.style.color="rgb(235, 123, 24)",n.style.marginBottom="1rem",n.innerHTML="<strong>Warning:</strong> "+e+" results found.<br />Only the first 1000 results are used&hellip;please refine your query.";var a=r.parentElement,i=a.parentElement;Array.from(i.getElementsByClassName("result-warning")).forEach((function(e){e.remove()})),i.insertBefore(n,a)}}function h(){var e=document.querySelector('[aria-label="Variable editor Form"]'),t=Array.from(e?e.querySelectorAll("h3,h4,h5"):[]).find((function(e){return/^Preview\s/.test(e.innerText)}));t&&Array.from(t.parentElement.parentElement.getElementsByClassName("result-warning")).forEach((function(e){e.remove()}))}},t.prototype.decodeBase64=function(e){return/^b(["!]{1}).+\1$/.test(e)&&(e=atob(e.slice(2,e.length-1))),e},t.prototype.getAccountId=function(){return"standalone"===this.irondbType?"/"+this.accountId:""},t.prototype.ignoreGraphiteUUIDs=function(){return!(this.queryPrefix||"").trim()},t.prototype.metricGraphiteQuery=function(e,t,r,n,a,i){var o=this.ignoreGraphiteUUIDs(),s="/"+this.queryPrefix+"/metrics/find",u=["query="+(o?"*.":"")+e,"activity=0"];a&&u.push("irondb_tag_filter="+a),s+="?"+u.join("&");var l=!!i||!t;return this.irondbSimpleRequest("GET",s,!1,!0,l,!0,i)},t.prototype.metricTagsQuery=function(e,t,r,n,a){if(void 0===t&&(t=!1),""===e||void 0===e||!t&&"and(__name:*)"===e)return Promise.resolve({data:[]});var i="/find"+this.getAccountId()+"/tags?query=";return i+=e,this.activityTracking&&r&&n&&(F((function(){return"metricTagsQuery() activityWindow = ["+r+","+n+"]"})),i+="&activity_start_secs="+l.a.toInteger(r),i+="&activity_end_secs="+l.a.toInteger(n)),F((function(){return"metricTagsQuery() queryUrl = "+i})),this.irondbSimpleRequest("GET",i,!1,!0,!0,!1,a)},t.prototype.metricTagValsQuery=function(e,t,r,n,a){var i="/find"+this.getAccountId()+"/tag_vals?category="+t+"&query="+e;return this.activityTracking&&r&&n&&(F((function(){return"metricFindTagsQuery() activityWindow = ["+r+","+n+"]"})),i+="&activity_start_secs="+l.a.toInteger(r),i+="&activity_end_secs="+l.a.toInteger(n)),F((function(){return"metricTagValsQuery() queryUrl = "+i})),this.irondbSimpleRequest("GET",i,!1,!0,!0,!1,a)},t.prototype.metricTagCatsQuery=function(e,t,r,n){var a="/find"+this.getAccountId()+"/tag_cats?query="+e;return this.activityTracking&&t&&r&&(F((function(){return"metricTagsCatsQuery() activityWindow = ["+t+","+r+"]"})),a+="&activity_start_secs="+l.a.toInteger(t),a+="&activity_end_secs="+l.a.toInteger(r)),F((function(){return"metricTagCatsQuery() queryUrl = "+a})),this.irondbSimpleRequest("GET",a,!1,!0,!0,!1,n)},t.prototype.testDatasource=function(){return this.metricTagsQuery("and(__name:ametric)").then((function(e){var t=l.a.get(e,"results[0].error");return t?{status:"error",message:t,title:"Error"}:{status:"success",message:"Data source is working",title:"Success"}})).catch((function(e){var t=(e.data||{}).message;return void 0===t&&(t="Error "+(e.status||"")+" "+(e.statusText||"")),{status:"error",message:t,title:"Error"}}))},t.prototype.throwerr=function(e){if(F((function(){return"throwerr() err = "+JSON.stringify(e)})),"object"!==$(e))throw e?e.toString():"unknown";if(!e.data||"object"!==$(e.data)||!e.data.message)throw e.data&&e.data.user_error&&"object"===$(e.data.user_error)&&e.data.user_error.message?e.data.user_error.message+", in query: "+e.data.arguments.q:String(e);var t;try{t=JSON.parse(e.data.message||e.data)}catch(e){F((function(){return"throwerr() failed to parse json from error.data.message. error: "+e}))}if(t&&t.user_error)throw t.user_error.message+", in query: "+t.arguments.q;if("Not Found"===e.statusText)throw"Circonus IRONdb Error: "+e.statusText;if("string"==typeof e.data.message)throw e.data.message;if(e.statusText&&e.status>0)throw"Network Error: "+e.statusText+"("+e.status+")"},t.prototype.irondbSimpleRequest=function(e,t,r,n,a,i,o){void 0===r&&(r=!1),void 0===n&&(n=!1),void 0===a&&(a=!0),void 0===i&&(i=!1);var s=this.url,u={"Content-Type":"application/json"};"hosted"!==this.irondbType&&(u["X-Circonus-Account"]=this.accountId),"hosted"!==this.irondbType||r||(s=s+"/irondb"+(i?"/graphite":""),n||(s+="/series_multi"),u["X-Circonus-Auth-Token"]=this.apiToken,u["X-Circonus-App-Name"]=this.appName),u["X-Snowth-Advisory-Limit"]=a?o||this.resultsLimit:100,"standalone"!==this.irondbType||r||(i?(s=s+"/graphite/"+this.accountId,n||(s=s+"/"+this.queryPrefix+"/series_multi")):n||(s+="/series_multi")),r&&!n&&(s+="/extension/lua/caql_v1");var l={method:e,url:s+t,headers:u,retry:1};return F((function(){return"irondbSimpleRequest() options = "+JSON.stringify(l)})),this.datasourceRequest(l)},t.prototype.irondbRequest=function(e,r){var n=this;void 0===r&&(r=!0);var a=e[0];F((function(){return"irondbRequest() irondbOptions = "+JSON.stringify(a)}));var i={"Content-Type":"application/json"},o={},s=[],u={data:[],t:"ts"};if("hosted"===this.irondbType?(i["X-Circonus-Auth-Token"]=this.apiToken,i["X-Circonus-App-Name"]=this.appName):i["X-Circonus-Account"]=this.accountId,i["X-Snowth-Advisory-Limit"]=r?this.resultsLimit:100,i.Accept="application/json",a.std.names.length)for(var c=a.std.names[0].leaf_data.target.format||a.std.names[0].leaf_data.format||"ts",p=function(e){(o={}).url=f.url,"hosted"===f.irondbType&&(o.url=o.url+"/irondb"),o.method="POST",o.url=o.url+"/fetch";var t=a.std.start,r=a.std.end,n=f.getRollupSpan(a,t,r,!1,a.std.names[e].leaf_data),u=Math.max(n,parseInt(f.minTruncation,10));t-=n,r=Date.now()-1e3*r<1e3&&f.truncateNow?r-u:r+n;var l=[],p=[],h="heatmap"===c?"merge":"pass",d=[],g={streams:d};g.period=n,g.start=t,g.count=Math.round((r-t)/n),g.reduce=[{label:"",method:h}];var y=a.std.names[e].leaf_data.metrictype;l.push(a.std.names[e].leaf_data.metriclabel),p.push(a.std.names[e].leaf_data.check_tags);var m={},v=a.std.names[e].leaf_data.egress_function;if("histogram"===y)if("heatmap"===c)v="none";else{v=U[v];var b="default";I(a.std.names[e].leaf_name)&&(b="statsd_counter"),a.std.names[e].leaf_data.target.hist_transform=b}m.transform=v,m.name=a.std.names[e].leaf_data.metric_name||a.std.names[e].leaf_name,m.uuid=a.std.names[e].leaf_data.uuid,m.kind=y,m.uuid&&d.push(m),F((function(){return"irondbRequest() data = "+JSON.stringify(g)})),o.data=g,o.metricLabels=l,o.check_tags=p,o.name="fetch",o.headers=i,(f.basicAuth||f.withCredentials)&&(o.withCredentials=!0),f.basicAuth&&(o.headers.Authorization=f.basicAuth),o.paneltype=c,o.format=a.std.names[e].leaf_data.format,o.isCaql=!1,o.isGraphite=!1,o.retry=1,s.push(o)},f=this,h=0;h<a.std.names.length;h++)p(h);if(a.caql.names.length){var d=function(e){(o={}).url=g.url,"hosted"===g.irondbType&&(o.url=o.url+"/irondb"),o.method="GET",o.url=o.url+"/extension/lua","hosted"===g.irondbType&&(o.url=o.url+"/public");var r=g.templateSrv.replace(a.caql.names[e].leaf_name,a.scopedVars),n=(a.caql.names[e].leaf_data||{}).min_period,u=(n&&!/^#min_period=/.test(r)?"#min_period="+n+" ":"")+r,l=a.caql.start,c=a.caql.end,p=u.match(/#min_period=(\d+\w{0,2}?)\s/i),f=p?Math.round(B(p[1])/1e3):null,h=g.getRollupSpan(a,l,c,!0,a.caql.names[e].leaf_data),d=f&&h===Math.round(t.MIN_DURATION_MS_CAQL/1e3)?Math.min(h,f):h,y=Math.max(d,parseInt(g.minTruncation,10));l-=d,c=Date.now()-1e3*c<1e3&&g.truncateNow?c-y:c+d,o.url=o.url+"/caql_v1";var m={start:l.toFixed(3),end:c.toFixed(3),period:d,format:"DF4",q:u};u.length>2e3?(o.method="POST",o.data=JSON.stringify(m)):o.url+="?"+Object.keys(m).map((function(e){return e+"="+encodeURIComponent(m[e])})).join("&"),o.headers=i,o.start=l,o.end=c,o.retry=1,(g.basicAuth||g.withCredentials)&&(o.withCredentials=!0),g.basicAuth&&(o.headers.Authorization=g.basicAuth),o.isCaql=!0,o.name=a.caql.names[e],o.format=(o.name.leaf_data||{}).format,o.refId=(o.name.leaf_data||{}).refId,s.push(o)},g=this;for(h=0;h<a.caql.names.length;h++)d(h)}if(a.alert.names.length)for(h=0;h<a.alert.names.length;h++){(o={}).url=this.url,"hosted"===this.irondbType&&(o.url=o.url+"/v2"),o.method="GET",o.url=o.url+"/alert";var y=this.templateSrv.replace(a.alert.names[h],a.scopedVars);y.startsWith("alert_id:")?o.url=o.url+"/"+y.split(":")[1]:o.url=o.url+"?search="+encodeURIComponent(y)+"&size=1000",o.headers=i,o.retry=1,o.start=a.alert.start,o.end=a.alert.end,o.isAlert=!0,o.counts_only=a.alert.counts_only,o.label=a.alert.labels[h],o.local_filter=a.alert.local_filters[h],o.local_filter_match=a.alert.local_filter_matches[h],o.query_type=a.alert.query_type,o.target=a.alert.target,(this.basicAuth||this.withCredentials)&&(o.withCredentials=!0),this.basicAuth&&(o.headers.Authorization=this.basicAuth),o.isCaql=!1,o.refId=a.refId,s.push(o)}return F((function(){return"irondbRequest() queries = "+JSON.stringify(s)})),Promise.all(s.map((function(e,t,r){return n.datasourceRequest(e).then((function(t){return F((function(){return"irondbRequest() query = "+JSON.stringify(e)})),F((function(){return"irondbRequest() result = "+JSON.stringify(t)})),l.a.isUndefined(e.isAlert)?e.isGraphite?n.convertIrondbGraphiteDataToGrafana(t,e):n.convertIrondbDf4DataToGrafana(t,e):!1===e.counts_only?n.enrichAlertsWithRules(t,e).then((function(e){return n.convertAlertDataToGrafana(e)})):n.countAlerts(t,e)})).then((function(e){var t=e.query;if(e.data.constructor===Array)for(var r=0;r<e.data.length;r++)"target"in e&&"refId"in e.target?e.data[r].target=e.target.refId:t&&t.refId&&(e.data[r].target=t.refId),u.data.push(e.data[r]);return e.data.constructor===Object&&("target"in e&&"refId"in e.target?e.data.target=e.target.refId:t&&t.refId&&(e.data.target=t.refId),u.data.push(e.data)),null!=e.t&&(u.t=e.t),u}))}))).then((function(e){return u})).catch((function(e){(0!==e.status||e.status>=300)&&n.throwerr(e)}))},t.prototype.filterMatches=function(e,t){var r,n,a,s,u,l;if("alert_id"===e.key)return!!t._cid.endsWith(e.value);if("acknowledged"===e.key)return"true"===e.value?null!==t._acknowledgement:"false"!==e.value||null===t._acknowledgement;if("severities"===e.key)return-1!==e.value.indexOf(t._severity);if("tag"===e.key){var c=[],p=t._canonical_metric_name;if(void 0!==p&&""!==p){var h=o(x(p),2),d=(h[0],h[1].split(","));try{for(var g=i(d),y=g.next();!y.done;y=g.next()){if(!(A=(_=(w=y.value).split(/:/g)).shift()).startsWith("__")&&""!==A){var m=_.join(":");A=L(A),m=L(m),c.push({cat:A,val:m})}}}catch(e){r={error:e}}finally{try{y&&!y.done&&(n=g.return)&&n.call(g)}finally{if(r)throw r.error}}}try{for(var v=i(t._tags),b=v.next();!b.done;b=v.next()){var _,A;if(!(A=(_=(w=b.value).split(/:/g)).shift()).startsWith("__")&&""!==A){m=_.join(":");A=L(A),m=L(m),c.push({cat:A,val:m})}}}catch(e){a={error:e}}finally{try{b&&!b.done&&(s=v.return)&&s.call(v)}finally{if(a)throw a.error}}try{for(var S=i(c),T=S.next();!T.done;T=S.next()){var w=T.value,C=e.value.split(":");if(w.cat===C[0]&&f.a.isMatch(w.val,C[1]))return!0}}catch(e){u={error:e}}finally{try{T&&!T.done&&(l=S.return)&&l.call(S)}finally{if(u)throw u.error}}return!1}},t.prototype.alertFiltered=function(e,t,r){var n,a,o,s;if(0===e.length)return!1;if("all"===t){try{for(var u=i(e),l=u.next();!l.done;l=u.next()){var c=l.value;if(!this.filterMatches(c,r))return!0}}catch(e){n={error:e}}finally{try{l&&!l.done&&(a=u.return)&&a.call(u)}finally{if(n)throw n.error}}return!1}try{for(var p=i(e),f=p.next();!f.done;f=p.next()){c=f.value;if(this.filterMatches(c,r))return!1}}catch(e){o={error:e}}finally{try{f&&!f.done&&(s=p.return)&&s.call(p)}finally{if(o)throw o.error}}return!0},t.prototype.countAlerts=function(e,t){var r,n,a,s,u=e.data,l=[];u.constructor===Array?l=u:l.push(u);var c=[],p=t.local_filter_match;if(void 0!==t.local_filter&&""!==t.local_filter){var f=t.local_filter.split(",");try{for(var h=i(f),d=h.next();!d.done;d=h.next()){var g=d.value.trim();if(-1!==(_=g.indexOf(":"))){var y={};y.key=g.slice(0,_),y.value=g.slice(_+1),c.push(y)}}}catch(e){r={error:e}}finally{try{d&&!d.done&&(n=h.return)&&n.call(h)}finally{if(r)throw r.error}}}var m={};if("range"===t.query_type){var v=t.start;v-=v%60;var b=t.end;b-=b%60;for(var _=v;_<b;_+=60)m[_.toString()]=0}var A=0;for(_=0;_<l.length;_++)if(!this.alertFiltered(c,p,l[_])){var S=l[_]._occurred_on;"range"===t.query_type?(S-=S%60).toString()in m&&(m[S.toString()]=m[S.toString()]+1):A+=1}var T="Value";t.label&&(T=t.label);var w=K();w.refId=t.refId;var x=W(T),C=[];if("range"===t.query_type){try{for(var E=i(Object.entries(m)),R=E.next();!R.done;R=E.next()){var O=o(R.value,2),q=(S=O[0],O[1]);w.values.add(1e3*Number(S)),x.values.add(q)}}catch(e){a={error:e}}finally{try{R&&!R.done&&(s=E.return)&&s.call(E)}finally{if(a)throw a.error}}C.push({length:w.values.length,fields:[w,x]})}else x.values.add(A),C.push({length:1,fields:[x]});return{t:"ts",data:C,target:t.target,state:D.LoadingState.Done}},t.prototype.enrichAlertsWithRules=function(e,t){var r,n,a=this,o=e.data,s=[];o.constructor===Array?s=o:s.push(o);var u=[],l={"Content-Type":"application/json"};"hosted"!==this.irondbType&&this.throwerr("Alert queries only supported on hosted irondb requests"),l["X-Circonus-Auth-Token"]=this.apiToken,l["X-Circonus-App-Name"]=this.appName,l.Accept="application/json";var c=[],p=t.local_filter_match;if(void 0!==t.local_filter&&""!==t.local_filter){var f=t.local_filter.split(",");try{for(var h=i(f),d=h.next();!d.done;d=h.next()){var g=d.value.trim();if(-1!==(m=g.indexOf(":"))){var y={};y.key=g.slice(0,m),y.value=g.slice(m+1),c.push(y)}}}catch(e){r={error:e}}finally{try{d&&!d.done&&(n=h.return)&&n.call(h)}finally{if(r)throw r.error}}}for(var m=0;m<s.length;m++)if(!this.alertFiltered(c,p,s[m])){var v={};v.url=this.url,"hosted"===this.irondbType&&(v.url=v.url+"/v2"),v.method="GET",v.url=v.url+s[m]._rule_set,v.headers=l,v.retry=1,v.alert_data=s[m],(this.basicAuth||this.withCredentials)&&(v.withCredentials=!0),this.basicAuth&&(v.headers.Authorization=this.basicAuth),u.push(v)}return Promise.all(u.map((function(e){return a.datasourceRequest(e).then((function(t){return F((function(){return"enrichAlertsWithRules() query = "+JSON.stringify(e)})),F((function(){return"enrichAlertsWithRules() result = "+JSON.stringify(t)})),{alert:e.alert_data,rule:t.data}})).catch((function(t){return{alert:e.alert_data,rule:null}}))}))).then((function(e){return e}))},t.checkRollupAligned=function(e){var r,n;try{for(var a=i(t.ROLLUP_ALIGN_MS),o=a.next();!o.done;o=a.next()){var s=o.value;if(e<s&&s%e!=0)throw new Error("Unaligned rollup period requested")}}catch(e){r={error:e}}finally{try{o&&!o.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}if(e>t.ROLLUP_ALIGN_MS_1DAY&&e%t.ROLLUP_ALIGN_MS_1DAY!=0)throw new Error("Unaligned rollup period requested")},t.forceRollupAlignment=function(e){return e<6e4&&(e=Math.max(1e4,1e4*Math.ceil(e/1e4))),e},t.prototype.getRollupSpan=function(e,r,n,a,i){F((function(){return"getRollupSpan() intervalMs = "+e.intervalMs+", maxDataPoints = "+e.maxDataPoints})),F((function(){return"getRollupSpan() "+(a?"CAQL":"/fetch")+" "+JSON.stringify(i)}));var o=i.rolluptype,s=i.metricrollup;if("automatic"!==o&&l.a.isEmpty(s)&&(o="automatic",F((function(){return"getRollupSpan() defaulting to automatic"}))),"exact"===o){var u=B(s),c=Math.floor(1e3*(n-r)/u);if(F((function(){return"getRollupSpan() exactMs = "+u+", exactDatapoints = "+c})),c>e.maxDataPoints*t.MAX_EXACT_DATAPOINTS_THRESHOLD)throw new Error("Too many datapoints requested");return t.checkRollupAligned(u),t.forceRollupAlignment(u)/1e3}var p=t.MIN_DURATION_MS_FETCH;a&&(p=t.MIN_DURATION_MS_CAQL),"minimum"===o&&(p=B(s),F((function(){return"getRollupSpan() minimumMs = "+p})));var f=e.intervalMs;f<p&&(f=p);for(var h=G(t.forceRollupAlignment(f)/1e3,-1);(n-r)/h>e.maxDatapoints*t.MAX_DATAPOINTS_THRESHOLD;)h=G(h+.001,1);return F((function(){return"getRollupSpan() intervalMs = "+f+" -> interval "+h})),h},t.prototype.translateEgressForGraphite=function(e){return{automatic:"default",count:"count",sum:"sum",average:"avg",stddev:"stddev",derive:"derivative",derive_stddev:"d_stddev",counter:"counter",counter_stddev:"c_stddev"}[e]||"default"},t.prototype.filterMetricsByType=function(e,t){return l.a.filter(t,(function(e){var t=((e||{}).type||"").split(",");return!l.a.includes(t,"text")}))},t.prototype.stripTags=function(e){return e.forEach((function(e,t){if(e.leaf){var r=((e.leaf_data||{}).name||"").split("|ST");e.name=r[0]}})),e},t.prototype.buildFetchStream=function(e,t,r,n){var a=t[r].metric_name||t[r].name,s=(t[r].leaf_data||{}).uuid,u=(t[r].leaf_data||{}).name;t[r].leaf_data={egress_function:"average",uuid:s||t[r].uuid,metric_name:u,paneltype:t[r].target.paneltype,target:e},"average"!==e.egressoverride&&("automatic"===e.egressoverride?I(a)&&(t[r].leaf_data.egress_function="counter"):t[r].leaf_data.egress_function=e.egressoverride);var c=e.metriclabel;return"default"===e.labeltype?c="%n | %t{*}":"name"===e.labeltype?c="%n":"cardinality"===e.labeltype&&(c="%n | %t-{*}"),c=function(e,t,r){var n,a,s=t[r],u=e.replace(/%d/g,(r+1).toString());u=(u=u.replace(/%n/g,C(s.leaf_data&&s.leaf_data.metric_name||s.metric_name||s.name))).replace(/%cn/g,s.metric_name||s.name);var c=o(x(s.metric_name||s.name),2),p=(c[0],T(c[1]));try{for(var f=i(s.check_tags||[]),h=f.next();!h.done;h=f.next()){var d=h.value.split(/:/g),g=d.shift();if(!g.startsWith("__")&&""!==g){var y=d.join(":");g=L(g),y=L(y),void 0===p[g]&&(p[g]=[]),p[g].push(y)}}}catch(e){n={error:e}}finally{try{h&&!h.done&&(a=f.return)&&a.call(f)}finally{if(n)throw n.error}}return u=(u=u.replace(/%tv-?{([^}]*)}/g,(function(e){var r,n,a=e.substring(3,4),o="-"===a?R:function(){return!0},s=e.substring("-"===a?5:4,e.length-1);if("*"===s){var u=[];try{for(var c=i(l.a.keys(p)),f=c.next();!f.done;f=c.next()){var h=f.value;!h.startsWith("__")&&""!==h&&o(t,h)&&u.push(h)}}catch(e){r={error:e}}finally{try{f&&!f.done&&(n=c.return)&&n.call(c)}finally{if(r)throw r.error}}return u.sort(),l.a.map(u,(function(e){return p[e][0]})).join(",")}return void 0!==p[s]&&""!==s&&o(t,s)?p[s][0]:""}))).replace(/%t-?{([^}]*)}/g,(function(e){var r,n,a=e.substring(2,3),o="-"===a?R:function(){return!0},s=e.substring("-"===a?4:3,e.length-1);if("*"===s){var u=[];try{for(var c=i(l.a.keys(p)),f=c.next();!f.done;f=c.next()){var h=f.value;if(!h.startsWith("__")&&""!==h&&o(t,h)){var d=p[h][0];u.push(h+":"+d)}}}catch(e){r={error:e}}finally{try{f&&!f.done&&(n=c.return)&&n.call(c)}finally{if(r)throw r.error}}return u.sort(),u.join(",")}return void 0!==p[s]&&""!==s&&o(t,s)?s+":"+p[s][0]:""}))}(c||"",t,r),c=this.templateSrv.replace(c,n),t[r].leaf_data.metriclabel=c,t[r].leaf_data.check_tags=t[r].check_tags,"automatic"===e.rolluptype||l.a.isEmpty(e.metricrollup)||(t[r].leaf_data.rolluptype=e.rolluptype,t[r].leaf_data.metricrollup=e.metricrollup),t[r].leaf_data.metrictype="heatmap"===e.format?"histogram":t[r].type||"numeric",{leaf_name:a,leaf_data:t[r].leaf_data}},t.prototype.buildAlertFetchStream=function(e,t,r){var n,a;t[r].leaf_data={target:e};var o=t[r].metric_name,s=(t[r].uuid,void 0);try{for(var u=i(t[r].check_tags),c=u.next();!c.done;c=u.next()){var p=T(c.value);if(!l.a.isUndefined(p.__check_id)){s=p.__check_id;break}}}catch(e){n={error:e}}finally{try{c&&!c.done&&(a=u.return)&&a.call(u)}finally{if(n)throw n.error}}var f="active"===e.alert_state,h="(metric:"+o+")";return l.a.isUndefined(s)||(h=h+"(check_id:"+s+")"),f&&(h+="(active:1)"),{leaf_name:h,leaf_data:t[r].leaf_data}},t.prototype.buildFetchParamsAsync=function(e,t,r,n){var a=this,i=this.checkVariablesEncoding(this.templateSrv.replace(t.query,e.scopedVars)),o="graphite"===t.querytype,s=t.tagFilter||"";return(o?this.metricGraphiteQuery.call(this,i,!1,r,n,s):this.metricTagsQuery.call(this,i,!1,r,n)).then((function(e){e.data=a.filterMetricsByType(t,e.data);for(var r=0;r<e.data.length;r++)e.data[r].target=t;return e.data})).then((function(r){for(var n=0;n<r.length;n++)e.std.names.push(a.buildFetchStream(t,r,n,e.scopedVars));return e}))},t.prototype.buildAlertQueryAsync=function(e,t,r,n){var a=this.templateSrv.replace(t.query,e.scopedVars);""!==t.alert_id&&(a="alert_id:"+this.templateSrv.replace(t.alert_id,e.scopedVars)),e.alert.names.push(a),e.alert.local_filters.push(this.templateSrv.replace(t.local_filter,e.scopedVars)),e.alert.local_filter_matches.push(t.local_filter_match),e.alert.counts_only="alert_counts"===t.querytype,e.alert.query_type=t.alert_count_query_type,e.alert.labels.push(this.templateSrv.replace(t.metriclabel,e.scopedVars)),e.alert.target=t},t.prototype.buildIrondbParamsAsync=function(e){var t=this,r={},n=new Date(e.range.from).getTime()/1e3,a=new Date(e.range.to).getTime()/1e3,i=Math.round((e.range.to.valueOf()-e.range.from.valueOf())/e.maxDataPoints);r.scopedVars=e.scopedVars,r.meta=e.meta,r.refId=e.refId,r.maxDataPoints=e.maxDataPoints,r.intervalMs=i,r.std={},r.std.start=n,r.std.end=a,r.std.names=[],r.caql={},r.caql.start=n,r.caql.end=a,r.caql.names=[],r.alert={},r.alert.names=[],r.alert.start=n,r.alert.end=a,r.alert.local_filters=[],r.alert.local_filter_matches=[],r.alert.labels=[];var o=l.a.reject(e.targets,(function(e){return e.hide||void 0===e.query&&void 0===e.alert_id||0===e.query.length&&0===e.alert_id.length}));if(!o.length)return{};var s=o.map((function(e){return e.isCaql||"caql"===e.querytype?(r.caql.names.push({leaf_name:e.query,leaf_data:{rolluptype:e.rolluptype,metricrollup:e.metricrollup,format:e.format,refId:e.refId,min_period:e.min_period||""}}),r.refId=e.refId,Promise.resolve(r)):"alerts"===e.querytype||"alert_counts"===e.querytype?t.buildAlertQueryAsync(r,e,n,a):t.buildFetchParamsAsync(r,e,n,a)}));return Promise.all(s).then((function(e){return r})).catch((function(e){F((function(){return"buildIrondbParams() err = "+JSON.stringify(e)})),0!==e.status||e.status}))},t.prototype.buildIrondbParams=function(e){var t=this;return new Promise((function(r,n){r(t.buildIrondbParamsAsync(e))}))},t.prototype.convertIrondbDf4DataToGrafana=function(e,t){var r=t.name,n=t.metricLabels||{},a=t.check_tags||[],u=e.data.data,c=e.data.meta,p=e.data.head.start,f=e.data.head.period,h=e.data.head.error,d=t.format||"ts";if(!l.a.isEmpty(h))throw new Error(h.join("\n"));if(!u||0===u.length)return{data:[]};if(F((function(){return"Format: "+d})),"table"===d){var g=K();g.refId=t.refId;for(var y=new Set,m=new Set,v={},b={},_=function(e){var o=1e3*(p+e*f);if(o<1e3*t.start)return"continue";for(var s=function(s){var p,f;F((function(){return"convertIrondbDf4DataToGrafana(table) ts: "+o})),g.values.add(o);var h=r+" ["+(s+1)+"]",d=c[s]?c[s].label:h;d=C(d);var _=c[s].tags,A=n[s];if(l.a.isString(A)&&(d=A),void 0!==a[s]&&(void 0===_?_=a[s]:_.push.apply(_,a[s])),F((function(){return"convertIrondbDf4DataToGrafana(table) name: "+d+", tags: "+_})),void 0!==_)try{for(var S=(p=void 0,i(_)),T=S.next();!T.done;T=S.next()){var w=T.value.split(/:/g),x=w.shift(),E=w.join(":");if(!x.startsWith("__")){if(x=L(x),E=L(E),!v[x]){var R={name:x,config:{filterable:!1},type:D.FieldType.other,refId:t.refId,values:new D.ArrayVector};v[x]=R,y.add(R)}v[x].values.add(E)}}}catch(e){p={error:e}}finally{try{T&&!T.done&&(f=S.return)&&f.call(S)}finally{if(p)throw p.error}}if(!b[d]){var O={name:d,config:{filterable:!1,displayName:d},refId:t.refId,type:D.FieldType.number,values:new D.ArrayVector};b[d]=O,m.add(O)}var q=b[d];null!==u[s][e]&&u[s][e].constructor===Number?q.values.add(u[s][e]):q.values.add(null)},h=0;h<u.length;h++)s(h)},A=0;A<u[0].length;A++)_(A);return{t:"table",data:{length:g.values.length,fields:s(s([g],o(y),!1),o(m),!1)},state:D.LoadingState.Done}}for(var S=[],T={},w=function(e){var o,s,h=r+" ["+(e+1)+"]",d=c[e]?c[e].label:h,g=null!=d.match(/\|ST\[[^\]]*\]/),y=C(d),m=c[e].tags,v=n[e];l.a.isString(v)&&(y=v),F((function(){return"convertIrondbDf4DataToGrafana() tags: "+m}));var b={};void 0!==a[e]&&(void 0===m?m=a[e]:m.push.apply(m,a[e]));var _=[];if(void 0!==m)try{for(var A=(o=void 0,i(m)),w=A.next();!w.done;w=A.next()){var x=w.value.split(/:/g),E=x.shift(),R=x.join(":");E.startsWith("__")||(E=L(E),R=L(R),b[E]=R,_.push(E+":"+R))}}catch(e){o={error:e}}finally{try{w&&!w.done&&(s=A.return)&&s.call(A)}finally{if(o)throw o.error}}var O=y=function(e){for(var t=0,r=e.length,n=e;t<r&&-1!==t;){if(-1===(t=e.indexOf('b"',t)))return n;var a=e.indexOf('"',t+2);if(-1===a)return n;var i=L(e.substring(t,a+1));n=n.replace(e.substring(t,a+1),i),t=a+1}return n}(y);_.length>0&&g&&(O=O+" { "+_.join(", ")+" }");var q=K();q.config.interval=1e3*f;var k=W();k.config.displayName=O,k.labels=b;var M=new D.MutableDataFrame({refId:t.refId,fields:[q,k]});F((function(){return"convertIrondbDf4DataToGrafana() Labels: "+JSON.stringify(b)}));for(var N=0;N<u[e].length;N++){var P=1e3*(p+N*f);if(!(P<1e3*t.start)&&((null===u[e][N]||null!=u[e][N]&&Number===u[e][N].constructor)&&M.add({Time:P,Value:u[e][N]}),u[e][N]&&Object===u[e][N].constructor))for(var I in u[e][N]){var j=u[e][N][I];I=parseFloat(I).toString();var H=P.toString();l.a.isUndefined(T[I])&&(T[I]={target:I,title:I,tags:b,datapoints:[],_ts:{}},S.push(T[I])),l.a.isUndefined(T[I]._ts[H])?(T[I]._ts[H]=[j,P],T[I].datapoints.push(T[I]._ts[H])):T[I]._ts[H][0]+=j}}q.values.length&&S.push(M)},x=0;x<u.length;x++)w(x);return{data:S,query:t}},t.prototype.convertIrondbGraphiteDataToGrafana=function(e,t){var r,n,a,i=e.data,o=[];if(!i||!i.series)return{data:o};if(i.series&&i.step&&i.from&&i.to)for(var s in i.step*=1e3,i.from*=1e3,i.to*=1e3,i.series){r=i.from-i.step,n=i.series[s],a=[],o.push({target:s,datapoints:a});for(var u=0;u<n.length;u++)r+=i.step,null!=n[u]&&a.push([n[u],r])}return{data:o,query:t}},t.prototype.checkVariablesEncoding=function(e){var t=/([\\\[\]\(\)\:\-\^\$\?\+\*\.])/g;return this.templateSrv.getVariables().forEach((function(r){var n,a=(r.current||{}).value;try{var i=t.test(a)?a.replace(t,"\\$1"):a;(n=new RegExp(":"+i,"g")).test(e)&&(e=e.replace(n,':b"'+btoa(a)+'"'))}catch(e){}})),e},t.prototype.convertAlertDataToGrafana=function(e){var t,r,n,a,u,c,p,f;if(l.a.isUndefined(e)||0===e.length)return{data:[]};for(var h=[],d=0;d<e.length;d++){var g=K(),y=K("alert_timestamp"),m=new Set,v=new Set,b={},_={_acknowledgement:X("acknowledgement"),_alert_url:X("circonus_alert_url"),_check_name:X("check_name"),_cleared_on:K("cleared_timestamp"),_metric_link:X("metric_link"),_severity:W("severity"),derive:X("derive"),metric_type:X("metric_type"),_value:J("alert_value"),_cleared_value:J("cleared_value"),_cid:X("alert_id")},A={_signature:X("check_uuid"),_canonical_metric_name:X("metric_name"),_metric_name:1,_tags:1},S={threshold_1:W("threshold_1"),threshold_2:W("threshold_2"),threshold_3:W("threshold_3"),threshold_4:W("threshold_4"),threshold_5:W("threshold_5")},C=e[d].alert,E=e[d].rule,R={};for(var O in C)if("_occurred_on"===O){var q=C[O];g.values.add(1e3*q),y.values.add(1e3*q);var k=q-1800,M=C._cleared_on,N=q+1800;null!=M&&(N=M+1800),N>Math.floor(Date.now()/1e3)&&(N=Math.floor(Date.now()/1e3));var P=W("alert_window_start"),I=W("alert_window_end");v.add(P),v.add(I),P.values.add(1e3*k),I.values.add(1e3*N);var j=X("state");v.add(j),null!=M?j.values.add("OK"):j.values.add("ALERTING")}else if("_cid"===O){var H=C[O];_[O].values.add(H.replace("/alert/","")),v.add(_[O])}else if("_cleared_on"===O){null!==(q=C[O])?_[O].values.add(1e3*q):_[O].values.add(null),b[O]||(b[O]=_[O],v.add(_[O]))}else if(void 0!==_[O]){var $=C[O];"_cleared_value"===O&&null===C[O]&&($=""),("_value"===O&&null===C[O]||""===C[O])&&($=""),_[O].values.add($),b[O]||(b[O]=_[O],v.add(_[O]))}else if(void 0!==A[O])if("_signature"===O){var F=C._signature.substring(0,C._signature.indexOf("`"));A[O].values.add(F),b[O]||(b[O]=A[O],v.add(A[O]))}else if("_canonical_metric_name"===O){var Q=C[O];if(void 0!==Q&&""!==Q){var G=o(x(Q),2),U=G[0],V=G[1];A[O].values.add(U),b[O]||(b[O]=A[O],v.add(A[O]));var B=X("canonical_metric_name");v.add(B),B.values.add(Q),w(R,T(V))}}else if("_metric_name"===O&&""===C._canonical_metric_name){var z=C[O];A._canonical_metric_name.values.add(z),b[O]||(b[O]=A._canonical_metric_name,v.add(A._canonical_metric_name))}else if("_tags"===O)try{for(var Z=(t=void 0,i(C[O])),Y=Z.next();!Y.done;Y=Z.next()){var ee=(oe=Y.value).split(/:/g),te=ee.shift();if(!te.startsWith("__")&&""!==te){var re=ee.join(":");te=L(te),re=L(re),void 0===R[te]&&(R[te]=[]),R[te].push(re)}}}catch(e){t={error:e}}finally{try{Y&&!Y.done&&(r=Z.return)&&r.call(Z)}finally{if(t)throw t.error}}var ne=X("tags");v.add(ne);var ae=0,ie="";for(var oe in R)if(ae>0&&(ie+="|"),""!==oe&&!oe.startsWith("__")){ae++,ie=ie+oe+":"+R[oe][0];var se=X(oe);se.values.add(R[oe][0]),v.add(se)}ne.values.add(ie);for(var ue=1;ue<6;ue++){b[O="threshold_"+ue]||(b[O]=S[O],v.add(S[O]))}var le={};if(!l.a.isUndefined(E)&&null!==E&&"numeric"===E.metric_type){var ce=E.derive;if("mixed"===ce)try{for(var pe=(n=void 0,i(E.rules)),fe=pe.next();!fe.done;fe=pe.next()){if(null!=(ce=(Ce=fe.value).windowing_function))break}}catch(e){n={error:e}}finally{try{fe&&!fe.done&&(a=pe.return)&&a.call(pe)}finally{if(n)throw n.error}}var he=X("function");v.add(he),he.values.add(ce);try{for(var de=(u=void 0,i(E.rules)),ge=de.next();!ge.done;ge=de.next()){var ye=(Ce=ge.value).severity;if(0!==ye)S[O="threshold_"+ye].values.add(Ce.value),le[ye]=1}}catch(e){u={error:e}}finally{try{ge&&!ge.done&&(c=de.return)&&c.call(de)}finally{if(u)throw u.error}}}for(var me=1;me<6;me++){if(void 0===le[me])S[O="threshold_"+me].values.add(-1)}var ve=X("rule_text"),be=X("notes");if(v.add(ve),v.add(be),l.a.isUndefined(E)||null===E)ve.values.add(""),be.values.add("");else{if(null!==E.notes&&E.notes.length>0)be.values.add(E.notes);else{var _e=C.metric_notes;if(void 0!==_e&&_e.length>0)try{var Ae=JSON.parse(_e);be.values.add(Ae.notes)}catch(e){be.values.add("")}}var Se="",Te=0;try{for(var we=(p=void 0,i(E.rules)),xe=we.next();!xe.done;xe=we.next()){var Ce,Ee=(Ce=xe.value).windowing_function,Re="";null===Ee?Ee="value":Re="(over "+Ce.windowing_duration+" seconds) ";var Oe="if the "+Ee+" "+Re;"on absence"===Ce.criteria?Oe+="is absent for "+Ce.value+" seconds, ":"max value"===Ce.criteria?Oe+="is present and >= "+Ce.value+", ":"min value"===Ce.criteria?Oe+="is present and < "+Ce.value+", ":"matches"===Ce.criteria?Oe+="is present and matches '"+Ce.value+"', ":"does not match"===Ce.criteria&&(Oe+="is present and does not match '"+Ce.value+"', "),Te>0&&(Oe+="and prior rules aren't triggered, "),0===Ce.severity?Oe+="clear the alert.":Oe+="trigger a sev "+Ce.severity+" alert and wait "+Ce.wait+" minutes before notifying.",Te>0&&(Se+="|"),Se+=Oe,Te++}}catch(e){p={error:e}}finally{try{xe&&!xe.done&&(f=we.return)&&f.call(we)}finally{if(p)throw p.error}}ve.values.add(Se)}h.push({length:g.values.length,fields:s(s([g,y],o(m),!1),o(v),!1)})}return{t:"table",data:h,state:D.LoadingState.Done}},t.DEFAULT_CACHE_ENTRIES=128,t.DEFAULT_CACHE_TIME_MS=6e4,t.MAX_DATAPOINTS_THRESHOLD=1.5,t.MAX_EXACT_DATAPOINTS_THRESHOLD=1.5,t.MIN_DURATION_MS_FETCH=1,t.MIN_DURATION_MS_CAQL=6e4,t.ROLLUP_ALIGN_MS=l.a.map([1,60,3600,86400],(function(e){return 1e3*e})),t.ROLLUP_ALIGN_MS_1DAY=864e5,t}(D.DataSourceApi);function K(e){return void 0===e&&(e=D.TIME_SERIES_TIME_FIELD_NAME),{name:e,type:D.FieldType.time,config:{},values:new D.ArrayVector}}function W(e){return void 0===e&&(e=D.TIME_SERIES_VALUE_FIELD_NAME),{name:e,type:D.FieldType.number,config:{},values:new D.ArrayVector}}function X(e){return{name:e,type:D.FieldType.string,config:{},values:new D.ArrayVector}}function J(e){return{name:e,type:D.FieldType.other,config:{},values:new D.ArrayVector}}var Z=r(37),Y=(r(115),c("IrondbQueryCtrl"));var ee=function(e){function t(t,r,n,a){var i=e.call(this,t,r)||this;i.uiSegmentSrv=n,i.templateSrv=a,i.defaults={},i.alertStateOptions=[{value:"active",text:"Active"},{value:"inactive",text:"Inactive"}],i.queryTypeOptions=[{value:"caql",text:"CAQL"},{value:"basic",text:"Standard"},{value:"graphite",text:"Graphite Style"},{value:"alerts",text:"Alerts"},{value:"alert_counts",text:"Alert Counts"}],i.localFilterMatchOptions=[{value:"all",text:"ALL"},{value:"any",text:"ANY"}],i.alertCountQueryTypeOptions=[{value:"instant",text:"instant"},{value:"range",text:"range"}],i.labelTypeOptions=[{value:"default",text:"name and tags"},{value:"name",text:"name only"},{value:"cardinality",text:"high cardinality tags"},{value:"custom",text:"custom"}],i.egressTypeOptions=[{value:"automatic",text:"automatic"},{value:"count",text:"number of data points (count)"},{value:"average",text:"average value (gauge)"},{value:"stddev",text:"standard deviation a.k.a. σ (stddev)"},{value:"derive",text:"rate of change (derive)"},{value:"derive_stddev",text:"rate of change σ (derive_stddev)"},{value:"counter",text:"rate of positive change (counter)"},{value:"counter_stddev",text:"rate of positive change σ (counter_stddev)"}],i.rollupTypeOptions=[{value:"automatic",text:"automatic"},{value:"minimum",text:"minimum"},{value:"exact",text:"exact"}],i.formatOptions=[{value:"ts",text:"Time Series"},{value:"table",text:"Table"},{value:"heatmap",text:"Heatmap"}],i.minPeriodOptions=[{value:"",text:"none"},{value:"60s",text:"60s"},{value:"300s",text:"300s"}],i.caqlFindFunctions={count:"count",average:"average",stddev:"stddev",derive:"derivative",derive_stddev:"derivative_stddev",counter:"counter",counter_stddev:"counter_stddev"},i.histogramTransforms={count:" | histogram:count()",average:" | histogram:mean()",stddev:" | histogram:stddev()",derive:" | histogram:rate()",derive_stddev:"",counter:" | histogram:rate()",counter_stddev:""},l.a.defaultsDeep(i.target,i.defaults),i.target.egressoverride=i.target.egressoverride||"average",i.target.metriclabel=i.target.metriclabel||"",i.target.labeltype=i.target.labeltype||"default",i.target.rolluptype=i.target.rolluptype||"automatic",i.target.query=i.target.query||"",i.target.queryDisplay=i.target.queryDisplay||i.target.query||"",i.target.format=i.target.format||"ts";var o=i.target.querytype;(i.queryTypeOptions.some((function(e){return e.value===o}))?i.target.querytype=o:null!==i.target.isCaql?i.target.querytype=i.target.isCaql?"caql":i.datasource.allowGraphite?"graphite":"basic":i.target.querytype=i.datasource.allowGraphite?"graphite":"basic","caql"===i.target.querytype&&(i.target.lastCAQL=i.target.query),i.target.lastQueryType=i.target.lastQueryType||i.target.querytype,i.target.local_filter=i.target.local_filter||"",i.target.local_filter_match=i.target.local_filter_match||"all",i.target.alert_count_query_type=i.target.alert_count_query_type||"instant",i.target.alert_id=i.target.alert_id||"",i.target.min_period=i.target.min_period||"",i.target.min_period&&(i.target.min_period+=/[a-zA-Z]$/.test(i.target.min_period)?"":"s"),i.datasource.caqlMinPeriod)&&(i.datasource.caqlMinPeriod.trim().split(",").forEach((function(e){/^\d+[a-zA-Z]?$/.test(e)&&(e+=/[a-zA-Z]$/.test(e)?"":"s",i.minPeriodOptions.some((function(t){return t.value===e}))||i.minPeriodOptions.push({value:e,text:e}))})),i.minPeriodOptions.some((function(e){return e.value===i.target.min_period}))||i.minPeriodOptions.push({value:i.target.min_period,text:i.target.min_period}),i.minPeriodOptions.sort((function(e,t){var r=B(e.value||"0"),n=B(t.value||"0");return r<n?-1:r>n?1:0})));return i.queryModel=new j(i.datasource,i.target,a),i.checkForPlusAndSelect(),i.buildSegments(),i.updateMetricLabelValue(!1),i}return t.$inject=["$scope","$injector","uiSegmentSrv","templateSrv"],a(t,e),t.prototype.resetQueryTarget=function(){Y((function(){return"resetQueryTarget()"})),this.target.query="",this.target.queryDisplay="",this.target.egressoverride="average",this.target.labeltype="default",this.target.rolluptype="automatic",this.target.format="ts",this.target.local_filter="",this.target.local_filter_match="all",this.target.alert_id="",this.emptySegments(),this.queryModel.parseTarget(),this.checkForPlusAndSelect(),this.buildSegments(),this.panelCtrl.refresh()},t.prototype.getQueryTypeOptions=function(){var e=this.datasource.allowGraphite,t=[];return l.a.each(this.queryTypeOptions,(function(r,n){(e||"graphite"!==r.value)&&t.push(r)})),t},t.prototype.changeEditorMode=function(){if("caql"===this.target.lastQueryType&&"basic"===this.target.querytype)this.checkForPlusAndSelect(),this.buildSegments(),this.buildQueries();else if("caql"===this.target.lastQueryType&&"graphite"===this.target.querytype)this.checkForPlusAndSelect(),this.buildSegments(),this.buildQueries();else if("basic"===this.target.lastQueryType&&"caql"===this.target.querytype){var e="and(__name:*)"===this.target.query;this.target.lastCAQL&&e?this.target.query=this.target.queryDisplay=this.target.lastCAQL:this.target.query=this.target.queryDisplay=this.buildCAQLFromStandard()}else if("basic"===this.target.lastQueryType&&"graphite"===this.target.querytype)this.convertStandardToGraphite(),this.checkForPlusAndSelect(),this.buildSegments(),this.buildGraphiteQuery();else if("graphite"===this.target.lastQueryType&&"caql"===this.target.querytype){e=""===this.target.query||"*"===this.target.query||"*.*"===this.target.query;this.target.lastCAQL&&e?this.target.query=this.target.queryDisplay=this.target.lastCAQL:this.target.query=this.target.queryDisplay=this.buildCAQLFromGraphite()}else"graphite"===this.target.lastQueryType&&"basic"===this.target.querytype?(this.convertGraphiteToStandard(),this.checkForPlusAndSelect(),this.buildSegments(),this.buildStandardQuery()):"alerts"!==this.target.querytype&&"alert_counts"!==this.target.queryType||(this.target.query=this.target.queryDisplay="");this.panelCtrl.refresh(),this.target.lastQueryType=this.target.querytype,"caql"===this.target.querytype&&(this.target.lastCAQL=this.target.query)},t.prototype.alertStateValueChanged=function(){this.panelCtrl.refresh()},t.prototype.updateAlertQuery=function(){this.panelCtrl.refresh()},t.prototype.updateAlertId=function(){this.target.query=this.target.queryDisplay="",this.panelCtrl.refresh()},t.prototype.updateAlertLocalFilter=function(){this.panelCtrl.refresh()},t.prototype.localFilterMatchValueChanged=function(){this.panelCtrl.refresh()},t.prototype.alertCountQueryTypeValueChanged=function(){this.panelCtrl.refresh()},t.prototype.queryTypeValueChanged=function(){this.changeEditorMode(),this.panelCtrl.refresh()},t.prototype.labelTypeValueChanged=function(){"custom"===this.target.labeltype&&setTimeout((function(){document.getElementById("metriclabel").focus()}),50),this.panelCtrl.refresh()},t.prototype.formatChanged=function(){this.panelCtrl.refresh()},t.prototype.metricLabelKeyUp=function(e){var t=this,r=e.currentTarget;13===e.keyCode&&setTimeout((function(){t.target.metriclabel=r.value,t.updateMetricLabelValue()}),0)},t.prototype.updateMetricLabelValue=function(e){void 0===e&&(e=!0),""===this.target.metriclabel&&"custom"===this.target.labeltype&&(this.target.labeltype="default"),e&&this.panelCtrl.refresh()},t.prototype.rollupTypeValueChanged=function(){var e=!0;"automatic"!==this.target.rolluptype&&(l.a.isEmpty(this.target.metricrollup)&&(e=!1),setTimeout((function(){document.getElementById("metricrollup").focus()}),50)),e&&this.panelCtrl.refresh()},t.prototype.metricRollupKeyUp=function(e){var t=this,r=e.currentTarget;13===e.keyCode&&setTimeout((function(){t.target.metricrollup=r.value,t.updateMetricRollupValue()}),0)},t.prototype.updateMetricRollupValue=function(e){void 0===e&&(e=!0),""===this.target.metricrollup&&"automatic"!==this.target.rolluptype&&(this.target.rolluptype="automatic"),e&&this.panelCtrl.refresh()},t.prototype.minPeriodChanged=function(){this.panelCtrl.refresh()},t.prototype.egressValueChanged=function(){this.panelCtrl.refresh()},t.prototype.onChangeInternal=function(){this.panelCtrl.refresh()},t.prototype.getStandardCategoryOptions=function(e,t){var r=this,n=(this.segments[e]||{})._type,a=P(A.MetricName,(this.segments[0]||{}).value);return this.datasource.metricTagCatsQuery("and(__name:"+a+")").then((function(e){var t,a;if(e.data&&e.data.length>0){var o=e.data,s=[];try{for(var u=i(o),l=u.next();!l.done;l=u.next()){var c=l.value;s.push(r.newSegment(A.TagCat,{value:L(c),expandable:!0}))}}catch(e){t={error:e}}finally{try{l&&!l.done&&(a=u.return)&&a.call(u)}finally{if(t)throw t.error}}return n===A.TagPlus&&(s.unshift(r.newSegment(A.TagOp,{value:"and("})),s.unshift(r.newSegment(A.TagOp,{value:"not("})),s.unshift(r.newSegment(A.TagOp,{value:"or("}))),s}})).catch((function(e){return Y((function(){return"getOptionSegments() err = "+e})),[]}))},t.prototype.getStandardValueOptions=function(e,t){var r=this,n=P(A.MetricName,(this.segments[0]||{}).value),a=(this.segments[e-2]||{}).value;return"select tag"===a?Promise.resolve([]):this.datasource.metricTagValsQuery("and(__name:"+n+")",P(A.TagCat,a,!1)).then((function(e){var t,n,a=e.data,o=[];if(o.push(r.newSegment(A.TagVal,{value:"*",expandable:!0})),a&&a.length){l.a.eachRight(r.templateSrv.variables,(function(e){o.push(r.newSegment(A.TagVal,{type:"template",value:"$"+e.name,expandable:!0}))}));try{for(var s=i(a),u=s.next();!u.done;u=s.next()){var c=u.value;o.push(r.newSegment(A.TagVal,{value:L(c),expandable:!0}))}}catch(e){t={error:e}}finally{try{u&&!u.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}}return o})).catch((function(e){return Y((function(){return"getOptionSegments() err = "+e})),[]}))},t.prototype.getStandardPlusOptions=function(e,t){return this.getStandardCategoryOptions(e,t)},t.prototype.getStandardOperatorOptions=function(e,t){var r=[this.newSegment(A.TagOp,{value:"REMOVE"}),this.newSegment(A.TagOp,{value:"and("}),this.newSegment(A.TagOp,{value:"not("}),this.newSegment(A.TagOp,{value:"or("})];return Promise.resolve(r)},t.prototype.getStandardDefaultOptions=function(e,t){var r=this,n=t||"";return(this.segments[e]||{})._type===A.MetricName?(P(A.MetricName,n)!==n?n="b/"+btoa(String(n).replace(/[\\^$*+?.()|[\]{}]/g,"\\$&"))+"/":n+="*",this.datasource.metricTagsQuery("and(__name:"+n+")",!0).then((function(e){var t=l.a.map(e.data,(function(e){return C(e.metric_name)}));return t=l.a.uniq(t),l.a.map(t,(function(e){return r.newSegment(A.MetricName,{value:e,expandable:!0})}))})).catch((function(e){return Y((function(){return"getOptionSegments() err = "+e.toString()})),[]}))):Promise.resolve([])},t.prototype.getGraphiteCategoryOptions=function(e,t){var r=this,n=(this.gSegments[e]||{})._type,a=this.queryModel.getGraphiteSegmentPath().replace(/\.select\smetric\.$/,".*").replace(/\.$/,"");return this.datasource.metricTagCatsQuery("and(__name:"+a+")").then((function(e){var t,a;if(e.data&&e.data.length>0){var o=e.data,s=[];try{for(var u=i(o),l=u.next();!l.done;l=u.next()){var c=l.value;s.push(r.newSegment(A.TagCat,{value:L(c),expandable:!0}))}}catch(e){t={error:e}}finally{try{l&&!l.done&&(a=u.return)&&a.call(u)}finally{if(t)throw t.error}}return n===A.TagPlus&&(s.unshift(r.newSegment(A.TagOp,{value:"and("})),s.unshift(r.newSegment(A.TagOp,{value:"not("})),s.unshift(r.newSegment(A.TagOp,{value:"or("}))),s}})).catch((function(e){return Y((function(){return"getOptionSegments() err = "+e})),[]}))},t.prototype.getGraphiteValueOptions=function(e,t){var r=this,n=this.queryModel.getGraphiteSegmentPath().replace(/\.select\smetric\.$/,".*").replace(/\.$/,""),a=(this.gSegments[e-2]||{}).value;return"select tag"===a?Promise.resolve([]):this.datasource.metricTagValsQuery("and(__name:"+n+")",P(A.TagCat,a,!1)).then((function(e){var t,n,a=e.data,o=[];if(o.push(r.newSegment(A.TagVal,{value:"*",expandable:!0})),a&&a.length){l.a.eachRight(r.templateSrv.variables,(function(e){o.push(r.newSegment(A.TagVal,{type:"template",value:"$"+e.name,expandable:!0}))}));try{for(var s=i(a),u=s.next();!u.done;u=s.next()){var c=u.value;o.push(r.newSegment(A.TagVal,{value:L(c),expandable:!0}))}}catch(e){t={error:e}}finally{try{u&&!u.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}}return o})).catch((function(e){return Y((function(){return"getOptionSegments() err = "+e})),[]}))},t.prototype.getGraphitePlusOptions=function(e,t){return this.getGraphiteCategoryOptions(e,t)},t.prototype.getGraphiteOperatorOptions=function(e,t){var r=[this.newSegment(A.TagOp,{value:"REMOVE"}),this.newSegment(A.TagOp,{value:"and("}),this.newSegment(A.TagOp,{value:"not("}),this.newSegment(A.TagOp,{value:"or("})];return Promise.resolve(r)},t.prototype.getGraphiteDefaultOptions=function(e,t){var r=this,n=0===e,a=this.datasource.ignoreGraphiteUUIDs(),i=n?"":this.queryModel.getGraphiteSegmentPathUpTo(e);return this.datasource.metricGraphiteQuery(i+(t||"")+"*",!0).then((function(e){e.data=r.datasource.stripTags(e.data);var t=l.a.map(e.data,(function(e){var t=new RegExp(function(e){for(var t=[],r=0;r<e.length;++r){var n=e.charAt(r);switch(n){case"?":t.push(".");break;case"*":t.push(".*?");break;default:"[]{}()*?.,".indexOf(n)>=0&&t.push("\\"),t.push(n)}}return t.join("")}(i),"i");return a&&(e.name=e.name.replace(/^(\w{8}-\w{4}-\w{4}-\w{4}-\w{12})./,"")),r.uiSegmentSrv.newSegment({value:e.name.replace(t,""),expandable:!e.leaf})}));return t.length&&(t=l.a.uniqBy(t,"value")),(n||t.length)&&t.unshift(r.uiSegmentSrv.newSegment("*")),t})).catch((function(e){return[]}))},t.prototype.newSegment=function(e,t){var r=this.uiSegmentSrv.newSegment(t);return this.setSegmentType(r,e)},t.prototype.setSegmentType=function(e,t){return e._type=t,e._typeName=A[t],e},t.prototype.convertSegment=function(e){var t;return t=e.type===A.TagOp?this.uiSegmentSrv.newOperator(e.value):e.type===A.TagEnd?this.uiSegmentSrv.newOperator(")"):e.type===A.TagPair?this.uiSegmentSrv.newCondition(":"):e.type===A.TagSep?this.uiSegmentSrv.newCondition(","):e.type===A.TagPlus?this.uiSegmentSrv.newPlusButton():this.uiSegmentSrv.newSegment(e),this.setSegmentType(t,e.type)},t.prototype.setSegmentFocus=function(e){var t="graphite"===this.target.querytype;l.a.each(this[t?"gSegments":"segments"],(function(t,r){t.focus=e===r}))},t.prototype.caqlValueChanged=function(){this.buildQueries(),this.panelCtrl.refresh()},t.prototype.updateStandardCategorySegmentValue=function(e,t){return this.updateStandardDefaultSegmentValue(e,t)},t.prototype.updateStandardValueSegmentValue=function(e,t){return this.updateStandardDefaultSegmentValue(e,t)},t.prototype.updateStandardPlusSegmentValue=function(e,t){this.error=null,this.queryModel.updateSegmentValue(t,e),"and("===t.value||"not("===t.value||"or("===t.value?(this.queryModel.addOperator(e,t.value),this.buildSegments(),this.setSegmentFocus(e+3)):(this.queryModel.addTag(e,t.value),this.buildSegments(),this.setSegmentFocus(e+1),this.buildQueries(),this.panelCtrl.refresh())},t.prototype.updateStandardOperatorSegmentValue=function(e,t){this.error=null,this.queryModel.updateSegmentValue(t,e),"REMOVE"===t.value&&this.queryModel.removeOperator(e),this.checkForPlusAndSelect(),this.buildSegments(),this.buildQueries(),this.panelCtrl.refresh()},t.prototype.updateStandardDefaultSegmentValue=function(e,t){this.error=null,this.queryModel.updateSegmentValue(t,e),0===e&&(this.removeSegments(e+1),this.checkForPlusAndSelect(),this.buildSegments(),this.setSegmentFocus(e+1)),this.buildQueries(),this.panelCtrl.refresh()},t.prototype.updateGraphiteCategorySegmentValue=function(e,t){return this.updateGraphiteDefaultSegmentValue(e,t)},t.prototype.updateGraphiteValueSegmentValue=function(e,t){return this.updateGraphiteDefaultSegmentValue(e,t)},t.prototype.updateGraphitePlusSegmentValue=function(e,t){this.error=null,this.queryModel.updateSegmentValue(t,e),"and("===t.value||"not("===t.value||"or("===t.value?(this.queryModel.addOperator(e,t.value),this.buildSegments(),this.setSegmentFocus(e+3)):(this.queryModel.addTag(e,t.value),this.buildSegments(),this.setSegmentFocus(e+1),this.buildQueries(),this.panelCtrl.refresh())},t.prototype.updateGraphiteOperatorSegmentValue=function(e,t){this.error=null,this.queryModel.updateSegmentValue(t,e),"REMOVE"===t.value&&this.queryModel.removeOperator(e),this.checkForPlusAndSelect(),this.buildSegments(),this.buildQueries(),this.panelCtrl.refresh()},t.prototype.updateGraphiteDefaultSegmentValue=function(e,t){var r=/\./.test(String(t.value));if(this.error=null,this.queryModel.updateSegmentValue(t,e),0===e&&this.removeSegments(e+1),r){var n=this.queryModel.getGraphiteSegmentPath().replace(/\.$/,"");this.queryModel.convertStandardToGraphite(n)}t.expandable&&t._type===A.MetricName&&this.queryModel.addSelectMetricSegment(),this.checkForPlusAndSelect(),this.buildSegments(),t.expandable&&this.setSegmentFocus(e+1),this.buildQueries(),this.panelCtrl.refresh()},t.prototype.buildSegments=function(){var e=this;this.gSegments=this.queryModel.gSegments.map((function(t){return e.convertSegment(t)})),this.segments=this.queryModel.segments.map((function(t){return e.convertSegment(t)}))},t.prototype.checkForPlusAndSelect=function(){if("graphite"===this.target.querytype){var e=this.queryModel.getGraphiteSegmentPath();e&&"."!==e||this.queryModel.addSelectMetricSegment()}this.queryModel.addPlusSegment()},t.prototype.removeSegments=function(e){var t="graphite"===this.target.querytype;this[t?"gSegments":"segments"]=this[t?"gSegments":"segments"].splice(0,e),this.queryModel.removeSegments(e)},t.prototype.emptySegments=function(){this["graphite"===this.target.querytype?"gSegments":"segments"]=[],this.queryModel.emptySegments()},t.prototype.getCAQLFindFunction=function(){if("Heatmap"===this.target.paneltype||void 0!==this.target.hist_transform)return"find:histogram";var e="find",t=this.target.egressoverride;return"average"!==t&&"automatic"!==t&&(e+=":"+(t=this.caqlFindFunctions[t])),e},t.prototype.getCAQLHistogramTransform=function(){if(void 0!==this.target.hist_transform){var e=this.target.egressoverride;return"automatic"===e&&(e="statsd_counter"===this.target.hist_transform?"counter":"average"),this.histogramTransforms[e]}return""},t.prototype.getCAQLLabel=function(){var e=this.target.labeltype,t=this.target.metriclabel;if("default"!==e){if("custom"===e&&""!==t)return" | label('"+(t=t.replace(/'/g,'"'))+"')";if("name"===e)return" | label('%n')";if("cardinality"===e)return" | label('%n | %t-{*}')"}return" | label('%cn')"},t.prototype.buildCAQLFromStandard=function(e){void 0===e&&(e="");var t="*",r=[];this.queryModel.segments.forEach((function(e){switch(e.type){case A.MetricName:t=e.value;break;case A.TagPair:r.push(":");break;case A.TagSep:r.push(",");break;case A.TagEnd:r.push(")");break;case A.TagCat:case A.TagVal:case A.TagOp:r.push(e.value)}}));var n=r.join(""),a=this.getCAQLFindFunction()+"('"+e+t+"'";return n?a+=", '"+n+"')"+this.getCAQLHistogramTransform()+this.getCAQLLabel():("*"===t&&(a+=", limit=10"),a+=")"+this.getCAQLHistogramTransform()+this.getCAQLLabel()),a},t.prototype.buildCAQLFromGraphite=function(){return this.convertGraphiteToStandard(),this.buildSegments(),this.buildCAQLFromStandard("[graphite]")},t.prototype.convertStandardToGraphite=function(){this.queryModel.convertStandardToGraphite(),this.checkForPlusAndSelect(),this.buildSegments(),this.buildGraphiteQuery()},t.prototype.convertGraphiteToStandard=function(){this.queryModel.convertGraphiteToStandard(),this.checkForPlusAndSelect(),this.buildSegments(),this.buildStandardQuery()},t.prototype.buildGraphiteQuery=function(){this.target.query=this.target.queryDisplay=this.queryModel.getGraphiteSegmentPath().replace(/\.select\smetric.$/,"").replace(/\.$/,"").replace(/^select\smetric$/,"");var e=[];this.queryModel.gSegments.forEach((function(t){switch(t.type){case A.TagPair:e.push(":");break;case A.TagSep:e.push(",");break;case A.TagEnd:e.push(")");break;case A.TagCat:case A.TagVal:case A.TagOp:e.push(t.value)}})),this.target.tagFilter=e.join("")},t.prototype.buildStandardQuery=function(){var e,t,r=this.segments.slice(),n=r.shift().value,a="and(__name:"+P(A.MetricName,n),o=!1;try{for(var s=i(r),u=s.next();!u.done;u=s.next()){var l=u.value,c=l._type;c!==A.TagPlus&&(o||c===A.TagEnd||c===A.TagSep||(a+=","),o=c===A.TagOp||c===A.TagPair||c===A.TagCat||c===A.TagSep,a+=P(c,l.value))}}catch(t){e={error:t}}finally{try{u&&!u.done&&(t=s.return)&&t.call(s)}finally{if(e)throw e.error}}a+=")",this.target.query=this.target.queryDisplay=a},t.prototype.buildQueries=function(){this.queryModel.error||("graphite"===this.target.querytype?this.buildGraphiteQuery():"basic"===this.target.querytype&&this.buildStandardQuery(),this.queryModel.renderQueries(this.panelCtrl.panel.targets))},t.templateUrl="partials/query.editor.html",t}(Z.QueryCtrl),te=function(){function e(e){this.current.jsonData.irondbType=this.current.jsonData.irondbType||"hosted",this.current.jsonData.resultsLimitDefault="100",this.current.jsonData.resultsLimit=this.current.jsonData.resultsLimit||this.current.jsonData.resultsLimitDefault,this.current.jsonData.caqlMinPeriod=this.current.jsonData.caqlMinPeriod||"",this.current.jsonData.truncateNow=l.a.defaultTo(this.current.jsonData.truncateNow,!1),this.current.jsonData.minTruncationDefault=30,this.current.jsonData.minTruncation=this.current.jsonData.minTruncation||this.current.jsonData.minTruncationDefault,this.current.jsonData.useCaching=l.a.defaultTo(this.current.jsonData.useCaching,!0),this.current.jsonData.activityTracking=l.a.defaultTo(this.current.jsonData.activityTracking,!0),this.current.jsonData.allowGraphite=l.a.defaultTo(this.current.jsonData.allowGraphite,!1),this.current.jsonData.queryPrefixDefault="",this.current.jsonData.queryPrefix=this.current.jsonData.queryPrefix||this.current.jsonData.queryPrefixDefault}return e.$inject=["$scope"],e.prototype.resultsLimitKeyUp=function(e){var t=this,r=e.currentTarget;13===e.keyCode&&setTimeout((function(){t.current.jsonData.resultsLimit=r.value,t.updateResultsLimitValue(e)}),0)},e.prototype.updateResultsLimitValue=function(e){var t=e.currentTarget,r=(this.current.jsonData.resultsLimit||"").trim(),n="-1"===r||"none"===r||!/\D/.test(r);t.value=this.current.jsonData.resultsLimit=r&&n?r:this.current.jsonData.resultsLimitDefault},e.prototype.caqlMinPeriodKeyUp=function(e){var t=this,r=e.currentTarget;13===e.keyCode&&setTimeout((function(){t.current.jsonData.caqlMinPeriod=r.value,t.updateCaqlMinPeriodValue(e)}),0)},e.prototype.updateCaqlMinPeriodValue=function(e){var t=e.currentTarget,r=(this.current.jsonData.caqlMinPeriod||"").replace(/[^\d,smhd]/g,"");t.value=this.current.jsonData.caqlMinPeriod=r},e.prototype.minTruncationKeyUp=function(e){var t=this,r=e.currentTarget;13===e.keyCode&&setTimeout((function(){t.current.jsonData.minTruncation=r.value,t.updateMinTruncationValue(e)}),0)},e.prototype.updateMinTruncationValue=function(e){var t=e.currentTarget,r=(this.current.jsonData.minTruncation||"").trim();r&&!/\D/.test(r)?t.value=this.current.jsonData.minTruncation=r:t.value=this.current.jsonData.minTruncation=this.current.jsonData.minTruncationDefault},e.prototype.queryPrefixKeyUp=function(e){var t=this,r=e.currentTarget;13===e.keyCode&&setTimeout((function(){t.current.jsonData.queryPrefix=r.value,t.updateQueryPrefixValue(e)}),0)},e.prototype.updateQueryPrefixValue=function(e){var t=e.currentTarget,r=(this.current.jsonData.queryPrefix||"").trim();r&&!/\.$/.test(r)&&(t.value=this.current.jsonData.queryPrefix=r+".")},e.templateUrl="partials/config.html",e}(),re=function(){function e(){this.annotationQueryTypeOptions=[{value:"alerts",text:"Alerts"}],this.annotationFilterApplyOptions=[{value:"all",text:"ALL"},{value:"any",text:"ANY"}],this.annotation.alertId=this.annotation.alertId||"",this.annotation.annotationQueryText=this.annotation.annotationQueryText||"",this.annotation.annotationQueryType=this.annotation.annotationQueryType||"alerts",this.annotation.annotationFilterApply=this.annotation.annotationFilterApply||"all",this.annotation.annotationFilterText=this.annotation.annotationFilterText||""}return e.templateUrl="partials/annotation.editor.html",e}(),ne=r(2),ae=r.n(ne),ie=r(21),oe=[{value:"metric names",label:"Metric Names"},{value:"tag categories",label:"Tag Categories"},{value:"tag values",label:"Tag Values"},{value:"graphite style",label:"Graphite-Style Metric Names"}],se=[{value:100,label:"100"},{value:500,label:"500"},{value:1e3,label:"1000"},{value:2e3,label:"2000"},{value:5e3,label:"5000"}],ue=function(e){function t(t){var r=e.call(this,t)||this,n={queryType:oe[0].value,metricFindQuery:"",tagCategory:"",resultsLimit:se[0].value},a=Object.assign({},n,t.query);r.query=a;var i=oe.find((function(e){return e.value===a.queryType}))||(a.tagCategory?oe[2]:oe[0]),o=se.find((function(e){return e.value===a.resultsLimit}))||se[0];return r.state={queryTypeOption:i,metricFindQuery:a.metricFindQuery||"",tagCategory:a.tagCategory||"",resultsLimitOption:o},r}return a(t,e),t.prototype.render=function(){var e=this,t=this.props,r=t.query,n=t.onChange,a=this.state,i=a.queryTypeOption,o=a.metricFindQuery,s=a.tagCategory,u=a.resultsLimitOption,l="metric names"===this.query.queryType||!this.query.queryType&&!this.query.tagCategory,c="tag categories"===this.query.queryType,p="tag values"===this.query.queryType||!this.query.queryType&&this.query.tagCategory,f="graphite style"===this.query.queryType,h=this.query.resultsLimit>1e3,d=function(){var t=Object.assign({},e.query);n(t,"tag values"===e.query.queryType?e.query.metricFindQuery+" ("+e.query.queryType+" of '"+e.query.tagCategory+"')":e.query.metricFindQuery+" ("+e.query.queryType+")")};!r&&this.query.metricFindQuery&&d();var g={width:"364px"};return ae.a.createElement("div",null,ae.a.createElement("div",{className:"gf-form",style:g},ae.a.createElement("span",{className:"gf-form-label width-10"},"Query Type"),ae.a.createElement(ie.Select,{"aria-label":"Select query type",isSearchable:!1,options:oe,onChange:function(t){e.query.queryType=t.value,e.setState({queryTypeOption:t}),d()},value:i})),ae.a.createElement("div",{className:"gf-form"},l&&ae.a.createElement("span",{className:"gf-form-label width-10"},"Metric Search Query"),(c||p)&&ae.a.createElement("span",{className:"gf-form-label width-10"},"Metric Search Filter"),f&&ae.a.createElement("span",{className:"gf-form-label width-10"},"Metric Name Search"),ae.a.createElement("input",{name:"metricFindQuery",className:"gf-form-input",onChange:function(t){e.query.metricFindQuery=t.currentTarget.value,e.setState({metricFindQuery:e.query.metricFindQuery})},onBlur:d,value:o})),p&&ae.a.createElement("div",{className:"gf-form"},ae.a.createElement("span",{className:"gf-form-label width-10"},"Tag Category"),ae.a.createElement("input",{name:"tagCategory",className:"gf-form-input",onChange:function(t){e.query.tagCategory=t.currentTarget.value,e.setState({tagCategory:e.query.tagCategory})},onBlur:d,value:s})),ae.a.createElement("div",{className:"gf-form",style:g},ae.a.createElement("span",{className:"gf-form-label width-10"},"Results Limit"),ae.a.createElement(ie.Select,{"aria-label":"Select results limit",className:"width-15",isSearchable:!1,options:se,onChange:function(t){e.query.resultsLimit=t.value,e.setState({resultsLimitOption:t}),d()},value:u}),h&&ae.a.createElement("div",{style:{position:"absolute",top:"0.25rem",left:"375px",width:"300px",fontSize:"90%",lineHeight:"1",opacity:"0.5"}},"Large variable lists can cause performance problems on dashboards. Use with care.")))},t}(ne.PureComponent);r.d(t,"Datasource",(function(){return z})),r.d(t,"QueryCtrl",(function(){return ee})),r.d(t,"ConfigCtrl",(function(){return te})),r.d(t,"AnnotationsQueryCtrl",(function(){return re})),r.d(t,"VariableQueryEditor",(function(){return ue}))}])}));
//# sourceMappingURL=module.js.map